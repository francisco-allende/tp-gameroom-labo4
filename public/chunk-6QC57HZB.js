import{a as O,c as P,e as W,j as B,k as H}from"./chunk-LBDZZKSK.js";import{a as A,b as $}from"./chunk-DIKXK77E.js";import"./chunk-YAEPHWJT.js";import{a as I,c as T,d as k,e as d,f as x}from"./chunk-CRGP55WA.js";import"./chunk-HZOQ3BKB.js";import"./chunk-RF5HGZMQ.js";import{Ab as D,Bb as E,Cb as F,Eb as U,Na as l,Oa as S,V as g,_ as C,da as M,e as u,hb as y,ib as v,jb as _,kb as i,lb as s,mb as j,sb as h,tb as w,wb as m,x as f,zb as b}from"./chunk-DR62P47H.js";var N=(()=>{let n=class n{constructor(t){this.firestore=t}addMsjToSalaChat(t,e){return u(this,null,function*(){try{let r=d(this.firestore,"sala-chat");k(r,{sender:t,content:e,fecha:new Date})}catch(r){console.error("Error en el add a los msjs:",r)}})}getAllMensajesSalaChats(){return u(this,null,function*(){let t=d(this.firestore,"sala-chat");try{let e=yield x(t),r=[];return e.forEach(c=>{r.push(c.data())}),r}catch(e){throw console.error("Error obteniendo los mensajes:",e),e}})}getAllMensajesSalaChat(){let t=d(this.firestore,"sala-chat");return T(t).pipe(f(e=>e))}};n.\u0275fac=function(e){return new(e||n)(C(I))},n.\u0275prov=g({token:n,factory:n.\u0275fac,providedIn:"root"});let a=n;return a})();function Y(a,n){if(a&1&&(i(0,"li",6),m(1),s()),a&2){let p=n.$implicit,t=w();l(),b(" ",p.sender.email,": ",p.content," ",t.formatDate(p.fecha)," ")}}var te=(()=>{let n=class n{constructor(t){this.chatService=t,this.newMessage="",this.messages=[]}ngOnInit(){this.chatService.getAllMensajesSalaChat().subscribe(t=>{this.messages=t})}sendMessage(){this.chatService.addMsjToSalaChat(this.currentUser,this.newMessage),this.newMessage=""}formatDate(t){let e=t.toDate(),r=("0"+e.getDate()).slice(-2),c=("0"+(e.getMonth()+1)).slice(-2),o=e.getFullYear(),q=("0"+e.getHours()).slice(-2),L=("0"+e.getMinutes()).slice(-2);return`${r}/${c}/${o} ${q}:${L}`}handleSetUser(t){this.currentUser=t}};n.\u0275fac=function(e){return new(e||n)(S(N))},n.\u0275cmp=M({type:n,selectors:[["app-sala-chat"]],inputs:{currentUser:"currentUser"},standalone:!0,features:[U],decls:15,vars:1,consts:[[3,"sendCurrentUser"],[1,"main"],[1,"container","text-center","justify-content-center","align-items-center"],[1,"title"],[1,"container","screen"],[1,"list-group"],[1,"list-group-item"],[1,"input-group","mt-3"],["type","text","placeholder","Escribe tu mensaje...",1,"form-control",3,"ngModelChange","ngModel"],[1,"btn","btn-primary",3,"click"]],template:function(e,r){e&1&&(i(0,"app-header",0),h("sendCurrentUser",function(o){return r.handleSetUser(o)}),s(),i(1,"div",1)(2,"div",2)(3,"div",3)(4,"h1"),m(5,"Sala de chat"),s()(),i(6,"div",4)(7,"ul",5),v(8,Y,2,3,"li",6,y),s()(),i(10,"div",7)(11,"input",8),F("ngModelChange",function(o){return E(r.newMessage,o)||(r.newMessage=o),o}),s(),i(12,"button",9),h("click",function(){return r.sendMessage()}),m(13,"Enviar"),s()()()(),j(14,"app-footer")),e&2&&(l(8),_(r.messages),l(3),D("ngModel",r.newMessage))},dependencies:[A,$,B,O,P,W,H],styles:[".main[_ngcontent-%COMP%]{height:100vh;background-color:#91e4f1}.screen[_ngcontent-%COMP%]{background-color:#fff;color:#000}"]});let a=n;return a})();export{te as SalaChatComponent};
