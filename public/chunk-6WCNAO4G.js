import{$ as A,$a as ui,A as yp,Aa as pn,Ab as vn,B as Ru,Ba as sr,Ca as Sp,D as _t,Da as bp,E as tr,Ea as Cp,F as ln,Fa as Rp,Fb as li,G as Pu,Ga as Pp,H as nr,Ha as Np,Hb as hi,I as vp,Ia as Op,Ib as Bp,J as hn,Ja as Et,Jb as Js,K as Vt,Ka as ju,Kb as Hu,L as Nu,Lb as Ku,M as _p,Ma as kp,Mb as Ut,N as Ou,Na as or,Nb as Qu,O as ku,Oa as ue,Ob as di,P as Ge,Pa as we,Pb as $p,Q as wp,Qa as Mp,Qb as fi,R as ae,S as Y,Sa as Fp,T as Ep,Ta as xp,Ua as Qs,V as k,W as ke,Wa as Ys,X as Ip,Y as $,Ya as zu,Z as Mu,Za as Lp,_ as R,_a as Vp,a as w,aa as Ne,ab as ci,b as Q,ba as ii,bb as X,ca as si,cb as gn,d as xt,da as oi,db as Se,e as d,ea as Me,eb as ar,f as dp,fa as rr,g as Iu,ga as dn,gb as It,h as cn,i as Tu,ia as Tp,j as Du,ja as ir,k as _e,ka as wt,l as ze,la as Ks,lb as Je,m as fp,ma as Fu,mb as Tt,n as pp,na as xu,nb as mn,o as Lt,oa as Lu,ob as qu,p as Au,pa as Vu,pb as Gu,q as Su,qa as Fe,qb as Wu,r as bu,ra as Uu,s as Pe,sa as ai,sb as Up,t as N,ta as fn,tb as yn,u as ri,ua as Dp,ub as xe,v as gp,va as Bu,w as mp,wa as Ap,x as B,xa as rt,y as Cu,yb as Dt,z as qe,za as $u}from"./chunk-VUEWXBX5.js";var Wp=null;function ur(){return Wp}function Hp(t){Wp??=t}var Xs=class{};var he=new $(""),Kp=(()=>{let e=class e{historyGo(r){throw new Error("")}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=k({token:e,factory:()=>A(qw),providedIn:"platform"});let t=e;return t})();var qw=(()=>{let e=class e extends Kp{constructor(){super(),this._doc=A(he),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return ur().getBaseHref(this._doc)}onPopState(r){let i=ur().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",r,!1),()=>i.removeEventListener("popstate",r)}onHashChange(r){let i=ur().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",r,!1),()=>i.removeEventListener("hashchange",r)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(r){this._location.pathname=r}pushState(r,i,s){this._history.pushState(r,i,s)}replaceState(r,i,s){this._history.replaceState(r,i,s)}forward(){this._history.forward()}back(){this._history.back()}historyGo(r=0){this._history.go(r)}getState(){return this._history.state}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=k({token:e,factory:()=>new e,providedIn:"platform"});let t=e;return t})();function Qp(t,e){if(t.length==0)return e;if(e.length==0)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,n==2?t+e.substring(1):n==1?t+e:t+"/"+e}function jp(t){let e=t.match(/#|\?|$/),n=e&&e.index||t.length,r=n-(t[n-1]==="/"?1:0);return t.slice(0,r)+t.slice(n)}function _n(t){return t&&t[0]!=="?"?"?"+t:t}var lr=(()=>{let e=class e{historyGo(r){throw new Error("")}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=k({token:e,factory:()=>A(Yp),providedIn:"root"});let t=e;return t})(),Gw=new $(""),Yp=(()=>{let e=class e extends lr{constructor(r,i){super(),this._platformLocation=r,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??A(he).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}prepareExternalUrl(r){return Qp(this._baseHref,r)}path(r=!1){let i=this._platformLocation.pathname+_n(this._platformLocation.search),s=this._platformLocation.hash;return s&&r?`${i}${s}`:i}pushState(r,i,s,o){let a=this.prepareExternalUrl(s+_n(o));this._platformLocation.pushState(r,i,a)}replaceState(r,i,s,o){let a=this.prepareExternalUrl(s+_n(o));this._platformLocation.replaceState(r,i,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(r=0){this._platformLocation.historyGo?.(r)}};e.\u0275fac=function(i){return new(i||e)(R(Kp),R(Gw,8))},e.\u0275prov=k({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var pi=(()=>{let e=class e{constructor(r){this._subject=new fn,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=r;let i=this._locationStrategy.getBaseHref();this._basePath=Kw(jp(zp(i))),this._locationStrategy.onPopState(s=>{this._subject.emit({url:this.path(!0),pop:!0,state:s.state,type:s.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(r=!1){return this.normalize(this._locationStrategy.path(r))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(r,i=""){return this.path()==this.normalize(r+_n(i))}normalize(r){return e.stripTrailingSlash(Hw(this._basePath,zp(r)))}prepareExternalUrl(r){return r&&r[0]!=="/"&&(r="/"+r),this._locationStrategy.prepareExternalUrl(r)}go(r,i="",s=null){this._locationStrategy.pushState(s,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+_n(i)),s)}replaceState(r,i="",s=null){this._locationStrategy.replaceState(s,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+_n(i)),s)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(r=0){this._locationStrategy.historyGo?.(r)}onUrlChange(r){return this._urlChangeListeners.push(r),this._urlChangeSubscription??=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)}),()=>{let i=this._urlChangeListeners.indexOf(r);this._urlChangeListeners.splice(i,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(r="",i){this._urlChangeListeners.forEach(s=>s(r,i))}subscribe(r,i,s){return this._subject.subscribe({next:r,error:i,complete:s})}};e.normalizeQueryParams=_n,e.joinWithSlash=Qp,e.stripTrailingSlash=jp,e.\u0275fac=function(i){return new(i||e)(R(lr))},e.\u0275prov=k({token:e,factory:()=>Ww(),providedIn:"root"});let t=e;return t})();function Ww(){return new pi(R(lr))}function Hw(t,e){if(!t||!e.startsWith(t))return e;let n=e.substring(t.length);return n===""||["/",";","?","#"].includes(n[0])?n:e}function zp(t){return t.replace(/\/index.html$/,"")}function Kw(t){if(new RegExp("^(https?:)?//").test(t)){let[,n]=t.split(/\/\/[^\/]+/);return n}return t}function Zs(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let r=n.indexOf("="),[i,s]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}var Ju=(()=>{let e=class e{constructor(r,i){this._viewContainer=r,this._context=new Yu,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(r){this._context.$implicit=this._context.ngIf=r,this._updateView()}set ngIfThen(r){qp("ngIfThen",r),this._thenTemplateRef=r,this._thenViewRef=null,this._updateView()}set ngIfElse(r){qp("ngIfElse",r),this._elseTemplateRef=r,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(r,i){return!0}};e.\u0275fac=function(i){return new(i||e)(we(Ys),we(Mp))},e.\u0275dir=rr({type:e,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0});let t=e;return t})(),Yu=class{constructor(){this.$implicit=null,this.ngIf=null}};function qp(t,e){if(!!!(!e||e.createEmbeddedView))throw new Error(`${t} must be a TemplateRef, but received '${Ep(e)}'.`)}var Qw=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=Me({type:e}),e.\u0275inj=ke({});let t=e;return t})(),Jp="browser",Yw="server";function eo(t){return t===Yw}var cr=class{};var mi=class{},no=class{},wn=class t{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(n=>{let r=n.indexOf(":");if(r>0){let i=n.slice(0,r),s=i.toLowerCase(),o=n.slice(r+1).trim();this.maybeSetNormalizedName(i,s),this.headers.has(s)?this.headers.get(s).push(o):this.headers.set(s,[o])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((n,r)=>{this.setHeaderEntries(r,n)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([n,r])=>{this.setHeaderEntries(n,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let n=this.headers.get(e.toLowerCase());return n&&n.length>0?n[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,n){return this.clone({name:e,value:n,op:"a"})}set(e,n){return this.clone({name:e,value:n,op:"s"})}delete(e,n){return this.clone({name:e,value:n,op:"d"})}maybeSetNormalizedName(e,n){this.normalizedNames.has(n)||this.normalizedNames.set(n,e)}init(){this.lazyInit&&(this.lazyInit instanceof t?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(n=>{this.headers.set(n,e.headers.get(n)),this.normalizedNames.set(n,e.normalizedNames.get(n))})}clone(e){let n=new t;return n.lazyInit=this.lazyInit&&this.lazyInit instanceof t?this.lazyInit:this,n.lazyUpdate=(this.lazyUpdate||[]).concat([e]),n}applyUpdate(e){let n=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(e.name,n);let i=(e.op==="a"?this.headers.get(n):void 0)||[];i.push(...r),this.headers.set(n,i);break;case"d":let s=e.value;if(!s)this.headers.delete(n),this.normalizedNames.delete(n);else{let o=this.headers.get(n);if(!o)return;o=o.filter(a=>s.indexOf(a)===-1),o.length===0?(this.headers.delete(n),this.normalizedNames.delete(n)):this.headers.set(n,o)}break}}setHeaderEntries(e,n){let r=(Array.isArray(n)?n:[n]).map(s=>s.toString()),i=e.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(e,i)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(n=>e(this.normalizedNames.get(n),this.headers.get(n)))}};var Zu=class{encodeKey(e){return Zp(e)}encodeValue(e){return Zp(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}};function Zw(t,e){let n=new Map;return t.length>0&&t.replace(/^\?/,"").split("&").forEach(i=>{let s=i.indexOf("="),[o,a]=s==-1?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,s)),e.decodeValue(i.slice(s+1))],u=n.get(o)||[];u.push(a),n.set(o,u)}),n}var eE=/%(\d[a-f0-9])/gi,tE={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function Zp(t){return encodeURIComponent(t).replace(eE,(e,n)=>tE[n]??e)}function to(t){return`${t}`}var $t=class t{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new Zu,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=Zw(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(n=>{let r=e.fromObject[n],i=Array.isArray(r)?r.map(to):[to(r)];this.map.set(n,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();let n=this.map.get(e);return n?n[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,n){return this.clone({param:e,value:n,op:"a"})}appendAll(e){let n=[];return Object.keys(e).forEach(r=>{let i=e[r];Array.isArray(i)?i.forEach(s=>{n.push({param:r,value:s,op:"a"})}):n.push({param:r,value:i,op:"a"})}),this.clone(n)}set(e,n){return this.clone({param:e,value:n,op:"s"})}delete(e,n){return this.clone({param:e,value:n,op:"d"})}toString(){return this.init(),this.keys().map(e=>{let n=this.encoder.encodeKey(e);return this.map.get(e).map(r=>n+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>e!=="").join("&")}clone(e){let n=new t({encoder:this.encoder});return n.cloneFrom=this.cloneFrom||this,n.updates=(this.updates||[]).concat(e),n}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":let n=(e.op==="a"?this.map.get(e.param):void 0)||[];n.push(to(e.value)),this.map.set(e.param,n);break;case"d":if(e.value!==void 0){let r=this.map.get(e.param)||[],i=r.indexOf(to(e.value));i!==-1&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}else{this.map.delete(e.param);break}}}),this.cloneFrom=this.updates=null)}};var ec=class{constructor(){this.map=new Map}set(e,n){return this.map.set(e,n),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}};function nE(t){switch(t){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function eg(t){return typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer}function tg(t){return typeof Blob<"u"&&t instanceof Blob}function ng(t){return typeof FormData<"u"&&t instanceof FormData}function rE(t){return typeof URLSearchParams<"u"&&t instanceof URLSearchParams}var gi=class t{constructor(e,n,r,i){this.url=n,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase();let s;if(nE(this.method)||i?(this.body=r!==void 0?r:null,s=i):s=r,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params),this.transferCache=s.transferCache),this.headers??=new wn,this.context??=new ec,!this.params)this.params=new $t,this.urlWithParams=n;else{let o=this.params.toString();if(o.length===0)this.urlWithParams=n;else{let a=n.indexOf("?"),u=a===-1?"?":a<n.length-1?"&":"";this.urlWithParams=n+u+o}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||eg(this.body)||tg(this.body)||ng(this.body)||rE(this.body)?this.body:this.body instanceof $t?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||ng(this.body)?null:tg(this.body)?this.body.type||null:eg(this.body)?null:typeof this.body=="string"?"text/plain":this.body instanceof $t?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?"application/json":null}clone(e={}){let n=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,s=e.transferCache??this.transferCache,o=e.body!==void 0?e.body:this.body,a=e.withCredentials??this.withCredentials,u=e.reportProgress??this.reportProgress,c=e.headers||this.headers,l=e.params||this.params,h=e.context??this.context;return e.setHeaders!==void 0&&(c=Object.keys(e.setHeaders).reduce((f,p)=>f.set(p,e.setHeaders[p]),c)),e.setParams&&(l=Object.keys(e.setParams).reduce((f,p)=>f.set(p,e.setParams[p]),l)),new t(n,r,o,{params:l,headers:c,context:h,reportProgress:u,responseType:i,withCredentials:a,transferCache:s})}},hr=function(t){return t[t.Sent=0]="Sent",t[t.UploadProgress=1]="UploadProgress",t[t.ResponseHeader=2]="ResponseHeader",t[t.DownloadProgress=3]="DownloadProgress",t[t.Response=4]="Response",t[t.User=5]="User",t}(hr||{}),yi=class{constructor(e,n=so.Ok,r="OK"){this.headers=e.headers||new wn,this.status=e.status!==void 0?e.status:n,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}},tc=class t extends yi{constructor(e={}){super(e),this.type=hr.ResponseHeader}clone(e={}){return new t({headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},ro=class t extends yi{constructor(e={}){super(e),this.type=hr.Response,this.body=e.body!==void 0?e.body:null}clone(e={}){return new t({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},io=class extends yi{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${e.url||"(unknown url)"}`:this.message=`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}},so=function(t){return t[t.Continue=100]="Continue",t[t.SwitchingProtocols=101]="SwitchingProtocols",t[t.Processing=102]="Processing",t[t.EarlyHints=103]="EarlyHints",t[t.Ok=200]="Ok",t[t.Created=201]="Created",t[t.Accepted=202]="Accepted",t[t.NonAuthoritativeInformation=203]="NonAuthoritativeInformation",t[t.NoContent=204]="NoContent",t[t.ResetContent=205]="ResetContent",t[t.PartialContent=206]="PartialContent",t[t.MultiStatus=207]="MultiStatus",t[t.AlreadyReported=208]="AlreadyReported",t[t.ImUsed=226]="ImUsed",t[t.MultipleChoices=300]="MultipleChoices",t[t.MovedPermanently=301]="MovedPermanently",t[t.Found=302]="Found",t[t.SeeOther=303]="SeeOther",t[t.NotModified=304]="NotModified",t[t.UseProxy=305]="UseProxy",t[t.Unused=306]="Unused",t[t.TemporaryRedirect=307]="TemporaryRedirect",t[t.PermanentRedirect=308]="PermanentRedirect",t[t.BadRequest=400]="BadRequest",t[t.Unauthorized=401]="Unauthorized",t[t.PaymentRequired=402]="PaymentRequired",t[t.Forbidden=403]="Forbidden",t[t.NotFound=404]="NotFound",t[t.MethodNotAllowed=405]="MethodNotAllowed",t[t.NotAcceptable=406]="NotAcceptable",t[t.ProxyAuthenticationRequired=407]="ProxyAuthenticationRequired",t[t.RequestTimeout=408]="RequestTimeout",t[t.Conflict=409]="Conflict",t[t.Gone=410]="Gone",t[t.LengthRequired=411]="LengthRequired",t[t.PreconditionFailed=412]="PreconditionFailed",t[t.PayloadTooLarge=413]="PayloadTooLarge",t[t.UriTooLong=414]="UriTooLong",t[t.UnsupportedMediaType=415]="UnsupportedMediaType",t[t.RangeNotSatisfiable=416]="RangeNotSatisfiable",t[t.ExpectationFailed=417]="ExpectationFailed",t[t.ImATeapot=418]="ImATeapot",t[t.MisdirectedRequest=421]="MisdirectedRequest",t[t.UnprocessableEntity=422]="UnprocessableEntity",t[t.Locked=423]="Locked",t[t.FailedDependency=424]="FailedDependency",t[t.TooEarly=425]="TooEarly",t[t.UpgradeRequired=426]="UpgradeRequired",t[t.PreconditionRequired=428]="PreconditionRequired",t[t.TooManyRequests=429]="TooManyRequests",t[t.RequestHeaderFieldsTooLarge=431]="RequestHeaderFieldsTooLarge",t[t.UnavailableForLegalReasons=451]="UnavailableForLegalReasons",t[t.InternalServerError=500]="InternalServerError",t[t.NotImplemented=501]="NotImplemented",t[t.BadGateway=502]="BadGateway",t[t.ServiceUnavailable=503]="ServiceUnavailable",t[t.GatewayTimeout=504]="GatewayTimeout",t[t.HttpVersionNotSupported=505]="HttpVersionNotSupported",t[t.VariantAlsoNegotiates=506]="VariantAlsoNegotiates",t[t.InsufficientStorage=507]="InsufficientStorage",t[t.LoopDetected=508]="LoopDetected",t[t.NotExtended=510]="NotExtended",t[t.NetworkAuthenticationRequired=511]="NetworkAuthenticationRequired",t}(so||{});function Xu(t,e){return{body:e,headers:t.headers,context:t.context,observe:t.observe,params:t.params,reportProgress:t.reportProgress,responseType:t.responseType,withCredentials:t.withCredentials,transferCache:t.transferCache}}var iE=(()=>{let e=class e{constructor(r){this.handler=r}request(r,i,s={}){let o;if(r instanceof gi)o=r;else{let c;s.headers instanceof wn?c=s.headers:c=new wn(s.headers);let l;s.params&&(s.params instanceof $t?l=s.params:l=new $t({fromObject:s.params})),o=new gi(r,i,s.body!==void 0?s.body:null,{headers:c,context:s.context,params:l,reportProgress:s.reportProgress,responseType:s.responseType||"json",withCredentials:s.withCredentials,transferCache:s.transferCache})}let a=N(o).pipe(ln(c=>this.handler.handle(c)));if(r instanceof gi||s.observe==="events")return a;let u=a.pipe(_t(c=>c instanceof ro));switch(s.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return u.pipe(B(c=>{if(c.body!==null&&!(c.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return c.body}));case"blob":return u.pipe(B(c=>{if(c.body!==null&&!(c.body instanceof Blob))throw new Error("Response is not a Blob.");return c.body}));case"text":return u.pipe(B(c=>{if(c.body!==null&&typeof c.body!="string")throw new Error("Response is not a string.");return c.body}));case"json":default:return u.pipe(B(c=>c.body))}case"response":return u;default:throw new Error(`Unreachable: unhandled observe type ${s.observe}}`)}}delete(r,i={}){return this.request("DELETE",r,i)}get(r,i={}){return this.request("GET",r,i)}head(r,i={}){return this.request("HEAD",r,i)}jsonp(r,i){return this.request("JSONP",r,{params:new $t().append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(r,i={}){return this.request("OPTIONS",r,i)}patch(r,i,s={}){return this.request("PATCH",r,Xu(s,i))}post(r,i,s={}){return this.request("POST",r,Xu(s,i))}put(r,i,s={}){return this.request("PUT",r,Xu(s,i))}};e.\u0275fac=function(i){return new(i||e)(R(mi))},e.\u0275prov=k({token:e,factory:e.\u0275fac});let t=e;return t})();function og(t,e){return e(t)}function sE(t,e){return(n,r)=>e.intercept(n,{handle:i=>t(i,r)})}function oE(t,e,n){return(r,i)=>wt(n,()=>e(r,s=>t(s,i)))}var aE=new $(""),nc=new $(""),uE=new $(""),cE=new $("");function lE(){let t=null;return(e,n)=>{t===null&&(t=(A(aE,{optional:!0})??[]).reduceRight(sE,og));let r=A(ui),i=r.add();return t(e,n).pipe(hn(()=>r.remove(i)))}}var rg=(()=>{let e=class e extends mi{constructor(r,i){super(),this.backend=r,this.injector=i,this.chain=null,this.pendingTasks=A(ui);let s=A(cE,{optional:!0});this.backend=s??r}handle(r){if(this.chain===null){let s=Array.from(new Set([...this.injector.get(nc),...this.injector.get(uE,[])]));this.chain=s.reduceRight((o,a)=>oE(o,a,this.injector),og)}let i=this.pendingTasks.add();return this.chain(r,s=>this.backend.handle(s)).pipe(hn(()=>this.pendingTasks.remove(i)))}};e.\u0275fac=function(i){return new(i||e)(R(no),R(ir))},e.\u0275prov=k({token:e,factory:e.\u0275fac});let t=e;return t})();var hE=/^\)\]\}',?\n/;function dE(t){return"responseURL"in t&&t.responseURL?t.responseURL:/^X-Request-URL:/m.test(t.getAllResponseHeaders())?t.getResponseHeader("X-Request-URL"):null}var ig=(()=>{let e=class e{constructor(r){this.xhrFactory=r}handle(r){if(r.method==="JSONP")throw new Y(-2800,!1);let i=this.xhrFactory;return(i.\u0275loadImpl?Pe(i.\u0275loadImpl()):N(null)).pipe(Ge(()=>new cn(o=>{let a=i.build();if(a.open(r.method,r.urlWithParams),r.withCredentials&&(a.withCredentials=!0),r.headers.forEach((m,T)=>a.setRequestHeader(m,T.join(","))),r.headers.has("Accept")||a.setRequestHeader("Accept","application/json, text/plain, */*"),!r.headers.has("Content-Type")){let m=r.detectContentTypeHeader();m!==null&&a.setRequestHeader("Content-Type",m)}if(r.responseType){let m=r.responseType.toLowerCase();a.responseType=m!=="json"?m:"text"}let u=r.serializeBody(),c=null,l=()=>{if(c!==null)return c;let m=a.statusText||"OK",T=new wn(a.getAllResponseHeaders()),U=dE(a)||r.url;return c=new tc({headers:T,status:a.status,statusText:m,url:U}),c},h=()=>{let{headers:m,status:T,statusText:U,url:K}=l(),j=null;T!==so.NoContent&&(j=typeof a.response>"u"?a.responseText:a.response),T===0&&(T=j?so.Ok:0);let Re=T>=200&&T<300;if(r.responseType==="json"&&typeof j=="string"){let ne=j;j=j.replace(hE,"");try{j=j!==""?JSON.parse(j):null}catch(Ye){j=ne,Re&&(Re=!1,j={error:Ye,text:j})}}Re?(o.next(new ro({body:j,headers:m,status:T,statusText:U,url:K||void 0})),o.complete()):o.error(new io({error:j,headers:m,status:T,statusText:U,url:K||void 0}))},f=m=>{let{url:T}=l(),U=new io({error:m,status:a.status||0,statusText:a.statusText||"Unknown Error",url:T||void 0});o.error(U)},p=!1,E=m=>{p||(o.next(l()),p=!0);let T={type:hr.DownloadProgress,loaded:m.loaded};m.lengthComputable&&(T.total=m.total),r.responseType==="text"&&a.responseText&&(T.partialText=a.responseText),o.next(T)},D=m=>{let T={type:hr.UploadProgress,loaded:m.loaded};m.lengthComputable&&(T.total=m.total),o.next(T)};return a.addEventListener("load",h),a.addEventListener("error",f),a.addEventListener("timeout",f),a.addEventListener("abort",f),r.reportProgress&&(a.addEventListener("progress",E),u!==null&&a.upload&&a.upload.addEventListener("progress",D)),a.send(u),o.next({type:hr.Sent}),()=>{a.removeEventListener("error",f),a.removeEventListener("abort",f),a.removeEventListener("load",h),a.removeEventListener("timeout",f),r.reportProgress&&(a.removeEventListener("progress",E),u!==null&&a.upload&&a.upload.removeEventListener("progress",D)),a.readyState!==a.DONE&&a.abort()}})))}};e.\u0275fac=function(i){return new(i||e)(R(cr))},e.\u0275prov=k({token:e,factory:e.\u0275fac});let t=e;return t})(),ag=new $(""),fE="XSRF-TOKEN",pE=new $("",{providedIn:"root",factory:()=>fE}),gE="X-XSRF-TOKEN",mE=new $("",{providedIn:"root",factory:()=>gE}),oo=class{},yE=(()=>{let e=class e{constructor(r,i,s){this.doc=r,this.platform=i,this.cookieName=s,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if(this.platform==="server")return null;let r=this.doc.cookie||"";return r!==this.lastCookieString&&(this.parseCount++,this.lastToken=Zs(r,this.cookieName),this.lastCookieString=r),this.lastToken}};e.\u0275fac=function(i){return new(i||e)(R(he),R(rt),R(pE))},e.\u0275prov=k({token:e,factory:e.\u0275fac});let t=e;return t})();function vE(t,e){let n=t.url.toLowerCase();if(!A(ag)||t.method==="GET"||t.method==="HEAD"||n.startsWith("http://")||n.startsWith("https://"))return e(t);let r=A(oo).getToken(),i=A(mE);return r!=null&&!t.headers.has(i)&&(t=t.clone({headers:t.headers.set(i,r)})),e(t)}var ug=function(t){return t[t.Interceptors=0]="Interceptors",t[t.LegacyInterceptors=1]="LegacyInterceptors",t[t.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",t[t.NoXsrfProtection=3]="NoXsrfProtection",t[t.JsonpSupport=4]="JsonpSupport",t[t.RequestsMadeViaParent=5]="RequestsMadeViaParent",t[t.Fetch=6]="Fetch",t}(ug||{});function _E(t,e){return{\u0275kind:t,\u0275providers:e}}function wE(...t){let e=[iE,ig,rg,{provide:mi,useExisting:rg},{provide:no,useExisting:ig},{provide:nc,useValue:vE,multi:!0},{provide:ag,useValue:!0},{provide:oo,useClass:yE}];for(let n of t)e.push(...n.\u0275providers);return dn(e)}var sg=new $("");function EE(){return _E(ug.LegacyInterceptors,[{provide:sg,useFactory:lE},{provide:nc,useExisting:sg,multi:!0}])}var MP=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=Me({type:e}),e.\u0275inj=ke({providers:[wE(EE())]});let t=e;return t})();var sc=class extends Xs{constructor(){super(...arguments),this.supportsDOMEvents=!0}},oc=class t extends sc{static makeCurrent(){Hp(new t)}onAndCancel(e,n,r){return e.addEventListener(n,r),()=>{e.removeEventListener(n,r)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,n){return n=n||this.getDefaultDocument(),n.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return n==="window"?window:n==="document"?e:n==="body"?e.body:null}getBaseHref(e){let n=TE();return n==null?null:DE(n)}resetBaseElement(){vi=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Zs(document.cookie,e)}},vi=null;function TE(){return vi=vi||document.querySelector("base"),vi?vi.getAttribute("href"):null}function DE(t){return new URL(t,document.baseURI).pathname}var AE=(()=>{let e=class e{build(){return new XMLHttpRequest}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=k({token:e,factory:e.\u0275fac});let t=e;return t})(),ac=new $(""),dg=(()=>{let e=class e{constructor(r,i){this._zone=i,this._eventNameToPlugin=new Map,r.forEach(s=>{s.manager=this}),this._plugins=r.slice().reverse()}addEventListener(r,i,s){return this._findPluginFor(i).addEventListener(r,i,s)}getZone(){return this._zone}_findPluginFor(r){let i=this._eventNameToPlugin.get(r);if(i)return i;if(i=this._plugins.find(o=>o.supports(r)),!i)throw new Y(5101,!1);return this._eventNameToPlugin.set(r,i),i}};e.\u0275fac=function(i){return new(i||e)(R(ac),R(X))},e.\u0275prov=k({token:e,factory:e.\u0275fac});let t=e;return t})(),ao=class{constructor(e){this._doc=e}},rc="ng-app-id",fg=(()=>{let e=class e{constructor(r,i,s,o={}){this.doc=r,this.appId=i,this.nonce=s,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=eo(o),this.resetHostNodes()}addStyles(r){for(let i of r)this.changeUsageCount(i,1)===1&&this.onStyleAdded(i)}removeStyles(r){for(let i of r)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){let r=this.styleNodesInDOM;r&&(r.forEach(i=>i.remove()),r.clear());for(let i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(r){this.hostNodes.add(r);for(let i of this.getAllStyles())this.addStyleToHost(r,i)}removeHost(r){this.hostNodes.delete(r)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(r){for(let i of this.hostNodes)this.addStyleToHost(i,r)}onStyleRemoved(r){let i=this.styleRef;i.get(r)?.elements?.forEach(s=>s.remove()),i.delete(r)}collectServerRenderedStyles(){let r=this.doc.head?.querySelectorAll(`style[${rc}="${this.appId}"]`);if(r?.length){let i=new Map;return r.forEach(s=>{s.textContent!=null&&i.set(s.textContent,s)}),i}return null}changeUsageCount(r,i){let s=this.styleRef;if(s.has(r)){let o=s.get(r);return o.usage+=i,o.usage}return s.set(r,{usage:i,elements:[]}),i}getStyleElement(r,i){let s=this.styleNodesInDOM,o=s?.get(i);if(o?.parentNode===r)return s.delete(i),o.removeAttribute(rc),o;{let a=this.doc.createElement("style");return this.nonce&&a.setAttribute("nonce",this.nonce),a.textContent=i,this.platformIsServer&&a.setAttribute(rc,this.appId),r.appendChild(a),a}}addStyleToHost(r,i){let s=this.getStyleElement(r,i),o=this.styleRef,a=o.get(i)?.elements;a?a.push(s):o.set(i,{elements:[s],usage:1})}resetHostNodes(){let r=this.hostNodes;r.clear(),r.add(this.doc.head)}};e.\u0275fac=function(i){return new(i||e)(R(he),R(Bu),R($u,8),R(rt))},e.\u0275prov=k({token:e,factory:e.\u0275fac});let t=e;return t})(),ic={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},cc=/%COMP%/g,pg="%COMP%",SE=`_nghost-${pg}`,bE=`_ngcontent-${pg}`,CE=!0,RE=new $("",{providedIn:"root",factory:()=>CE});function PE(t){return bE.replace(cc,t)}function NE(t){return SE.replace(cc,t)}function gg(t,e){return e.map(n=>n.replace(cc,t))}var cg=(()=>{let e=class e{constructor(r,i,s,o,a,u,c,l=null){this.eventManager=r,this.sharedStylesHost=i,this.appId=s,this.removeStylesOnCompDestroy=o,this.doc=a,this.platformId=u,this.ngZone=c,this.nonce=l,this.rendererByCompId=new Map,this.platformIsServer=eo(u),this.defaultRenderer=new _i(r,a,c,this.platformIsServer)}createRenderer(r,i){if(!r||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===ii.ShadowDom&&(i=Q(w({},i),{encapsulation:ii.Emulated}));let s=this.getOrCreateRenderer(r,i);return s instanceof uo?s.applyToHost(r):s instanceof wi&&s.applyStyles(),s}getOrCreateRenderer(r,i){let s=this.rendererByCompId,o=s.get(i.id);if(!o){let a=this.doc,u=this.ngZone,c=this.eventManager,l=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,f=this.platformIsServer;switch(i.encapsulation){case ii.Emulated:o=new uo(c,l,i,this.appId,h,a,u,f);break;case ii.ShadowDom:return new uc(c,l,r,i,a,u,this.nonce,f);default:o=new wi(c,l,i,h,a,u,f);break}s.set(i.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}};e.\u0275fac=function(i){return new(i||e)(R(dg),R(fg),R(Bu),R(RE),R(he),R(rt),R(X),R($u))},e.\u0275prov=k({token:e,factory:e.\u0275fac});let t=e;return t})(),_i=class{constructor(e,n,r,i){this.eventManager=e,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,n){return n?this.doc.createElementNS(ic[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(lg(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(lg(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){e&&e.removeChild(n)}selectRootElement(e,n){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new Y(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;let s=ic[i];s?e.setAttributeNS(s,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){let i=ic[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(or.DashCase|or.Important)?e.style.setProperty(n,r,i&or.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&or.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e!=null&&(e[n]=r)}setValue(e,n){e.nodeValue=n}listen(e,n,r){if(typeof e=="string"&&(e=ur().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${n}`);return this.eventManager.addEventListener(e,n,this.decoratePreventDefault(r))}decoratePreventDefault(e){return n=>{if(n==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(n)):e(n))===!1&&n.preventDefault()}}};function lg(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var uc=class extends _i{constructor(e,n,r,i,s,o,a,u){super(e,s,o,u),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let c=gg(i.id,i.styles);for(let l of c){let h=document.createElement("style");a&&h.setAttribute("nonce",a),h.textContent=l,this.shadowRoot.appendChild(h)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(this.nodeOrShadowRoot(e),n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},wi=class extends _i{constructor(e,n,r,i,s,o,a,u){super(e,s,o,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i,this.styles=u?gg(u,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},uo=class extends wi{constructor(e,n,r,i,s,o,a,u){let c=i+"-"+r.id;super(e,n,r,s,o,a,u,c),this.contentAttr=PE(c),this.hostAttr=NE(c)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){let r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}},OE=(()=>{let e=class e extends ao{constructor(r){super(r)}supports(r){return!0}addEventListener(r,i,s){return r.addEventListener(i,s,!1),()=>this.removeEventListener(r,i,s)}removeEventListener(r,i,s){return r.removeEventListener(i,s)}};e.\u0275fac=function(i){return new(i||e)(R(he))},e.\u0275prov=k({token:e,factory:e.\u0275fac});let t=e;return t})(),hg=["alt","control","meta","shift"],kE={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},ME={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},FE=(()=>{let e=class e extends ao{constructor(r){super(r)}supports(r){return e.parseEventName(r)!=null}addEventListener(r,i,s){let o=e.parseEventName(i),a=e.eventCallback(o.fullKey,s,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>ur().onAndCancel(r,o.domEventName,a))}static parseEventName(r){let i=r.toLowerCase().split("."),s=i.shift();if(i.length===0||!(s==="keydown"||s==="keyup"))return null;let o=e._normalizeKey(i.pop()),a="",u=i.indexOf("code");if(u>-1&&(i.splice(u,1),a="code."),hg.forEach(l=>{let h=i.indexOf(l);h>-1&&(i.splice(h,1),a+=l+".")}),a+=o,i.length!=0||o.length===0)return null;let c={};return c.domEventName=s,c.fullKey=a,c}static matchEventFullKeyCode(r,i){let s=kE[r.key]||r.key,o="";return i.indexOf("code.")>-1&&(s=r.code,o="code."),s==null||!s?!1:(s=s.toLowerCase(),s===" "?s="space":s==="."&&(s="dot"),hg.forEach(a=>{if(a!==s){let u=ME[a];u(r)&&(o+=a+".")}}),o+=s,o===i)}static eventCallback(r,i,s){return o=>{e.matchEventFullKeyCode(o,r)&&s.runGuarded(()=>i(o))}}static _normalizeKey(r){return r==="esc"?"escape":r}};e.\u0275fac=function(i){return new(i||e)(R(he))},e.\u0275prov=k({token:e,factory:e.\u0275fac});let t=e;return t})();function eN(t,e){return $p(w({rootComponent:t},xE(e)))}function xE(t){return{appProviders:[...$E,...t?.providers??[]],platformProviders:BE}}function LE(){oc.makeCurrent()}function VE(){return new Uu}function UE(){return Dp(document),document}var BE=[{provide:rt,useValue:Jp},{provide:Ap,useValue:LE,multi:!0},{provide:he,useFactory:UE,deps:[]}];var $E=[{provide:Tp,useValue:"root"},{provide:Uu,useFactory:VE,deps:[]},{provide:ac,useClass:OE,multi:!0,deps:[he,X,rt]},{provide:ac,useClass:FE,multi:!0,deps:[he]},cg,fg,dg,{provide:xp,useExisting:cg},{provide:cr,useClass:AE,deps:[]},[]];var mg=(()=>{let e=class e{constructor(r){this._doc=r}getTitle(){return this._doc.title}setTitle(r){this._doc.title=r||""}};e.\u0275fac=function(i){return new(i||e)(R(he))},e.\u0275prov=k({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var lc=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=k({token:e,factory:function(i){let s=null;return i?s=new(i||e):s=R(jE),s},providedIn:"root"});let t=e;return t})(),jE=(()=>{let e=class e extends lc{constructor(r){super(),this._doc=r}sanitize(r,i){if(i==null)return null;switch(r){case Et.NONE:return i;case Et.HTML:return sr(i,"HTML")?pn(i):Op(this._doc,String(i)).toString();case Et.STYLE:return sr(i,"Style")?pn(i):i;case Et.SCRIPT:if(sr(i,"Script"))return pn(i);throw new Y(5200,!1);case Et.URL:return sr(i,"URL")?pn(i):Np(String(i));case Et.RESOURCE_URL:if(sr(i,"ResourceURL"))return pn(i);throw new Y(5201,!1);default:throw new Y(5202,!1)}}bypassSecurityTrustHtml(r){return Sp(r)}bypassSecurityTrustStyle(r){return bp(r)}bypassSecurityTrustScript(r){return Cp(r)}bypassSecurityTrustUrl(r){return Rp(r)}bypassSecurityTrustResourceUrl(r){return Pp(r)}};e.\u0275fac=function(i){return new(i||e)(R(he))},e.\u0275prov=k({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var F="primary",Fi=Symbol("RouteTitle"),gc=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function mr(t){return new gc(t)}function zE(t,e,n){let r=n.path.split("/");if(r.length>t.length||n.pathMatch==="full"&&(e.hasChildren()||r.length<t.length))return null;let i={};for(let s=0;s<r.length;s++){let o=r[s],a=t[s];if(o.startsWith(":"))i[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function qE(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!it(t[n],e[n]))return!1;return!0}function it(t,e){let n=t?mc(t):void 0,r=e?mc(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let s=0;s<n.length;s++)if(i=n[s],!Tg(t[i],e[i]))return!1;return!0}function mc(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function Tg(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;let n=[...t].sort(),r=[...e].sort();return n.every((i,s)=>r[s]===i)}else return t===e}function Dg(t){return t.length>0?t[t.length-1]:null}function Gt(t){return gp(t)?t:Hu(t)?Pe(Promise.resolve(t)):N(t)}var GE={exact:Sg,subset:bg},Ag={exact:WE,subset:HE,ignored:()=>!0};function vg(t,e,n){return GE[n.paths](t.root,e.root,n.matrixParams)&&Ag[n.queryParams](t.queryParams,e.queryParams)&&!(n.fragment==="exact"&&t.fragment!==e.fragment)}function WE(t,e){return it(t,e)}function Sg(t,e,n){if(!In(t.segments,e.segments)||!ho(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!t.children[r]||!Sg(t.children[r],e.children[r],n))return!1;return!0}function HE(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>Tg(t[n],e[n]))}function bg(t,e,n){return Cg(t,e,e.segments,n)}function Cg(t,e,n,r){if(t.segments.length>n.length){let i=t.segments.slice(0,n.length);return!(!In(i,n)||e.hasChildren()||!ho(i,n,r))}else if(t.segments.length===n.length){if(!In(t.segments,n)||!ho(t.segments,n,r))return!1;for(let i in e.children)if(!t.children[i]||!bg(t.children[i],e.children[i],r))return!1;return!0}else{let i=n.slice(0,t.segments.length),s=n.slice(t.segments.length);return!In(t.segments,i)||!ho(t.segments,i,r)||!t.children[F]?!1:Cg(t.children[F],e,s,r)}}function ho(t,e,n){return e.every((r,i)=>Ag[n](t[i].parameters,r.parameters))}var jt=class{constructor(e=new q([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=mr(this.queryParams),this._queryParamMap}toString(){return YE.serialize(this)}},q=class{constructor(e,n){this.segments=e,this.children=n,this.parent=null,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return fo(this)}},En=class{constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap??=mr(this.parameters),this._parameterMap}toString(){return Pg(this)}};function KE(t,e){return In(t,e)&&t.every((n,r)=>it(n.parameters,e[r].parameters))}function In(t,e){return t.length!==e.length?!1:t.every((n,r)=>n.path===e[r].path)}function QE(t,e){let n=[];return Object.entries(t.children).forEach(([r,i])=>{r===F&&(n=n.concat(e(i,r)))}),Object.entries(t.children).forEach(([r,i])=>{r!==F&&(n=n.concat(e(i,r)))}),n}var jc=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=k({token:e,factory:()=>new go,providedIn:"root"});let t=e;return t})(),go=class{parse(e){let n=new vc(e);return new jt(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){let n=`/${Ei(e.root,!0)}`,r=ZE(e.queryParams),i=typeof e.fragment=="string"?`#${JE(e.fragment)}`:"";return`${n}${r}${i}`}},YE=new go;function fo(t){return t.segments.map(e=>Pg(e)).join("/")}function Ei(t,e){if(!t.hasChildren())return fo(t);if(e){let n=t.children[F]?Ei(t.children[F],!1):"",r=[];return Object.entries(t.children).forEach(([i,s])=>{i!==F&&r.push(`${i}:${Ei(s,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=QE(t,(r,i)=>i===F?[Ei(t.children[F],!1)]:[`${i}:${Ei(r,!1)}`]);return Object.keys(t.children).length===1&&t.children[F]!=null?`${fo(t)}/${n[0]}`:`${fo(t)}/(${n.join("//")})`}}function Rg(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function co(t){return Rg(t).replace(/%3B/gi,";")}function JE(t){return encodeURI(t)}function yc(t){return Rg(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function po(t){return decodeURIComponent(t)}function _g(t){return po(t.replace(/\+/g,"%20"))}function Pg(t){return`${yc(t.path)}${XE(t.parameters)}`}function XE(t){return Object.entries(t).map(([e,n])=>`;${yc(e)}=${yc(n)}`).join("")}function ZE(t){let e=Object.entries(t).map(([n,r])=>Array.isArray(r)?r.map(i=>`${co(n)}=${co(i)}`).join("&"):`${co(n)}=${co(r)}`).filter(n=>n);return e.length?`?${e.join("&")}`:""}var eI=/^[^\/()?;#]+/;function hc(t){let e=t.match(eI);return e?e[0]:""}var tI=/^[^\/()?;=#]+/;function nI(t){let e=t.match(tI);return e?e[0]:""}var rI=/^[^=?&#]+/;function iI(t){let e=t.match(rI);return e?e[0]:""}var sI=/^[^&#]+/;function oI(t){let e=t.match(sI);return e?e[0]:""}var vc=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new q([],{}):new q([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[F]=new q(e,n)),r}parseSegment(){let e=hc(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new Y(4009,!1);return this.capture(e),new En(po(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let n=nI(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let i=hc(this.remaining);i&&(r=i,this.capture(r))}e[po(n)]=po(r)}parseQueryParam(e){let n=iI(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let o=oI(this.remaining);o&&(r=o,this.capture(r))}let i=_g(n),s=_g(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=hc(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new Y(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=F);let o=this.parseChildren();n[s]=Object.keys(o).length===1?o[F]:new q([],o),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new Y(4011,!1)}};function Ng(t){return t.segments.length>0?new q([],{[F]:t}):t}function Og(t){let e={};for(let[r,i]of Object.entries(t.children)){let s=Og(i);if(r===F&&s.segments.length===0&&s.hasChildren())for(let[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[r]=s)}let n=new q(t.segments,e);return aI(n)}function aI(t){if(t.numberOfChildren===1&&t.children[F]){let e=t.children[F];return new q(t.segments.concat(e.segments),e.children)}return t}function yr(t){return t instanceof jt}function uI(t,e,n=null,r=null){let i=kg(t);return Mg(i,e,n,r)}function kg(t){let e;function n(s){let o={};for(let u of s.children){let c=n(u);o[u.outlet]=c}let a=new q(s.url,o);return s===t&&(e=a),a}let r=n(t.root),i=Ng(r);return e??i}function Mg(t,e,n,r){let i=t;for(;i.parent;)i=i.parent;if(e.length===0)return dc(i,i,i,n,r);let s=cI(e);if(s.toRoot())return dc(i,i,new q([],{}),n,r);let o=lI(s,i,t),a=o.processChildren?Di(o.segmentGroup,o.index,s.commands):xg(o.segmentGroup,o.index,s.commands);return dc(i,o.segmentGroup,a,n,r)}function mo(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function bi(t){return typeof t=="object"&&t!=null&&t.outlets}function dc(t,e,n,r,i){let s={};r&&Object.entries(r).forEach(([u,c])=>{s[u]=Array.isArray(c)?c.map(l=>`${l}`):`${c}`});let o;t===e?o=n:o=Fg(t,e,n);let a=Ng(Og(o));return new jt(a,s,i)}function Fg(t,e,n){let r={};return Object.entries(t.children).forEach(([i,s])=>{s===e?r[i]=n:r[i]=Fg(s,e,n)}),new q(t.segments,r)}var yo=class{constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&mo(r[0]))throw new Y(4003,!1);let i=r.find(bi);if(i&&i!==Dg(r))throw new Y(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function cI(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new yo(!0,0,t);let e=0,n=!1,r=t.reduce((i,s,o)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let a={};return Object.entries(s.outlets).forEach(([u,c])=>{a[u]=typeof c=="string"?c.split("/"):c}),[...i,{outlets:a}]}if(s.segmentPath)return[...i,s.segmentPath]}return typeof s!="string"?[...i,s]:o===0?(s.split("/").forEach((a,u)=>{u==0&&a==="."||(u==0&&a===""?n=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,s]},[]);return new yo(n,e,r)}var pr=class{constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}};function lI(t,e,n){if(t.isAbsolute)return new pr(e,!0,0);if(!n)return new pr(e,!1,NaN);if(n.parent===null)return new pr(n,!0,0);let r=mo(t.commands[0])?0:1,i=n.segments.length-1+r;return hI(n,i,t.numberOfDoubleDots)}function hI(t,e,n){let r=t,i=e,s=n;for(;s>i;){if(s-=i,r=r.parent,!r)throw new Y(4005,!1);i=r.segments.length}return new pr(r,!1,i-s)}function dI(t){return bi(t[0])?t[0].outlets:{[F]:t}}function xg(t,e,n){if(t??=new q([],{}),t.segments.length===0&&t.hasChildren())return Di(t,e,n);let r=fI(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){let s=new q(t.segments.slice(0,r.pathIndex),{});return s.children[F]=new q(t.segments.slice(r.pathIndex),t.children),Di(s,0,i)}else return r.match&&i.length===0?new q(t.segments,{}):r.match&&!t.hasChildren()?_c(t,e,n):r.match?Di(t,0,i):_c(t,e,n)}function Di(t,e,n){if(n.length===0)return new q(t.segments,{});{let r=dI(n),i={};if(Object.keys(r).some(s=>s!==F)&&t.children[F]&&t.numberOfChildren===1&&t.children[F].segments.length===0){let s=Di(t.children[F],e,n);return new q(t.segments,s.children)}return Object.entries(r).forEach(([s,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(i[s]=xg(t.children[s],e,o))}),Object.entries(t.children).forEach(([s,o])=>{r[s]===void 0&&(i[s]=o)}),new q(t.segments,i)}}function fI(t,e,n){let r=0,i=e,s={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return s;let o=t.segments[i],a=n[r];if(bi(a))break;let u=`${a}`,c=r<n.length-1?n[r+1]:null;if(i>0&&u===void 0)break;if(u&&c&&typeof c=="object"&&c.outlets===void 0){if(!Eg(u,c,o))return s;r+=2}else{if(!Eg(u,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function _c(t,e,n){let r=t.segments.slice(0,e),i=0;for(;i<n.length;){let s=n[i];if(bi(s)){let u=pI(s.outlets);return new q(r,u)}if(i===0&&mo(n[0])){let u=t.segments[e];r.push(new En(u.path,wg(n[0]))),i++;continue}let o=bi(s)?s.outlets[F]:`${s}`,a=i<n.length-1?n[i+1]:null;o&&a&&mo(a)?(r.push(new En(o,wg(a))),i+=2):(r.push(new En(o,{})),i++)}return new q(r,{})}function pI(t){let e={};return Object.entries(t).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[n]=_c(new q([],{}),0,r))}),e}function wg(t){let e={};return Object.entries(t).forEach(([n,r])=>e[n]=`${r}`),e}function Eg(t,e,n){return t==n.path&&it(e,n.parameters)}var Ai="imperative",ge=function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t}(ge||{}),We=class{constructor(e,n){this.id=e,this.url=n}},Ci=class extends We{constructor(e,n,r="imperative",i=null){super(e,n),this.type=ge.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},zt=class extends We{constructor(e,n,r){super(e,n),this.urlAfterRedirects=r,this.type=ge.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Ve=function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t}(Ve||{}),wc=function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t}(wc||{}),qt=class extends We{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=ge.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Tn=class extends We{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=ge.NavigationSkipped}},Ri=class extends We{constructor(e,n,r,i){super(e,n),this.error=r,this.target=i,this.type=ge.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},vo=class extends We{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=ge.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Ec=class extends We{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=ge.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Ic=class extends We{constructor(e,n,r,i,s){super(e,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=ge.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Tc=class extends We{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=ge.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Dc=class extends We{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=ge.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Ac=class{constructor(e){this.route=e,this.type=ge.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Sc=class{constructor(e){this.route=e,this.type=ge.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},bc=class{constructor(e){this.snapshot=e,this.type=ge.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Cc=class{constructor(e){this.snapshot=e,this.type=ge.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Rc=class{constructor(e){this.snapshot=e,this.type=ge.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Pc=class{constructor(e){this.snapshot=e,this.type=ge.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var Pi=class{},Ni=class{constructor(e){this.url=e}};var Nc=class{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new Do,this.attachRef=null}},Do=(()=>{let e=class e{constructor(){this.contexts=new Map}onChildOutletCreated(r,i){let s=this.getOrCreateContext(r);s.outlet=i,this.contexts.set(r,s)}onChildOutletDestroyed(r){let i=this.getContext(r);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){let r=this.contexts;return this.contexts=new Map,r}onOutletReAttached(r){this.contexts=r}getOrCreateContext(r){let i=this.getContext(r);return i||(i=new Nc,this.contexts.set(r,i)),i}getContext(r){return this.contexts.get(r)||null}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=k({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),_o=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){let n=Oc(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){let n=Oc(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){let n=kc(e,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return kc(e,this._root).map(n=>n.value)}};function Oc(t,e){if(t===e.value)return e;for(let n of e.children){let r=Oc(t,n);if(r)return r}return null}function kc(t,e){if(t===e.value)return[e];for(let n of e.children){let r=kc(t,n);if(r.length)return r.unshift(e),r}return[]}var Le=class{constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}};function fr(t){let e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}var wo=class extends _o{constructor(e,n){super(e),this.snapshot=n,qc(this,e)}toString(){return this.snapshot.toString()}};function Lg(t){let e=gI(t),n=new ze([new En("",{})]),r=new ze({}),i=new ze({}),s=new ze({}),o=new ze(""),a=new Dn(n,r,s,o,i,F,t,e.root);return a.snapshot=e.root,new wo(new Le(a,[]),e)}function gI(t){let e={},n={},r={},i="",s=new Oi([],e,r,i,n,F,t,null,{});return new Eo("",new Le(s,[]))}var Dn=class{constructor(e,n,r,i,s,o,a,u){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(B(c=>c[Fi]))??N(void 0),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(B(e=>mr(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(B(e=>mr(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function zc(t,e,n="emptyOnly"){let r,{routeConfig:i}=t;return e!==null&&(n==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:w(w({},e.params),t.params),data:w(w({},e.data),t.data),resolve:w(w(w(w({},t.data),e.data),i?.data),t._resolvedData)}:r={params:w({},t.params),data:w({},t.data),resolve:w(w({},t.data),t._resolvedData??{})},i&&Ug(i)&&(r.resolve[Fi]=i.title),r}var Oi=class{get title(){return this.data?.[Fi]}constructor(e,n,r,i,s,o,a,u,c){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.routeConfig=u,this._resolve=c}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=mr(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=mr(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${n}')`}},Eo=class extends _o{constructor(e,n){super(n),this.url=e,qc(this,n)}toString(){return Vg(this._root)}};function qc(t,e){e.value._routerState=t,e.children.forEach(n=>qc(t,n))}function Vg(t){let e=t.children.length>0?` { ${t.children.map(Vg).join(", ")} } `:"";return`${t.value}${e}`}function fc(t){if(t.snapshot){let e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,it(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),it(e.params,n.params)||t.paramsSubject.next(n.params),qE(e.url,n.url)||t.urlSubject.next(n.url),it(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function Mc(t,e){let n=it(t.params,e.params)&&KE(t.url,e.url),r=!t.parent!=!e.parent;return n&&!r&&(!t.parent||Mc(t.parent,e.parent))}function Ug(t){return typeof t.title=="string"||t.title===null}var mI=(()=>{let e=class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=F,this.activateEvents=new fn,this.deactivateEvents=new fn,this.attachEvents=new fn,this.detachEvents=new fn,this.parentContexts=A(Do),this.location=A(Ys),this.changeDetector=A(di),this.environmentInjector=A(ir),this.inputBinder=A(Gc,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(r){if(r.name){let{firstChange:i,previousValue:s}=r.name;if(i)return;this.isTrackedInParentContexts(s)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(s)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(r){return this.parentContexts.getContext(r)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let r=this.parentContexts.getContext(this.name);r?.route&&(r.attachRef?this.attach(r.attachRef,r.route):this.activateWith(r.route,r.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Y(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Y(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Y(4012,!1);this.location.detach();let r=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(r.instance),r}attach(r,i){this.activated=r,this._activatedRoute=i,this.location.insert(r.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(r.instance)}deactivate(){if(this.activated){let r=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(r)}}activateWith(r,i){if(this.isActivated)throw new Y(4013,!1);this._activatedRoute=r;let s=this.location,a=r.snapshot.component,u=this.parentContexts.getOrCreateContext(this.name).children,c=new Fc(r,u,s.injector);this.activated=s.createComponent(a,{index:s.length,injector:c,environmentInjector:i??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=rr({type:e,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Ks]});let t=e;return t})(),Fc=class t{__ngOutletInjector(e){return new t(this.route,this.childContexts,e)}constructor(e,n,r){this.route=e,this.childContexts=n,this.parent=r}get(e,n){return e===Dn?this.route:e===Do?this.childContexts:this.parent.get(e,n)}},Gc=new $("");function yI(t,e,n){let r=ki(t,e._root,n?n._root:void 0);return new wo(r,e)}function ki(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=e.value;let i=vI(t,e,n);return new Le(r,i)}else{if(t.shouldAttach(e.value)){let s=t.retrieve(e.value);if(s!==null){let o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>ki(t,a)),o}}let r=_I(e.value),i=e.children.map(s=>ki(t,s));return new Le(r,i)}}function vI(t,e,n){return e.children.map(r=>{for(let i of n.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return ki(t,r,i);return ki(t,r)})}function _I(t){return new Dn(new ze(t.url),new ze(t.params),new ze(t.queryParams),new ze(t.fragment),new ze(t.data),t.outlet,t.component,t)}var Bg="ngNavigationCancelingError";function $g(t,e){let{redirectTo:n,navigationBehaviorOptions:r}=yr(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=jg(!1,Ve.Redirect);return i.url=n,i.navigationBehaviorOptions=r,i}function jg(t,e){let n=new Error(`NavigationCancelingError: ${t||""}`);return n[Bg]=!0,n.cancellationCode=e,n}function wI(t){return zg(t)&&yr(t.url)}function zg(t){return!!t&&t[Bg]}var EI=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=oi({type:e,selectors:[["ng-component"]],standalone:!0,features:[li],decls:1,vars:0,template:function(i,s){i&1&&mn(0,"router-outlet")},dependencies:[mI],encapsulation:2});let t=e;return t})();function II(t,e){return t.providers&&!t._injector&&(t._injector=Vp(t.providers,e,`Route: ${t.path}`)),t._injector??e}function Wc(t){let e=t.children&&t.children.map(Wc),n=e?Q(w({},t),{children:e}):w({},t);return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==F&&(n.component=EI),n}function st(t){return t.outlet||F}function TI(t,e){let n=t.filter(r=>st(r)===e);return n.push(...t.filter(r=>st(r)!==e)),n}function xi(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){let n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var DI=(t,e,n,r)=>B(i=>(new xc(e,i.targetRouterState,i.currentRouterState,n,r).activate(t),i)),xc=class{constructor(e,n,r,i,s){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(e){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),fc(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){let i=fr(n);e.children.forEach(s=>{let o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,n,r){let i=e.value,s=n?n.value:null;if(i===s)if(i.component){let o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,n,o.children)}else this.deactivateChildRoutes(e,n,r);else s&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,s=fr(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);if(r&&r.outlet){let o=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,s=fr(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,n,r){let i=fr(n);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new Pc(s.value.snapshot))}),e.children.length&&this.forwardEvent(new Cc(e.value.snapshot))}activateRoutes(e,n,r){let i=e.value,s=n?n.value:null;if(fc(i),i===s)if(i.component){let o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,n,o.children)}else this.activateChildRoutes(e,n,r);else if(i.component){let o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),fc(a.route.value),this.activateChildRoutes(e,null,o.children)}else{let a=xi(i.snapshot);o.attachRef=null,o.route=i,o.injector=a,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(e,null,o.children)}}else this.activateChildRoutes(e,null,r)}},Io=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},gr=class{constructor(e,n){this.component=e,this.route=n}};function AI(t,e,n){let r=t._root,i=e?e._root:null;return Ii(r,i,n,[r.value])}function SI(t){let e=t.routeConfig?t.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:t,guards:e}}function _r(t,e){let n=Symbol(),r=e.get(t,n);return r===n?typeof t=="function"&&!Ip(t)?t:e.get(t):r}function Ii(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=fr(e);return t.children.forEach(o=>{bI(o,s[o.value.outlet],n,r.concat([o.value]),i),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>Si(a,n.getContext(o),i)),i}function bI(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=t.value,o=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){let u=CI(o,s,s.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new Io(r)):(s.data=o.data,s._resolvedData=o._resolvedData),s.component?Ii(t,e,a?a.children:null,r,i):Ii(t,e,n,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new gr(a.outlet.component,o))}else o&&Si(e,a,i),i.canActivateChecks.push(new Io(r)),s.component?Ii(t,null,a?a.children:null,r,i):Ii(t,null,n,r,i);return i}function CI(t,e,n){if(typeof n=="function")return n(t,e);switch(n){case"pathParamsChange":return!In(t.url,e.url);case"pathParamsOrQueryParamsChange":return!In(t.url,e.url)||!it(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Mc(t,e)||!it(t.queryParams,e.queryParams);case"paramsChange":default:return!Mc(t,e)}}function Si(t,e,n){let r=fr(t),i=t.value;Object.entries(r).forEach(([s,o])=>{i.component?e?Si(o,e.children.getContext(s),n):Si(o,null,n):Si(o,e,n)}),i.component?e&&e.outlet&&e.outlet.isActivated?n.canDeactivateChecks.push(new gr(e.outlet.component,i)):n.canDeactivateChecks.push(new gr(null,i)):n.canDeactivateChecks.push(new gr(null,i))}function Li(t){return typeof t=="function"}function RI(t){return typeof t=="boolean"}function PI(t){return t&&Li(t.canLoad)}function NI(t){return t&&Li(t.canActivate)}function OI(t){return t&&Li(t.canActivateChild)}function kI(t){return t&&Li(t.canDeactivate)}function MI(t){return t&&Li(t.canMatch)}function qg(t){return t instanceof mp||t?.name==="EmptyError"}var lo=Symbol("INITIAL_VALUE");function vr(){return Ge(t=>Cu(t.map(e=>e.pipe(nr(1),ku(lo)))).pipe(B(e=>{for(let n of e)if(n!==!0){if(n===lo)return lo;if(n===!1||n instanceof jt)return n}return!0}),_t(e=>e!==lo),nr(1)))}function FI(t,e){return qe(n=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=n;return o.length===0&&s.length===0?N(Q(w({},n),{guardsResult:!0})):xI(o,r,i,t).pipe(qe(a=>a&&RI(a)?LI(r,s,t,e):N(a)),B(a=>Q(w({},n),{guardsResult:a})))})}function xI(t,e,n,r){return Pe(t).pipe(qe(i=>jI(i.component,i.route,n,e,r)),Vt(i=>i!==!0,!0))}function LI(t,e,n,r){return Pe(e).pipe(ln(i=>yp(UI(i.route.parent,r),VI(i.route,r),$I(t,i.path,n),BI(t,i.route,n))),Vt(i=>i!==!0,!0))}function VI(t,e){return t!==null&&e&&e(new Rc(t)),N(!0)}function UI(t,e){return t!==null&&e&&e(new bc(t)),N(!0)}function BI(t,e,n){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return N(!0);let i=r.map(s=>Ru(()=>{let o=xi(e)??n,a=_r(s,o),u=NI(a)?a.canActivate(e,t):wt(o,()=>a(e,t));return Gt(u).pipe(Vt())}));return N(i).pipe(vr())}function $I(t,e,n){let r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>SI(o)).filter(o=>o!==null).map(o=>Ru(()=>{let a=o.guards.map(u=>{let c=xi(o.node)??n,l=_r(u,c),h=OI(l)?l.canActivateChild(r,t):wt(c,()=>l(r,t));return Gt(h).pipe(Vt())});return N(a).pipe(vr())}));return N(s).pipe(vr())}function jI(t,e,n,r,i){let s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!s||s.length===0)return N(!0);let o=s.map(a=>{let u=xi(e)??i,c=_r(a,u),l=kI(c)?c.canDeactivate(t,e,n,r):wt(u,()=>c(t,e,n,r));return Gt(l).pipe(Vt())});return N(o).pipe(vr())}function zI(t,e,n,r){let i=e.canLoad;if(i===void 0||i.length===0)return N(!0);let s=i.map(o=>{let a=_r(o,t),u=PI(a)?a.canLoad(e,n):wt(t,()=>a(e,n));return Gt(u)});return N(s).pipe(vr(),Gg(r))}function Gg(t){return Iu(ae(e=>{if(yr(e))throw $g(t,e)}),B(e=>e===!0))}function qI(t,e,n,r){let i=e.canMatch;if(!i||i.length===0)return N(!0);let s=i.map(o=>{let a=_r(o,t),u=MI(a)?a.canMatch(e,n):wt(t,()=>a(e,n));return Gt(u)});return N(s).pipe(vr(),Gg(r))}var Mi=class{constructor(e){this.segmentGroup=e||null}},To=class extends Error{constructor(e){super(),this.urlTree=e}};function dr(t){return ri(new Mi(t))}function GI(t){return ri(new Y(4e3,!1))}function WI(t){return ri(jg(!1,Ve.GuardRejected))}var Lc=class{constructor(e,n){this.urlSerializer=e,this.urlTree=n}lineralizeSegments(e,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return N(r);if(i.numberOfChildren>1||!i.children[F])return GI(e.redirectTo);i=i.children[F]}}applyRedirectCommands(e,n,r){let i=this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),e,r);if(n.startsWith("/"))throw new To(i);return i}applyRedirectCreateUrlTree(e,n,r,i){let s=this.createSegmentGroup(e,n.root,r,i);return new jt(s,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){let r={};return Object.entries(e).forEach(([i,s])=>{if(typeof s=="string"&&s.startsWith(":")){let a=s.substring(1);r[i]=n[a]}else r[i]=s}),r}createSegmentGroup(e,n,r,i){let s=this.createSegments(e,n.segments,r,i),o={};return Object.entries(n.children).forEach(([a,u])=>{o[a]=this.createSegmentGroup(e,u,r,i)}),new q(s,o)}createSegments(e,n,r,i){return n.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,n,r){let i=r[n.path.substring(1)];if(!i)throw new Y(4001,!1);return i}findOrReturn(e,n){let r=0;for(let i of n){if(i.path===e.path)return n.splice(r),i;r++}return e}},Vc={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function HI(t,e,n,r,i){let s=Hc(t,e,n);return s.matched?(r=II(e,r),qI(r,e,n,i).pipe(B(o=>o===!0?s:w({},Vc)))):N(s)}function Hc(t,e,n){if(e.path==="**")return KI(n);if(e.path==="")return e.pathMatch==="full"&&(t.hasChildren()||n.length>0)?w({},Vc):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let i=(e.matcher||zE)(n,t,e);if(!i)return w({},Vc);let s={};Object.entries(i.posParams??{}).forEach(([a,u])=>{s[a]=u.path});let o=i.consumed.length>0?w(w({},s),i.consumed[i.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function KI(t){return{matched:!0,parameters:t.length>0?Dg(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function Ig(t,e,n,r){return n.length>0&&JI(t,n,r)?{segmentGroup:new q(e,YI(r,new q(n,t.children))),slicedSegments:[]}:n.length===0&&XI(t,n,r)?{segmentGroup:new q(t.segments,QI(t,n,r,t.children)),slicedSegments:n}:{segmentGroup:new q(t.segments,t.children),slicedSegments:n}}function QI(t,e,n,r){let i={};for(let s of n)if(Ao(t,e,s)&&!r[st(s)]){let o=new q([],{});i[st(s)]=o}return w(w({},r),i)}function YI(t,e){let n={};n[F]=e;for(let r of t)if(r.path===""&&st(r)!==F){let i=new q([],{});n[st(r)]=i}return n}function JI(t,e,n){return n.some(r=>Ao(t,e,r)&&st(r)!==F)}function XI(t,e,n){return n.some(r=>Ao(t,e,r))}function Ao(t,e,n){return(t.hasChildren()||e.length>0)&&n.pathMatch==="full"?!1:n.path===""}function ZI(t,e,n,r){return st(t)!==r&&(r===F||!Ao(e,n,t))?!1:Hc(e,t,n).matched}function e0(t,e,n){return e.length===0&&!t.children[n]}var Uc=class{};function t0(t,e,n,r,i,s,o="emptyOnly"){return new Bc(t,e,n,r,i,o,s).recognize()}var n0=31,Bc=class{constructor(e,n,r,i,s,o,a){this.injector=e,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.applyRedirects=new Lc(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new Y(4002,`'${e.segmentGroup}'`)}recognize(){let e=Ig(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(B(n=>{let r=new Oi([],Object.freeze({}),Object.freeze(w({},this.urlTree.queryParams)),this.urlTree.fragment,{},F,this.rootComponentType,null,{}),i=new Le(r,n),s=new Eo("",i),o=uI(r,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),this.inheritParamsAndData(s._root,null),{state:s,tree:o}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e,F).pipe(tr(r=>{if(r instanceof To)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Mi?this.noMatchError(r):r}))}inheritParamsAndData(e,n){let r=e.value,i=zc(r,n,this.paramsInheritanceStrategy);r.params=Object.freeze(i.params),r.data=Object.freeze(i.data),e.children.forEach(s=>this.inheritParamsAndData(s,r))}processSegmentGroup(e,n,r,i){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,n,r):this.processSegment(e,n,r,r.segments,i,!0).pipe(B(s=>s instanceof Le?[s]:[]))}processChildren(e,n,r){let i=[];for(let s of Object.keys(r.children))s==="primary"?i.unshift(s):i.push(s);return Pe(i).pipe(ln(s=>{let o=r.children[s],a=TI(n,s);return this.processSegmentGroup(e,a,o,s)}),Ou((s,o)=>(s.push(...o),s)),Pu(null),_p(),qe(s=>{if(s===null)return dr(r);let o=Wg(s);return r0(o),N(o)}))}processSegment(e,n,r,i,s,o){return Pe(n).pipe(ln(a=>this.processSegmentAgainstRoute(a._injector??e,n,a,r,i,s,o).pipe(tr(u=>{if(u instanceof Mi)return N(null);throw u}))),Vt(a=>!!a),tr(a=>{if(qg(a))return e0(r,i,s)?N(new Uc):dr(r);throw a}))}processSegmentAgainstRoute(e,n,r,i,s,o,a){return ZI(r,i,s,o)?r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,s,o):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,n,r,s,o):dr(i):dr(i)}expandSegmentAgainstRouteUsingRedirect(e,n,r,i,s,o){let{matched:a,consumedSegments:u,positionalParamSegments:c,remainingSegments:l}=Hc(n,i,s);if(!a)return dr(n);i.redirectTo.startsWith("/")&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>n0&&(this.allowRedirects=!1));let h=this.applyRedirects.applyRedirectCommands(u,i.redirectTo,c);return this.applyRedirects.lineralizeSegments(i,h).pipe(qe(f=>this.processSegment(e,r,n,f.concat(l),o,!1)))}matchSegmentAgainstRoute(e,n,r,i,s){let o=HI(n,r,i,e,this.urlSerializer);return r.path==="**"&&(n.children={}),o.pipe(Ge(a=>a.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(Ge(({routes:u})=>{let c=r._loadedInjector??e,{consumedSegments:l,remainingSegments:h,parameters:f}=a,p=new Oi(l,f,Object.freeze(w({},this.urlTree.queryParams)),this.urlTree.fragment,s0(r),st(r),r.component??r._loadedComponent??null,r,o0(r)),{segmentGroup:E,slicedSegments:D}=Ig(n,l,h,u);if(D.length===0&&E.hasChildren())return this.processChildren(c,u,E).pipe(B(T=>T===null?null:new Le(p,T)));if(u.length===0&&D.length===0)return N(new Le(p,[]));let m=st(r)===s;return this.processSegment(c,u,E,D,m?F:s,!0).pipe(B(T=>new Le(p,T instanceof Le?[T]:[])))}))):dr(n)))}getChildConfig(e,n,r){return n.children?N({routes:n.children,injector:e}):n.loadChildren?n._loadedRoutes!==void 0?N({routes:n._loadedRoutes,injector:n._loadedInjector}):zI(e,n,r,this.urlSerializer).pipe(qe(i=>i?this.configLoader.loadChildren(e,n).pipe(ae(s=>{n._loadedRoutes=s.routes,n._loadedInjector=s.injector})):WI(n))):N({routes:[],injector:e})}};function r0(t){t.sort((e,n)=>e.value.outlet===F?-1:n.value.outlet===F?1:e.value.outlet.localeCompare(n.value.outlet))}function i0(t){let e=t.value.routeConfig;return e&&e.path===""}function Wg(t){let e=[],n=new Set;for(let r of t){if(!i0(r)){e.push(r);continue}let i=e.find(s=>r.value.routeConfig===s.value.routeConfig);i!==void 0?(i.children.push(...r.children),n.add(i)):e.push(r)}for(let r of n){let i=Wg(r.children);e.push(new Le(r.value,i))}return e.filter(r=>!n.has(r))}function s0(t){return t.data||{}}function o0(t){return t.resolve||{}}function a0(t,e,n,r,i,s){return qe(o=>t0(t,e,n,r,o.extractedUrl,i,s).pipe(B(({state:a,tree:u})=>Q(w({},o),{targetSnapshot:a,urlAfterRedirects:u}))))}function u0(t,e){return qe(n=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return N(n);let s=new Set(i.map(u=>u.route)),o=new Set;for(let u of s)if(!o.has(u))for(let c of Hg(u))o.add(c);let a=0;return Pe(o).pipe(ln(u=>s.has(u)?c0(u,r,t,e):(u.data=zc(u,u.parent,t).resolve,N(void 0))),ae(()=>a++),Nu(1),qe(u=>a===o.size?N(n):Lt))})}function Hg(t){let e=t.children.map(n=>Hg(n)).flat();return[t,...e]}function c0(t,e,n,r){let i=t.routeConfig,s=t._resolve;return i?.title!==void 0&&!Ug(i)&&(s[Fi]=i.title),l0(s,t,e,r).pipe(B(o=>(t._resolvedData=o,t.data=zc(t,t.parent,n).resolve,null)))}function l0(t,e,n,r){let i=mc(t);if(i.length===0)return N({});let s={};return Pe(i).pipe(qe(o=>h0(t[o],e,n,r).pipe(Vt(),ae(a=>{s[o]=a}))),Nu(1),vp(s),tr(o=>qg(o)?Lt:ri(o)))}function h0(t,e,n,r){let i=xi(e)??r,s=_r(t,i),o=s.resolve?s.resolve(e,n):wt(i,()=>s(e,n));return Gt(o)}function pc(t){return Ge(e=>{let n=t(e);return n?Pe(n).pipe(B(()=>e)):N(e)})}var Kg=(()=>{let e=class e{buildTitle(r){let i,s=r.root;for(;s!==void 0;)i=this.getResolvedTitleForRoute(s)??i,s=s.children.find(o=>o.outlet===F);return i}getResolvedTitleForRoute(r){return r.data[Fi]}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=k({token:e,factory:()=>A(d0),providedIn:"root"});let t=e;return t})(),d0=(()=>{let e=class e extends Kg{constructor(r){super(),this.title=r}updateTitle(r){let i=this.buildTitle(r);i!==void 0&&this.title.setTitle(i)}};e.\u0275fac=function(i){return new(i||e)(R(mg))},e.\u0275prov=k({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Kc=new $("",{providedIn:"root",factory:()=>({})}),Qc=new $(""),f0=(()=>{let e=class e{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=A(Qu)}loadComponent(r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return N(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=Gt(r.loadComponent()).pipe(B(Qg),ae(o=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=o}),hn(()=>{this.componentLoaders.delete(r)})),s=new Du(i,()=>new _e).pipe(Tu());return this.componentLoaders.set(r,s),s}loadChildren(r,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return N({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);let o=p0(i,this.compiler,r,this.onLoadEndListener).pipe(hn(()=>{this.childrenLoaders.delete(i)})),a=new Du(o,()=>new _e).pipe(Tu());return this.childrenLoaders.set(i,a),a}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=k({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function p0(t,e,n,r){return Gt(t.loadChildren()).pipe(B(Qg),qe(i=>i instanceof Lp||Array.isArray(i)?N(i):Pe(e.compileModuleAsync(i))),B(i=>{r&&r(t);let s,o,a=!1;return Array.isArray(i)?(o=i,a=!0):(s=i.create(n).injector,o=s.get(Qc,[],{optional:!0,self:!0}).flat()),{routes:o.map(Wc),injector:s}}))}function g0(t){return t&&typeof t=="object"&&"default"in t}function Qg(t){return g0(t)?t.default:t}var Yc=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=k({token:e,factory:()=>A(m0),providedIn:"root"});let t=e;return t})(),m0=(()=>{let e=class e{shouldProcessUrl(r){return!0}extract(r){return r}merge(r,i){return r}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=k({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),y0=new $("");var v0=(()=>{let e=class e{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new _e,this.transitionAbortSubject=new _e,this.configLoader=A(f0),this.environmentInjector=A(ir),this.urlSerializer=A(jc),this.rootContexts=A(Do),this.location=A(pi),this.inputBindingEnabled=A(Gc,{optional:!0})!==null,this.titleStrategy=A(Kg),this.options=A(Kc,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=A(Yc),this.createViewTransition=A(y0,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>N(void 0),this.rootComponentType=null;let r=s=>this.events.next(new Ac(s)),i=s=>this.events.next(new Sc(s));this.configLoader.onLoadEndListener=i,this.configLoader.onLoadStartListener=r}complete(){this.transitions?.complete()}handleNavigationRequest(r){let i=++this.navigationId;this.transitions?.next(Q(w(w({},this.transitions.value),r),{id:i}))}setupNavigations(r,i,s){return this.transitions=new ze({id:0,currentUrlTree:i,currentRawUrl:i,extractedUrl:this.urlHandlingStrategy.extract(i),urlAfterRedirects:this.urlHandlingStrategy.extract(i),rawUrl:i,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:Ai,restoredState:null,currentSnapshot:s.snapshot,targetSnapshot:null,currentRouterState:s,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(_t(o=>o.id!==0),B(o=>Q(w({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),Ge(o=>{let a=!1,u=!1;return N(o).pipe(Ge(c=>{if(this.navigationId>o.id)return this.cancelNavigationTransition(o,"",Ve.SupersededByNewNavigation),Lt;this.currentTransition=o,this.currentNavigation={id:c.id,initialUrl:c.rawUrl,extractedUrl:c.extractedUrl,trigger:c.source,extras:c.extras,previousNavigation:this.lastSuccessfulNavigation?Q(w({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let l=!r.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),h=c.extras.onSameUrlNavigation??r.onSameUrlNavigation;if(!l&&h!=="reload"){let f="";return this.events.next(new Tn(c.id,this.urlSerializer.serialize(c.rawUrl),f,wc.IgnoredSameUrlNavigation)),c.resolve(null),Lt}if(this.urlHandlingStrategy.shouldProcessUrl(c.rawUrl))return N(c).pipe(Ge(f=>{let p=this.transitions?.getValue();return this.events.next(new Ci(f.id,this.urlSerializer.serialize(f.extractedUrl),f.source,f.restoredState)),p!==this.transitions?.getValue()?Lt:Promise.resolve(f)}),a0(this.environmentInjector,this.configLoader,this.rootComponentType,r.config,this.urlSerializer,this.paramsInheritanceStrategy),ae(f=>{o.targetSnapshot=f.targetSnapshot,o.urlAfterRedirects=f.urlAfterRedirects,this.currentNavigation=Q(w({},this.currentNavigation),{finalUrl:f.urlAfterRedirects});let p=new vo(f.id,this.urlSerializer.serialize(f.extractedUrl),this.urlSerializer.serialize(f.urlAfterRedirects),f.targetSnapshot);this.events.next(p)}));if(l&&this.urlHandlingStrategy.shouldProcessUrl(c.currentRawUrl)){let{id:f,extractedUrl:p,source:E,restoredState:D,extras:m}=c,T=new Ci(f,this.urlSerializer.serialize(p),E,D);this.events.next(T);let U=Lg(this.rootComponentType).snapshot;return this.currentTransition=o=Q(w({},c),{targetSnapshot:U,urlAfterRedirects:p,extras:Q(w({},m),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=p,N(o)}else{let f="";return this.events.next(new Tn(c.id,this.urlSerializer.serialize(c.extractedUrl),f,wc.IgnoredByUrlHandlingStrategy)),c.resolve(null),Lt}}),ae(c=>{let l=new Ec(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(l)}),B(c=>(this.currentTransition=o=Q(w({},c),{guards:AI(c.targetSnapshot,c.currentSnapshot,this.rootContexts)}),o)),FI(this.environmentInjector,c=>this.events.next(c)),ae(c=>{if(o.guardsResult=c.guardsResult,yr(c.guardsResult))throw $g(this.urlSerializer,c.guardsResult);let l=new Ic(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot,!!c.guardsResult);this.events.next(l)}),_t(c=>c.guardsResult?!0:(this.cancelNavigationTransition(c,"",Ve.GuardRejected),!1)),pc(c=>{if(c.guards.canActivateChecks.length)return N(c).pipe(ae(l=>{let h=new Tc(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(h)}),Ge(l=>{let h=!1;return N(l).pipe(u0(this.paramsInheritanceStrategy,this.environmentInjector),ae({next:()=>h=!0,complete:()=>{h||this.cancelNavigationTransition(l,"",Ve.NoDataFromResolver)}}))}),ae(l=>{let h=new Dc(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(h)}))}),pc(c=>{let l=h=>{let f=[];h.routeConfig?.loadComponent&&!h.routeConfig._loadedComponent&&f.push(this.configLoader.loadComponent(h.routeConfig).pipe(ae(p=>{h.component=p}),B(()=>{})));for(let p of h.children)f.push(...l(p));return f};return Cu(l(c.targetSnapshot.root)).pipe(Pu(null),nr(1))}),pc(()=>this.afterPreactivation()),Ge(()=>{let{currentSnapshot:c,targetSnapshot:l}=o,h=this.createViewTransition?.(this.environmentInjector,c.root,l.root);return h?Pe(h).pipe(B(()=>o)):N(o)}),B(c=>{let l=yI(r.routeReuseStrategy,c.targetSnapshot,c.currentRouterState);return this.currentTransition=o=Q(w({},c),{targetRouterState:l}),this.currentNavigation.targetRouterState=l,o}),ae(()=>{this.events.next(new Pi)}),DI(this.rootContexts,r.routeReuseStrategy,c=>this.events.next(c),this.inputBindingEnabled),nr(1),ae({next:c=>{a=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new zt(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects))),this.titleStrategy?.updateTitle(c.targetRouterState.snapshot),c.resolve(!0)},complete:()=>{a=!0}}),wp(this.transitionAbortSubject.pipe(ae(c=>{throw c}))),hn(()=>{!a&&!u&&this.cancelNavigationTransition(o,"",Ve.SupersededByNewNavigation),this.currentTransition?.id===o.id&&(this.currentNavigation=null,this.currentTransition=null)}),tr(c=>{if(u=!0,zg(c))this.events.next(new qt(o.id,this.urlSerializer.serialize(o.extractedUrl),c.message,c.cancellationCode)),wI(c)?this.events.next(new Ni(c.url)):o.resolve(!1);else{this.events.next(new Ri(o.id,this.urlSerializer.serialize(o.extractedUrl),c,o.targetSnapshot??void 0));try{o.resolve(r.errorHandler(c))}catch(l){this.options.resolveNavigationPromiseOnError?o.resolve(!1):o.reject(l)}}return Lt}))}))}cancelNavigationTransition(r,i,s){let o=new qt(r.id,this.urlSerializer.serialize(r.extractedUrl),i,s);this.events.next(o),r.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=k({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function _0(t){return t!==Ai}var w0=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=k({token:e,factory:()=>A(E0),providedIn:"root"});let t=e;return t})(),$c=class{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}},E0=(()=>{let e=class e extends $c{};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=Lu(e)))(s||e)}})(),e.\u0275prov=k({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Yg=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=k({token:e,factory:()=>A(I0),providedIn:"root"});let t=e;return t})(),I0=(()=>{let e=class e extends Yg{constructor(){super(...arguments),this.location=A(pi),this.urlSerializer=A(jc),this.options=A(Kc,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=A(Yc),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new jt,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=Lg(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(r){return this.location.subscribe(i=>{i.type==="popstate"&&r(i.url,i.state)})}handleRouterEvent(r,i){if(r instanceof Ci)this.stateMemento=this.createStateMemento();else if(r instanceof Tn)this.rawUrlTree=i.initialUrl;else if(r instanceof vo){if(this.urlUpdateStrategy==="eager"&&!i.extras.skipLocationChange){let s=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl);this.setBrowserUrl(s,i)}}else r instanceof Pi?(this.currentUrlTree=i.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl),this.routerState=i.targetRouterState,this.urlUpdateStrategy==="deferred"&&(i.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,i))):r instanceof qt&&(r.code===Ve.GuardRejected||r.code===Ve.NoDataFromResolver)?this.restoreHistory(i):r instanceof Ri?this.restoreHistory(i,!0):r instanceof zt&&(this.lastSuccessfulId=r.id,this.currentPageId=this.browserPageId)}setBrowserUrl(r,i){let s=this.urlSerializer.serialize(r);if(this.location.isCurrentPathEqualTo(s)||i.extras.replaceUrl){let o=this.browserPageId,a=w(w({},i.extras.state),this.generateNgRouterState(i.id,o));this.location.replaceState(s,"",a)}else{let o=w(w({},i.extras.state),this.generateNgRouterState(i.id,this.browserPageId+1));this.location.go(s,"",o)}}restoreHistory(r,i=!1){if(this.canceledNavigationResolution==="computed"){let s=this.browserPageId,o=this.currentPageId-s;o!==0?this.location.historyGo(o):this.currentUrlTree===r.finalUrl&&o===0&&(this.resetState(r),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(i&&this.resetState(r),this.resetUrlToCurrentUrlTree())}resetState(r){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,r.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(r,i){return this.canceledNavigationResolution==="computed"?{navigationId:r,\u0275routerPageId:i}:{navigationId:r}}};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=Lu(e)))(s||e)}})(),e.\u0275prov=k({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Ti=function(t){return t[t.COMPLETE=0]="COMPLETE",t[t.FAILED=1]="FAILED",t[t.REDIRECTING=2]="REDIRECTING",t}(Ti||{});function T0(t,e){t.events.pipe(_t(n=>n instanceof zt||n instanceof qt||n instanceof Ri||n instanceof Tn),B(n=>n instanceof zt||n instanceof Tn?Ti.COMPLETE:(n instanceof qt?n.code===Ve.Redirect||n.code===Ve.SupersededByNewNavigation:!1)?Ti.REDIRECTING:Ti.FAILED),_t(n=>n!==Ti.REDIRECTING),nr(1)).subscribe(()=>{e()})}function D0(t){throw t}var A0={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},S0={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Jc=(()=>{let e=class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.isNgZoneEnabled=!1,this.console=A(Js),this.stateManager=A(Yg),this.options=A(Kc,{optional:!0})||{},this.pendingTasks=A(ui),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=A(v0),this.urlSerializer=A(jc),this.location=A(pi),this.urlHandlingStrategy=A(Yc),this._events=new _e,this.errorHandler=this.options.errorHandler||D0,this.navigated=!1,this.routeReuseStrategy=A(w0),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=A(Qc,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!A(Gc,{optional:!0}),this.eventsSubscription=new dp,this.isNgZoneEnabled=A(X)instanceof X&&X.isInAngularZone(),this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:r=>{this.console.warn(r)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let r=this.navigationTransitions.events.subscribe(i=>{try{let s=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(s!==null&&o!==null){if(this.stateManager.handleRouterEvent(i,o),i instanceof qt&&i.code!==Ve.Redirect&&i.code!==Ve.SupersededByNewNavigation)this.navigated=!0;else if(i instanceof zt)this.navigated=!0;else if(i instanceof Ni){let a=this.urlHandlingStrategy.merge(i.url,s.currentRawUrl),u={info:s.extras.info,skipLocationChange:s.extras.skipLocationChange,replaceUrl:this.urlUpdateStrategy==="eager"||_0(s.source)};this.scheduleNavigation(a,Ai,null,u,{resolve:s.resolve,reject:s.reject,promise:s.promise})}}C0(i)&&this._events.next(i)}catch(s){this.navigationTransitions.transitionAbortSubject.next(s)}});this.eventsSubscription.add(r)}resetRootComponentType(r){this.routerState.root.component=r,this.navigationTransitions.rootComponentType=r}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Ai,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((r,i)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(r,"popstate",i)},0)})}navigateToSyncWithBrowser(r,i,s){let o={replaceUrl:!0},a=s?.navigationId?s:null;if(s){let c=w({},s);delete c.navigationId,delete c.\u0275routerPageId,Object.keys(c).length!==0&&(o.state=c)}let u=this.parseUrl(r);this.scheduleNavigation(u,i,a,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(r){this.config=r.map(Wc),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(r,i={}){let{relativeTo:s,queryParams:o,fragment:a,queryParamsHandling:u,preserveFragment:c}=i,l=c?this.currentUrlTree.fragment:a,h=null;switch(u){case"merge":h=w(w({},this.currentUrlTree.queryParams),o);break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=o||null}h!==null&&(h=this.removeEmptyProps(h));let f;try{let p=s?s.snapshot:this.routerState.snapshot.root;f=kg(p)}catch{(typeof r[0]!="string"||!r[0].startsWith("/"))&&(r=[]),f=this.currentUrlTree.root}return Mg(f,r,h,l??null)}navigateByUrl(r,i={skipLocationChange:!1}){let s=yr(r)?r:this.parseUrl(r),o=this.urlHandlingStrategy.merge(s,this.rawUrlTree);return this.scheduleNavigation(o,Ai,null,i)}navigate(r,i={skipLocationChange:!1}){return b0(r),this.navigateByUrl(this.createUrlTree(r,i),i)}serializeUrl(r){return this.urlSerializer.serialize(r)}parseUrl(r){try{return this.urlSerializer.parse(r)}catch{return this.urlSerializer.parse("/")}}isActive(r,i){let s;if(i===!0?s=w({},A0):i===!1?s=w({},S0):s=i,yr(r))return vg(this.currentUrlTree,r,s);let o=this.parseUrl(r);return vg(this.currentUrlTree,o,s)}removeEmptyProps(r){return Object.entries(r).reduce((i,[s,o])=>(o!=null&&(i[s]=o),i),{})}scheduleNavigation(r,i,s,o,a){if(this.disposed)return Promise.resolve(!1);let u,c,l;a?(u=a.resolve,c=a.reject,l=a.promise):l=new Promise((f,p)=>{u=f,c=p});let h=this.pendingTasks.add();return T0(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(h))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:s,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:r,extras:o,resolve:u,reject:c,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(f=>Promise.reject(f))}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=k({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function b0(t){for(let e=0;e<t.length;e++)if(t[e]==null)throw new Y(4008,!1)}function C0(t){return!(t instanceof Pi)&&!(t instanceof Ni)}var NN=(()=>{let e=class e{constructor(r,i,s,o,a,u){this.router=r,this.route=i,this.tabIndexAttribute=s,this.renderer=o,this.el=a,this.locationStrategy=u,this.href=null,this.commands=null,this.onChanges=new _e,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;let c=a.nativeElement.tagName?.toLowerCase();this.isAnchorElement=c==="a"||c==="area",this.isAnchorElement?this.subscription=r.events.subscribe(l=>{l instanceof zt&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(r){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",r)}ngOnChanges(r){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(r){r!=null?(this.commands=Array.isArray(r)?r:[r],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(r,i,s,o,a){let u=this.urlTree;if(u===null||this.isAnchorElement&&(r!==0||i||s||o||a||typeof this.target=="string"&&this.target!="_self"))return!0;let c={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(u,c),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let r=this.urlTree;this.href=r!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(r)):null;let i=this.href===null?null:kp(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",i)}applyAttributeValue(r,i){let s=this.renderer,o=this.el.nativeElement;i!==null?s.setAttribute(o,r,i):s.removeAttribute(o,r)}get urlTree(){return this.commands===null?null:this.router.createUrlTree(this.commands,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}};e.\u0275fac=function(i){return new(i||e)(we(Jc),we(Dn),Vu("tabindex"),we(Qs),we(ai),we(lr))},e.\u0275dir=rr({type:e,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(i,s){i&1&&yn("click",function(a){return s.onClick(a.button,a.ctrlKey,a.shiftKey,a.altKey,a.metaKey)}),i&2&&gn("target",s.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[si.HasDecoratorInputTransform,"preserveFragment","preserveFragment",fi],skipLocationChange:[si.HasDecoratorInputTransform,"skipLocationChange","skipLocationChange",fi],replaceUrl:[si.HasDecoratorInputTransform,"replaceUrl","replaceUrl",fi],routerLink:"routerLink"},standalone:!0,features:[zu,Ks]});let t=e;return t})();var R0=new $("");function ON(t,...e){return dn([{provide:Qc,multi:!0,useValue:t},[],{provide:Dn,useFactory:P0,deps:[Jc]},{provide:Ku,multi:!0,useFactory:N0},e.map(n=>n.\u0275providers)])}function P0(t){return t.routerState.root}function N0(){let t=A(Fe);return e=>{let n=t.get(Ut);if(e!==n.components[0])return;let r=t.get(Jc),i=t.get(O0);t.get(k0)===1&&r.initialNavigation(),t.get(M0,null,Mu.Optional)?.setUpPreloading(),t.get(R0,null,Mu.Optional)?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var O0=new $("",{factory:()=>new _e}),k0=new $("",{providedIn:"root",factory:()=>1});var M0=new $("");var An=function(t){return t[t.State=0]="State",t[t.Transition=1]="Transition",t[t.Sequence=2]="Sequence",t[t.Group=3]="Group",t[t.Animate=4]="Animate",t[t.Keyframes=5]="Keyframes",t[t.Style=6]="Style",t[t.Trigger=7]="Trigger",t[t.Reference=8]="Reference",t[t.AnimateChild=9]="AnimateChild",t[t.AnimateRef=10]="AnimateRef",t[t.Query=11]="Query",t[t.Stagger=12]="Stagger",t}(An||{}),FN="*";function Zg(t,e){return{type:An.Trigger,name:t,definitions:e,options:{}}}function Xc(t,e=null){return{type:An.Animate,styles:e,timings:t}}function xN(t,e=null){return{type:An.Sequence,steps:t,options:e}}function So(t){return{type:An.Style,styles:t,offset:null}}function bo(t,e,n){return{type:An.State,name:t,styles:e,options:n}}function Zc(t,e,n=null){return{type:An.Transition,expr:t,animation:e,options:n}}var Jg=class{constructor(e=0,n=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+n}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){queueMicrotask(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){let n=e=="start"?this._onStartFns:this._onDoneFns;n.forEach(r=>r()),n.length=0}},Xg=class{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let n=0,r=0,i=0,s=this.players.length;s==0?queueMicrotask(()=>this._onFinish()):this.players.forEach(o=>{o.onDone(()=>{++n==s&&this._onFinish()}),o.onDestroy(()=>{++r==s&&this._onDestroy()}),o.onStart(()=>{++i==s&&this._onStart()})}),this.totalTime=this.players.reduce((o,a)=>Math.max(o,a.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){let n=e*this.totalTime;this.players.forEach(r=>{let i=r.totalTime?Math.min(1,n/r.totalTime):1;r.setPosition(i)})}getPosition(){let e=this.players.reduce((n,r)=>n===null||r.totalTime>n.totalTime?r:n,null);return e!=null?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){let n=e=="start"?this._onStartFns:this._onDoneFns;n.forEach(r=>r()),n.length=0}},LN="!";var em=["toast-component",""];function F0(t,e){if(t&1){let n=Wu();Je(0,"button",5),yn("click",function(){Fu(n);let i=xe();return xu(i.remove())}),Je(1,"span",6),Dt(2,"\xD7"),Tt()()}}function x0(t,e){if(t&1&&(qu(0),Dt(1),Gu()),t&2){let n=xe(2);ue(),vn("[",n.duplicatesCount+1,"]")}}function L0(t,e){if(t&1&&(Je(0,"div"),Dt(1),ci(2,x0,2,1,"ng-container",4),Tt()),t&2){let n=xe();It(n.options.titleClass),gn("aria-label",n.title),ue(),vn(" ",n.title," "),ue(),Se("ngIf",n.duplicatesCount)}}function V0(t,e){if(t&1&&mn(0,"div",7),t&2){let n=xe();It(n.options.messageClass),Se("innerHTML",n.message,ju)}}function U0(t,e){if(t&1&&(Je(0,"div",8),Dt(1),Tt()),t&2){let n=xe();It(n.options.messageClass),gn("aria-label",n.message),ue(),vn(" ",n.message," ")}}function B0(t,e){if(t&1&&(Je(0,"div"),mn(1,"div",9),Tt()),t&2){let n=xe();ue(),ar("width",n.width+"%")}}function $0(t,e){if(t&1){let n=Wu();Je(0,"button",5),yn("click",function(){Fu(n);let i=xe();return xu(i.remove())}),Je(1,"span",6),Dt(2,"\xD7"),Tt()()}}function j0(t,e){if(t&1&&(qu(0),Dt(1),Gu()),t&2){let n=xe(2);ue(),vn("[",n.duplicatesCount+1,"]")}}function z0(t,e){if(t&1&&(Je(0,"div"),Dt(1),ci(2,j0,2,1,"ng-container",4),Tt()),t&2){let n=xe();It(n.options.titleClass),gn("aria-label",n.title),ue(),vn(" ",n.title," "),ue(),Se("ngIf",n.duplicatesCount)}}function q0(t,e){if(t&1&&mn(0,"div",7),t&2){let n=xe();It(n.options.messageClass),Se("innerHTML",n.message,ju)}}function G0(t,e){if(t&1&&(Je(0,"div",8),Dt(1),Tt()),t&2){let n=xe();It(n.options.messageClass),gn("aria-label",n.message),ue(),vn(" ",n.message," ")}}function W0(t,e){if(t&1&&(Je(0,"div"),mn(1,"div",9),Tt()),t&2){let n=xe();ue(),ar("width",n.width+"%")}}var el=class{_attachedHost;component;viewContainerRef;injector;constructor(e,n){this.component=e,this.injector=n}attach(e,n){return this._attachedHost=e,e.attach(this,n)}detach(){let e=this._attachedHost;if(e)return this._attachedHost=void 0,e.detach()}get isAttached(){return this._attachedHost!=null}setAttachedHost(e){this._attachedHost=e}},tl=class{_attachedPortal;_disposeFn;attach(e,n){return this._attachedPortal=e,this.attachComponentPortal(e,n)}detach(){this._attachedPortal&&this._attachedPortal.setAttachedHost(),this._attachedPortal=void 0,this._disposeFn&&(this._disposeFn(),this._disposeFn=void 0)}setDisposeFn(e){this._disposeFn=e}},nl=class{_overlayRef;componentInstance;duplicatesCount=0;_afterClosed=new _e;_activate=new _e;_manualClose=new _e;_resetTimeout=new _e;_countDuplicate=new _e;constructor(e){this._overlayRef=e}manualClose(){this._manualClose.next(),this._manualClose.complete()}manualClosed(){return this._manualClose.asObservable()}timeoutReset(){return this._resetTimeout.asObservable()}countDuplicate(){return this._countDuplicate.asObservable()}close(){this._overlayRef.detach(),this._afterClosed.next(),this._manualClose.next(),this._afterClosed.complete(),this._manualClose.complete(),this._activate.complete(),this._resetTimeout.complete(),this._countDuplicate.complete()}afterClosed(){return this._afterClosed.asObservable()}isInactive(){return this._activate.isStopped}activate(){this._activate.next(),this._activate.complete()}afterActivate(){return this._activate.asObservable()}onDuplicate(e,n){e&&this._resetTimeout.next(),n&&this._countDuplicate.next(++this.duplicatesCount)}},wr=class{toastId;config;message;title;toastType;toastRef;_onTap=new _e;_onAction=new _e;constructor(e,n,r,i,s,o){this.toastId=e,this.config=n,this.message=r,this.title=i,this.toastType=s,this.toastRef=o,this.toastRef.afterClosed().subscribe(()=>{this._onAction.complete(),this._onTap.complete()})}triggerTap(){this._onTap.next(),this.config.tapToDismiss&&this._onTap.complete()}onTap(){return this._onTap.asObservable()}triggerAction(e){this._onAction.next(e)}onAction(){return this._onAction.asObservable()}},tm={maxOpened:0,autoDismiss:!1,newestOnTop:!0,preventDuplicates:!1,countDuplicates:!1,resetTimeoutOnDuplicate:!1,includeTitleDuplicates:!1,iconClasses:{error:"toast-error",info:"toast-info",success:"toast-success",warning:"toast-warning"},closeButton:!1,disableTimeOut:!1,timeOut:5e3,extendedTimeOut:1e3,enableHtml:!1,progressBar:!1,toastClass:"ngx-toastr",positionClass:"toast-top-right",titleClass:"toast-title",messageClass:"toast-message",easing:"ease-in",easeTime:300,tapToDismiss:!0,onActivateTick:!1,progressAnimation:"decreasing"},nm=new $("ToastConfig"),rl=class extends tl{_hostDomElement;_componentFactoryResolver;_appRef;constructor(e,n,r){super(),this._hostDomElement=e,this._componentFactoryResolver=n,this._appRef=r}attachComponentPortal(e,n){let r=this._componentFactoryResolver.resolveComponentFactory(e.component),i;return i=r.create(e.injector),this._appRef.attachView(i.hostView),this.setDisposeFn(()=>{this._appRef.detachView(i.hostView),i.destroy()}),n?this._hostDomElement.insertBefore(this._getComponentRootNode(i),this._hostDomElement.firstChild):this._hostDomElement.appendChild(this._getComponentRootNode(i)),i}_getComponentRootNode(e){return e.hostView.rootNodes[0]}},H0=(()=>{class t{_document=A(he);_containerElement;ngOnDestroy(){this._containerElement&&this._containerElement.parentNode&&this._containerElement.parentNode.removeChild(this._containerElement)}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){let n=this._document.createElement("div");n.classList.add("overlay-container"),n.setAttribute("aria-live","polite"),this._document.body.appendChild(n),this._containerElement=n}static \u0275fac=function(r){return new(r||t)};static \u0275prov=k({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),il=class{_portalHost;constructor(e){this._portalHost=e}attach(e,n=!0){return this._portalHost.attach(e,n)}detach(){return this._portalHost.detach()}},K0=(()=>{class t{_overlayContainer=A(H0);_componentFactoryResolver=A(Fp);_appRef=A(Ut);_document=A(he);_paneElements=new Map;create(n,r){return this._createOverlayRef(this.getPaneElement(n,r))}getPaneElement(n="",r){return this._paneElements.get(r)||this._paneElements.set(r,{}),this._paneElements.get(r)[n]||(this._paneElements.get(r)[n]=this._createPaneElement(n,r)),this._paneElements.get(r)[n]}_createPaneElement(n,r){let i=this._document.createElement("div");return i.id="toast-container",i.classList.add(n),i.classList.add("toast-container"),r?r.getContainerElement().appendChild(i):this._overlayContainer.getContainerElement().appendChild(i),i}_createPortalHost(n){return new rl(n,this._componentFactoryResolver,this._appRef)}_createOverlayRef(n){return new il(this._createPortalHost(n))}static \u0275fac=function(r){return new(r||t)};static \u0275prov=k({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),rm=(()=>{class t{overlay;_injector;sanitizer;ngZone;toastrConfig;currentlyActive=0;toasts=[];overlayContainer;previousToastMessage;index=0;constructor(n,r,i,s,o){this.overlay=r,this._injector=i,this.sanitizer=s,this.ngZone=o,this.toastrConfig=w(w({},n.default),n.config),n.config.iconClasses&&(this.toastrConfig.iconClasses=w(w({},n.default.iconClasses),n.config.iconClasses))}show(n,r,i={},s=""){return this._preBuildNotification(s,n,r,this.applyConfig(i))}success(n,r,i={}){let s=this.toastrConfig.iconClasses.success||"";return this._preBuildNotification(s,n,r,this.applyConfig(i))}error(n,r,i={}){let s=this.toastrConfig.iconClasses.error||"";return this._preBuildNotification(s,n,r,this.applyConfig(i))}info(n,r,i={}){let s=this.toastrConfig.iconClasses.info||"";return this._preBuildNotification(s,n,r,this.applyConfig(i))}warning(n,r,i={}){let s=this.toastrConfig.iconClasses.warning||"";return this._preBuildNotification(s,n,r,this.applyConfig(i))}clear(n){for(let r of this.toasts)if(n!==void 0){if(r.toastId===n){r.toastRef.manualClose();return}}else r.toastRef.manualClose()}remove(n){let r=this._findToast(n);if(!r||(r.activeToast.toastRef.close(),this.toasts.splice(r.index,1),this.currentlyActive=this.currentlyActive-1,!this.toastrConfig.maxOpened||!this.toasts.length))return!1;if(this.currentlyActive<this.toastrConfig.maxOpened&&this.toasts[this.currentlyActive]){let i=this.toasts[this.currentlyActive].toastRef;i.isInactive()||(this.currentlyActive=this.currentlyActive+1,i.activate())}return!0}findDuplicate(n="",r="",i,s){let{includeTitleDuplicates:o}=this.toastrConfig;for(let a of this.toasts){let u=o&&a.title===n;if((!o||u)&&a.message===r)return a.toastRef.onDuplicate(i,s),a}return null}applyConfig(n={}){return w(w({},this.toastrConfig),n)}_findToast(n){for(let r=0;r<this.toasts.length;r++)if(this.toasts[r].toastId===n)return{index:r,activeToast:this.toasts[r]};return null}_preBuildNotification(n,r,i,s){return s.onActivateTick?this.ngZone.run(()=>this._buildNotification(n,r,i,s)):this._buildNotification(n,r,i,s)}_buildNotification(n,r,i,s){if(!s.toastComponent)throw new Error("toastComponent required");let o=this.findDuplicate(i,r,this.toastrConfig.resetTimeoutOnDuplicate&&s.timeOut>0,this.toastrConfig.countDuplicates);if((this.toastrConfig.includeTitleDuplicates&&i||r)&&this.toastrConfig.preventDuplicates&&o!==null)return o;this.previousToastMessage=r;let a=!1;this.toastrConfig.maxOpened&&this.currentlyActive>=this.toastrConfig.maxOpened&&(a=!0,this.toastrConfig.autoDismiss&&this.clear(this.toasts[0].toastId));let u=this.overlay.create(s.positionClass,this.overlayContainer);this.index=this.index+1;let c=r;r&&s.enableHtml&&(c=this.sanitizer.sanitize(Et.HTML,r));let l=new nl(u),h=new wr(this.index,s,c,i,n,l),f=[{provide:wr,useValue:h}],p=Fe.create({providers:f,parent:this._injector}),E=new el(s.toastComponent,p),D=u.attach(E,s.newestOnTop);l.componentInstance=D.instance;let m={toastId:this.index,title:i||"",message:r||"",toastRef:l,onShown:l.afterActivate(),onHidden:l.afterClosed(),onTap:h.onTap(),onAction:h.onAction(),portal:D};return a||(this.currentlyActive=this.currentlyActive+1,setTimeout(()=>{m.toastRef.activate()})),this.toasts.push(m),m}static \u0275fac=function(r){return new(r||t)(R(nm),R(K0),R(Fe),R(lc),R(X))};static \u0275prov=k({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Q0=(()=>{class t{toastrService;toastPackage;ngZone;message;title;options;duplicatesCount;originalTimeout;width=-1;toastClasses="";state;get displayStyle(){if(this.state.value==="inactive")return"none"}timeout;intervalId;hideTime;sub;sub1;sub2;sub3;constructor(n,r,i){this.toastrService=n,this.toastPackage=r,this.ngZone=i,this.message=r.message,this.title=r.title,this.options=r.config,this.originalTimeout=r.config.timeOut,this.toastClasses=`${r.toastType} ${r.config.toastClass}`,this.sub=r.toastRef.afterActivate().subscribe(()=>{this.activateToast()}),this.sub1=r.toastRef.manualClosed().subscribe(()=>{this.remove()}),this.sub2=r.toastRef.timeoutReset().subscribe(()=>{this.resetTimeout()}),this.sub3=r.toastRef.countDuplicate().subscribe(s=>{this.duplicatesCount=s}),this.state={value:"inactive",params:{easeTime:this.toastPackage.config.easeTime,easing:"ease-in"}}}ngOnDestroy(){this.sub.unsubscribe(),this.sub1.unsubscribe(),this.sub2.unsubscribe(),this.sub3.unsubscribe(),clearInterval(this.intervalId),clearTimeout(this.timeout)}activateToast(){this.state=Q(w({},this.state),{value:"active"}),!(this.options.disableTimeOut===!0||this.options.disableTimeOut==="timeOut")&&this.options.timeOut&&(this.outsideTimeout(()=>this.remove(),this.options.timeOut),this.hideTime=new Date().getTime()+this.options.timeOut,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10))}updateProgress(){if(this.width===0||this.width===100||!this.options.timeOut)return;let n=new Date().getTime(),r=this.hideTime-n;this.width=r/this.options.timeOut*100,this.options.progressAnimation==="increasing"&&(this.width=100-this.width),this.width<=0&&(this.width=0),this.width>=100&&(this.width=100)}resetTimeout(){clearTimeout(this.timeout),clearInterval(this.intervalId),this.state=Q(w({},this.state),{value:"active"}),this.outsideTimeout(()=>this.remove(),this.originalTimeout),this.options.timeOut=this.originalTimeout,this.hideTime=new Date().getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10)}remove(){this.state.value!=="removed"&&(clearTimeout(this.timeout),this.state=Q(w({},this.state),{value:"removed"}),this.outsideTimeout(()=>this.toastrService.remove(this.toastPackage.toastId),+this.toastPackage.config.easeTime))}tapToast(){this.state.value!=="removed"&&(this.toastPackage.triggerTap(),this.options.tapToDismiss&&this.remove())}stickAround(){this.state.value!=="removed"&&this.options.disableTimeOut!=="extendedTimeOut"&&(clearTimeout(this.timeout),this.options.timeOut=0,this.hideTime=0,clearInterval(this.intervalId),this.width=0)}delayedHideToast(){this.options.disableTimeOut===!0||this.options.disableTimeOut==="extendedTimeOut"||this.options.extendedTimeOut===0||this.state.value==="removed"||(this.outsideTimeout(()=>this.remove(),this.options.extendedTimeOut),this.options.timeOut=this.options.extendedTimeOut,this.hideTime=new Date().getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10))}outsideTimeout(n,r){this.ngZone?this.ngZone.runOutsideAngular(()=>this.timeout=setTimeout(()=>this.runInsideAngular(n),r)):this.timeout=setTimeout(()=>n(),r)}outsideInterval(n,r){this.ngZone?this.ngZone.runOutsideAngular(()=>this.intervalId=setInterval(()=>this.runInsideAngular(n),r)):this.intervalId=setInterval(()=>n(),r)}runInsideAngular(n){this.ngZone?this.ngZone.run(()=>n()):n()}static \u0275fac=function(r){return new(r||t)(we(rm),we(wr),we(X))};static \u0275cmp=oi({type:t,selectors:[["","toast-component",""]],hostVars:5,hostBindings:function(r,i){r&1&&yn("click",function(){return i.tapToast()})("mouseenter",function(){return i.stickAround()})("mouseleave",function(){return i.delayedHideToast()}),r&2&&(Up("@flyInOut",i.state),It(i.toastClasses),ar("display",i.displayStyle))},standalone:!0,features:[li],attrs:em,decls:5,vars:5,consts:[["type","button","class","toast-close-button","aria-label","Close",3,"click",4,"ngIf"],[3,"class",4,"ngIf"],["role","alert",3,"class","innerHTML",4,"ngIf"],["role","alert",3,"class",4,"ngIf"],[4,"ngIf"],["type","button","aria-label","Close",1,"toast-close-button",3,"click"],["aria-hidden","true"],["role","alert",3,"innerHTML"],["role","alert"],[1,"toast-progress"]],template:function(r,i){r&1&&ci(0,F0,3,0,"button",0)(1,L0,3,5,"div",1)(2,V0,1,3,"div",2)(3,U0,2,4,"div",3)(4,B0,2,2,"div",4),r&2&&(Se("ngIf",i.options.closeButton),ue(),Se("ngIf",i.title),ue(),Se("ngIf",i.message&&i.options.enableHtml),ue(),Se("ngIf",i.message&&!i.options.enableHtml),ue(),Se("ngIf",i.options.progressBar))},dependencies:[Ju],encapsulation:2,data:{animation:[Zg("flyInOut",[bo("inactive",So({opacity:0})),bo("active",So({opacity:1})),bo("removed",So({opacity:0})),Zc("inactive => active",Xc("{{ easeTime }}ms {{ easing }}")),Zc("active => removed",Xc("{{ easeTime }}ms {{ easing }}"))])]}})}return t})(),Y0=Q(w({},tm),{toastComponent:Q0}),YN=(t={})=>dn([{provide:nm,useValue:{default:Y0,config:t}}]);var J0=(()=>{class t{toastrService;toastPackage;appRef;message;title;options;duplicatesCount;originalTimeout;width=-1;toastClasses="";get displayStyle(){return this.state==="inactive"?"none":null}state="inactive";timeout;intervalId;hideTime;sub;sub1;sub2;sub3;constructor(n,r,i){this.toastrService=n,this.toastPackage=r,this.appRef=i,this.message=r.message,this.title=r.title,this.options=r.config,this.originalTimeout=r.config.timeOut,this.toastClasses=`${r.toastType} ${r.config.toastClass}`,this.sub=r.toastRef.afterActivate().subscribe(()=>{this.activateToast()}),this.sub1=r.toastRef.manualClosed().subscribe(()=>{this.remove()}),this.sub2=r.toastRef.timeoutReset().subscribe(()=>{this.resetTimeout()}),this.sub3=r.toastRef.countDuplicate().subscribe(s=>{this.duplicatesCount=s})}ngOnDestroy(){this.sub.unsubscribe(),this.sub1.unsubscribe(),this.sub2.unsubscribe(),this.sub3.unsubscribe(),clearInterval(this.intervalId),clearTimeout(this.timeout)}activateToast(){this.state="active",!(this.options.disableTimeOut===!0||this.options.disableTimeOut==="timeOut")&&this.options.timeOut&&(this.timeout=setTimeout(()=>{this.remove()},this.options.timeOut),this.hideTime=new Date().getTime()+this.options.timeOut,this.options.progressBar&&(this.intervalId=setInterval(()=>this.updateProgress(),10))),this.options.onActivateTick&&this.appRef.tick()}updateProgress(){if(this.width===0||this.width===100||!this.options.timeOut)return;let n=new Date().getTime(),r=this.hideTime-n;this.width=r/this.options.timeOut*100,this.options.progressAnimation==="increasing"&&(this.width=100-this.width),this.width<=0&&(this.width=0),this.width>=100&&(this.width=100)}resetTimeout(){clearTimeout(this.timeout),clearInterval(this.intervalId),this.state="active",this.options.timeOut=this.originalTimeout,this.timeout=setTimeout(()=>this.remove(),this.originalTimeout),this.hideTime=new Date().getTime()+(this.originalTimeout||0),this.width=-1,this.options.progressBar&&(this.intervalId=setInterval(()=>this.updateProgress(),10))}remove(){this.state!=="removed"&&(clearTimeout(this.timeout),this.state="removed",this.timeout=setTimeout(()=>this.toastrService.remove(this.toastPackage.toastId)))}tapToast(){this.state!=="removed"&&(this.toastPackage.triggerTap(),this.options.tapToDismiss&&this.remove())}stickAround(){this.state!=="removed"&&(clearTimeout(this.timeout),this.options.timeOut=0,this.hideTime=0,clearInterval(this.intervalId),this.width=0)}delayedHideToast(){this.options.disableTimeOut===!0||this.options.disableTimeOut==="extendedTimeOut"||this.options.extendedTimeOut===0||this.state==="removed"||(this.timeout=setTimeout(()=>this.remove(),this.options.extendedTimeOut),this.options.timeOut=this.options.extendedTimeOut,this.hideTime=new Date().getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&(this.intervalId=setInterval(()=>this.updateProgress(),10)))}static \u0275fac=function(r){return new(r||t)(we(rm),we(wr),we(Ut))};static \u0275cmp=oi({type:t,selectors:[["","toast-component",""]],hostVars:4,hostBindings:function(r,i){r&1&&yn("click",function(){return i.tapToast()})("mouseenter",function(){return i.stickAround()})("mouseleave",function(){return i.delayedHideToast()}),r&2&&(It(i.toastClasses),ar("display",i.displayStyle))},standalone:!0,features:[li],attrs:em,decls:5,vars:5,consts:[["type","button","class","toast-close-button","aria-label","Close",3,"click",4,"ngIf"],[3,"class",4,"ngIf"],["role","alert",3,"class","innerHTML",4,"ngIf"],["role","alert",3,"class",4,"ngIf"],[4,"ngIf"],["type","button","aria-label","Close",1,"toast-close-button",3,"click"],["aria-hidden","true"],["role","alert",3,"innerHTML"],["role","alert"],[1,"toast-progress"]],template:function(r,i){r&1&&ci(0,$0,3,0,"button",0)(1,z0,3,5,"div",1)(2,q0,1,3,"div",2)(3,G0,2,4,"div",3)(4,W0,2,2,"div",4),r&2&&(Se("ngIf",i.options.closeButton),ue(),Se("ngIf",i.title),ue(),Se("ngIf",i.message&&i.options.enableHtml),ue(),Se("ngIf",i.message&&!i.options.enableHtml),ue(),Se("ngIf",i.options.progressBar))},dependencies:[Ju],encapsulation:2})}return t})(),JN=Q(w({},tm),{toastComponent:J0});var sm=function(t){let e=[],n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},X0=function(t){let e=[],n=0,r=0;for(;n<t.length;){let i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){let s=t[n++],o=t[n++],a=t[n++],u=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{let s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},om={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();let n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){let s=t[i],o=i+1<t.length,a=o?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0,l=s>>2,h=(s&3)<<4|a>>4,f=(a&15)<<2|c>>6,p=c&63;u||(p=64,o||(f=64)),r.push(n[l],n[h],n[f],n[p])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(sm(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):X0(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();let n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){let s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;let c=i<t.length?n[t.charAt(i)]:64;++i;let h=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||c==null||h==null)throw new ol;let f=s<<2|a>>4;if(r.push(f),c!==64){let p=a<<4&240|c>>2;if(r.push(p),h!==64){let E=c<<6&192|h;r.push(E)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},ol=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},Z0=function(t){let e=sm(t);return om.encodeByteArray(e,!0)},Vi=function(t){return Z0(t).replace(/\./g,"")},ul=function(t){try{return om.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function eT(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var tT=()=>eT().__FIREBASE_DEFAULTS__,nT=()=>{if(typeof process>"u"||typeof process.env>"u")return;let t=process.env.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},rT=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=t&&ul(t[1]);return e&&JSON.parse(e)},Ro=()=>{try{return tT()||nT()||rT()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},cl=t=>{var e,n;return(n=(e=Ro())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},am=t=>{let e=cl(t);if(!e)return;let n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},ll=()=>{var t;return(t=Ro())===null||t===void 0?void 0:t.config},hl=t=>{var e;return(e=Ro())===null||e===void 0?void 0:e[`_${t}`]};var Co=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}};function um(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Vi(JSON.stringify(n)),Vi(JSON.stringify(o)),""].join(".")}function ce(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function cm(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ce())}function iT(){var t;let e=(t=Ro())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function lm(){let t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function hm(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function dm(){let t=ce();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function fm(){return!iT()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function dl(){try{return typeof indexedDB=="object"}catch{return!1}}function pm(){return new Promise((t,e)=>{try{let n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}var sT="FirebaseError",Ue=class t extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=sT,Object.setPrototypeOf(this,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,At.prototype.create)}},At=class{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){let r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?oT(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new Ue(i,a,r)}};function oT(t,e){return t.replace(aT,(n,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var aT=/\{\$([^}]+)}/g;function gm(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Sn(t,e){if(t===e)return!0;let n=Object.keys(t),r=Object.keys(e);for(let i of n){if(!r.includes(i))return!1;let s=t[i],o=e[i];if(im(s)&&im(o)){if(!Sn(s,o))return!1}else if(s!==o)return!1}for(let i of r)if(!n.includes(i))return!1;return!0}function im(t){return t!==null&&typeof t=="object"}function Ui(t){let e=[];for(let[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Er(t){let e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){let[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function Ir(t){let e=t.indexOf("?");if(!e)return"";let n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function mm(t,e){let n=new al(t,e);return n.subscribe.bind(n)}var al=class{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");uT(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=sl),i.error===void 0&&(i.error=sl),i.complete===void 0&&(i.complete=sl);let s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function uT(t,e){if(typeof t!="object"||t===null)return!1;for(let n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function sl(){}var eO=4*60*60*1e3;function re(t){return t&&t._delegate?t._delegate:t}var He=class{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var bn="[DEFAULT]";var fl=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){let r=new Co;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(n=e?.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(lT(e))try{this.getOrInitializeService({instanceIdentifier:bn})}catch{}for(let[n,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(n);try{let s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=bn){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return d(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=bn){return this.instances.has(e)}getOptions(e=bn){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(let[s,o]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){var r;let i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);let o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){let r=this.onInitCallbacks.get(n);if(r)for(let i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:cT(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=bn){return this.component?this.component.multipleInstances?e:bn:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function cT(t){return t===bn?void 0:t}function lT(t){return t.instantiationMode==="EAGER"}var Po=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let n=new fl(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}};var hT=[],x=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}(x||{}),dT={debug:x.DEBUG,verbose:x.VERBOSE,info:x.INFO,warn:x.WARN,error:x.ERROR,silent:x.SILENT},fT=x.INFO,pT={[x.DEBUG]:"log",[x.VERBOSE]:"log",[x.INFO]:"info",[x.WARN]:"warn",[x.ERROR]:"error"},gT=(t,e,...n)=>{if(e<t.logLevel)return;let r=new Date().toISOString(),i=pT[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},Wt=class{constructor(e){this.name=e,this._logLevel=fT,this._logHandler=gT,this._userLogHandler=null,hT.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in x))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?dT[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,x.DEBUG,...e),this._logHandler(this,x.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,x.VERBOSE,...e),this._logHandler(this,x.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,x.INFO,...e),this._logHandler(this,x.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,x.WARN,...e),this._logHandler(this,x.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,x.ERROR,...e),this._logHandler(this,x.ERROR,...e)}};var mT=(t,e)=>e.some(n=>t instanceof n),ym,vm;function yT(){return ym||(ym=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function vT(){return vm||(vm=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var _m=new WeakMap,gl=new WeakMap,wm=new WeakMap,pl=new WeakMap,yl=new WeakMap;function _T(t){let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(ot(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&_m.set(n,t)}).catch(()=>{}),yl.set(e,t),e}function wT(t){if(gl.has(t))return;let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});gl.set(t,e)}var ml={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return gl.get(t);if(e==="objectStoreNames")return t.objectStoreNames||wm.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ot(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function Em(t){ml=t(ml)}function ET(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){let r=t.call(No(this),e,...n);return wm.set(r,e.sort?e.sort():[e]),ot(r)}:vT().includes(t)?function(...e){return t.apply(No(this),e),ot(_m.get(this))}:function(...e){return ot(t.apply(No(this),e))}}function IT(t){return typeof t=="function"?ET(t):(t instanceof IDBTransaction&&wT(t),mT(t,yT())?new Proxy(t,ml):t)}function ot(t){if(t instanceof IDBRequest)return _T(t);if(pl.has(t))return pl.get(t);let e=IT(t);return e!==t&&(pl.set(t,e),yl.set(e,t)),e}var No=t=>yl.get(t);function Tm(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){let o=indexedDB.open(t,e),a=ot(o);return r&&o.addEventListener("upgradeneeded",u=>{r(ot(o.result),u.oldVersion,u.newVersion,ot(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),a.then(u=>{s&&u.addEventListener("close",()=>s()),i&&u.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}var TT=["get","getKey","getAll","getAllKeys","count"],DT=["put","add","delete","clear"],vl=new Map;function Im(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(vl.get(e))return vl.get(e);let n=e.replace(/FromIndex$/,""),r=e!==n,i=DT.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||TT.includes(n)))return;let s=function(o,...a){return d(this,null,function*(){let u=this.transaction(o,i?"readwrite":"readonly"),c=u.store;return r&&(c=c.index(a.shift())),(yield Promise.all([c[n](...a),i&&u.done]))[0]})};return vl.set(e,s),s}Em(t=>Q(w({},t),{get:(e,n,r)=>Im(e,n)||t.get(e,n,r),has:(e,n)=>!!Im(e,n)||t.has(e,n)}));var wl=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(AT(n)){let r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}};function AT(t){let e=t.getComponent();return e?.type==="VERSION"}var El="@firebase/app",Dm="0.10.2";var Cn=new Wt("@firebase/app"),ST="@firebase/app-compat",bT="@firebase/analytics-compat",CT="@firebase/analytics",RT="@firebase/app-check-compat",PT="@firebase/app-check",NT="@firebase/auth",OT="@firebase/auth-compat",kT="@firebase/database",MT="@firebase/database-compat",FT="@firebase/functions",xT="@firebase/functions-compat",LT="@firebase/installations",VT="@firebase/installations-compat",UT="@firebase/messaging",BT="@firebase/messaging-compat",$T="@firebase/performance",jT="@firebase/performance-compat",zT="@firebase/remote-config",qT="@firebase/remote-config-compat",GT="@firebase/storage",WT="@firebase/storage-compat",HT="@firebase/firestore",KT="@firebase/firestore-compat",QT="firebase",YT="10.11.1";var Il="[DEFAULT]",JT={[El]:"fire-core",[ST]:"fire-core-compat",[CT]:"fire-analytics",[bT]:"fire-analytics-compat",[PT]:"fire-app-check",[RT]:"fire-app-check-compat",[NT]:"fire-auth",[OT]:"fire-auth-compat",[kT]:"fire-rtdb",[MT]:"fire-rtdb-compat",[FT]:"fire-fn",[xT]:"fire-fn-compat",[LT]:"fire-iid",[VT]:"fire-iid-compat",[UT]:"fire-fcm",[BT]:"fire-fcm-compat",[$T]:"fire-perf",[jT]:"fire-perf-compat",[zT]:"fire-rc",[qT]:"fire-rc-compat",[GT]:"fire-gcs",[WT]:"fire-gcs-compat",[HT]:"fire-fst",[KT]:"fire-fst-compat","fire-js":"fire-js",[QT]:"fire-js-all"};var Bi=new Map,XT=new Map,Tl=new Map;function Am(t,e){try{t.container.addComponent(e)}catch(n){Cn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Kt(t){let e=t.name;if(Tl.has(e))return Cn.debug(`There were multiple attempts to register component ${e}.`),!1;Tl.set(e,t);for(let n of Bi.values())Am(n,t);for(let n of XT.values())Am(n,t);return!0}function ji(t,e){let n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Xe(t){return t.settings!==void 0}var ZT={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ht=new At("app","Firebase",ZT);var Dl=class{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new He("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ht.create("app-deleted",{appName:this._name})}};var Qt=YT;function bl(t,e={}){let n=t;typeof e!="object"&&(e={name:e});let r=Object.assign({name:Il,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Ht.create("bad-app-name",{appName:String(i)});if(n||(n=ll()),!n)throw Ht.create("no-options");let s=Bi.get(i);if(s){if(Sn(n,s.options)&&Sn(r,s.config))return s;throw Ht.create("duplicate-app",{appName:i})}let o=new Po(i);for(let u of Tl.values())o.addComponent(u);let a=new Dl(n,r,o);return Bi.set(i,a),a}function Tr(t=Il){let e=Bi.get(t);if(!e&&t===Il&&ll())return bl();if(!e)throw Ht.create("no-app",{appName:t});return e}function Oo(){return Array.from(Bi.values())}function le(t,e,n){var r;let i=(r=JT[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);let s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){let a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Cn.warn(a.join(" "));return}Kt(new He(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var eD="firebase-heartbeat-database",tD=1,$i="firebase-heartbeat-store",_l=null;function Rm(){return _l||(_l=Tm(eD,tD,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore($i)}catch(n){console.warn(n)}}}}).catch(t=>{throw Ht.create("idb-open",{originalErrorMessage:t.message})})),_l}function nD(t){return d(this,null,function*(){try{let n=(yield Rm()).transaction($i),r=yield n.objectStore($i).get(Pm(t));return yield n.done,r}catch(e){if(e instanceof Ue)Cn.warn(e.message);else{let n=Ht.create("idb-get",{originalErrorMessage:e?.message});Cn.warn(n.message)}}})}function Sm(t,e){return d(this,null,function*(){try{let r=(yield Rm()).transaction($i,"readwrite");yield r.objectStore($i).put(e,Pm(t)),yield r.done}catch(n){if(n instanceof Ue)Cn.warn(n.message);else{let r=Ht.create("idb-set",{originalErrorMessage:n?.message});Cn.warn(r.message)}}})}function Pm(t){return`${t.name}!${t.options.appId}`}var rD=1024,iD=30*24*60*60*1e3,Al=class{constructor(e){this.container=e,this._heartbeatsCache=null;let n=this.container.getProvider("app").getImmediate();this._storage=new Sl(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return d(this,null,function*(){var e,n;let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=bm();if(!(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)))return this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{let a=new Date(o.date).valueOf();return Date.now()-a<=iD}),this._storage.overwrite(this._heartbeatsCache)})}getHeartbeatsHeader(){return d(this,null,function*(){var e;if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let n=bm(),{heartbeatsToSend:r,unsentEntries:i}=sD(this._heartbeatsCache.heartbeats),s=Vi(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s})}};function bm(){return new Date().toISOString().substring(0,10)}function sD(t,e=rD){let n=[],r=t.slice();for(let i of t){let s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),Cm(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Cm(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}var Sl=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return d(this,null,function*(){return dl()?pm().then(()=>!0).catch(()=>!1):!1})}read(){return d(this,null,function*(){if(yield this._canUseIndexedDBPromise){let n=yield nD(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return d(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return Sm(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return d(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return Sm(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function Cm(t){return Vi(JSON.stringify({version:2,heartbeats:t})).length}function oD(t){Kt(new He("platform-logger",e=>new wl(e),"PRIVATE")),Kt(new He("heartbeat",e=>new Al(e),"PRIVATE")),le(El,Dm,t),le(El,Dm,"esm2017"),le("fire-js","")}oD("");var aD="firebase",uD="10.11.1";le(aD,uD,"app");var Pn=new hi("ANGULARFIRE2_VERSION");function Mo(t,e,n){if(e){if(e.length===1)return e[0];let s=e.filter(o=>o.app===n);if(s.length===1)return s[0]}return n.container.getProvider(t).getImmediate({optional:!0})}var zi=(t,e)=>{let n=e?[e]:Oo(),r=[];return n.forEach(i=>{i.container.getProvider(t).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r},Ar=class{constructor(){return zi(cD)}},cD="app-check";function Dr(){}var ko=class{zone;delegate;constructor(e,n=pp){this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,r){let i=this.zone,s=function(o){i.runGuarded(()=>{e.apply(this,[o])})};return this.delegate.schedule(s,n,r)}},Cl=class{zone;task=null;constructor(e){this.zone=e}call(e,n){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Dr,{},Dr,Dr)),n.pipe(ae({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},Sr=(()=>{class t{ngZone;outsideAngular;insideAngular;constructor(n){this.ngZone=n,this.outsideAngular=n.runOutsideAngular(()=>new ko(Zone.current)),this.insideAngular=n.run(()=>new ko(Zone.current,fp)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||t)(R(X))};static \u0275prov=k({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Fo(){let t=globalThis.\u0275AngularFireScheduler;if(!t)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return t}function lD(t){return Fo().ngZone.runOutsideAngular(()=>t())}function Rn(t){return Fo().ngZone.run(()=>t())}function hD(t){return dD(Fo())(t)}function dD(t){return function(n){return n=n.lift(new Cl(t.ngZone)),n.pipe(bu(t.outsideAngular),Su(t.insideAngular))}}var fD=(t,e)=>function(){let r=arguments;return e&&setTimeout(()=>{e.state==="scheduled"&&e.invoke()},10),Rn(()=>t.apply(void 0,r))},Ee=(t,e)=>function(){let n,r=arguments;for(let s=0;s<arguments.length;s++)typeof r[s]=="function"&&(e&&(n||=Rn(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Dr,{},Dr,Dr))),r[s]=fD(r[s],n));let i=lD(()=>t.apply(this,r));if(!e)if(i instanceof cn){let s=Fo();return i.pipe(bu(s.outsideAngular),Su(s.insideAngular))}else return Rn(()=>i);return i instanceof cn?i.pipe(hD):i instanceof Promise?Rn(()=>new Promise((s,o)=>i.then(a=>Rn(()=>s(a)),a=>Rn(()=>o(a))))):typeof i=="function"&&n?function(){return setTimeout(()=>{n&&n.state==="scheduled"&&n.invoke()},10),i.apply(this,arguments)}:Rn(()=>i)};var St=class{constructor(e){return e}},Nn=class{constructor(){return Oo()}};function pD(t){return t&&t.length===1?t[0]:new St(Tr())}var Rl=new $("angularfire2._apps"),gD={provide:St,useFactory:pD,deps:[[new Ne,Rl]]},mD={provide:Nn,deps:[[new Ne,Rl]]};function yD(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new St(r)}}var vD=(()=>{class t{constructor(n){le("angularfire",Pn.full,"core"),le("angularfire",Pn.full,"app"),le("angular",Bp.full,n.toString())}static \u0275fac=function(r){return new(r||t)(R(rt))};static \u0275mod=Me({type:t});static \u0275inj=ke({providers:[gD,mD]})}return t})();function VO(t,...e){return{ngModule:vD,providers:[{provide:Rl,useFactory:yD(t),multi:!0,deps:[X,Fe,Sr,...e]}]}}var UO=Ee(bl,!0);function Hm(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var Km=Hm,Qm=new At("auth","Firebase",Hm());var $o=new Wt("@firebase/auth");function _D(t,...e){$o.logLevel<=x.WARN&&$o.warn(`Auth (${Qt}): ${t}`,...e)}function Lo(t,...e){$o.logLevel<=x.ERROR&&$o.error(`Auth (${Qt}): ${t}`,...e)}function ut(t,...e){throw Xl(t,...e)}function On(t,...e){return Xl(t,...e)}function Ym(t,e,n){let r=Object.assign(Object.assign({},Km()),{[e]:n});return new At("auth","Firebase",r).create(e,{appName:t.name})}function Rt(t){return Ym(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Xl(t,...e){if(typeof t!="string"){let n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return Qm.create(t,...e)}function b(t,e,...n){if(!t)throw Xl(e,...n)}function bt(t){let e="INTERNAL ASSERTION FAILED: "+t;throw Lo(e),new Error(e)}function Jt(t,e){t||bt(e)}function kl(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function wD(){return Nm()==="http:"||Nm()==="https:"}function Nm(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}function ED(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(wD()||lm()||"connection"in navigator)?navigator.onLine:!0}function ID(){if(typeof navigator>"u")return null;let t=navigator;return t.languages&&t.languages[0]||t.language||null}var kn=class{constructor(e,n){this.shortDelay=e,this.longDelay=n,Jt(n>e,"Short delay should be less than long delay!"),this.isMobile=cm()||hm()}get(){return ED()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function Zl(t,e){Jt(t.emulator,"Emulator should always be set here");let{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}var jo=class{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;bt("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;bt("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;bt("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var TD={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var DD=new kn(3e4,6e4);function Xt(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}function Zt(s,o,a,u){return d(this,arguments,function*(t,e,n,r,i={}){return Jm(t,i,()=>d(this,null,function*(){let c={},l={};r&&(e==="GET"?l=r:c={body:JSON.stringify(r)});let h=Ui(Object.assign({key:t.config.apiKey},l)).slice(1),f=yield t._getAdditionalHeaders();return f["Content-Type"]="application/json",t.languageCode&&(f["X-Firebase-Locale"]=t.languageCode),jo.fetch()(Xm(t,t.config.apiHost,n,h),Object.assign({method:e,headers:f,referrerPolicy:"no-referrer"},c))}))})}function Jm(t,e,n){return d(this,null,function*(){t._canInitEmulator=!1;let r=Object.assign(Object.assign({},TD),e);try{let i=new Ml(t),s=yield Promise.race([n(),i.promise]);i.clearNetworkTimeout();let o=yield s.json();if("needConfirmation"in o)throw xo(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{let a=s.ok?o.errorMessage:o.error.message,[u,c]=a.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw xo(t,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw xo(t,"email-already-in-use",o);if(u==="USER_DISABLED")throw xo(t,"user-disabled",o);let l=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw Ym(t,l,c);ut(t,l)}}catch(i){if(i instanceof Ue)throw i;ut(t,"network-request-failed",{message:String(i)})}})}function Ji(s,o,a,u){return d(this,arguments,function*(t,e,n,r,i={}){let c=yield Zt(t,e,n,r,i);return"mfaPendingCredential"in c&&ut(t,"multi-factor-auth-required",{_serverResponse:c}),c})}function Xm(t,e,n,r){let i=`${e}${n}?${r}`;return t.config.emulator?Zl(t.config,i):`${t.config.apiScheme}://${i}`}function AD(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}var Ml=class{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(On(this.auth,"network-request-failed")),DD.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}};function xo(t,e,n){let r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);let i=On(t,e,r);return i.customData._tokenResponse=n,i}function Om(t){return t!==void 0&&t.enterprise!==void 0}var Fl=class{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(let n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return AD(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}};function SD(t,e){return d(this,null,function*(){return Zt(t,"GET","/v2/recaptchaConfig",Xt(t,e))})}function bD(t,e){return d(this,null,function*(){return Zt(t,"POST","/v1/accounts:delete",e)})}function Zm(t,e){return d(this,null,function*(){return Zt(t,"POST","/v1/accounts:lookup",e)})}function qi(t){if(t)try{let e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function eh(t,e=!1){return d(this,null,function*(){let n=re(t),r=yield n.getIdToken(e),i=th(r);b(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");let s=typeof i.firebase=="object"?i.firebase:void 0,o=s?.sign_in_provider;return{claims:i,token:r,authTime:qi(Pl(i.auth_time)),issuedAtTime:qi(Pl(i.iat)),expirationTime:qi(Pl(i.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}})}function Pl(t){return Number(t)*1e3}function th(t){let[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Lo("JWT malformed, contained fewer than 3 sections"),null;try{let i=ul(n);return i?JSON.parse(i):(Lo("Failed to decode base64 JWT payload"),null)}catch(i){return Lo("Caught error parsing JWT payload as JSON",i?.toString()),null}}function km(t){let e=th(t);return b(e,"internal-error"),b(typeof e.exp<"u","internal-error"),b(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function Wi(t,e,n=!1){return d(this,null,function*(){if(n)return e;try{return yield e}catch(r){throw r instanceof Ue&&CD(r)&&t.auth.currentUser===t&&(yield t.auth.signOut()),r}})}function CD({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}var xl=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let n=this.getInterval(e);this.timerId=setTimeout(()=>d(this,null,function*(){yield this.iteration()}),n)}iteration(){return d(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var Hi=class{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=qi(this.lastLoginAt),this.creationTime=qi(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function zo(t){return d(this,null,function*(){var e;let n=t.auth,r=yield t.getIdToken(),i=yield Wi(t,Zm(n,{idToken:r}));b(i?.users.length,n,"internal-error");let s=i.users[0];t._notifyReloadListener(s);let o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?ey(s.providerUserInfo):[],a=RD(t.providerData,o),u=t.isAnonymous,c=!(t.email&&s.passwordHash)&&!a?.length,l=u?c:!1,h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Hi(s.createdAt,s.lastLoginAt),isAnonymous:l};Object.assign(t,h)})}function nh(t){return d(this,null,function*(){let e=re(t);yield zo(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function RD(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function ey(t){return t.map(e=>{var{providerId:n}=e,r=Au(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function PD(t,e){return d(this,null,function*(){let n=yield Jm(t,{},()=>d(this,null,function*(){let r=Ui({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=Xm(t,i,"/v1/token",`key=${s}`),a=yield t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",jo.fetch()(o,{method:"POST",headers:a,body:r})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}})}function ND(t,e){return d(this,null,function*(){return Zt(t,"POST","/v2/accounts:revokeToken",Xt(t,e))})}var Gi=class t{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){b(e.idToken,"internal-error"),b(typeof e.idToken<"u","internal-error"),b(typeof e.refreshToken<"u","internal-error");let n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):km(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){b(e.length!==0,"internal-error");let n=km(e);this.updateTokensAndExpiration(e,null,n)}getToken(e,n=!1){return d(this,null,function*(){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(b(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,n){return d(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:s}=yield PD(e,n);this.updateTokensAndExpiration(r,i,Number(s))})}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){let{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new t;return r&&(b(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(b(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(b(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new t,this.toJSON())}_performRefresh(){return bt("not implemented")}};function Yt(t,e){b(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}var br=class t{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=Au(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new xl(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Hi(s.createdAt||void 0,s.lastLoginAt||void 0)}getIdToken(e){return d(this,null,function*(){let n=yield Wi(this,this.stsTokenManager.getToken(this.auth,e));return b(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n})}getIdTokenResult(e){return eh(this,e)}reload(){return nh(this)}_assign(e){this!==e&&(b(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let n=new t(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){b(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,n=!1){return d(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&(yield zo(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return d(this,null,function*(){if(Xe(this.auth.app))return Promise.reject(Rt(this.auth));let e=yield this.getIdToken();return yield Wi(this,bD(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,a,u,c,l;let h=(r=n.displayName)!==null&&r!==void 0?r:void 0,f=(i=n.email)!==null&&i!==void 0?i:void 0,p=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,E=(o=n.photoURL)!==null&&o!==void 0?o:void 0,D=(a=n.tenantId)!==null&&a!==void 0?a:void 0,m=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,T=(c=n.createdAt)!==null&&c!==void 0?c:void 0,U=(l=n.lastLoginAt)!==null&&l!==void 0?l:void 0,{uid:K,emailVerified:j,isAnonymous:Re,providerData:ne,stsTokenManager:Ye}=n;b(K&&Ye,e,"internal-error");let er=Gi.fromJSON(this.name,Ye);b(typeof K=="string",e,"internal-error"),Yt(h,e.name),Yt(f,e.name),b(typeof j=="boolean",e,"internal-error"),b(typeof Re=="boolean",e,"internal-error"),Yt(p,e.name),Yt(E,e.name),Yt(D,e.name),Yt(m,e.name),Yt(T,e.name),Yt(U,e.name);let ni=new t({uid:K,auth:e,email:f,emailVerified:j,displayName:h,isAnonymous:Re,photoURL:E,phoneNumber:p,tenantId:D,stsTokenManager:er,createdAt:T,lastLoginAt:U});return ne&&Array.isArray(ne)&&(ni.providerData=ne.map(Hs=>Object.assign({},Hs))),m&&(ni._redirectEventId=m),ni}static _fromIdTokenResponse(e,n,r=!1){return d(this,null,function*(){let i=new Gi;i.updateFromServerResponse(n);let s=new t({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield zo(s),s})}static _fromGetAccountInfoResponse(e,n,r){return d(this,null,function*(){let i=n.users[0];b(i.localId!==void 0,"internal-error");let s=i.providerUserInfo!==void 0?ey(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!s?.length,a=new Gi;a.updateFromIdToken(r);let u=new t({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),c={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new Hi(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!s?.length};return Object.assign(u,c),u})}};var Mm=new Map;function Ct(t){Jt(t instanceof Function,"Expected a class definition");let e=Mm.get(t);return e?(Jt(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Mm.set(t,e),e)}var OD=(()=>{class t{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return d(this,null,function*(){return!0})}_set(n,r){return d(this,null,function*(){this.storage[n]=r})}_get(n){return d(this,null,function*(){let r=this.storage[n];return r===void 0?null:r})}_remove(n){return d(this,null,function*(){delete this.storage[n]})}_addListener(n,r){}_removeListener(n,r){}}return t.type="NONE",t})(),Ll=OD;function Vo(t,e,n){return`firebase:${t}:${e}:${n}`}var qo=class t{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;let{config:i,name:s}=this.auth;this.fullUserKey=Vo(this.userKey,i.apiKey,s),this.fullPersistenceKey=Vo("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return d(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);return e?br._fromJSON(this.auth,e):null})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return d(this,null,function*(){if(this.persistence===e)return;let n=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,n,r="authUser"){return d(this,null,function*(){if(!n.length)return new t(Ct(Ll),e,r);let i=(yield Promise.all(n.map(c=>d(this,null,function*(){if(yield c._isAvailable())return c})))).filter(c=>c),s=i[0]||Ct(Ll),o=Vo(r,e.config.apiKey,e.name),a=null;for(let c of n)try{let l=yield c._get(o);if(l){let h=br._fromJSON(e,l);c!==s&&(a=h),s=c;break}}catch{}let u=i.filter(c=>c._shouldAllowMigration);return!s._shouldAllowMigration||!u.length?new t(s,e,r):(s=u[0],a&&(yield s._set(o,a.toJSON())),yield Promise.all(n.map(c=>d(this,null,function*(){if(c!==s)try{yield c._remove(o)}catch{}}))),new t(s,e,r))})}};function Fm(t){let e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(ry(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(ty(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(sy(e))return"Blackberry";if(oy(e))return"Webos";if(rh(e))return"Safari";if((e.includes("chrome/")||ny(e))&&!e.includes("edge/"))return"Chrome";if(iy(e))return"Android";{let n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function ty(t=ce()){return/firefox\//i.test(t)}function rh(t=ce()){let e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function ny(t=ce()){return/crios\//i.test(t)}function ry(t=ce()){return/iemobile/i.test(t)}function iy(t=ce()){return/android/i.test(t)}function sy(t=ce()){return/blackberry/i.test(t)}function oy(t=ce()){return/webos/i.test(t)}function Xo(t=ce()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function kD(t=ce()){var e;return Xo(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function MD(){return dm()&&document.documentMode===10}function ay(t=ce()){return Xo(t)||iy(t)||oy(t)||sy(t)||/windows phone/i.test(t)||ry(t)}function FD(){try{return!!(window&&window!==window.top)}catch{return!1}}function uy(t,e=[]){let n;switch(t){case"Browser":n=Fm(ce());break;case"Worker":n=`${Fm(ce())}-${t}`;break;default:n=t}let r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Qt}/${r}`}var Vl=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){let r=s=>new Promise((o,a)=>{try{let u=e(s);o(u)}catch(u){a(u)}});r.onAbort=n,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return d(this,null,function*(){if(this.auth.currentUser===e)return;let n=[];try{for(let r of this.queue)yield r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(let i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function xD(n){return d(this,arguments,function*(t,e={}){return Zt(t,"GET","/v2/passwordPolicy",Xt(t,e))})}var LD=6,Ul=class{constructor(e){var n,r,i,s;let o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:LD,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,o,a;let u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(s=u.containsUppercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(o=u.containsNumericCharacter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(a=u.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),u}validatePasswordLengthOptions(e,n){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}};var Bl=class{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Go(this),this.idTokenSubscription=new Go(this),this.beforeStateQueue=new Vl(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Qm,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Ct(n)),this._initializationPromise=this.queue(()=>d(this,null,function*(){var r,i;if(!this._deleted&&(this.persistenceManager=yield qo.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return d(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return d(this,null,function*(){try{let n=yield Zm(this,{idToken:e}),r=yield br._fromGetAccountInfoResponse(this,n,e);yield this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return d(this,null,function*(){var n;if(Xe(this.app)){let o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,s=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i?._redirectEventId,u=yield this.tryRedirectSignIn(e);(!o||o===a)&&u?.user&&(i=u.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{yield this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return b(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return d(this,null,function*(){let n=null;try{n=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return n})}reloadAndSetCurrentUserOrClear(e){return d(this,null,function*(){try{yield zo(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=ID()}_delete(){return d(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return d(this,null,function*(){if(Xe(this.app))return Promise.reject(Rt(this));let n=e?re(e):null;return n&&b(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))})}_updateCurrentUser(e,n=!1){return d(this,null,function*(){if(!this._deleted)return e&&b(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>d(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return d(this,null,function*(){return Xe(this.app)?Promise.reject(Rt(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return Xe(this.app)?Promise.reject(Rt(this)):this.queue(()=>d(this,null,function*(){yield this.assertedPersistence.setPersistence(Ct(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return d(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return d(this,null,function*(){let e=yield xD(this),n=new Ul(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new At("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},n)}})}revokeAccessToken(e){return d(this,null,function*(){if(this.currentUser){let n=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),yield ND(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,n){return d(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return d(this,null,function*(){if(!this.redirectPersistenceManager){let n=e&&Ct(e)||this._popupRedirectResolver;b(n,this,"argument-error"),this.redirectPersistenceManager=yield qo.create(this,[Ct(n._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return d(this,null,function*(){var n,r;return this._isInitialized&&(yield this.queue(()=>d(this,null,function*(){}))),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return d(this,null,function*(){if(e===this.currentUser)return this.queue(()=>d(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};let s=typeof n=="function"?n:n.next.bind(n),o=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(b(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){let u=e.addObserver(n,r,i);return()=>{o=!0,u()}}else{let u=e.addObserver(n);return()=>{o=!0,u()}}}directlySetCurrentUser(e){return d(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return b(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=uy(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return d(this,null,function*(){var e;let n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(n["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n})}_getAppCheckToken(){return d(this,null,function*(){var e;let n=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return n?.error&&_D(`Error while retrieving App Check token: ${n.error}`),n?.token})}};function Fn(t){return re(t)}var Go=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=mm(n=>this.observer=n)}get next(){return b(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var Zo={loadJS(){return d(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function VD(t){Zo=t}function cy(t){return Zo.loadJS(t)}function UD(){return Zo.recaptchaEnterpriseScript}function BD(){return Zo.gapiScript}function ly(t){return`__${t}${Math.floor(Math.random()*1e6)}`}var $D="recaptcha-enterprise",jD="NO_RECAPTCHA",$l=class{constructor(e){this.type=$D,this.auth=Fn(e)}verify(e="verify",n=!1){return d(this,null,function*(){function r(s){return d(this,null,function*(){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise((o,a)=>d(this,null,function*(){SD(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{let c=new Fl(u);return s.tenantId==null?s._agentRecaptchaConfig=c:s._tenantRecaptchaConfigs[s.tenantId]=c,o(c.siteKey)}}).catch(u=>{a(u)})}))})}function i(s,o,a){let u=window.grecaptcha;Om(u)?u.enterprise.ready(()=>{u.enterprise.execute(s,{action:e}).then(c=>{o(c)}).catch(()=>{o(jD)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,o)=>{r(this.auth).then(a=>{if(!n&&Om(window.grecaptcha))i(a,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let u=UD();u.length!==0&&(u+=a),cy(u).then(()=>{i(a,s,o)}).catch(c=>{o(c)})}}).catch(a=>{o(a)})})})}};function xm(t,e,n,r=!1){return d(this,null,function*(){let i=new $l(t),s;try{s=yield i.verify(n)}catch{s=yield i.verify(n,!0)}let o=Object.assign({},e);return r?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o})}function jl(t,e,n,r){return d(this,null,function*(){var i;if(!((i=t._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){let s=yield xm(t,e,n,n==="getOobCode");return r(t,s)}else return r(t,e).catch(s=>d(this,null,function*(){if(s.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);let o=yield xm(t,e,n,n==="getOobCode");return r(t,o)}else return Promise.reject(s)}))})}function ih(t,e){let n=ji(t,"auth");if(n.isInitialized()){let i=n.getImmediate(),s=n.getOptions();if(Sn(s,e??{}))return i;ut(i,"already-initialized")}return n.initialize({options:e})}function zD(t,e){let n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(Ct);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}function sh(t,e,n){let r=Fn(t);b(r._canInitEmulator,r,"emulator-config-failed"),b(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!n?.disableWarnings,s=hy(e),{host:o,port:a}=qD(e),u=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${u}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||GD()}function hy(t){let e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function qD(t){let e=hy(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};let r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let s=i[1];return{host:s,port:Lm(r.substr(s.length+1))}}else{let[s,o]=r.split(":");return{host:s,port:Lm(o)}}}function Lm(t){if(!t)return null;let e=Number(t);return isNaN(e)?null:e}function GD(){function t(){let e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}var Ki=class{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return bt("not implemented")}_getIdTokenResponse(e){return bt("not implemented")}_linkToIdToken(e,n){return bt("not implemented")}_getReauthenticationResolver(e){return bt("not implemented")}};function WD(t,e){return d(this,null,function*(){return Zt(t,"POST","/v1/accounts:signUp",e)})}function HD(t,e){return d(this,null,function*(){return Ji(t,"POST","/v1/accounts:signInWithPassword",Xt(t,e))})}function KD(t,e){return d(this,null,function*(){return Ji(t,"POST","/v1/accounts:signInWithEmailLink",Xt(t,e))})}function QD(t,e){return d(this,null,function*(){return Ji(t,"POST","/v1/accounts:signInWithEmailLink",Xt(t,e))})}var Qi=class t extends Ki{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new t(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new t(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){let n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}_getIdTokenResponse(e){return d(this,null,function*(){switch(this.signInMethod){case"password":let n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return jl(e,n,"signInWithPassword",HD);case"emailLink":return KD(e,{email:this._email,oobCode:this._password});default:ut(e,"internal-error")}})}_linkToIdToken(e,n){return d(this,null,function*(){switch(this.signInMethod){case"password":let r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return jl(e,r,"signUpPassword",WD);case"emailLink":return QD(e,{idToken:n,email:this._email,oobCode:this._password});default:ut(e,"internal-error")}})}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}};function Nl(t,e){return d(this,null,function*(){return Ji(t,"POST","/v1/accounts:signInWithIdp",Xt(t,e))})}function YD(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function JD(t){let e=Er(Ir(t)).link,n=e?Er(Ir(e)).deep_link_id:null,r=Er(Ir(t)).deep_link_id;return(r?Er(Ir(r)).link:null)||r||n||e||t}var Wo=class t{constructor(e){var n,r,i,s,o,a;let u=Er(Ir(e)),c=(n=u.apiKey)!==null&&n!==void 0?n:null,l=(r=u.oobCode)!==null&&r!==void 0?r:null,h=YD((i=u.mode)!==null&&i!==void 0?i:null);b(c&&l&&h,"argument-error"),this.apiKey=c,this.operation=h,this.code=l,this.continueUrl=(s=u.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=u.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=u.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){let n=JD(e);try{return new t(n)}catch{return null}}};var dy=(()=>{class t{constructor(){this.providerId=t.PROVIDER_ID}static credential(n,r){return Qi._fromEmailAndPassword(n,r)}static credentialWithLink(n,r){let i=Wo.parseLink(r);return b(i,"argument-error"),Qi._fromEmailAndCode(n,i.code,i.tenantId)}}t.PROVIDER_ID="password",t.EMAIL_PASSWORD_SIGN_IN_METHOD="password",t.EMAIL_LINK_SIGN_IN_METHOD="emailLink";return t})(),Ho=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var zl=class extends Ho{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};function XD(t,e){return d(this,null,function*(){return Ji(t,"POST","/v1/accounts:signUp",Xt(t,e))})}var Cr=class t{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,n,r,i=!1){return d(this,null,function*(){let s=yield br._fromIdTokenResponse(e,r,i),o=Vm(r);return new t({user:s,providerId:o,_tokenResponse:r,operationType:n})})}static _forOperation(e,n,r){return d(this,null,function*(){yield e._updateTokensIfNecessary(r,!0);let i=Vm(r);return new t({user:e,providerId:i,_tokenResponse:r,operationType:n})})}};function Vm(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}var ql=class t extends Ue{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,t.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new t(e,n,r,i)}};function fy(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?ql._fromErrorAndOperation(t,s,e,r):s})}function ZD(t,e,n=!1){return d(this,null,function*(){let r=yield Wi(t,e._linkToIdToken(t.auth,yield t.getIdToken()),n);return Cr._forOperation(t,"link",r)})}function eA(t,e,n=!1){return d(this,null,function*(){let{auth:r}=t;if(Xe(r.app))return Promise.reject(Rt(r));let i="reauthenticate";try{let s=yield Wi(t,fy(r,i,e,t),n);b(s.idToken,r,"internal-error");let o=th(s.idToken);b(o,r,"internal-error");let{sub:a}=o;return b(t.uid===a,r,"user-mismatch"),Cr._forOperation(t,i,s)}catch(s){throw s?.code==="auth/user-not-found"&&ut(r,"user-mismatch"),s}})}function py(t,e,n=!1){return d(this,null,function*(){if(Xe(t.app))return Promise.reject(Rt(t));let r="signIn",i=yield fy(t,r,e),s=yield Cr._fromIdTokenResponse(t,r,i);return n||(yield t._updateCurrentUser(s.user)),s})}function oh(t,e){return d(this,null,function*(){return py(Fn(t),e)})}function gy(t){return d(this,null,function*(){let e=Fn(t);e._getPasswordPolicyInternal()&&(yield e._updatePasswordPolicy())})}function ah(t,e,n){return d(this,null,function*(){if(Xe(t.app))return Promise.reject(Rt(t));let r=Fn(t),o=yield jl(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",XD).catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&gy(t),u}),a=yield Cr._fromIdTokenResponse(r,"signIn",o);return yield r._updateCurrentUser(a.user),a})}function uh(t,e,n){return Xe(t.app)?Promise.reject(Rt(t)):oh(re(t),dy.credential(e,n)).catch(r=>d(this,null,function*(){throw r.code==="auth/password-does-not-meet-requirements"&&gy(t),r}))}function ch(t,e,n,r){return re(t).onIdTokenChanged(e,n,r)}function lh(t,e,n){return re(t).beforeAuthStateChanged(e,n)}function hh(t){return re(t).signOut()}var Ko="__sak";var Qo=class{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Ko,"1"),this.storage.removeItem(Ko),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){let n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};function tA(){let t=ce();return rh(t)||Xo(t)}var nA=1e3,rA=10,iA=(()=>{class t extends Qo{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(n,r)=>this.onStorageEvent(n,r),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=tA()&&FD(),this.fallbackToPolling=ay(),this._shouldAllowMigration=!0}forAllChangedKeys(n){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),s=this.localCache[r];i!==s&&n(r,s,i)}}onStorageEvent(n,r=!1){if(!n.key){this.forAllChangedKeys((a,u,c)=>{this.notifyListeners(a,c)});return}let i=n.key;if(r?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){let a=this.storage.getItem(i);if(n.newValue!==a)n.newValue!==null?this.storage.setItem(i,n.newValue):this.storage.removeItem(i);else if(this.localCache[i]===n.newValue&&!r)return}let s=()=>{let a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},o=this.storage.getItem(i);MD()&&o!==n.newValue&&n.newValue!==n.oldValue?setTimeout(s,rA):s()}notifyListeners(n,r){this.localCache[n]=r;let i=this.listeners[n];if(i)for(let s of Array.from(i))s(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((n,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:n,oldValue:r,newValue:i}),!0)})},nA)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(n,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[n]||(this.listeners[n]=new Set,this.localCache[n]=this.storage.getItem(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(n,r){return d(this,null,function*(){yield xt(t.prototype,this,"_set").call(this,n,r),this.localCache[n]=JSON.stringify(r)})}_get(n){return d(this,null,function*(){let r=yield xt(t.prototype,this,"_get").call(this,n);return this.localCache[n]=JSON.stringify(r),r})}_remove(n){return d(this,null,function*(){yield xt(t.prototype,this,"_remove").call(this,n),delete this.localCache[n]})}}return t.type="LOCAL",t})(),my=iA;var sA=(()=>{class t extends Qo{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(n,r){}_removeListener(n,r){}}return t.type="SESSION",t})(),dh=sA;function oA(t){return Promise.all(t.map(e=>d(this,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(n){return{fulfilled:!1,reason:n}}})))}var aA=(()=>{class t{constructor(n){this.eventTarget=n,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(n){let r=this.receivers.find(s=>s.isListeningto(n));if(r)return r;let i=new t(n);return this.receivers.push(i),i}isListeningto(n){return this.eventTarget===n}handleEvent(n){return d(this,null,function*(){let r=n,{eventId:i,eventType:s,data:o}=r.data,a=this.handlersMap[s];if(!a?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:s});let u=Array.from(a).map(l=>d(this,null,function*(){return l(r.origin,o)})),c=yield oA(u);r.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:c})})}_subscribe(n,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[n]||(this.handlersMap[n]=new Set),this.handlersMap[n].add(r)}_unsubscribe(n,r){this.handlersMap[n]&&r&&this.handlersMap[n].delete(r),(!r||this.handlersMap[n].size===0)&&delete this.handlersMap[n],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}t.receivers=[];return t})();function yy(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}var Gl=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,n,r=50){return d(this,null,function*(){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,u)=>{let c=yy("",20);i.port1.start();let l=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(h){let f=h;if(f.data.eventId===c)switch(f.data.status){case"ack":clearTimeout(l),s=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(f.data.response);break;default:clearTimeout(l),clearTimeout(s),u(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})})}};function at(){return window}function uA(t){at().location.href=t}function vy(){return typeof at().WorkerGlobalScope<"u"&&typeof at().importScripts=="function"}function cA(){return d(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function lA(){var t;return((t=navigator?.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function hA(){return vy()?self:null}var _y="firebaseLocalStorageDb",dA=1,Yo="firebaseLocalStorage",wy="fbase_key",Mn=class{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}};function ea(t,e){return t.transaction([Yo],e?"readwrite":"readonly").objectStore(Yo)}function fA(){let t=indexedDB.deleteDatabase(_y);return new Mn(t).toPromise()}function Wl(){let t=indexedDB.open(_y,dA);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{let r=t.result;try{r.createObjectStore(Yo,{keyPath:wy})}catch(i){n(i)}}),t.addEventListener("success",()=>d(this,null,function*(){let r=t.result;r.objectStoreNames.contains(Yo)?e(r):(r.close(),yield fA(),e(yield Wl()))}))})}function Um(t,e,n){return d(this,null,function*(){let r=ea(t,!0).put({[wy]:e,value:n});return new Mn(r).toPromise()})}function pA(t,e){return d(this,null,function*(){let n=ea(t,!1).get(e),r=yield new Mn(n).toPromise();return r===void 0?null:r.value})}function Bm(t,e){let n=ea(t,!0).delete(e);return new Mn(n).toPromise()}var gA=800,mA=3,yA=(()=>{class t{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return d(this,null,function*(){return this.db?this.db:(this.db=yield Wl(),this.db)})}_withRetries(n){return d(this,null,function*(){let r=0;for(;;)try{let i=yield this._openDb();return yield n(i)}catch(i){if(r++>mA)throw i;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return d(this,null,function*(){return vy()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return d(this,null,function*(){this.receiver=aA._getInstance(hA()),this.receiver._subscribe("keyChanged",(n,r)=>d(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(r.key)}})),this.receiver._subscribe("ping",(n,r)=>d(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return d(this,null,function*(){var n,r;if(this.activeServiceWorker=yield cA(),!this.activeServiceWorker)return;this.sender=new Gl(this.activeServiceWorker);let i=yield this.sender._send("ping",{},800);i&&!((n=i[0])===null||n===void 0)&&n.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(n){return d(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||lA()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:n},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return d(this,null,function*(){try{if(!indexedDB)return!1;let n=yield Wl();return yield Um(n,Ko,"1"),yield Bm(n,Ko),!0}catch{}return!1})}_withPendingWrite(n){return d(this,null,function*(){this.pendingWrites++;try{yield n()}finally{this.pendingWrites--}})}_set(n,r){return d(this,null,function*(){return this._withPendingWrite(()=>d(this,null,function*(){return yield this._withRetries(i=>Um(i,n,r)),this.localCache[n]=r,this.notifyServiceWorker(n)}))})}_get(n){return d(this,null,function*(){let r=yield this._withRetries(i=>pA(i,n));return this.localCache[n]=r,r})}_remove(n){return d(this,null,function*(){return this._withPendingWrite(()=>d(this,null,function*(){return yield this._withRetries(r=>Bm(r,n)),delete this.localCache[n],this.notifyServiceWorker(n)}))})}_poll(){return d(this,null,function*(){let n=yield this._withRetries(s=>{let o=ea(s,!1).getAll();return new Mn(o).toPromise()});if(!n)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(n.length!==0)for(let{fbase_key:s,value:o}of n)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),r.push(s));for(let s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),r.push(s));return r})}notifyListeners(n,r){this.localCache[n]=r;let i=this.listeners[n];if(i)for(let s of Array.from(i))s(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>d(this,null,function*(){return this._poll()}),gA)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(n,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[n]||(this.listeners[n]=new Set,this._get(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return t.type="LOCAL",t})(),Ey=yA;var HO=ly("rcb"),KO=new kn(3e4,6e4);function vA(t,e){return e?Ct(e):(b(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}var Yi=class extends Ki{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Nl(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Nl(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Nl(e,this._buildIdpRequest())}_buildIdpRequest(e){let n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}};function _A(t){return py(t.auth,new Yi(t),t.bypassAuthState)}function wA(t){let{auth:e,user:n}=t;return b(n,e,"internal-error"),eA(n,new Yi(t),t.bypassAuthState)}function EA(t){return d(this,null,function*(){let{auth:e,user:n}=t;return b(n,e,"internal-error"),ZD(n,new Yi(t),t.bypassAuthState)})}var Hl=class{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise((e,n)=>d(this,null,function*(){this.pendingPromise={resolve:e,reject:n};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}}))}onAuthEvent(e){return d(this,null,function*(){let{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}let u={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(a)(u))}catch(c){this.reject(c)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return _A;case"linkViaPopup":case"linkViaRedirect":return EA;case"reauthViaPopup":case"reauthViaRedirect":return wA;default:ut(this.auth,"internal-error")}}resolve(e){Jt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Jt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var QO=new kn(2e3,1e4);var IA="pendingRedirect",Uo=new Map,Kl=class t extends Hl{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}execute(){return d(this,null,function*(){let e=Uo.get(this.auth._key());if(!e){try{let r=(yield TA(this.resolver,this.auth))?yield xt(t.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Uo.set(this.auth._key(),e)}return this.bypassAuthState||Uo.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return d(this,null,function*(){if(e.type==="signInViaRedirect")return xt(t.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let n=yield this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,xt(t.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return d(this,null,function*(){})}cleanUp(){}};function TA(t,e){return d(this,null,function*(){let n=SA(e),r=AA(t);if(!(yield r._isAvailable()))return!1;let i=(yield r._get(n))==="true";return yield r._remove(n),i})}function DA(t,e){Uo.set(t._key(),e)}function AA(t){return Ct(t._redirectPersistence)}function SA(t){return Vo(IA,t.config.apiKey,t.name)}function bA(t,e,n=!1){return d(this,null,function*(){if(Xe(t.app))return Promise.reject(Rt(t));let r=Fn(t),i=vA(r,e),o=yield new Kl(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,yield r._persistUserIfCurrent(o.user),yield r._setRedirectUser(null,e)),o})}var CA=10*60*1e3,Ql=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!RA(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!Iy(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(On(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){let r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=CA&&this.cachedEventUids.clear(),this.cachedEventUids.has($m(e))}saveEventToCache(e){this.cachedEventUids.add($m(e)),this.lastProcessedEventTime=Date.now()}};function $m(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function Iy({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function RA(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Iy(t);default:return!1}}function PA(n){return d(this,arguments,function*(t,e={}){return Zt(t,"GET","/v1/projects",e)})}var NA=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,OA=/^https?/;function kA(t){return d(this,null,function*(){if(t.config.emulator)return;let{authorizedDomains:e}=yield PA(t);for(let n of e)try{if(MA(n))return}catch{}ut(t,"unauthorized-domain")})}function MA(t){let e=kl(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){let o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!OA.test(n))return!1;if(NA.test(t))return r===t;let i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var FA=new kn(3e4,6e4);function jm(){let t=at().___jsl;if(t?.H){for(let e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function xA(t){return new Promise((e,n)=>{var r,i,s;function o(){jm(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{jm(),n(On(t,"network-request-failed"))},timeout:FA.get()})}if(!((i=(r=at().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=at().gapi)===null||s===void 0)&&s.load)o();else{let a=ly("iframefcb");return at()[a]=()=>{gapi.load?o():n(On(t,"network-request-failed"))},cy(`${BD()}?onload=${a}`).catch(u=>n(u))}}).catch(e=>{throw Bo=null,e})}var Bo=null;function LA(t){return Bo=Bo||xA(t),Bo}var VA=new kn(5e3,15e3),UA="__/auth/iframe",BA="emulator/auth/iframe",$A={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},jA=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function zA(t){let e=t.config;b(e.authDomain,t,"auth-domain-config-required");let n=e.emulator?Zl(e,BA):`https://${t.config.authDomain}/${UA}`,r={apiKey:e.apiKey,appName:t.name,v:Qt},i=jA.get(t.config.apiHost);i&&(r.eid=i);let s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${Ui(r).slice(1)}`}function qA(t){return d(this,null,function*(){let e=yield LA(t),n=at().gapi;return b(n,t,"internal-error"),e.open({where:document.body,url:zA(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:$A,dontclear:!0},r=>new Promise((i,s)=>d(this,null,function*(){yield r.restyle({setHideOnLeave:!1});let o=On(t,"network-request-failed"),a=at().setTimeout(()=>{s(o)},VA.get());function u(){at().clearTimeout(a),i(r)}r.ping(u).then(u,()=>{s(o)})})))})}var GA={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},WA=500,HA=600,KA="_blank",QA="http://localhost",Jo=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function YA(t,e,n,r=WA,i=HA){let s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),a="",u=Object.assign(Object.assign({},GA),{width:r.toString(),height:i.toString(),top:s,left:o}),c=ce().toLowerCase();n&&(a=ny(c)?KA:n),ty(c)&&(e=e||QA,u.scrollbars="yes");let l=Object.entries(u).reduce((f,[p,E])=>`${f}${p}=${E},`,"");if(kD(c)&&a!=="_self")return JA(e||"",a),new Jo(null);let h=window.open(e||"",a,l);b(h,t,"popup-blocked");try{h.focus()}catch{}return new Jo(h)}function JA(t,e){let n=document.createElement("a");n.href=t,n.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}var XA="__/auth/handler",ZA="emulator/auth/handler",eS=encodeURIComponent("fac");function zm(t,e,n,r,i,s){return d(this,null,function*(){b(t.config.authDomain,t,"auth-domain-config-required"),b(t.config.apiKey,t,"invalid-api-key");let o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Qt,eventId:i};if(e instanceof Ho){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",gm(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(let[l,h]of Object.entries(s||{}))o[l]=h}if(e instanceof zl){let l=e.getScopes().filter(h=>h!=="");l.length>0&&(o.scopes=l.join(","))}t.tenantId&&(o.tid=t.tenantId);let a=o;for(let l of Object.keys(a))a[l]===void 0&&delete a[l];let u=yield t._getAppCheckToken(),c=u?`#${eS}=${encodeURIComponent(u)}`:"";return`${tS(t)}?${Ui(a).slice(1)}${c}`})}function tS({config:t}){return t.emulator?Zl(t,ZA):`https://${t.authDomain}/${XA}`}var Ol="webStorageSupport",Yl=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=dh,this._completeRedirectFn=bA,this._overrideRedirectResult=DA}_openPopup(e,n,r,i){return d(this,null,function*(){var s;Jt((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");let o=yield zm(e,n,r,kl(),i);return YA(e,o,yy())})}_openRedirect(e,n,r,i){return d(this,null,function*(){yield this._originValidation(e);let s=yield zm(e,n,r,kl(),i);return uA(s),new Promise(()=>{})})}_initialize(e){let n=e._key();if(this.eventManagers[n]){let{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(Jt(s,"If manager is not set, promise should be"),s)}let r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}initAndGetManager(e){return d(this,null,function*(){let n=yield qA(e),r=new Ql(e);return n.register("authEvent",i=>(b(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r})}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Ol,{type:Ol},i=>{var s;let o=(s=i?.[0])===null||s===void 0?void 0:s[Ol];o!==void 0&&n(!!o),ut(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=kA(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return ay()||rh()||Xo()}},Ty=Yl;var qm="@firebase/auth",Gm="1.7.2";var Jl=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return d(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){b(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function nS(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function rS(t){Kt(new He("auth",(e,{options:n})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;b(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});let u={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:uy(t)},c=new Bl(r,i,s,u);return zD(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Kt(new He("auth-internal",e=>{let n=Fn(e.getProvider("auth").getImmediate());return(r=>new Jl(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),le(qm,Gm,nS(t)),le(qm,Gm,"esm2017")}var iS=5*60,sS=hl("authIdTokenMaxAge")||iS,Wm=null,oS=t=>e=>d(void 0,null,function*(){let n=e&&(yield e.getIdTokenResult()),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>sS)return;let i=n?.token;Wm!==i&&(Wm=i,yield fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});function fh(t=Tr()){let e=ji(t,"auth");if(e.isInitialized())return e.getImmediate();let n=ih(t,{popupRedirectResolver:Ty,persistence:[Ey,my,dh]}),r=hl("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let s=new URL(r,location.origin);if(location.origin===s.origin){let o=oS(s.toString());lh(n,o,()=>o(n.currentUser)),ch(n,a=>o(a))}}let i=cl("auth");return i&&sh(n,`http://${i}`),n}function aS(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}VD({loadJS(t){return new Promise((e,n)=>{let r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{let s=On("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",aS().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});rS("Browser");var Dy="auth",Xi=class{constructor(e){return e}},Zi=class{constructor(){return zi(Dy)}};var ph=new $("angularfire2.auth-instances");function JS(t,e){let n=Mo(Dy,t,e);return n&&new Xi(n)}function XS(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new Xi(r)}}var ZS={provide:Zi,deps:[[new Ne,ph]]},eb={provide:Xi,useFactory:JS,deps:[[new Ne,ph],St]},tb=(()=>{class t{constructor(){le("angularfire",Pn.full,"auth")}static \u0275fac=function(r){return new(r||t)};static \u0275mod=Me({type:t});static \u0275inj=ke({providers:[eb,ZS]})}return t})();function Ok(t,...e){return{ngModule:tb,providers:[{provide:ph,useFactory:XS(t),multi:!0,deps:[X,Fe,Sr,Nn,[new Ne,Ar],...e]}]}}var kk=Ee(ah,!0);var Mk=Ee(fh,!0);var Fk=Ee(uh,!0);var xk=Ee(hh,!0);var nb=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},et={},v,xh=xh||{},P=nb||self;function pa(t){var e=typeof t;return e=e!="object"?e:t?Array.isArray(t)?"array":e:"null",e=="array"||e=="object"&&typeof t.length=="number"}function fs(t){var e=typeof t;return e=="object"&&t!=null||e=="function"}function rb(t){return Object.prototype.hasOwnProperty.call(t,gh)&&t[gh]||(t[gh]=++ib)}var gh="closure_uid_"+(1e9*Math.random()>>>0),ib=0;function sb(t,e,n){return t.call.apply(t.bind,arguments)}function ob(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),t.apply(e,i)}}return function(){return t.apply(e,arguments)}}function Ie(t,e,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?Ie=sb:Ie=ob,Ie.apply(null,arguments)}function ta(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),t.apply(this,r)}}function fe(t,e){function n(){}n.prototype=e.prototype,t.$=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.ac=function(r,i,s){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return e.prototype[i].apply(r,o)}}function en(){this.s=this.s,this.o=this.o}var ab=0;en.prototype.s=!1;en.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),ab!=0)&&rb(this)};en.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var Ly=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(typeof t=="string")return typeof e!="string"||e.length!=1?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function Lh(t){let e=t.length;if(0<e){let n=Array(e);for(let r=0;r<e;r++)n[r]=t[r];return n}return[]}function Ay(t,e){for(let n=1;n<arguments.length;n++){let r=arguments[n];if(pa(r)){let i=t.length||0,s=r.length||0;t.length=i+s;for(let o=0;o<s;o++)t[i+o]=r[o]}else t.push(r)}}function Te(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}Te.prototype.h=function(){this.defaultPrevented=!0};var ub=function(){if(!P.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{let n=()=>{};P.addEventListener("test",n,e),P.removeEventListener("test",n,e)}catch{}return t}();function ss(t){return/^[\s\xa0]*$/.test(t)}function ga(){var t=P.navigator;return t&&(t=t.userAgent)?t:""}function ct(t){return ga().indexOf(t)!=-1}function Vh(t){return Vh[" "](t),t}Vh[" "]=function(){};function cb(t,e){var n=Jb;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}var lb=ct("Opera"),Or=ct("Trident")||ct("MSIE"),Vy=ct("Edge"),wh=Vy||Or,Uy=ct("Gecko")&&!(ga().toLowerCase().indexOf("webkit")!=-1&&!ct("Edge"))&&!(ct("Trident")||ct("MSIE"))&&!ct("Edge"),hb=ga().toLowerCase().indexOf("webkit")!=-1&&!ct("Edge");function By(){var t=P.document;return t?t.documentMode:void 0}var Eh;e:{if(na="",ra=function(){var t=ga();if(Uy)return/rv:([^\);]+)(\)|;)/.exec(t);if(Vy)return/Edge\/([\d\.]+)/.exec(t);if(Or)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t);if(hb)return/WebKit\/(\S+)/.exec(t);if(lb)return/(?:Version)[ \/]?(\S+)/.exec(t)}(),ra&&(na=ra?ra[1]:""),Or&&(ia=By(),ia!=null&&ia>parseFloat(na))){Eh=String(ia);break e}Eh=na}var na,ra,ia,Ih;P.document&&Or?(mh=By(),Ih=mh||parseInt(Eh,10)||void 0):Ih=void 0;var mh,db=Ih;function os(t,e){if(Te.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(Uy){e:{try{Vh(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else n=="mouseover"?e=t.fromElement:n=="mouseout"&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=r.clientX!==void 0?r.clientX:r.pageX,this.clientY=r.clientY!==void 0?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=t.clientX!==void 0?t.clientX:t.pageX,this.clientY=t.clientY!==void 0?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=typeof t.pointerType=="string"?t.pointerType:fb[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&os.$.h.call(this)}}fe(os,Te);var fb={2:"touch",3:"pen",4:"mouse"};os.prototype.h=function(){os.$.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var ps="closure_listenable_"+(1e6*Math.random()|0),pb=0;function gb(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.la=i,this.key=++pb,this.fa=this.ia=!1}function ma(t){t.fa=!0,t.listener=null,t.proxy=null,t.src=null,t.la=null}function Uh(t,e,n){for(let r in t)e.call(n,t[r],r,t)}function mb(t,e){for(let n in t)e.call(void 0,t[n],n,t)}function $y(t){let e={};for(let n in t)e[n]=t[n];return e}var Sy="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function jy(t,e){let n,r;for(let i=1;i<arguments.length;i++){r=arguments[i];for(n in r)t[n]=r[n];for(let s=0;s<Sy.length;s++)n=Sy[s],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function ya(t){this.src=t,this.g={},this.h=0}ya.prototype.add=function(t,e,n,r,i){var s=t.toString();t=this.g[s],t||(t=this.g[s]=[],this.h++);var o=Dh(t,e,r,i);return-1<o?(e=t[o],n||(e.ia=!1)):(e=new gb(e,this.src,s,!!r,i),e.ia=n,t.push(e)),e};function Th(t,e){var n=e.type;if(n in t.g){var r=t.g[n],i=Ly(r,e),s;(s=0<=i)&&Array.prototype.splice.call(r,i,1),s&&(ma(e),t.g[n].length==0&&(delete t.g[n],t.h--))}}function Dh(t,e,n,r){for(var i=0;i<t.length;++i){var s=t[i];if(!s.fa&&s.listener==e&&s.capture==!!n&&s.la==r)return i}return-1}var Bh="closure_lm_"+(1e6*Math.random()|0),yh={};function zy(t,e,n,r,i){if(r&&r.once)return Gy(t,e,n,r,i);if(Array.isArray(e)){for(var s=0;s<e.length;s++)zy(t,e[s],n,r,i);return null}return n=zh(n),t&&t[ps]?t.O(e,n,fs(r)?!!r.capture:!!r,i):qy(t,e,n,!1,r,i)}function qy(t,e,n,r,i,s){if(!e)throw Error("Invalid event type");var o=fs(i)?!!i.capture:!!i,a=jh(t);if(a||(t[Bh]=a=new ya(t)),n=a.add(e,n,r,o,s),n.proxy)return n;if(r=yb(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)ub||(i=o),i===void 0&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(Hy(e.toString()),r);else if(t.addListener&&t.removeListener)t.addListener(r);else throw Error("addEventListener and attachEvent are unavailable.");return n}function yb(){function t(n){return e.call(t.src,t.listener,n)}let e=vb;return t}function Gy(t,e,n,r,i){if(Array.isArray(e)){for(var s=0;s<e.length;s++)Gy(t,e[s],n,r,i);return null}return n=zh(n),t&&t[ps]?t.P(e,n,fs(r)?!!r.capture:!!r,i):qy(t,e,n,!0,r,i)}function Wy(t,e,n,r,i){if(Array.isArray(e))for(var s=0;s<e.length;s++)Wy(t,e[s],n,r,i);else r=fs(r)?!!r.capture:!!r,n=zh(n),t&&t[ps]?(t=t.i,e=String(e).toString(),e in t.g&&(s=t.g[e],n=Dh(s,n,r,i),-1<n&&(ma(s[n]),Array.prototype.splice.call(s,n,1),s.length==0&&(delete t.g[e],t.h--)))):t&&(t=jh(t))&&(e=t.g[e.toString()],t=-1,e&&(t=Dh(e,n,r,i)),(n=-1<t?e[t]:null)&&$h(n))}function $h(t){if(typeof t!="number"&&t&&!t.fa){var e=t.src;if(e&&e[ps])Th(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(Hy(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=jh(e))?(Th(n,t),n.h==0&&(n.src=null,e[Bh]=null)):ma(t)}}}function Hy(t){return t in yh?yh[t]:yh[t]="on"+t}function vb(t,e){if(t.fa)t=!0;else{e=new os(e,this);var n=t.listener,r=t.la||t.src;t.ia&&$h(t),t=n.call(r,e)}return t}function jh(t){return t=t[Bh],t instanceof ya?t:null}var vh="__closure_events_fn_"+(1e9*Math.random()>>>0);function zh(t){return typeof t=="function"?t:(t[vh]||(t[vh]=function(e){return t.handleEvent(e)}),t[vh])}function de(){en.call(this),this.i=new ya(this),this.S=this,this.J=null}fe(de,en);de.prototype[ps]=!0;de.prototype.removeEventListener=function(t,e,n,r){Wy(this,t,e,n,r)};function ye(t,e){var n,r=t.J;if(r)for(n=[];r;r=r.J)n.push(r);if(t=t.S,r=e.type||e,typeof e=="string")e=new Te(e,t);else if(e instanceof Te)e.target=e.target||t;else{var i=e;e=new Te(r,t),jy(e,i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=e.g=n[s];i=sa(o,r,!0,e)&&i}if(o=e.g=t,i=sa(o,r,!0,e)&&i,i=sa(o,r,!1,e)&&i,n)for(s=0;s<n.length;s++)o=e.g=n[s],i=sa(o,r,!1,e)&&i}de.prototype.N=function(){if(de.$.N.call(this),this.i){var t=this.i,e;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)ma(n[r]);delete t.g[e],t.h--}}this.J=null};de.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)};de.prototype.P=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};function sa(t,e,n,r){if(e=t.i.g[String(e)],!e)return!0;e=e.concat();for(var i=!0,s=0;s<e.length;++s){var o=e[s];if(o&&!o.fa&&o.capture==n){var a=o.listener,u=o.la||o.src;o.ia&&Th(t.i,o),i=a.call(u,r)!==!1&&i}}return i&&!r.defaultPrevented}var qh=P.JSON.stringify,Ah=class{constructor(e,n){this.i=e,this.j=n,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}};function _b(){var t=Gh;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}var Sh=class{constructor(){this.h=this.g=null}add(e,n){let r=Ky.get();r.set(e,n),this.h?this.h.next=r:this.g=r,this.h=r}},Ky=new Ah(()=>new bh,t=>t.reset()),bh=class{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}};function wb(t){var e=1;t=t.split(":");let n=[];for(;0<e&&t.length;)n.push(t.shift()),e--;return t.length&&n.push(t.join(":")),n}function Eb(t){P.setTimeout(()=>{throw t},0)}var as,us=!1,Gh=new Sh,Qy=()=>{let t=P.Promise.resolve(void 0);as=()=>{t.then(Ib)}},Ib=()=>{for(var t;t=_b();){try{t.h.call(t.g)}catch(n){Eb(n)}var e=Ky;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}us=!1};function va(t,e){de.call(this),this.h=t||1,this.g=e||P,this.j=Ie(this.qb,this),this.l=Date.now()}fe(va,de);v=va.prototype;v.ga=!1;v.T=null;v.qb=function(){if(this.ga){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-t):(this.T&&(this.g.clearTimeout(this.T),this.T=null),ye(this,"tick"),this.ga&&(Wh(this),this.start()))}};v.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function Wh(t){t.ga=!1,t.T&&(t.g.clearTimeout(t.T),t.T=null)}v.N=function(){va.$.N.call(this),Wh(this),delete this.g};function Hh(t,e,n){if(typeof t=="function")n&&(t=Ie(t,n));else if(t&&typeof t.handleEvent=="function")t=Ie(t.handleEvent,t);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:P.setTimeout(t,e||0)}function Yy(t){t.g=Hh(()=>{t.g=null,t.i&&(t.i=!1,Yy(t))},t.j);let e=t.h;t.h=null,t.m.apply(null,e)}var Ch=class extends en{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Yy(this)}N(){super.N(),this.g&&(P.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}};function cs(t){en.call(this),this.h=t,this.g={}}fe(cs,en);var by=[];function Jy(t,e,n,r){Array.isArray(n)||(n&&(by[0]=n.toString()),n=by);for(var i=0;i<n.length;i++){var s=zy(e,n[i],r||t.handleEvent,!1,t.h||t);if(!s)break;t.g[s.key]=s}}function Xy(t){Uh(t.g,function(e,n){this.g.hasOwnProperty(n)&&$h(e)},t),t.g={}}cs.prototype.N=function(){cs.$.N.call(this),Xy(this)};cs.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function _a(){this.g=!0}_a.prototype.Ea=function(){this.g=!1};function Tb(t,e,n,r,i,s){t.info(function(){if(t.g)if(s)for(var o="",a=s.split("&"),u=0;u<a.length;u++){var c=a[u].split("=");if(1<c.length){var l=c[0];c=c[1];var h=l.split("_");o=2<=h.length&&h[1]=="type"?o+(l+"="+c+"&"):o+(l+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+`
`+n+`
`+o})}function Db(t,e,n,r,i,s,o){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+`
`+n+`
`+s+" "+o})}function Pr(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+Sb(t,n)+(r?" "+r:"")})}function Ab(t,e){t.info(function(){return"TIMEOUT: "+e})}_a.prototype.info=function(){};function Sb(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n){for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if(s!="noop"&&s!="stop"&&s!="close")for(var o=1;o<i.length;o++)i[o]=""}}}}return qh(n)}catch{return e}}var Un={},Cy=null;function wa(){return Cy=Cy||new de}Un.Ta="serverreachability";function Zy(t){Te.call(this,Un.Ta,t)}fe(Zy,Te);function ls(t){let e=wa();ye(e,new Zy(e))}Un.STAT_EVENT="statevent";function ev(t,e){Te.call(this,Un.STAT_EVENT,t),this.stat=e}fe(ev,Te);function be(t){let e=wa();ye(e,new ev(e,t))}Un.Ua="timingevent";function tv(t,e){Te.call(this,Un.Ua,t),this.size=e}fe(tv,Te);function gs(t,e){if(typeof t!="function")throw Error("Fn must not be null and must be a function");return P.setTimeout(function(){t()},e)}var Ea={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},nv={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Kh(){}Kh.prototype.h=null;function Ry(t){return t.h||(t.h=t.i())}function rv(){}var ms={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function Qh(){Te.call(this,"d")}fe(Qh,Te);function Yh(){Te.call(this,"c")}fe(Yh,Te);var Rh;function Ia(){}fe(Ia,Kh);Ia.prototype.g=function(){return new XMLHttpRequest};Ia.prototype.i=function(){return{}};Rh=new Ia;function ys(t,e,n,r){this.l=t,this.j=e,this.m=n,this.W=r||1,this.U=new cs(this),this.P=bb,t=wh?125:void 0,this.V=new va(t),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new iv}function iv(){this.i=null,this.g="",this.h=!1}var bb=45e3,sv={},Ph={};v=ys.prototype;v.setTimeout=function(t){this.P=t};function Nh(t,e,n){t.L=1,t.A=Da(Nt(e)),t.u=n,t.S=!0,ov(t,null)}function ov(t,e){t.G=Date.now(),vs(t),t.B=Nt(t.A);var n=t.B,r=t.W;Array.isArray(r)||(r=[String(r)]),pv(n.i,"t",r),t.o=0,n=t.l.J,t.h=new iv,t.g=Fv(t.l,n?e:null,!t.u),0<t.O&&(t.M=new Ch(Ie(t.Pa,t,t.g),t.O)),Jy(t.U,t.g,"readystatechange",t.nb),e=t.I?$y(t.I):{},t.u?(t.v||(t.v="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ha(t.B,t.v,t.u,e)):(t.v="GET",t.g.ha(t.B,t.v,null,e)),ls(),Tb(t.j,t.v,t.B,t.m,t.W,t.u)}v.nb=function(t){t=t.target;let e=this.M;e&&lt(t)==3?e.l():this.Pa(t)};v.Pa=function(t){try{if(t==this.g)e:{let l=lt(this.g);var e=this.g.Ia();let h=this.g.da();if(!(3>l)&&(l!=3||wh||this.g&&(this.h.h||this.g.ja()||ky(this.g)))){this.J||l!=4||e==7||(e==8||0>=h?ls(3):ls(2)),Ta(this);var n=this.g.da();this.ca=n;t:if(av(this)){var r=ky(this.g);t="";var i=r.length,s=lt(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){xn(this),is(this);var o="";break t}this.h.i=new P.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,t+=this.h.i.decode(r[e],{stream:s&&e==i-1});r.length=0,this.h.g+=t,this.o=0,o=this.h.g}else o=this.g.ja();if(this.i=n==200,Db(this.j,this.v,this.B,this.m,this.W,l,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,u=this.g;if((a=u.g?u.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ss(a)){var c=a;break t}}c=null}if(n=c)Pr(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Oh(this,n);else{this.i=!1,this.s=3,be(12),xn(this),is(this);break e}}this.S?(uv(this,l,o),wh&&this.i&&l==3&&(Jy(this.U,this.V,"tick",this.mb),this.V.start())):(Pr(this.j,this.m,o,null),Oh(this,o)),l==4&&xn(this),this.i&&!this.J&&(l==4?Nv(this.l,this):(this.i=!1,vs(this)))}else Kb(this.g),n==400&&0<o.indexOf("Unknown SID")?(this.s=3,be(12)):(this.s=0,be(13)),xn(this),is(this)}}}catch{}finally{}};function av(t){return t.g?t.v=="GET"&&t.L!=2&&t.l.Ha:!1}function uv(t,e,n){let r=!0,i;for(;!t.J&&t.o<n.length;)if(i=Cb(t,n),i==Ph){e==4&&(t.s=4,be(14),r=!1),Pr(t.j,t.m,null,"[Incomplete Response]");break}else if(i==sv){t.s=4,be(15),Pr(t.j,t.m,n,"[Invalid Chunk]"),r=!1;break}else Pr(t.j,t.m,i,null),Oh(t,i);av(t)&&t.o!=0&&(t.h.g=t.h.g.slice(t.o),t.o=0),e!=4||n.length!=0||t.h.h||(t.s=1,be(16),r=!1),t.i=t.i&&r,r?0<n.length&&!t.ba&&(t.ba=!0,e=t.l,e.g==t&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),nd(e),e.M=!0,be(11))):(Pr(t.j,t.m,n,"[Invalid Chunked Response]"),xn(t),is(t))}v.mb=function(){if(this.g){var t=lt(this.g),e=this.g.ja();this.o<e.length&&(Ta(this),uv(this,t,e),this.i&&t!=4&&vs(this))}};function Cb(t,e){var n=t.o,r=e.indexOf(`
`,n);return r==-1?Ph:(n=Number(e.substring(n,r)),isNaN(n)?sv:(r+=1,r+n>e.length?Ph:(e=e.slice(r,r+n),t.o=r+n,e)))}v.cancel=function(){this.J=!0,xn(this)};function vs(t){t.Y=Date.now()+t.P,cv(t,t.P)}function cv(t,e){if(t.C!=null)throw Error("WatchDog timer not null");t.C=gs(Ie(t.lb,t),e)}function Ta(t){t.C&&(P.clearTimeout(t.C),t.C=null)}v.lb=function(){this.C=null;let t=Date.now();0<=t-this.Y?(Ab(this.j,this.B),this.L!=2&&(ls(),be(17)),xn(this),this.s=2,is(this)):cv(this,this.Y-t)};function is(t){t.l.H==0||t.J||Nv(t.l,t)}function xn(t){Ta(t);var e=t.M;e&&typeof e.sa=="function"&&e.sa(),t.M=null,Wh(t.V),Xy(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.sa())}function Oh(t,e){try{var n=t.l;if(n.H!=0&&(n.g==t||kh(n.i,t))){if(!t.K&&kh(n.i,t)&&n.H==3){try{var r=n.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&r.length==3){var i=r;if(i[0]==0){e:if(!n.u){if(n.g)if(n.g.G+3e3<t.G)la(n),ba(n);else break e;td(n),be(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&n.A==0&&!n.v&&(n.v=gs(Ie(n.ib,n),6e3));if(1>=yv(n.i)&&n.oa){try{n.oa()}catch{}n.oa=void 0}}else Ln(n,11)}else if((t.K||n.g==t)&&la(n),!ss(e))for(i=n.Ja.g.parse(e),e=0;e<i.length;e++){let c=i[e];if(n.V=c[0],c=c[1],n.H==2)if(c[0]=="c"){n.K=c[1],n.pa=c[2];let l=c[3];l!=null&&(n.ra=l,n.l.info("VER="+n.ra));let h=c[4];h!=null&&(n.Ga=h,n.l.info("SVER="+n.Ga));let f=c[5];f!=null&&typeof f=="number"&&0<f&&(r=1.5*f,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;let p=t.g;if(p){let E=p.g?p.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(E){var s=r.i;s.g||E.indexOf("spdy")==-1&&E.indexOf("quic")==-1&&E.indexOf("h2")==-1||(s.j=s.l,s.g=new Set,s.h&&(Jh(s,s.h),s.h=null))}if(r.F){let D=p.g?p.g.getResponseHeader("X-HTTP-Session-Id"):null;D&&(r.Da=D,H(r.I,r.F,D))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-t.G,n.l.info("Handshake RTT: "+n.S+"ms")),r=n;var o=t;if(r.wa=Mv(r,r.J?r.pa:null,r.Y),o.K){vv(r.i,o);var a=o,u=r.L;u&&a.setTimeout(u),a.C&&(Ta(a),vs(a)),r.g=o}else Rv(r);0<n.j.length&&Ca(n)}else c[0]!="stop"&&c[0]!="close"||Ln(n,7);else n.H==3&&(c[0]=="stop"||c[0]=="close"?c[0]=="stop"?Ln(n,7):ed(n):c[0]!="noop"&&n.h&&n.h.Aa(c),n.A=0)}}ls(4)}catch{}}function Rb(t){if(t.Z&&typeof t.Z=="function")return t.Z();if(typeof Map<"u"&&t instanceof Map||typeof Set<"u"&&t instanceof Set)return Array.from(t.values());if(typeof t=="string")return t.split("");if(pa(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}e=[],n=0;for(r in t)e[n++]=t[r];return e}function Pb(t){if(t.ta&&typeof t.ta=="function")return t.ta();if(!t.Z||typeof t.Z!="function"){if(typeof Map<"u"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set<"u"&&t instanceof Set)){if(pa(t)||typeof t=="string"){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(let r in t)e[n++]=r;return e}}}function lv(t,e){if(t.forEach&&typeof t.forEach=="function")t.forEach(e,void 0);else if(pa(t)||typeof t=="string")Array.prototype.forEach.call(t,e,void 0);else for(var n=Pb(t),r=Rb(t),i=r.length,s=0;s<i;s++)e.call(void 0,r[s],n&&n[s],t)}var hv=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Nb(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var s=t[n].substring(0,r);i=t[n].substring(r+1)}else s=t[n];e(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}function Vn(t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof Vn){this.h=t.h,ua(this,t.j),this.s=t.s,this.g=t.g,ca(this,t.m),this.l=t.l;var e=t.i,n=new hs;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),Py(this,n),this.o=t.o}else t&&(e=String(t).match(hv))?(this.h=!1,ua(this,e[1]||"",!0),this.s=ns(e[2]||""),this.g=ns(e[3]||"",!0),ca(this,e[4]),this.l=ns(e[5]||"",!0),Py(this,e[6]||"",!0),this.o=ns(e[7]||"")):(this.h=!1,this.i=new hs(null,this.h))}Vn.prototype.toString=function(){var t=[],e=this.j;e&&t.push(rs(e,Ny,!0),":");var n=this.g;return(n||e=="file")&&(t.push("//"),(e=this.s)&&t.push(rs(e,Ny,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&t.push(":",String(n))),(n=this.l)&&(this.g&&n.charAt(0)!="/"&&t.push("/"),t.push(rs(n,n.charAt(0)=="/"?Mb:kb,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",rs(n,xb)),t.join("")};function Nt(t){return new Vn(t)}function ua(t,e,n){t.j=n?ns(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function ca(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function Py(t,e,n){e instanceof hs?(t.i=e,Lb(t.i,t.h)):(n||(e=rs(e,Fb)),t.i=new hs(e,t.h))}function H(t,e,n){t.i.set(e,n)}function Da(t){return H(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function ns(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function rs(t,e,n){return typeof t=="string"?(t=encodeURI(t).replace(e,Ob),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Ob(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}var Ny=/[#\/\?@]/g,kb=/[#\?:]/g,Mb=/[#\?]/g,Fb=/[#\?@]/g,xb=/#/g;function hs(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function tn(t){t.g||(t.g=new Map,t.h=0,t.i&&Nb(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}v=hs.prototype;v.add=function(t,e){tn(this),this.i=null,t=kr(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this};function dv(t,e){tn(t),e=kr(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function fv(t,e){return tn(t),e=kr(t,e),t.g.has(e)}v.forEach=function(t,e){tn(this),this.g.forEach(function(n,r){n.forEach(function(i){t.call(e,i,r,this)},this)},this)};v.ta=function(){tn(this);let t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let r=0;r<e.length;r++){let i=t[r];for(let s=0;s<i.length;s++)n.push(e[r])}return n};v.Z=function(t){tn(this);let e=[];if(typeof t=="string")fv(this,t)&&(e=e.concat(this.g.get(kr(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e};v.set=function(t,e){return tn(this),this.i=null,t=kr(this,t),fv(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this};v.get=function(t,e){return t?(t=this.Z(t),0<t.length?String(t[0]):e):e};function pv(t,e,n){dv(t,e),0<n.length&&(t.i=null,t.g.set(kr(t,e),Lh(n)),t.h+=n.length)}v.toString=function(){if(this.i)return this.i;if(!this.g)return"";let t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var r=e[n];let s=encodeURIComponent(String(r)),o=this.Z(r);for(r=0;r<o.length;r++){var i=s;o[r]!==""&&(i+="="+encodeURIComponent(String(o[r]))),t.push(i)}}return this.i=t.join("&")};function kr(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function Lb(t,e){e&&!t.j&&(tn(t),t.i=null,t.g.forEach(function(n,r){var i=r.toLowerCase();r!=i&&(dv(this,r),pv(this,i,n))},t)),t.j=e}var Vb=class{constructor(t,e){this.g=t,this.map=e}};function gv(t){this.l=t||Ub,P.PerformanceNavigationTiming?(t=P.performance.getEntriesByType("navigation"),t=0<t.length&&(t[0].nextHopProtocol=="hq"||t[0].nextHopProtocol=="h2")):t=!!(P.g&&P.g.Ka&&P.g.Ka()&&P.g.Ka().dc),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var Ub=10;function mv(t){return t.h?!0:t.g?t.g.size>=t.j:!1}function yv(t){return t.h?1:t.g?t.g.size:0}function kh(t,e){return t.h?t.h==e:t.g?t.g.has(e):!1}function Jh(t,e){t.g?t.g.add(e):t.h=e}function vv(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}gv.prototype.cancel=function(){if(this.i=_v(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let t of this.g.values())t.cancel();this.g.clear()}};function _v(t){if(t.h!=null)return t.i.concat(t.h.F);if(t.g!=null&&t.g.size!==0){let e=t.i;for(let n of t.g.values())e=e.concat(n.F);return e}return Lh(t.i)}var Bb=class{stringify(t){return P.JSON.stringify(t,void 0)}parse(t){return P.JSON.parse(t,void 0)}};function $b(){this.g=new Bb}function jb(t,e,n){let r=n||"";try{lv(t,function(i,s){let o=i;fs(i)&&(o=qh(i)),e.push(r+s+"="+encodeURIComponent(o))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function zb(t,e){let n=new _a;if(P.Image){let r=new Image;r.onload=ta(oa,n,r,"TestLoadImage: loaded",!0,e),r.onerror=ta(oa,n,r,"TestLoadImage: error",!1,e),r.onabort=ta(oa,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=ta(oa,n,r,"TestLoadImage: timeout",!1,e),P.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}function oa(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function _s(t){this.l=t.ec||null,this.j=t.ob||!1}fe(_s,Kh);_s.prototype.g=function(){return new Aa(this.l,this.j)};_s.prototype.i=function(t){return function(){return t}}({});function Aa(t,e){de.call(this),this.F=t,this.u=e,this.m=void 0,this.readyState=Xh,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}fe(Aa,de);var Xh=0;v=Aa.prototype;v.open=function(t,e){if(this.readyState!=Xh)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,ds(this)};v.send=function(t){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.F||P).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))};v.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ws(this)),this.readyState=Xh};v.$a=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,ds(this)),this.g&&(this.readyState=3,ds(this),this.g)))if(this.responseType==="arraybuffer")t.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof P.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;wv(this)}else t.text().then(this.Za.bind(this),this.ka.bind(this))};function wv(t){t.j.read().then(t.Xa.bind(t)).catch(t.ka.bind(t))}v.Xa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?ws(this):ds(this),this.readyState==3&&wv(this)}};v.Za=function(t){this.g&&(this.response=this.responseText=t,ws(this))};v.Ya=function(t){this.g&&(this.response=t,ws(this))};v.ka=function(){this.g&&ws(this)};function ws(t){t.readyState=4,t.l=null,t.j=null,t.A=null,ds(t)}v.setRequestHeader=function(t,e){this.v.append(t,e)};v.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""};v.getAllResponseHeaders=function(){if(!this.h)return"";let t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join(`\r
`)};function ds(t){t.onreadystatechange&&t.onreadystatechange.call(t)}Object.defineProperty(Aa.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(t){this.m=t?"include":"same-origin"}});var qb=P.JSON.parse;function Z(t){de.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=Ev,this.L=this.M=!1}fe(Z,de);var Ev="",Gb=/^https?$/i,Wb=["POST","PUT"];v=Z.prototype;v.Oa=function(t){this.M=t};v.ha=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+t);e=e?e.toUpperCase():"GET",this.I=t,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():Rh.g(),this.C=this.u?Ry(this.u):Ry(Rh),this.g.onreadystatechange=Ie(this.La,this);try{this.G=!0,this.g.open(e,String(t),!0),this.G=!1}catch(s){Oy(this,s);return}if(t=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else if(typeof r.keys=="function"&&typeof r.get=="function")for(let s of r.keys())n.set(s,r.get(s));else throw Error("Unknown input type for opt_headers: "+String(r));r=Array.from(n.keys()).find(s=>s.toLowerCase()=="content-type"),i=P.FormData&&t instanceof P.FormData,!(0<=Ly(Wb,e))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[s,o]of n)this.g.setRequestHeader(s,o);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{Dv(this),0<this.B&&((this.L=Hb(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Ie(this.ua,this)):this.A=Hh(this.ua,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(s){Oy(this,s)}};function Hb(t){return Or&&typeof t.timeout=="number"&&t.ontimeout!==void 0}v.ua=function(){typeof xh<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,ye(this,"timeout"),this.abort(8))};function Oy(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,Iv(t),Sa(t)}function Iv(t){t.F||(t.F=!0,ye(t,"complete"),ye(t,"error"))}v.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,ye(this,"complete"),ye(this,"abort"),Sa(this))};v.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Sa(this,!0)),Z.$.N.call(this)};v.La=function(){this.s||(this.G||this.v||this.l?Tv(this):this.kb())};v.kb=function(){Tv(this)};function Tv(t){if(t.h&&typeof xh<"u"&&(!t.C[1]||lt(t)!=4||t.da()!=2)){if(t.v&&lt(t)==4)Hh(t.La,0,t);else if(ye(t,"readystatechange"),lt(t)==4){t.h=!1;try{let o=t.da();e:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var r;if(r=o===0){var i=String(t.I).match(hv)[1]||null;!i&&P.self&&P.self.location&&(i=P.self.location.protocol.slice(0,-1)),r=!Gb.test(i?i.toLowerCase():"")}n=r}if(n)ye(t,"complete"),ye(t,"success");else{t.m=6;try{var s=2<lt(t)?t.g.statusText:""}catch{s=""}t.j=s+" ["+t.da()+"]",Iv(t)}}finally{Sa(t)}}}}function Sa(t,e){if(t.g){Dv(t);let n=t.g,r=t.C[0]?()=>{}:null;t.g=null,t.C=null,e||ye(t,"ready");try{n.onreadystatechange=r}catch{}}}function Dv(t){t.g&&t.L&&(t.g.ontimeout=null),t.A&&(P.clearTimeout(t.A),t.A=null)}v.isActive=function(){return!!this.g};function lt(t){return t.g?t.g.readyState:0}v.da=function(){try{return 2<lt(this)?this.g.status:-1}catch{return-1}};v.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}};v.Wa=function(t){if(this.g){var e=this.g.responseText;return t&&e.indexOf(t)==0&&(e=e.substring(t.length)),qb(e)}};function ky(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.K){case Ev:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}function Kb(t){let e={};t=(t.g&&2<=lt(t)&&t.g.getAllResponseHeaders()||"").split(`\r
`);for(let r=0;r<t.length;r++){if(ss(t[r]))continue;var n=wb(t[r]);let i=n[0];if(n=n[1],typeof n!="string")continue;n=n.trim();let s=e[i]||[];e[i]=s,s.push(n)}mb(e,function(r){return r.join(", ")})}v.Ia=function(){return this.m};v.Sa=function(){return typeof this.j=="string"?this.j:String(this.j)};function Av(t){let e="";return Uh(t,function(n,r){e+=r,e+=":",e+=n,e+=`\r
`}),e}function Zh(t,e,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Av(n),typeof t=="string"?n!=null&&encodeURIComponent(String(n)):H(t,e,n))}function es(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function Sv(t){this.Ga=0,this.j=[],this.l=new _a,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=es("failFast",!1,t),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=es("baseRetryDelayMs",5e3,t),this.hb=es("retryDelaySeedMs",1e4,t),this.eb=es("forwardChannelMaxRetries",2,t),this.xa=es("forwardChannelRequestTimeoutMs",2e4,t),this.va=t&&t.xmlHttpFactory||void 0,this.Ha=t&&t.useFetchStreams||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.i=new gv(t&&t.concurrentRequestLimit),this.Ja=new $b,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=t&&t.bc||!1,t&&t.Ea&&this.l.Ea(),t&&t.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&t&&t.detectBufferingProxy||!1,this.qa=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.qa=t.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}v=Sv.prototype;v.ra=8;v.H=1;function ed(t){if(bv(t),t.H==3){var e=t.W++,n=Nt(t.I);if(H(n,"SID",t.K),H(n,"RID",e),H(n,"TYPE","terminate"),Es(t,n),e=new ys(t,t.l,e),e.L=2,e.A=Da(Nt(n)),n=!1,P.navigator&&P.navigator.sendBeacon)try{n=P.navigator.sendBeacon(e.A.toString(),"")}catch{}!n&&P.Image&&(new Image().src=e.A,n=!0),n||(e.g=Fv(e.l,null),e.g.ha(e.A)),e.G=Date.now(),vs(e)}kv(t)}function ba(t){t.g&&(nd(t),t.g.cancel(),t.g=null)}function bv(t){ba(t),t.u&&(P.clearTimeout(t.u),t.u=null),la(t),t.i.cancel(),t.m&&(typeof t.m=="number"&&P.clearTimeout(t.m),t.m=null)}function Ca(t){if(!mv(t.i)&&!t.m){t.m=!0;var e=t.Na;as||Qy(),us||(as(),us=!0),Gh.add(e,t),t.C=0}}function Qb(t,e){return yv(t.i)>=t.i.j-(t.m?1:0)?!1:t.m?(t.j=e.F.concat(t.j),!0):t.H==1||t.H==2||t.C>=(t.cb?0:t.eb)?!1:(t.m=gs(Ie(t.Na,t,e),Ov(t,t.C)),t.C++,!0)}v.Na=function(t){if(this.m)if(this.m=null,this.H==1){if(!t){this.W=Math.floor(1e5*Math.random()),t=this.W++;let i=new ys(this,this.l,t),s=this.s;if(this.U&&(s?(s=$y(s),jy(s,this.U)):s=this.U),this.o!==null||this.O||(i.I=s,s=null),this.P)e:{for(var e=0,n=0;n<this.j.length;n++){t:{var r=this.j[n];if("__data__"in r.map&&(r=r.map.__data__,typeof r=="string")){r=r.length;break t}r=void 0}if(r===void 0)break;if(e+=r,4096<e){e=n;break e}if(e===4096||n===this.j.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=Cv(this,i,e),n=Nt(this.I),H(n,"RID",t),H(n,"CVER",22),this.F&&H(n,"X-HTTP-Session-Id",this.F),Es(this,n),s&&(this.O?e="headers="+encodeURIComponent(String(Av(s)))+"&"+e:this.o&&Zh(n,this.o,s)),Jh(this.i,i),this.bb&&H(n,"TYPE","init"),this.P?(H(n,"$req",e),H(n,"SID","null"),i.aa=!0,Nh(i,n,null)):Nh(i,n,e),this.H=2}}else this.H==3&&(t?My(this,t):this.j.length==0||mv(this.i)||My(this))};function My(t,e){var n;e?n=e.m:n=t.W++;let r=Nt(t.I);H(r,"SID",t.K),H(r,"RID",n),H(r,"AID",t.V),Es(t,r),t.o&&t.s&&Zh(r,t.o,t.s),n=new ys(t,t.l,n,t.C+1),t.o===null&&(n.I=t.s),e&&(t.j=e.F.concat(t.j)),e=Cv(t,n,1e3),n.setTimeout(Math.round(.5*t.xa)+Math.round(.5*t.xa*Math.random())),Jh(t.i,n),Nh(n,r,e)}function Es(t,e){t.na&&Uh(t.na,function(n,r){H(e,r,n)}),t.h&&lv({},function(n,r){H(e,r,n)})}function Cv(t,e,n){n=Math.min(t.j.length,n);var r=t.h?Ie(t.h.Va,t.h,t):null;e:{var i=t.j;let s=-1;for(;;){let o=["count="+n];s==-1?0<n?(s=i[0].g,o.push("ofs="+s)):s=0:o.push("ofs="+s);let a=!0;for(let u=0;u<n;u++){let c=i[u].g,l=i[u].map;if(c-=s,0>c)s=Math.max(0,i[u].g-100),a=!1;else try{jb(l,o,"req"+c+"_")}catch{r&&r(l)}}if(a){r=o.join("&");break e}}}return t=t.j.splice(0,n),e.F=t,r}function Rv(t){if(!t.g&&!t.u){t.ba=1;var e=t.Ma;as||Qy(),us||(as(),us=!0),Gh.add(e,t),t.A=0}}function td(t){return t.g||t.u||3<=t.A?!1:(t.ba++,t.u=gs(Ie(t.Ma,t),Ov(t,t.A)),t.A++,!0)}v.Ma=function(){if(this.u=null,Pv(this),this.ca&&!(this.M||this.g==null||0>=this.S)){var t=2*this.S;this.l.info("BP detection timer enabled: "+t),this.B=gs(Ie(this.jb,this),t)}};v.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,be(10),ba(this),Pv(this))};function nd(t){t.B!=null&&(P.clearTimeout(t.B),t.B=null)}function Pv(t){t.g=new ys(t,t.l,"rpc",t.ba),t.o===null&&(t.g.I=t.s),t.g.O=0;var e=Nt(t.wa);H(e,"RID","rpc"),H(e,"SID",t.K),H(e,"AID",t.V),H(e,"CI",t.G?"0":"1"),!t.G&&t.qa&&H(e,"TO",t.qa),H(e,"TYPE","xmlhttp"),Es(t,e),t.o&&t.s&&Zh(e,t.o,t.s),t.L&&t.g.setTimeout(t.L);var n=t.g;t=t.pa,n.L=1,n.A=Da(Nt(e)),n.u=null,n.S=!0,ov(n,t)}v.ib=function(){this.v!=null&&(this.v=null,ba(this),td(this),be(19))};function la(t){t.v!=null&&(P.clearTimeout(t.v),t.v=null)}function Nv(t,e){var n=null;if(t.g==e){la(t),nd(t),t.g=null;var r=2}else if(kh(t.i,e))n=e.F,vv(t.i,e),r=1;else return;if(t.H!=0){if(e.i)if(r==1){n=e.u?e.u.length:0,e=Date.now()-e.G;var i=t.C;r=wa(),ye(r,new tv(r,n)),Ca(t)}else Rv(t);else if(i=e.s,i==3||i==0&&0<e.ca||!(r==1&&Qb(t,e)||r==2&&td(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),i){case 1:Ln(t,5);break;case 4:Ln(t,10);break;case 3:Ln(t,6);break;default:Ln(t,2)}}}function Ov(t,e){let n=t.ab+Math.floor(Math.random()*t.hb);return t.isActive()||(n*=2),n*e}function Ln(t,e){if(t.l.info("Error code "+e),e==2){var n=null;t.h&&(n=null);var r=Ie(t.pb,t);n||(n=new Vn("//www.google.com/images/cleardot.gif"),P.location&&P.location.protocol=="http"||ua(n,"https"),Da(n)),zb(n.toString(),r)}else be(2);t.H=0,t.h&&t.h.za(e),kv(t),bv(t)}v.pb=function(t){t?(this.l.info("Successfully pinged google.com"),be(2)):(this.l.info("Failed to ping google.com"),be(1))};function kv(t){if(t.H=0,t.ma=[],t.h){let e=_v(t.i);(e.length!=0||t.j.length!=0)&&(Ay(t.ma,e),Ay(t.ma,t.j),t.i.i.length=0,Lh(t.j),t.j.length=0),t.h.ya()}}function Mv(t,e,n){var r=n instanceof Vn?Nt(n):new Vn(n);if(r.g!="")e&&(r.g=e+"."+r.g),ca(r,r.m);else{var i=P.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var s=new Vn(null);r&&ua(s,r),e&&(s.g=e),i&&ca(s,i),n&&(s.l=n),r=s}return n=t.F,e=t.Da,n&&e&&H(r,n,e),H(r,"VER",t.ra),Es(t,r),r}function Fv(t,e,n){if(e&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return e=t.Ha&&!t.va?new Z(new _s({ob:n})):new Z(t.va),e.Oa(t.J),e}v.isActive=function(){return!!this.h&&this.h.isActive(this)};function xv(){}v=xv.prototype;v.Ba=function(){};v.Aa=function(){};v.za=function(){};v.ya=function(){};v.isActive=function(){return!0};v.Va=function(){};function ha(){if(Or&&!(10<=Number(db)))throw Error("Environmental error: no available transport.")}ha.prototype.g=function(t,e){return new Be(t,e)};function Be(t,e){de.call(this),this.g=new Sv(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(t?t["X-WebChannel-Client-Profile"]=e.Ca:t={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=t,(t=e&&e.cc)&&!ss(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!ss(e)&&(this.g.F=e,t=this.h,t!==null&&e in t&&(t=this.h,e in t&&delete t[e])),this.j=new Mr(this)}fe(Be,de);Be.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var t=this.g,e=this.l,n=this.h||void 0;be(0),t.Y=e,t.na=n||{},t.G=t.aa,t.I=Mv(t,null,t.Y),Ca(t)};Be.prototype.close=function(){ed(this.g)};Be.prototype.u=function(t){var e=this.g;if(typeof t=="string"){var n={};n.__data__=t,t=n}else this.v&&(n={},n.__data__=qh(t),t=n);e.j.push(new Vb(e.fb++,t)),e.H==3&&Ca(e)};Be.prototype.N=function(){this.g.h=null,delete this.j,ed(this.g),delete this.g,Be.$.N.call(this)};function Lv(t){Qh.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){e:{for(let n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=e!==null&&t in e?e[t]:void 0),this.data=e}else this.data=t}fe(Lv,Qh);function Vv(){Yh.call(this),this.status=1}fe(Vv,Yh);function Mr(t){this.g=t}fe(Mr,xv);Mr.prototype.Ba=function(){ye(this.g,"a")};Mr.prototype.Aa=function(t){ye(this.g,new Lv(t))};Mr.prototype.za=function(t){ye(this.g,new Vv)};Mr.prototype.ya=function(){ye(this.g,"b")};function Yb(){this.blockSize=-1}function Ze(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}fe(Ze,Yb);Ze.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0};function _h(t,e,n){n||(n=0);var r=Array(16);if(typeof e=="string")for(var i=0;16>i;++i)r[i]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;e=t.g[0],n=t.g[1],i=t.g[2];var s=t.g[3],o=e+(s^n&(i^s))+r[0]+3614090360&4294967295;e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[1]+3905402710&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[2]+606105819&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[3]+3250441966&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(s^n&(i^s))+r[4]+4118548399&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[5]+1200080426&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[6]+2821735955&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[7]+4249261313&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(s^n&(i^s))+r[8]+1770035416&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[9]+2336552879&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[10]+4294925233&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[11]+2304563134&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(s^n&(i^s))+r[12]+1804603682&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[13]+4254626195&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[14]+2792965006&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[15]+1236535329&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(i^s&(n^i))+r[1]+4129170786&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[6]+3225465664&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[11]+643717713&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[0]+3921069994&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(i^s&(n^i))+r[5]+3593408605&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[10]+38016083&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[15]+3634488961&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[4]+3889429448&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(i^s&(n^i))+r[9]+568446438&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[14]+3275163606&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[3]+4107603335&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[8]+1163531501&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(i^s&(n^i))+r[13]+2850285829&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[2]+4243563512&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[7]+1735328473&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[12]+2368359562&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(n^i^s)+r[5]+4294588738&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[8]+2272392833&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[11]+1839030562&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[14]+4259657740&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(n^i^s)+r[1]+2763975236&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[4]+1272893353&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[7]+4139469664&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[10]+3200236656&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(n^i^s)+r[13]+681279174&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[0]+3936430074&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[3]+3572445317&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[6]+76029189&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(n^i^s)+r[9]+3654602809&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[12]+3873151461&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[15]+530742520&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[2]+3299628645&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(i^(n|~s))+r[0]+4096336452&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[7]+1126891415&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[14]+2878612391&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[5]+4237533241&4294967295,n=i+(o<<21&4294967295|o>>>11),o=e+(i^(n|~s))+r[12]+1700485571&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[3]+2399980690&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[10]+4293915773&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[1]+2240044497&4294967295,n=i+(o<<21&4294967295|o>>>11),o=e+(i^(n|~s))+r[8]+1873313359&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[15]+4264355552&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[6]+2734768916&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[13]+1309151649&4294967295,n=i+(o<<21&4294967295|o>>>11),o=e+(i^(n|~s))+r[4]+4149444226&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[11]+3174756917&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[2]+718787259&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,t.g[2]=t.g[2]+i&4294967295,t.g[3]=t.g[3]+s&4294967295}Ze.prototype.j=function(t,e){e===void 0&&(e=t.length);for(var n=e-this.blockSize,r=this.m,i=this.h,s=0;s<e;){if(i==0)for(;s<=n;)_h(this,t,s),s+=this.blockSize;if(typeof t=="string"){for(;s<e;)if(r[i++]=t.charCodeAt(s++),i==this.blockSize){_h(this,r),i=0;break}}else for(;s<e;)if(r[i++]=t[s++],i==this.blockSize){_h(this,r),i=0;break}}this.h=i,this.i+=e};Ze.prototype.l=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var n=8*this.i;for(e=t.length-8;e<t.length;++e)t[e]=n&255,n/=256;for(this.j(t),t=Array(16),e=n=0;4>e;++e)for(var r=0;32>r;r+=8)t[n++]=this.g[e]>>>r&255;return t};function G(t,e){this.h=e;for(var n=[],r=!0,i=t.length-1;0<=i;i--){var s=t[i]|0;r&&s==e||(n[i]=s,r=!1)}this.g=n}var Jb={};function rd(t){return-128<=t&&128>t?cb(t,function(e){return new G([e|0],0>e?-1:0)}):new G([t|0],0>t?-1:0)}function ht(t){if(isNaN(t)||!isFinite(t))return Nr;if(0>t)return me(ht(-t));for(var e=[],n=1,r=0;t>=n;r++)e[r]=t/n|0,n*=Mh;return new G(e,0)}function Uv(t,e){if(t.length==0)throw Error("number format error: empty string");if(e=e||10,2>e||36<e)throw Error("radix out of range: "+e);if(t.charAt(0)=="-")return me(Uv(t.substring(1),e));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=ht(Math.pow(e,8)),r=Nr,i=0;i<t.length;i+=8){var s=Math.min(8,t.length-i),o=parseInt(t.substring(i,i+s),e);8>s?(s=ht(Math.pow(e,s)),r=r.R(s).add(ht(o))):(r=r.R(n),r=r.add(ht(o)))}return r}var Mh=4294967296,Nr=rd(0),Fh=rd(1),Fy=rd(16777216);v=G.prototype;v.ea=function(){if(Ke(this))return-me(this).ea();for(var t=0,e=1,n=0;n<this.g.length;n++){var r=this.D(n);t+=(0<=r?r:Mh+r)*e,e*=Mh}return t};v.toString=function(t){if(t=t||10,2>t||36<t)throw Error("radix out of range: "+t);if(Pt(this))return"0";if(Ke(this))return"-"+me(this).toString(t);for(var e=ht(Math.pow(t,6)),n=this,r="";;){var i=fa(n,e).g;n=da(n,i.R(e));var s=((0<n.g.length?n.g[0]:n.h)>>>0).toString(t);if(n=i,Pt(n))return s+r;for(;6>s.length;)s="0"+s;r=s+r}};v.D=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h};function Pt(t){if(t.h!=0)return!1;for(var e=0;e<t.g.length;e++)if(t.g[e]!=0)return!1;return!0}function Ke(t){return t.h==-1}v.X=function(t){return t=da(this,t),Ke(t)?-1:Pt(t)?0:1};function me(t){for(var e=t.g.length,n=[],r=0;r<e;r++)n[r]=~t.g[r];return new G(n,~t.h).add(Fh)}v.abs=function(){return Ke(this)?me(this):this};v.add=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0,i=0;i<=e;i++){var s=r+(this.D(i)&65535)+(t.D(i)&65535),o=(s>>>16)+(this.D(i)>>>16)+(t.D(i)>>>16);r=o>>>16,s&=65535,o&=65535,n[i]=o<<16|s}return new G(n,n[n.length-1]&-2147483648?-1:0)};function da(t,e){return t.add(me(e))}v.R=function(t){if(Pt(this)||Pt(t))return Nr;if(Ke(this))return Ke(t)?me(this).R(me(t)):me(me(this).R(t));if(Ke(t))return me(this.R(me(t)));if(0>this.X(Fy)&&0>t.X(Fy))return ht(this.ea()*t.ea());for(var e=this.g.length+t.g.length,n=[],r=0;r<2*e;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<t.g.length;i++){var s=this.D(r)>>>16,o=this.D(r)&65535,a=t.D(i)>>>16,u=t.D(i)&65535;n[2*r+2*i]+=o*u,aa(n,2*r+2*i),n[2*r+2*i+1]+=s*u,aa(n,2*r+2*i+1),n[2*r+2*i+1]+=o*a,aa(n,2*r+2*i+1),n[2*r+2*i+2]+=s*a,aa(n,2*r+2*i+2)}for(r=0;r<e;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=e;r<2*e;r++)n[r]=0;return new G(n,0)};function aa(t,e){for(;(t[e]&65535)!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function ts(t,e){this.g=t,this.h=e}function fa(t,e){if(Pt(e))throw Error("division by zero");if(Pt(t))return new ts(Nr,Nr);if(Ke(t))return e=fa(me(t),e),new ts(me(e.g),me(e.h));if(Ke(e))return e=fa(t,me(e)),new ts(me(e.g),e.h);if(30<t.g.length){if(Ke(t)||Ke(e))throw Error("slowDivide_ only works with positive integers.");for(var n=Fh,r=e;0>=r.X(t);)n=xy(n),r=xy(r);var i=Rr(n,1),s=Rr(r,1);for(r=Rr(r,2),n=Rr(n,2);!Pt(r);){var o=s.add(r);0>=o.X(t)&&(i=i.add(n),s=o),r=Rr(r,1),n=Rr(n,1)}return e=da(t,i.R(e)),new ts(i,e)}for(i=Nr;0<=t.X(e);){for(n=Math.max(1,Math.floor(t.ea()/e.ea())),r=Math.ceil(Math.log(n)/Math.LN2),r=48>=r?1:Math.pow(2,r-48),s=ht(n),o=s.R(e);Ke(o)||0<o.X(t);)n-=r,s=ht(n),o=s.R(e);Pt(s)&&(s=Fh),i=i.add(s),t=da(t,o)}return new ts(i,t)}v.gb=function(t){return fa(this,t).h};v.and=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)&t.D(r);return new G(n,this.h&t.h)};v.or=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)|t.D(r);return new G(n,this.h|t.h)};v.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)^t.D(r);return new G(n,this.h^t.h)};function xy(t){for(var e=t.g.length+1,n=[],r=0;r<e;r++)n[r]=t.D(r)<<1|t.D(r-1)>>>31;return new G(n,t.h)}function Rr(t,e){var n=e>>5;e%=32;for(var r=t.g.length-n,i=[],s=0;s<r;s++)i[s]=0<e?t.D(s+n)>>>e|t.D(s+n+1)<<32-e:t.D(s+n);return new G(i,t.h)}ha.prototype.createWebChannel=ha.prototype.g;Be.prototype.send=Be.prototype.u;Be.prototype.open=Be.prototype.m;Be.prototype.close=Be.prototype.close;Ea.NO_ERROR=0;Ea.TIMEOUT=8;Ea.HTTP_ERROR=6;nv.COMPLETE="complete";rv.EventType=ms;ms.OPEN="a";ms.CLOSE="b";ms.ERROR="c";ms.MESSAGE="d";de.prototype.listen=de.prototype.O;Z.prototype.listenOnce=Z.prototype.P;Z.prototype.getLastError=Z.prototype.Sa;Z.prototype.getLastErrorCode=Z.prototype.Ia;Z.prototype.getStatus=Z.prototype.da;Z.prototype.getResponseJson=Z.prototype.Wa;Z.prototype.getResponseText=Z.prototype.ja;Z.prototype.send=Z.prototype.ha;Z.prototype.setWithCredentials=Z.prototype.Oa;Ze.prototype.digest=Ze.prototype.l;Ze.prototype.reset=Ze.prototype.reset;Ze.prototype.update=Ze.prototype.j;G.prototype.add=G.prototype.add;G.prototype.multiply=G.prototype.R;G.prototype.modulo=G.prototype.gb;G.prototype.compare=G.prototype.X;G.prototype.toNumber=G.prototype.ea;G.prototype.toString=G.prototype.toString;G.prototype.getBits=G.prototype.D;G.fromNumber=ht;G.fromString=Uv;var Bv=et.createWebChannelTransport=function(){return new ha},$v=et.getStatEventTarget=function(){return wa()},Ra=et.ErrorCode=Ea,jv=et.EventType=nv,zv=et.Event=Un,id=et.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},qv=et.FetchXmlHttpFactory=_s,Is=et.WebChannel=rv,Gv=et.XhrIo=Z,Wv=et.Md5=Ze,Bn=et.Integer=G;var Hv="@firebase/firestore";var pe=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};pe.UNAUTHENTICATED=new pe(null),pe.GOOGLE_CREDENTIALS=new pe("google-credentials-uid"),pe.FIRST_PARTY=new pe("first-party-uid"),pe.MOCK_USER=new pe("mock-user");var ei="10.11.1";var qn=new Wt("@firebase/firestore");function Ts(){return qn.logLevel}function I(t,...e){if(qn.logLevel<=x.DEBUG){let n=e.map(zf);qn.debug(`Firestore (${ei}): ${t}`,...n)}}function kt(t,...e){if(qn.logLevel<=x.ERROR){let n=e.map(zf);qn.error(`Firestore (${ei}): ${t}`,...n)}}function $r(t,...e){if(qn.logLevel<=x.WARN){let n=e.map(zf);qn.warn(`Firestore (${ei}): ${t}`,...n)}}function zf(t){if(typeof t=="string")return t;try{return function(n){return JSON.stringify(n)}(t)}catch{return t}}function C(t="Unexpected state"){let e=`FIRESTORE (${ei}) INTERNAL ASSERTION FAILED: `+t;throw kt(e),new Error(e)}function W(t,e){t||C()}function O(t,e){return t}var g={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},_=class extends Ue{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var ft=class{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}};var Ma=class{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},cd=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(pe.UNAUTHENTICATED))}shutdown(){}},ld=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}},hd=class{constructor(e){this.t=e,this.currentUser=pe.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let r=this.i,i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve(),s=new ft;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new ft,e.enqueueRetryable(()=>i(this.currentUser))};let o=()=>{let u=s;e.enqueueRetryable(()=>d(this,null,function*(){yield u.promise,yield i(this.currentUser)}))},a=u=>{I("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){let u=this.t.getImmediate({optional:!0});u?a(u):(I("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new ft)}},0),o()}getToken(){let e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(I("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(W(typeof r.accessToken=="string"),new Ma(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){let e=this.auth&&this.auth.getUid();return W(e===null||typeof e=="string"),new pe(e)}},dd=class{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=pe.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},fd=class{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new dd(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(pe.FIRST_PARTY))}shutdown(){}invalidateToken(){}},pd=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},gd=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){let r=s=>{s.error!=null&&I("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);let o=s.token!==this.R;return this.R=s.token,I("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};let i=s=>{I("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){let s=this.A.getImmediate({optional:!0});s?i(s):I("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(W(typeof n.token=="string"),this.R=n.token,new pd(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}};function Xb(t){let e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var Fa=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=Xb(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}};function z(t,e){return t<e?-1:t>e?1:0}function jr(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}var ve=class t{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new _(g.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new _(g.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new _(g.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new _(g.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return t.fromMillis(Date.now())}static fromDate(e){return t.fromMillis(e.getTime())}static fromMillis(e){let n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new t(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?z(this.nanoseconds,e.nanoseconds):z(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var M=class t{constructor(e){this.timestamp=e}static fromTimestamp(e){return new t(e)}static min(){return new t(new ve(0,0))}static max(){return new t(new ve(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var xa=class t{constructor(e,n,r){n===void 0?n=0:n>e.length&&C(),r===void 0?r=e.length-n:r>e.length-n&&C(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return t.comparator(this,e)===0}child(e){let n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){let r=Math.min(e.length,n.length);for(let i=0;i<r;i++){let s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}},J=class t extends xa{construct(e,n,r){return new t(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let n=[];for(let r of e){if(r.indexOf("//")>=0)throw new _(g.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new t(n)}static emptyPath(){return new t([])}},Zb=/^[_a-zA-Z][_a-zA-Z0-9]*$/,je=class t extends xa{construct(e,n,r){return new t(e,n,r)}static isValidIdentifier(e){return Zb.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new t(["__name__"])}static fromServerFormat(e){let n=[],r="",i=0,s=()=>{if(r.length===0)throw new _(g.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""},o=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new _(g.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new _(g.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new _(g.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new t(n)}static emptyPath(){return new t([])}};var S=class t{constructor(e){this.path=e}static fromPath(e){return new t(J.fromString(e))}static fromName(e){return new t(J.fromString(e).popFirst(5))}static empty(){return new t(J.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&J.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return J.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new t(new J(e.slice()))}};var md=class{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}};md.UNKNOWN_ID=-1;function eC(t,e){let n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=M.fromTimestamp(r===1e9?new ve(n+1,0):new ve(n,r));return new Gn(i,S.empty(),e)}function tC(t){return new Gn(t.readTime,t.key,-1)}var Gn=class t{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new t(M.min(),S.empty(),-1)}static max(){return new t(M.max(),S.empty(),-1)}};function nC(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=S.comparator(t.documentKey,e.documentKey),n!==0?n:z(t.largestBatchId,e.largestBatchId))}var rC="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",yd=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function $s(t){return d(this,null,function*(){if(t.code!==g.FAILED_PRECONDITION||t.message!==rC)throw t;I("LocalStore","Unexpectedly lost primary lease")})}var y=class t{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&C(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{let n=e();return n instanceof t?n:t.resolve(n)}catch(n){return t.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):t.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):t.reject(n)}static resolve(e){return new t((n,r)=>{n(e)})}static reject(e){return new t((n,r)=>{r(e)})}static waitFor(e){return new t((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},u=>r(u))}),o=!0,s===i&&n()})}static or(e){let n=t.resolve(!1);for(let r of e)n=n.next(i=>i?t.resolve(i):r());return n}static forEach(e,n){let r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new t((r,i)=>{let s=e.length,o=new Array(s),a=0;for(let u=0;u<s;u++){let c=u;n(e[c]).next(l=>{o[c]=l,++a,a===s&&r(o)},l=>i(l))}})}static doWhile(e,n){return new t((r,i)=>{let s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}};function iC(t){let e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function js(t){return t.name==="IndexedDbTransactionError"}var A_=(()=>{class t{constructor(n,r){this.previousValue=n,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){let n=++this.previousValue;return this.se&&this.se(n),n}}return t.oe=-1,t})();function pu(t){return t==null}function Rs(t){return t===0&&1/t==-1/0}function sC(t){return typeof t=="number"&&Number.isInteger(t)&&!Rs(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var oC=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Kk=[...oC,"documentOverlays"],aC=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],uC=aC,Qk=[...uC,"indexConfiguration","indexState","indexEntries"];function Kv(t){let e=0;for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Xn(t,e){for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function S_(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var te=class t{constructor(e,n){this.comparator=e,this.root=n||pt.EMPTY}insert(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,pt.BLACK,null,null))}remove(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,pt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){let r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){let e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Vr(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Vr(this.root,e,this.comparator,!1)}getReverseIterator(){return new Vr(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Vr(this.root,e,this.comparator,!0)}},Vr=class{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},pt=class t{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??t.RED,this.left=i??t.EMPTY,this.right=s??t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new t(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this,s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw C();let e=this.left.check();if(e!==this.right.check())throw C();return e+(this.isRed()?0:1)}};pt.EMPTY=null,pt.RED=!0,pt.BLACK=!1;pt.EMPTY=new class{constructor(){this.size=0}get key(){throw C()}get value(){throw C()}get color(){throw C()}get left(){throw C()}get right(){throw C()}copy(e,n,r,i,s){return this}insert(e,n,r){return new pt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Ae=class t{constructor(e){this.comparator=e,this.data=new te(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new La(this.data.getIterator())}getIteratorFrom(e){return new La(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){let i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(n=>{e.push(n)}),e}toString(){let e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){let n=new t(this.comparator);return n.data=e,n}},La=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var Qe=class t{constructor(e){this.fields=e,e.sort(je.comparator)}static empty(){return new t([])}unionWith(e){let n=new Ae(je.comparator);for(let r of this.fields)n=n.add(r);for(let r of e)n=n.add(r);return new t(n.toArray())}covers(e){for(let n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return jr(this.fields,e.fields,(n,r)=>n.isEqual(r))}};var Va=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var Ce=class t{constructor(e){this.binaryString=e}static fromBase64String(e){let n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new Va("Invalid base64 string: "+s):s}}(e);return new t(n)}static fromUint8Array(e){let n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new t(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){let r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return z(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};Ce.EMPTY_BYTE_STRING=new Ce("");var cC=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Mt(t){if(W(!!t),typeof t=="string"){let e=0,n=cC.exec(t);if(W(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:ee(t.seconds),nanos:ee(t.nanos)}}function ee(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function sn(t){return typeof t=="string"?Ce.fromBase64String(t):Ce.fromUint8Array(t)}function qf(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Gf(t){let e=t.mapValue.fields.__previous_value__;return qf(e)?Gf(e):e}function Ps(t){let e=Mt(t.mapValue.fields.__local_write_time__.timestampValue);return new ve(e.seconds,e.nanos)}var vd=class{constructor(e,n,r,i,s,o,a,u,c){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=c}},Ua=class t{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new t("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database}};var Pa={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Wn(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?qf(t)?4:b_(t)?9007199254740991:10:C()}function yt(t,e){if(t===e)return!0;let n=Wn(t);if(n!==Wn(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Ps(t).isEqual(Ps(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;let o=Mt(i.timestampValue),a=Mt(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return sn(i.bytesValue).isEqual(sn(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return ee(i.geoPointValue.latitude)===ee(s.geoPointValue.latitude)&&ee(i.geoPointValue.longitude)===ee(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return ee(i.integerValue)===ee(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){let o=ee(i.doubleValue),a=ee(s.doubleValue);return o===a?Rs(o)===Rs(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return jr(t.arrayValue.values||[],e.arrayValue.values||[],yt);case 10:return function(i,s){let o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(Kv(o)!==Kv(a))return!1;for(let u in o)if(o.hasOwnProperty(u)&&(a[u]===void 0||!yt(o[u],a[u])))return!1;return!0}(t,e);default:return C()}}function Ns(t,e){return(t.values||[]).find(n=>yt(n,e))!==void 0}function zr(t,e){if(t===e)return 0;let n=Wn(t),r=Wn(e);if(n!==r)return z(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return z(t.booleanValue,e.booleanValue);case 2:return function(s,o){let a=ee(s.integerValue||s.doubleValue),u=ee(o.integerValue||o.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(t,e);case 3:return Qv(t.timestampValue,e.timestampValue);case 4:return Qv(Ps(t),Ps(e));case 5:return z(t.stringValue,e.stringValue);case 6:return function(s,o){let a=sn(s),u=sn(o);return a.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){let a=s.split("/"),u=o.split("/");for(let c=0;c<a.length&&c<u.length;c++){let l=z(a[c],u[c]);if(l!==0)return l}return z(a.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){let a=z(ee(s.latitude),ee(o.latitude));return a!==0?a:z(ee(s.longitude),ee(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(s,o){let a=s.values||[],u=o.values||[];for(let c=0;c<a.length&&c<u.length;++c){let l=zr(a[c],u[c]);if(l)return l}return z(a.length,u.length)}(t.arrayValue,e.arrayValue);case 10:return function(s,o){if(s===Pa.mapValue&&o===Pa.mapValue)return 0;if(s===Pa.mapValue)return 1;if(o===Pa.mapValue)return-1;let a=s.fields||{},u=Object.keys(a),c=o.fields||{},l=Object.keys(c);u.sort(),l.sort();for(let h=0;h<u.length&&h<l.length;++h){let f=z(u[h],l[h]);if(f!==0)return f;let p=zr(a[u[h]],c[l[h]]);if(p!==0)return p}return z(u.length,l.length)}(t.mapValue,e.mapValue);default:throw C()}}function Qv(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return z(t,e);let n=Mt(t),r=Mt(e),i=z(n.seconds,r.seconds);return i!==0?i:z(n.nanos,r.nanos)}function qr(t){return _d(t)}function _d(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){let r=Mt(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return sn(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return S.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(let s of n.values||[])i?i=!1:r+=",",r+=_d(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){let r=Object.keys(n.fields||{}).sort(),i="{",s=!0;for(let o of r)s?s=!1:i+=",",i+=`${o}:${_d(n.fields[o])}`;return i+"}"}(t.mapValue):C()}function Yv(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function wd(t){return!!t&&"integerValue"in t}function Wf(t){return!!t&&"arrayValue"in t}function Jv(t){return!!t&&"nullValue"in t}function Xv(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Oa(t){return!!t&&"mapValue"in t}function As(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){let e={mapValue:{fields:{}}};return Xn(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=As(r)),e}if(t.arrayValue){let e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=As(t.arrayValue.values[n]);return e}return Object.assign({},t)}function b_(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var $e=class t{constructor(e){this.value=e}static empty(){return new t({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Oa(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=As(n)}setAll(e){let n=je.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){let u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=As(o):i.push(a.lastSegment())});let s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){let n=this.field(e.popLast());Oa(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return yt(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Oa(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Xn(n,(i,s)=>e[i]=s);for(let i of r)delete e[i]}clone(){return new t(As(this.value))}};function C_(t){let e=[];return Xn(t.fields,(n,r)=>{let i=new je([n]);if(Oa(r)){let s=C_(r.mapValue).fields;if(s.length===0)e.push(i);else for(let o of s)e.push(i.child(o))}else e.push(i)}),new Qe(e)}var tt=class t{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new t(e,0,M.min(),M.min(),M.min(),$e.empty(),0)}static newFoundDocument(e,n,r,i){return new t(e,1,n,M.min(),r,i,0)}static newNoDocument(e,n){return new t(e,2,n,M.min(),M.min(),$e.empty(),0)}static newUnknownDocument(e,n){return new t(e,3,n,M.min(),M.min(),$e.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(M.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=$e.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=$e.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=M.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Gr=class{constructor(e,n){this.position=e,this.inclusive=n}};function Zv(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){let s=e[i],o=t.position[i];if(s.field.isKeyField()?r=S.comparator(S.fromName(o.referenceValue),n.key):r=zr(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function e_(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!yt(t.position[n],e.position[n]))return!1;return!0}var Wr=class{constructor(e,n="asc"){this.field=e,this.dir=n}};function lC(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}var Ba=class{},oe=class t extends Ba{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new Id(e,n,r):n==="array-contains"?new Ad(e,r):n==="in"?new Sd(e,r):n==="not-in"?new bd(e,r):n==="array-contains-any"?new Cd(e,r):new t(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new Td(e,r):new Dd(e,r)}matches(e){let n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(zr(n,this.value)):n!==null&&Wn(this.value)===Wn(n)&&this.matchesComparison(zr(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return C()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},nt=class t extends Ba{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new t(e,n)}matches(e){return R_(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function R_(t){return t.op==="and"}function P_(t){return hC(t)&&R_(t)}function hC(t){for(let e of t.filters)if(e instanceof nt)return!1;return!0}function Ed(t){if(t instanceof oe)return t.field.canonicalString()+t.op.toString()+qr(t.value);if(P_(t))return t.filters.map(e=>Ed(e)).join(",");{let e=t.filters.map(n=>Ed(n)).join(",");return`${t.op}(${e})`}}function N_(t,e){return t instanceof oe?function(r,i){return i instanceof oe&&r.op===i.op&&r.field.isEqual(i.field)&&yt(r.value,i.value)}(t,e):t instanceof nt?function(r,i){return i instanceof nt&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&N_(o,i.filters[a]),!0):!1}(t,e):void C()}function O_(t){return t instanceof oe?function(n){return`${n.field.canonicalString()} ${n.op} ${qr(n.value)}`}(t):t instanceof nt?function(n){return n.op.toString()+" {"+n.getFilters().map(O_).join(" ,")+"}"}(t):"Filter"}var Id=class extends oe{constructor(e,n,r){super(e,n,r),this.key=S.fromName(r.referenceValue)}matches(e){let n=S.comparator(e.key,this.key);return this.matchesComparison(n)}},Td=class extends oe{constructor(e,n){super(e,"in",n),this.keys=k_("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}},Dd=class extends oe{constructor(e,n){super(e,"not-in",n),this.keys=k_("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}};function k_(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>S.fromName(r.referenceValue))}var Ad=class extends oe{constructor(e,n){super(e,"array-contains",n)}matches(e){let n=e.data.field(this.field);return Wf(n)&&Ns(n.arrayValue,this.value)}},Sd=class extends oe{constructor(e,n){super(e,"in",n)}matches(e){let n=e.data.field(this.field);return n!==null&&Ns(this.value.arrayValue,n)}},bd=class extends oe{constructor(e,n){super(e,"not-in",n)}matches(e){if(Ns(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let n=e.data.field(this.field);return n!==null&&!Ns(this.value.arrayValue,n)}},Cd=class extends oe{constructor(e,n){super(e,"array-contains-any",n)}matches(e){let n=e.data.field(this.field);return!(!Wf(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Ns(this.value.arrayValue,r))}};var Rd=class{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}};function t_(t,e=null,n=[],r=[],i=null,s=null,o=null){return new Rd(t,e,n,r,i,s,o)}function Hf(t){let e=O(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Ed(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),pu(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>qr(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>qr(r)).join(",")),e.ue=n}return e.ue}function Kf(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!lC(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!N_(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!e_(t.startAt,e.startAt)&&e_(t.endAt,e.endAt)}function Pd(t){return S.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}var Hn=class{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function dC(t,e,n,r,i,s,o,a){return new Hn(t,e,n,r,i,s,o,a)}function Qf(t){return new Hn(t)}function n_(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function M_(t){return t.collectionGroup!==null}function Ss(t){let e=O(t);if(e.ce===null){e.ce=[];let n=new Set;for(let s of e.explicitOrderBy)e.ce.push(s),n.add(s.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Ae(je.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.ce.push(new Wr(s,r))}),n.has(je.keyField().canonicalString())||e.ce.push(new Wr(je.keyField(),r))}return e.ce}function gt(t){let e=O(t);return e.le||(e.le=fC(e,Ss(t))),e.le}function fC(t,e){if(t.limitType==="F")return t_(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{let s=i.dir==="desc"?"asc":"desc";return new Wr(i.field,s)});let n=t.endAt?new Gr(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Gr(t.startAt.position,t.startAt.inclusive):null;return t_(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Nd(t,e){let n=t.filters.concat([e]);return new Hn(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Od(t,e,n){return new Hn(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function gu(t,e){return Kf(gt(t),gt(e))&&t.limitType===e.limitType}function F_(t){return`${Hf(gt(t))}|lt:${t.limitType}`}function Fr(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>O_(i)).join(", ")}]`),pu(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>qr(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>qr(i)).join(",")),`Target(${r})`}(gt(t))}; limitType=${t.limitType})`}function mu(t,e){return e.isFoundDocument()&&function(r,i){let s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):S.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(let s of Ss(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(let s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,a,u){let c=Zv(o,a,u);return o.inclusive?c<=0:c<0}(r.startAt,Ss(r),i)||r.endAt&&!function(o,a,u){let c=Zv(o,a,u);return o.inclusive?c>=0:c>0}(r.endAt,Ss(r),i))}(t,e)}function pC(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function x_(t){return(e,n)=>{let r=!1;for(let i of Ss(t)){let s=gC(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function gC(t,e,n){let r=t.field.isKeyField()?S.comparator(e.key,n.key):function(s,o,a){let u=o.data.field(s),c=a.data.field(s);return u!==null&&c!==null?zr(u,c):C()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return C()}}var on=class{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(let[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Xn(this.inner,(n,r)=>{for(let[i,s]of r)e(i,s)})}isEmpty(){return S_(this.inner)}size(){return this.innerSize}};var mC=new te(S.comparator);function Ft(){return mC}var L_=new te(S.comparator);function Ds(...t){let e=L_;for(let n of t)e=e.insert(n.key,n);return e}function V_(t){let e=L_;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function $n(){return bs()}function U_(){return bs()}function bs(){return new on(t=>t.toString(),(t,e)=>t.isEqual(e))}var yC=new te(S.comparator),vC=new Ae(S.comparator);function L(...t){let e=vC;for(let n of t)e=e.add(n);return e}var _C=new Ae(z);function wC(){return _C}function B_(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Rs(e)?"-0":e}}function $_(t){return{integerValue:""+t}}function EC(t,e){return sC(e)?$_(e):B_(t,e)}var Hr=class{constructor(){this._=void 0}};function IC(t,e,n){return t instanceof Kr?function(i,s){let o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&qf(s)&&(s=Gf(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof Kn?z_(t,e):t instanceof Qn?q_(t,e):function(i,s){let o=j_(i,s),a=r_(o)+r_(i.Pe);return wd(o)&&wd(i.Pe)?$_(a):B_(i.serializer,a)}(t,e)}function TC(t,e,n){return t instanceof Kn?z_(t,e):t instanceof Qn?q_(t,e):n}function j_(t,e){return t instanceof Qr?function(r){return wd(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}var Kr=class extends Hr{},Kn=class extends Hr{constructor(e){super(),this.elements=e}};function z_(t,e){let n=G_(e);for(let r of t.elements)n.some(i=>yt(i,r))||n.push(r);return{arrayValue:{values:n}}}var Qn=class extends Hr{constructor(e){super(),this.elements=e}};function q_(t,e){let n=G_(e);for(let r of t.elements)n=n.filter(i=>!yt(i,r));return{arrayValue:{values:n}}}var Qr=class extends Hr{constructor(e,n){super(),this.serializer=e,this.Pe=n}};function r_(t){return ee(t.integerValue||t.doubleValue)}function G_(t){return Wf(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function DC(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof Kn&&i instanceof Kn||r instanceof Qn&&i instanceof Qn?jr(r.elements,i.elements,yt):r instanceof Qr&&i instanceof Qr?yt(r.Pe,i.Pe):r instanceof Kr&&i instanceof Kr}(t.transform,e.transform)}var kd=class{constructor(e,n){this.version=e,this.transformResults=n}},nn=class t{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new t}static exists(e){return new t(void 0,e)}static updateTime(e){return new t(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function ka(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}var Yr=class{};function W_(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new $a(t.key,nn.none()):new Yn(t.key,t.data,nn.none());{let n=t.data,r=$e.empty(),i=new Ae(je.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new vt(t.key,r,new Qe(i.toArray()),nn.none())}}function AC(t,e,n){t instanceof Yn?function(i,s,o){let a=i.value.clone(),u=s_(i.fieldTransforms,s,o.transformResults);a.setAll(u),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof vt?function(i,s,o){if(!ka(i.precondition,s))return void s.convertToUnknownDocument(o.version);let a=s_(i.fieldTransforms,s,o.transformResults),u=s.data;u.setAll(H_(i)),u.setAll(a),s.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Cs(t,e,n,r){return t instanceof Yn?function(s,o,a,u){if(!ka(s.precondition,o))return a;let c=s.value.clone(),l=o_(s.fieldTransforms,u,o);return c.setAll(l),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof vt?function(s,o,a,u){if(!ka(s.precondition,o))return a;let c=o_(s.fieldTransforms,u,o),l=o.data;return l.setAll(H_(s)),l.setAll(c),o.convertToFoundDocument(o.version,l).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(h=>h.field))}(t,e,n,r):function(s,o,a){return ka(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function SC(t,e){let n=null;for(let r of t.fieldTransforms){let i=e.data.field(r.field),s=j_(r.transform,i||null);s!=null&&(n===null&&(n=$e.empty()),n.set(r.field,s))}return n||null}function i_(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&jr(r,i,(s,o)=>DC(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}var Yn=class extends Yr{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},vt=class extends Yr{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}};function H_(t){let e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){let r=t.data.field(n);e.set(n,r)}}),e}function s_(t,e,n){let r=new Map;W(t.length===n.length);for(let i=0;i<n.length;i++){let s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,TC(o,a,n[i]))}return r}function o_(t,e,n){let r=new Map;for(let i of t){let s=i.transform,o=n.data.field(i.field);r.set(i.field,IC(s,o,e))}return r}var $a=class extends Yr{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},Md=class extends Yr{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var Fd=class{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){let r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){let s=this.mutations[i];s.key.isEqual(e.key)&&AC(s,e,r[i])}}applyToLocalView(e,n){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(n=Cs(r,e,n,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(n=Cs(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){let r=U_();return this.mutations.forEach(i=>{let s=e.get(i.key),o=s.overlayedDocument,a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;let u=W_(o,a);u!==null&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(M.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),L())}isEqual(e){return this.batchId===e.batchId&&jr(this.mutations,e.mutations,(n,r)=>i_(n,r))&&jr(this.baseMutations,e.baseMutations,(n,r)=>i_(n,r))}},xd=class t{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){W(e.mutations.length===r.length);let i=function(){return yC}(),s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new t(e,n,r,i)}};var Ld=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var Vd=class{constructor(e,n){this.count=e,this.unchangedNames=n}};var ie,V;function bC(t){switch(t){default:return C();case g.CANCELLED:case g.UNKNOWN:case g.DEADLINE_EXCEEDED:case g.RESOURCE_EXHAUSTED:case g.INTERNAL:case g.UNAVAILABLE:case g.UNAUTHENTICATED:return!1;case g.INVALID_ARGUMENT:case g.NOT_FOUND:case g.ALREADY_EXISTS:case g.PERMISSION_DENIED:case g.FAILED_PRECONDITION:case g.ABORTED:case g.OUT_OF_RANGE:case g.UNIMPLEMENTED:case g.DATA_LOSS:return!0}}function K_(t){if(t===void 0)return kt("GRPC error has no .code"),g.UNKNOWN;switch(t){case ie.OK:return g.OK;case ie.CANCELLED:return g.CANCELLED;case ie.UNKNOWN:return g.UNKNOWN;case ie.DEADLINE_EXCEEDED:return g.DEADLINE_EXCEEDED;case ie.RESOURCE_EXHAUSTED:return g.RESOURCE_EXHAUSTED;case ie.INTERNAL:return g.INTERNAL;case ie.UNAVAILABLE:return g.UNAVAILABLE;case ie.UNAUTHENTICATED:return g.UNAUTHENTICATED;case ie.INVALID_ARGUMENT:return g.INVALID_ARGUMENT;case ie.NOT_FOUND:return g.NOT_FOUND;case ie.ALREADY_EXISTS:return g.ALREADY_EXISTS;case ie.PERMISSION_DENIED:return g.PERMISSION_DENIED;case ie.FAILED_PRECONDITION:return g.FAILED_PRECONDITION;case ie.ABORTED:return g.ABORTED;case ie.OUT_OF_RANGE:return g.OUT_OF_RANGE;case ie.UNIMPLEMENTED:return g.UNIMPLEMENTED;case ie.DATA_LOSS:return g.DATA_LOSS;default:return C()}}(V=ie||(ie={}))[V.OK=0]="OK",V[V.CANCELLED=1]="CANCELLED",V[V.UNKNOWN=2]="UNKNOWN",V[V.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",V[V.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",V[V.NOT_FOUND=5]="NOT_FOUND",V[V.ALREADY_EXISTS=6]="ALREADY_EXISTS",V[V.PERMISSION_DENIED=7]="PERMISSION_DENIED",V[V.UNAUTHENTICATED=16]="UNAUTHENTICATED",V[V.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",V[V.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",V[V.ABORTED=10]="ABORTED",V[V.OUT_OF_RANGE=11]="OUT_OF_RANGE",V[V.UNIMPLEMENTED=12]="UNIMPLEMENTED",V[V.INTERNAL=13]="INTERNAL",V[V.UNAVAILABLE=14]="UNAVAILABLE",V[V.DATA_LOSS=15]="DATA_LOSS";var a_=null;function CC(){return new TextEncoder}var RC=new Bn([4294967295,4294967295],0);function u_(t){let e=CC().encode(t),n=new Wv;return n.update(e),new Uint8Array(n.digest())}function c_(t){let e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Bn([n,r],0),new Bn([i,s],0)]}var Ud=class t{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new jn(`Invalid padding: ${n}`);if(r<0)throw new jn(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new jn(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new jn(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=Bn.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply(Bn.fromNumber(r)));return i.compare(RC)===1&&(i=new Bn([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;let n=u_(e),[r,i]=c_(n);for(let s=0;s<this.hashCount;s++){let o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,n,r){let i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new t(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;let n=u_(e),[r,i]=c_(n);for(let s=0;s<this.hashCount;s++){let o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){let n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}},jn=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var ja=class t{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){let i=new Map;return i.set(e,Os.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new t(M.min(),i,new te(z),Ft(),L())}},Os=class t{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new t(r,n,L(),L(),L())}};var Ur=class{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}},za=class{constructor(e,n){this.targetId=e,this.me=n}},qa=class{constructor(e,n,r=Ce.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}},Ga=class{constructor(){this.fe=0,this.ge=h_(),this.pe=Ce.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}Ce(){let e=L(),n=L(),r=L();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:C()}}),new Os(this.pe,this.ye,e,n,r)}ve(){this.we=!1,this.ge=h_()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,W(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},Bd=class{constructor(e){this.Le=e,this.Be=new Map,this.ke=Ft(),this.qe=l_(),this.Qe=new te(z)}Ke(e){for(let n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(let n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{let r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.ve(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:C()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(e){let n=e.targetId,r=e.me.count,i=this.Je(n);if(i){let s=i.target;if(Pd(s))if(r===0){let o=new S(s.path);this.Ue(n,o,tt.newNoDocument(o,M.min()))}else W(r===1);else{let o=this.Ye(n);if(o!==r){let a=this.Ze(e),u=a?this.Xe(a,e,o):1;if(u!==0){this.je(n);let c=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,c)}a_?.et(function(l,h,f,p,E){var D,m,T,U,K,j;let Re={localCacheCount:l,existenceFilterCount:h.count,databaseId:f.database,projectId:f.projectId},ne=h.unchangedNames;return ne&&(Re.bloomFilter={applied:E===0,hashCount:(D=ne?.hashCount)!==null&&D!==void 0?D:0,bitmapLength:(U=(T=(m=ne?.bits)===null||m===void 0?void 0:m.bitmap)===null||T===void 0?void 0:T.length)!==null&&U!==void 0?U:0,padding:(j=(K=ne?.bits)===null||K===void 0?void 0:K.padding)!==null&&j!==void 0?j:0,mightContain:Ye=>{var er;return(er=p?.mightContain(Ye))!==null&&er!==void 0&&er}}),Re}(o,e.me,this.Le.tt(),a,u))}}}}Ze(e){let n=e.me.unchangedNames;if(!n||!n.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n,o,a;try{o=sn(r).toUint8Array()}catch(u){if(u instanceof Va)return $r("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new Ud(o,i,s)}catch(u){return $r(u instanceof jn?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.Ie===0?null:a}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){let r=this.Le.getRemoteKeysForTarget(n),i=0;return r.forEach(s=>{let o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,s,null),i++)}),i}rt(e){let n=new Map;this.Be.forEach((s,o)=>{let a=this.Je(o);if(a){if(s.current&&Pd(a.target)){let u=new S(a.target.path);this.ke.get(u)!==null||this.it(o,u)||this.Ue(o,u,tt.newNoDocument(u,e))}s.be&&(n.set(o,s.Ce()),s.ve())}});let r=L();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(u=>{let c=this.Je(u);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));let i=new ja(e,n,this.Qe,this.ke,r);return this.ke=Ft(),this.qe=l_(),this.Qe=new te(z),i}$e(e,n){if(!this.ze(e))return;let r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;let i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){let n=this.Ge(e).Ce();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new Ga,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new Ae(z),this.qe=this.qe.insert(e,n)),n}ze(e){let n=this.Je(e)!==null;return n||I("WatchChangeAggregator","Detected inactive target",e),n}Je(e){let n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Ga),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}};function l_(){return new te(S.comparator)}function h_(){return new te(S.comparator)}var PC={asc:"ASCENDING",desc:"DESCENDING"},NC={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},OC={and:"AND",or:"OR"},$d=class{constructor(e,n){this.databaseId=e,this.useProto3Json=n}};function jd(t,e){return t.useProto3Json||pu(e)?e:{value:e}}function Wa(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Q_(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function kC(t,e){return Wa(t,e.toTimestamp())}function mt(t){return W(!!t),M.fromTimestamp(function(n){let r=Mt(n);return new ve(r.seconds,r.nanos)}(t))}function Yf(t,e){return zd(t,e).canonicalString()}function zd(t,e){let n=function(i){return new J(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function Y_(t){let e=J.fromString(t);return W(tw(e)),e}function qd(t,e){return Yf(t.databaseId,e.path)}function sd(t,e){let n=Y_(e);if(n.get(1)!==t.databaseId.projectId)throw new _(g.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new _(g.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new S(X_(n))}function J_(t,e){return Yf(t.databaseId,e)}function MC(t){let e=Y_(t);return e.length===4?J.emptyPath():X_(e)}function Gd(t){return new J(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function X_(t){return W(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function d_(t,e,n){return{name:qd(t,e),fields:n.value.mapValue.fields}}function FC(t,e){let n;if("targetChange"in e){e.targetChange;let r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:C()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(c,l){return c.useProto3Json?(W(l===void 0||typeof l=="string"),Ce.fromBase64String(l||"")):(W(l===void 0||l instanceof Buffer||l instanceof Uint8Array),Ce.fromUint8Array(l||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){let l=c.code===void 0?g.UNKNOWN:K_(c.code);return new _(l,c.message||"")}(o);n=new qa(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=sd(t,r.document.name),s=mt(r.document.updateTime),o=r.document.createTime?mt(r.document.createTime):M.min(),a=new $e({mapValue:{fields:r.document.fields}}),u=tt.newFoundDocument(i,s,o,a),c=r.targetIds||[],l=r.removedTargetIds||[];n=new Ur(c,l,u.key,u)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=sd(t,r.document),s=r.readTime?mt(r.readTime):M.min(),o=tt.newNoDocument(i,s),a=r.removedTargetIds||[];n=new Ur([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=sd(t,r.document),s=r.removedTargetIds||[];n=new Ur([],s,i,null)}else{if(!("filter"in e))return C();{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:s}=r,o=new Vd(i,s),a=r.targetId;n=new za(a,o)}}return n}function xC(t,e){let n;if(e instanceof Yn)n={update:d_(t,e.key,e.value)};else if(e instanceof $a)n={delete:qd(t,e.key)};else if(e instanceof vt)n={update:d_(t,e.key,e.data),updateMask:GC(e.fieldMask)};else{if(!(e instanceof Md))return C();n={verify:qd(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){let a=o.transform;if(a instanceof Kr)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Kn)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Qn)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Qr)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw C()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:kC(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:C()}(t,e.precondition)),n}function LC(t,e){return t&&t.length>0?(W(e!==void 0),t.map(n=>function(i,s){let o=i.updateTime?mt(i.updateTime):mt(s);return o.isEqual(M.min())&&(o=mt(s)),new kd(o,i.transformResults||[])}(n,e))):[]}function VC(t,e){return{documents:[J_(t,e.path)]}}function UC(t,e){let n={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=J_(t,i);let s=function(c){if(c.length!==0)return ew(nt.create(c,"and"))}(e.filters);s&&(n.structuredQuery.where=s);let o=function(c){if(c.length!==0)return c.map(l=>function(f){return{field:xr(f.field),direction:jC(f.dir)}}(l))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);let a=jd(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{_t:n,parent:i}}function BC(t){let e=MC(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){W(r===1);let l=n.from[0];l.allDescendants?i=l.collectionId:e=e.child(l.collectionId)}let s=[];n.where&&(s=function(h){let f=Z_(h);return f instanceof nt&&P_(f)?f.getFilters():[f]}(n.where));let o=[];n.orderBy&&(o=function(h){return h.map(f=>function(E){return new Wr(Lr(E.field),function(m){switch(m){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(E.direction))}(f))}(n.orderBy));let a=null;n.limit&&(a=function(h){let f;return f=typeof h=="object"?h.value:h,pu(f)?null:f}(n.limit));let u=null;n.startAt&&(u=function(h){let f=!!h.before,p=h.values||[];return new Gr(p,f)}(n.startAt));let c=null;return n.endAt&&(c=function(h){let f=!h.before,p=h.values||[];return new Gr(p,f)}(n.endAt)),dC(e,i,o,s,a,"F",u,c)}function $C(t,e){let n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return C()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function Z_(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":let r=Lr(n.unaryFilter.field);return oe.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=Lr(n.unaryFilter.field);return oe.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let s=Lr(n.unaryFilter.field);return oe.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let o=Lr(n.unaryFilter.field);return oe.create(o,"!=",{nullValue:"NULL_VALUE"});default:return C()}}(t):t.fieldFilter!==void 0?function(n){return oe.create(Lr(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return C()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return nt.create(n.compositeFilter.filters.map(r=>Z_(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return C()}}(n.compositeFilter.op))}(t):C()}function jC(t){return PC[t]}function zC(t){return NC[t]}function qC(t){return OC[t]}function xr(t){return{fieldPath:t.canonicalString()}}function Lr(t){return je.fromServerFormat(t.fieldPath)}function ew(t){return t instanceof oe?function(n){if(n.op==="=="){if(Xv(n.value))return{unaryFilter:{field:xr(n.field),op:"IS_NAN"}};if(Jv(n.value))return{unaryFilter:{field:xr(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Xv(n.value))return{unaryFilter:{field:xr(n.field),op:"IS_NOT_NAN"}};if(Jv(n.value))return{unaryFilter:{field:xr(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:xr(n.field),op:zC(n.op),value:n.value}}}(t):t instanceof nt?function(n){let r=n.getFilters().map(i=>ew(i));return r.length===1?r[0]:{compositeFilter:{op:qC(n.op),filters:r}}}(t):C()}function GC(t){let e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function tw(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}var ks=class t{constructor(e,n,r,i,s=M.min(),o=M.min(),a=Ce.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var Wd=class{constructor(e){this.ut=e}};function WC(t){let e=BC({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Od(e,e.limit,"L"):e}var Ha=class{constructor(){}ht(e,n){this.Pt(e,n),n.It()}Pt(e,n){if("nullValue"in e)this.Tt(n,5);else if("booleanValue"in e)this.Tt(n,10),n.Et(e.booleanValue?1:0);else if("integerValue"in e)this.Tt(n,15),n.Et(ee(e.integerValue));else if("doubleValue"in e){let r=ee(e.doubleValue);isNaN(r)?this.Tt(n,13):(this.Tt(n,15),Rs(r)?n.Et(0):n.Et(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Tt(n,20),typeof r=="string"&&(r=Mt(r)),n.dt(`${r.seconds||""}`),n.Et(r.nanos||0)}else if("stringValue"in e)this.At(e.stringValue,n),this.Rt(n);else if("bytesValue"in e)this.Tt(n,30),n.Vt(sn(e.bytesValue)),this.Rt(n);else if("referenceValue"in e)this.ft(e.referenceValue,n);else if("geoPointValue"in e){let r=e.geoPointValue;this.Tt(n,45),n.Et(r.latitude||0),n.Et(r.longitude||0)}else"mapValue"in e?b_(e)?this.Tt(n,Number.MAX_SAFE_INTEGER):(this.gt(e.mapValue,n),this.Rt(n)):"arrayValue"in e?(this.yt(e.arrayValue,n),this.Rt(n)):C()}At(e,n){this.Tt(n,25),this.wt(e,n)}wt(e,n){n.dt(e)}gt(e,n){let r=e.fields||{};this.Tt(n,55);for(let i of Object.keys(r))this.At(i,n),this.Pt(r[i],n)}yt(e,n){let r=e.values||[];this.Tt(n,50);for(let i of r)this.Pt(i,n)}ft(e,n){this.Tt(n,37),S.fromName(e).path.forEach(r=>{this.Tt(n,60),this.wt(r,n)})}Tt(e,n){e.Et(n)}Rt(e){e.Et(2)}};Ha.St=new Ha;var Hd=class{constructor(){this.on=new Kd}addToCollectionParentIndex(e,n){return this.on.add(n),y.resolve()}getCollectionParents(e,n){return y.resolve(this.on.getEntries(n))}addFieldIndex(e,n){return y.resolve()}deleteFieldIndex(e,n){return y.resolve()}deleteAllFieldIndexes(e){return y.resolve()}createTargetIndexes(e,n){return y.resolve()}getDocumentsMatchingTarget(e,n){return y.resolve(null)}getIndexType(e,n){return y.resolve(0)}getFieldIndexes(e,n){return y.resolve([])}getNextCollectionGroupToUpdate(e){return y.resolve(null)}getMinOffset(e,n){return y.resolve(Gn.min())}getMinOffsetFromCollectionGroup(e,n){return y.resolve(Gn.min())}updateCollectionGroup(e,n,r){return y.resolve()}updateIndexEntries(e,n){return y.resolve()}},Kd=class{constructor(){this.index={}}add(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Ae(J.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Ae(J.comparator)).toArray()}};var Jk=new Uint8Array(0);var dt=class t{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};dt.DEFAULT_COLLECTION_PERCENTILE=10,dt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,dt.DEFAULT=new dt(41943040,dt.DEFAULT_COLLECTION_PERCENTILE,dt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),dt.DISABLED=new dt(-1,0,0);var Ms=class t{constructor(e){this.xn=e}next(){return this.xn+=2,this.xn}static On(){return new t(0)}static Nn(){return new t(-1)}};var Qd=class{constructor(){this.changes=new on(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,tt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();let r=this.changes.get(n);return r!==void 0?y.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var Yd=class{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}};var Jd=class{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&Cs(r.mutation,i,Qe.empty(),ve.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,L()).next(()=>r))}getLocalViewOfDocuments(e,n,r=L()){let i=$n();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=Ds();return s.forEach((a,u)=>{o=o.insert(a,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){let r=$n();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,L()))}populateOverlays(e,n,r){let i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=Ft(),o=bs(),a=function(){return bs()}();return n.forEach((u,c)=>{let l=r.get(c.key);i.has(c.key)&&(l===void 0||l.mutation instanceof vt)?s=s.insert(c.key,c):l!==void 0?(o.set(c.key,l.mutation.getFieldMask()),Cs(l.mutation,c,l.mutation.getFieldMask(),ve.now())):o.set(c.key,Qe.empty())}),this.recalculateAndSaveOverlays(e,s).next(u=>(u.forEach((c,l)=>o.set(c,l)),n.forEach((c,l)=>{var h;return a.set(c,new Yd(l,(h=o.get(c))!==null&&h!==void 0?h:null))}),a))}recalculateAndSaveOverlays(e,n){let r=bs(),i=new te((o,a)=>o-a),s=L();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(let a of o)a.keys().forEach(u=>{let c=n.get(u);if(c===null)return;let l=r.get(u)||Qe.empty();l=a.applyToLocalView(c,l),r.set(u,l);let h=(i.get(a.batchId)||L()).add(u);i=i.insert(a.batchId,h)})}).next(()=>{let o=[],a=i.getReverseIterator();for(;a.hasNext();){let u=a.getNext(),c=u.key,l=u.value,h=U_();l.forEach(f=>{if(!s.has(f)){let p=W_(n.get(f),r.get(f));p!==null&&h.set(f,p),s=s.add(f)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,h))}return y.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return S.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):M_(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{let o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):y.resolve($n()),a=-1,u=s;return o.next(c=>y.forEach(c,(l,h)=>(a<h.largestBatchId&&(a=h.largestBatchId),s.get(l)?y.resolve():this.remoteDocumentCache.getEntry(e,l).next(f=>{u=u.insert(l,f)}))).next(()=>this.populateOverlays(e,c,s)).next(()=>this.computeViews(e,u,c,L())).next(l=>({batchId:a,changes:V_(l)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new S(n)).next(r=>{let i=Ds();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){let s=n.collectionGroup,o=Ds();return this.indexManager.getCollectionParents(e,s).next(a=>y.forEach(a,u=>{let c=function(h,f){return new Hn(f,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)}(n,u.child(s));return this.getDocumentsMatchingCollectionQuery(e,c,r,i).next(l=>{l.forEach((h,f)=>{o=o.insert(h,f)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((u,c)=>{let l=c.getKey();o.get(l)===null&&(o=o.insert(l,tt.newInvalidDocument(l)))});let a=Ds();return o.forEach((u,c)=>{let l=s.get(u);l!==void 0&&Cs(l.mutation,c,Qe.empty(),ve.now()),mu(n,c)&&(a=a.insert(u,c))}),a})}};var Xd=class{constructor(e){this.serializer=e,this.ur=new Map,this.cr=new Map}getBundleMetadata(e,n){return y.resolve(this.ur.get(n))}saveBundleMetadata(e,n){return this.ur.set(n.id,function(i){return{id:i.id,version:i.version,createTime:mt(i.createTime)}}(n)),y.resolve()}getNamedQuery(e,n){return y.resolve(this.cr.get(n))}saveNamedQuery(e,n){return this.cr.set(n.name,function(i){return{name:i.name,query:WC(i.bundledQuery),readTime:mt(i.readTime)}}(n)),y.resolve()}};var Zd=class{constructor(){this.overlays=new te(S.comparator),this.lr=new Map}getOverlay(e,n){return y.resolve(this.overlays.get(n))}getOverlays(e,n){let r=$n();return y.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.lt(e,n,s)}),y.resolve()}removeOverlaysForBatchId(e,n,r){let i=this.lr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.lr.delete(r)),y.resolve()}getOverlaysForCollection(e,n,r){let i=$n(),s=n.length+1,o=new S(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){let u=a.getNext().value,c=u.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===s&&u.largestBatchId>r&&i.set(u.getKey(),u)}return y.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new te((c,l)=>c-l),o=this.overlays.getIterator();for(;o.hasNext();){let c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let l=s.get(c.largestBatchId);l===null&&(l=$n(),s=s.insert(c.largestBatchId,l)),l.set(c.getKey(),c)}}let a=$n(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((c,l)=>a.set(c,l)),!(a.size()>=i)););return y.resolve(a)}lt(e,n,r){let i=this.overlays.get(r.key);if(i!==null){let o=this.lr.get(i.largestBatchId).delete(r.key);this.lr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new Ld(n,r));let s=this.lr.get(n);s===void 0&&(s=L(),this.lr.set(n,s)),this.lr.set(n,s.add(r.key))}};var Fs=class{constructor(){this.hr=new Ae(se.Pr),this.Ir=new Ae(se.Tr)}isEmpty(){return this.hr.isEmpty()}addReference(e,n){let r=new se(e,n);this.hr=this.hr.add(r),this.Ir=this.Ir.add(r)}Er(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.dr(new se(e,n))}Ar(e,n){e.forEach(r=>this.removeReference(r,n))}Rr(e){let n=new S(new J([])),r=new se(n,e),i=new se(n,e+1),s=[];return this.Ir.forEachInRange([r,i],o=>{this.dr(o),s.push(o.key)}),s}Vr(){this.hr.forEach(e=>this.dr(e))}dr(e){this.hr=this.hr.delete(e),this.Ir=this.Ir.delete(e)}mr(e){let n=new S(new J([])),r=new se(n,e),i=new se(n,e+1),s=L();return this.Ir.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){let n=new se(e,0),r=this.hr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}},se=class{constructor(e,n){this.key=e,this.gr=n}static Pr(e,n){return S.comparator(e.key,n.key)||z(e.gr,n.gr)}static Tr(e,n){return z(e.gr,n.gr)||S.comparator(e.key,n.key)}};var ef=class{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.pr=1,this.yr=new Ae(se.Pr)}checkEmpty(e){return y.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){let s=this.pr;this.pr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let o=new Fd(s,n,r,i);this.mutationQueue.push(o);for(let a of i)this.yr=this.yr.add(new se(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return y.resolve(o)}lookupMutationBatch(e,n){return y.resolve(this.wr(n))}getNextMutationBatchAfterBatchId(e,n){let r=n+1,i=this.Sr(r),s=i<0?0:i;return y.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return y.resolve(this.mutationQueue.length===0?-1:this.pr-1)}getAllMutationBatches(e){return y.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){let r=new se(n,0),i=new se(n,Number.POSITIVE_INFINITY),s=[];return this.yr.forEachInRange([r,i],o=>{let a=this.wr(o.gr);s.push(a)}),y.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Ae(z);return n.forEach(i=>{let s=new se(i,0),o=new se(i,Number.POSITIVE_INFINITY);this.yr.forEachInRange([s,o],a=>{r=r.add(a.gr)})}),y.resolve(this.br(r))}getAllMutationBatchesAffectingQuery(e,n){let r=n.path,i=r.length+1,s=r;S.isDocumentKey(s)||(s=s.child(""));let o=new se(new S(s),0),a=new Ae(z);return this.yr.forEachWhile(u=>{let c=u.key.path;return!!r.isPrefixOf(c)&&(c.length===i&&(a=a.add(u.gr)),!0)},o),y.resolve(this.br(a))}br(e){let n=[];return e.forEach(r=>{let i=this.wr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){W(this.Dr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.yr;return y.forEach(n.mutations,i=>{let s=new se(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.yr=r})}Fn(e){}containsKey(e,n){let r=new se(n,0),i=this.yr.firstAfterOrEqual(r);return y.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,y.resolve()}Dr(e,n){return this.Sr(e)}Sr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}wr(e){let n=this.Sr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}};var tf=class{constructor(e){this.Cr=e,this.docs=function(){return new te(S.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){let r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.Cr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){let r=this.docs.get(n);return y.resolve(r?r.document.mutableCopy():tt.newInvalidDocument(n))}getEntries(e,n){let r=Ft();return n.forEach(i=>{let s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():tt.newInvalidDocument(i))}),y.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=Ft(),o=n.path,a=new S(o.child("")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){let{key:c,value:{document:l}}=u.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||nC(tC(l),r)<=0||(i.has(l.key)||mu(n,l))&&(s=s.insert(l.key,l.mutableCopy()))}return y.resolve(s)}getAllFromCollectionGroup(e,n,r,i){C()}vr(e,n){return y.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new nf(this)}getSize(e){return y.resolve(this.size)}},nf=class extends Qd{constructor(e){super(),this._r=e}applyChanges(e){let n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this._r.addEntry(e,i)):this._r.removeEntry(r)}),y.waitFor(n)}getFromCache(e,n){return this._r.getEntry(e,n)}getAllFromCache(e,n){return this._r.getEntries(e,n)}};var rf=class{constructor(e){this.persistence=e,this.Fr=new on(n=>Hf(n),Kf),this.lastRemoteSnapshotVersion=M.min(),this.highestTargetId=0,this.Mr=0,this.Or=new Fs,this.targetCount=0,this.Nr=Ms.On()}forEachTarget(e,n){return this.Fr.forEach((r,i)=>n(i)),y.resolve()}getLastRemoteSnapshotVersion(e){return y.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return y.resolve(this.Mr)}allocateTargetId(e){return this.highestTargetId=this.Nr.next(),y.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Mr&&(this.Mr=n),y.resolve()}kn(e){this.Fr.set(e.target,e);let n=e.targetId;n>this.highestTargetId&&(this.Nr=new Ms(n),this.highestTargetId=n),e.sequenceNumber>this.Mr&&(this.Mr=e.sequenceNumber)}addTargetData(e,n){return this.kn(n),this.targetCount+=1,y.resolve()}updateTargetData(e,n){return this.kn(n),y.resolve()}removeTargetData(e,n){return this.Fr.delete(n.target),this.Or.Rr(n.targetId),this.targetCount-=1,y.resolve()}removeTargets(e,n,r){let i=0,s=[];return this.Fr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Fr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),y.waitFor(s).next(()=>i)}getTargetCount(e){return y.resolve(this.targetCount)}getTargetData(e,n){let r=this.Fr.get(n)||null;return y.resolve(r)}addMatchingKeys(e,n,r){return this.Or.Er(n,r),y.resolve()}removeMatchingKeys(e,n,r){this.Or.Ar(n,r);let i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),y.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Or.Rr(n),y.resolve()}getMatchingKeysForTargetId(e,n){let r=this.Or.mr(n);return y.resolve(r)}containsKey(e,n){return y.resolve(this.Or.containsKey(n))}};var sf=class{constructor(e,n){this.Lr={},this.overlays={},this.Br=new A_(0),this.kr=!1,this.kr=!0,this.referenceDelegate=e(this),this.qr=new rf(this),this.indexManager=new Hd,this.remoteDocumentCache=function(i){return new tf(i)}(r=>this.referenceDelegate.Qr(r)),this.serializer=new Wd(n),this.Kr=new Xd(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.kr=!1,Promise.resolve()}get started(){return this.kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Zd,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.Lr[e.toKey()];return r||(r=new ef(n,this.referenceDelegate),this.Lr[e.toKey()]=r),r}getTargetCache(){return this.qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Kr}runTransaction(e,n,r){I("MemoryPersistence","Starting transaction:",e);let i=new of(this.Br.next());return this.referenceDelegate.$r(),r(i).next(s=>this.referenceDelegate.Ur(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Wr(e,n){return y.or(Object.values(this.Lr).map(r=>()=>r.containsKey(e,n)))}},of=class extends yd{constructor(e){super(),this.currentSequenceNumber=e}},af=class t{constructor(e){this.persistence=e,this.Gr=new Fs,this.zr=null}static jr(e){return new t(e)}get Hr(){if(this.zr)return this.zr;throw C()}addReference(e,n,r){return this.Gr.addReference(r,n),this.Hr.delete(r.toString()),y.resolve()}removeReference(e,n,r){return this.Gr.removeReference(r,n),this.Hr.add(r.toString()),y.resolve()}markPotentiallyOrphaned(e,n){return this.Hr.add(n.toString()),y.resolve()}removeTarget(e,n){this.Gr.Rr(n.targetId).forEach(i=>this.Hr.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Hr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}$r(){this.zr=new Set}Ur(e){let n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return y.forEach(this.Hr,r=>{let i=S.fromPath(r);return this.Jr(e,i).next(s=>{s||n.removeEntry(i,M.min())})}).next(()=>(this.zr=null,n.apply(e)))}updateLimboDocument(e,n){return this.Jr(e,n).next(r=>{r?this.Hr.delete(n.toString()):this.Hr.add(n.toString())})}Qr(e){return 0}Jr(e,n){return y.or([()=>y.resolve(this.Gr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Wr(e,n)])}};var uf=class t{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.ki=r,this.qi=i}static Qi(e,n){let r=L(),i=L();for(let s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new t(e,n.fromCache,r,i)}};var cf=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var lf=class{constructor(){this.Ki=!1,this.$i=!1,this.Ui=100,this.Wi=function(){return fm()?8:iC(ce())>0?6:4}()}initialize(e,n){this.Gi=e,this.indexManager=n,this.Ki=!0}getDocumentsMatchingQuery(e,n,r,i){let s={result:null};return this.zi(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.ji(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;let o=new cf;return this.Hi(e,n,o).next(a=>{if(s.result=a,this.$i)return this.Ji(e,n,o,a.size)})}).next(()=>s.result)}Ji(e,n,r,i){return r.documentReadCount<this.Ui?(Ts()<=x.DEBUG&&I("QueryEngine","SDK will not create cache indexes for query:",Fr(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Ui,"documents"),y.resolve()):(Ts()<=x.DEBUG&&I("QueryEngine","Query:",Fr(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Wi*i?(Ts()<=x.DEBUG&&I("QueryEngine","The SDK decides to create cache indexes for query:",Fr(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,gt(n))):y.resolve())}zi(e,n){if(n_(n))return y.resolve(null);let r=gt(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=Od(n,null,"F"),r=gt(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{let o=L(...s);return this.Gi.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{let c=this.Yi(n,a);return this.Zi(n,c,o,u.readTime)?this.zi(e,Od(n,null,"F")):this.Xi(e,c,n,u)}))})))}ji(e,n,r,i){return n_(n)||i.isEqual(M.min())?y.resolve(null):this.Gi.getDocuments(e,r).next(s=>{let o=this.Yi(n,s);return this.Zi(n,o,r,i)?y.resolve(null):(Ts()<=x.DEBUG&&I("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Fr(n)),this.Xi(e,o,n,eC(i,-1)).next(a=>a))})}Yi(e,n){let r=new Ae(x_(e));return n.forEach((i,s)=>{mu(e,s)&&(r=r.add(s))}),r}Zi(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;let s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Hi(e,n,r){return Ts()<=x.DEBUG&&I("QueryEngine","Using full collection scan to execute query:",Fr(n)),this.Gi.getDocumentsMatchingQuery(e,n,Gn.min(),r)}Xi(e,n,r,i){return this.Gi.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}};var hf=class{constructor(e,n,r,i){this.persistence=e,this.es=n,this.serializer=i,this.ts=new te(z),this.ns=new on(s=>Hf(s),Kf),this.rs=new Map,this.ss=e.getRemoteDocumentCache(),this.qr=e.getTargetCache(),this.Kr=e.getBundleCache(),this.os(r)}os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Jd(this.ss,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ss.setIndexManager(this.indexManager),this.es.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.ts))}};function HC(t,e,n,r){return new hf(t,e,n,r)}function nw(t,e){return d(this,null,function*(){let n=O(t);return yield n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.os(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{let o=[],a=[],u=L();for(let c of i){o.push(c.batchId);for(let l of c.mutations)u=u.add(l.key)}for(let c of s){a.push(c.batchId);for(let l of c.mutations)u=u.add(l.key)}return n.localDocuments.getDocuments(r,u).next(c=>({_s:c,removedBatchIds:o,addedBatchIds:a}))})})})}function KC(t,e){let n=O(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),s=n.ss.newChangeBuffer({trackRemovals:!0});return function(a,u,c,l){let h=c.batch,f=h.keys(),p=y.resolve();return f.forEach(E=>{p=p.next(()=>l.getEntry(u,E)).next(D=>{let m=c.docVersions.get(E);W(m!==null),D.version.compareTo(m)<0&&(h.applyToRemoteDocument(D,c),D.isValidDocument()&&(D.setReadTime(c.commitVersion),l.addEntry(D)))})}),p.next(()=>a.mutationQueue.removeMutationBatch(u,h))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=L();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(u=u.add(a.batch.mutations[c].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function rw(t){let e=O(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.qr.getLastRemoteSnapshotVersion(n))}function QC(t,e){let n=O(t),r=e.snapshotVersion,i=n.ts;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{let o=n.ss.newChangeBuffer({trackRemovals:!0});i=n.ts;let a=[];e.targetChanges.forEach((l,h)=>{let f=i.get(h);if(!f)return;a.push(n.qr.removeMatchingKeys(s,l.removedDocuments,h).next(()=>n.qr.addMatchingKeys(s,l.addedDocuments,h)));let p=f.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(h)!==null?p=p.withResumeToken(Ce.EMPTY_BYTE_STRING,M.min()).withLastLimboFreeSnapshotVersion(M.min()):l.resumeToken.approximateByteSize()>0&&(p=p.withResumeToken(l.resumeToken,r)),i=i.insert(h,p),function(D,m,T){return D.resumeToken.approximateByteSize()===0||m.snapshotVersion.toMicroseconds()-D.snapshotVersion.toMicroseconds()>=3e8?!0:T.addedDocuments.size+T.modifiedDocuments.size+T.removedDocuments.size>0}(f,p,l)&&a.push(n.qr.updateTargetData(s,p))});let u=Ft(),c=L();if(e.documentUpdates.forEach(l=>{e.resolvedLimboDocuments.has(l)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,l))}),a.push(YC(s,o,e.documentUpdates).next(l=>{u=l.us,c=l.cs})),!r.isEqual(M.min())){let l=n.qr.getLastRemoteSnapshotVersion(s).next(h=>n.qr.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(l)}return y.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,u,c)).next(()=>u)}).then(s=>(n.ts=i,s))}function YC(t,e,n){let r=L(),i=L();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=Ft();return n.forEach((a,u)=>{let c=s.get(a);u.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(M.min())?(e.removeEntry(a,u.readTime),o=o.insert(a,u)):!c.isValidDocument()||u.version.compareTo(c.version)>0||u.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(u),o=o.insert(a,u)):I("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",u.version)}),{us:o,cs:i}})}function JC(t,e){let n=O(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function XC(t,e){let n=O(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.qr.getTargetData(r,e).next(s=>s?(i=s,y.resolve(i)):n.qr.allocateTargetId(r).next(o=>(i=new ks(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.qr.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=n.ts.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.ts=n.ts.insert(r.targetId,r),n.ns.set(e,r.targetId)),r})}function df(t,e,n){return d(this,null,function*(){let r=O(t),i=r.ts.get(e),s=n?"readwrite":"readwrite-primary";try{n||(yield r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!js(o))throw o;I("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.ts=r.ts.remove(e),r.ns.delete(i.target)})}function f_(t,e,n){let r=O(t),i=M.min(),s=L();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,c,l){let h=O(u),f=h.ns.get(l);return f!==void 0?y.resolve(h.ts.get(f)):h.qr.getTargetData(c,l)}(r,o,gt(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.qr.getMatchingKeysForTargetId(o,a.targetId).next(u=>{s=u})}).next(()=>r.es.getDocumentsMatchingQuery(o,e,n?i:M.min(),n?s:L())).next(a=>(ZC(r,pC(e),a),{documents:a,ls:s})))}function ZC(t,e,n){let r=t.rs.get(e)||M.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.rs.set(e,r)}var Ka=class{constructor(){this.activeTargetIds=wC()}ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}As(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Es(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var ff=class{constructor(){this.eo=new Ka,this.no={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.eo.ds(e),this.no[e]||"not-current"}updateQueryState(e,n,r){this.no[e]=n}removeLocalQueryTarget(e){this.eo.As(e)}isLocalQueryTarget(e){return this.eo.activeTargetIds.has(e)}clearQueryState(e){delete this.no[e]}getAllActiveQueryTargets(){return this.eo.activeTargetIds}isActiveQueryTarget(e){return this.eo.activeTargetIds.has(e)}start(){return this.eo=new Ka,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var pf=class{ro(e){}shutdown(){}};var Qa=class{constructor(){this.io=()=>this.so(),this.oo=()=>this._o(),this.ao=[],this.uo()}ro(e){this.ao.push(e)}shutdown(){window.removeEventListener("online",this.io),window.removeEventListener("offline",this.oo)}uo(){window.addEventListener("online",this.io),window.addEventListener("offline",this.oo)}so(){I("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.ao)e(0)}_o(){I("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.ao)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Na=null;function od(){return Na===null?Na=function(){return 268435456+Math.round(2147483648*Math.random())}():Na++,"0x"+Na.toString(16)}var eR={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var gf=class{constructor(e){this.co=e.co,this.lo=e.lo}ho(e){this.Po=e}Io(e){this.To=e}Eo(e){this.Ao=e}onMessage(e){this.Ro=e}close(){this.lo()}send(e){this.co(e)}Vo(){this.Po()}mo(){this.To()}fo(e){this.Ao(e)}po(e){this.Ro(e)}};var De="WebChannelConnection",mf=class extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;let r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.yo=r+"://"+n.host,this.wo=`projects/${i}/databases/${s}`,this.So=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get bo(){return!1}Do(n,r,i,s,o){let a=od(),u=this.Co(n,r.toUriEncodedString());I("RestConnection",`Sending RPC '${n}' ${a}:`,u,i);let c={"google-cloud-resource-prefix":this.wo,"x-goog-request-params":this.So};return this.vo(c,s,o),this.Fo(n,u,c,i).then(l=>(I("RestConnection",`Received RPC '${n}' ${a}: `,l),l),l=>{throw $r("RestConnection",`RPC '${n}' ${a} failed with error: `,l,"url: ",u,"request:",i),l})}Mo(n,r,i,s,o,a){return this.Do(n,r,i,s,o)}vo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+ei}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}Co(n,r){let i=eR[n];return`${this.yo}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Fo(e,n,r,i){let s=od();return new Promise((o,a)=>{let u=new Gv;u.setWithCredentials(!0),u.listenOnce(jv.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case Ra.NO_ERROR:let l=u.getResponseJson();I(De,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(l)),o(l);break;case Ra.TIMEOUT:I(De,`RPC '${e}' ${s} timed out`),a(new _(g.DEADLINE_EXCEEDED,"Request time out"));break;case Ra.HTTP_ERROR:let h=u.getStatus();if(I(De,`RPC '${e}' ${s} failed with status:`,h,"response text:",u.getResponseText()),h>0){let f=u.getResponseJson();Array.isArray(f)&&(f=f[0]);let p=f?.error;if(p&&p.status&&p.message){let E=function(m){let T=m.toLowerCase().replace(/_/g,"-");return Object.values(g).indexOf(T)>=0?T:g.UNKNOWN}(p.status);a(new _(E,p.message))}else a(new _(g.UNKNOWN,"Server responded with status "+u.getStatus()))}else a(new _(g.UNAVAILABLE,"Connection failed."));break;default:C()}}finally{I(De,`RPC '${e}' ${s} completed.`)}});let c=JSON.stringify(i);I(De,`RPC '${e}' ${s} sending request:`,i),u.send(n,"POST",c,r,15)})}xo(e,n,r){let i=od(),s=[this.yo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=Bv(),a=$v(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(u.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(u.xmlHttpFactory=new qv({})),this.vo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;let l=s.join("");I(De,`Creating RPC '${e}' stream ${i}: ${l}`,u);let h=o.createWebChannel(l,u),f=!1,p=!1,E=new gf({co:m=>{p?I(De,`Not sending because RPC '${e}' stream ${i} is closed:`,m):(f||(I(De,`Opening RPC '${e}' stream ${i} transport.`),h.open(),f=!0),I(De,`RPC '${e}' stream ${i} sending:`,m),h.send(m))},lo:()=>h.close()}),D=(m,T,U)=>{m.listen(T,K=>{try{U(K)}catch(j){setTimeout(()=>{throw j},0)}})};return D(h,Is.EventType.OPEN,()=>{p||(I(De,`RPC '${e}' stream ${i} transport opened.`),E.Vo())}),D(h,Is.EventType.CLOSE,()=>{p||(p=!0,I(De,`RPC '${e}' stream ${i} transport closed`),E.fo())}),D(h,Is.EventType.ERROR,m=>{p||(p=!0,$r(De,`RPC '${e}' stream ${i} transport errored:`,m),E.fo(new _(g.UNAVAILABLE,"The operation could not be completed")))}),D(h,Is.EventType.MESSAGE,m=>{var T;if(!p){let U=m.data[0];W(!!U);let K=U,j=K.error||((T=K[0])===null||T===void 0?void 0:T.error);if(j){I(De,`RPC '${e}' stream ${i} received error:`,j);let Re=j.status,ne=function(ni){let Hs=ie[ni];if(Hs!==void 0)return K_(Hs)}(Re),Ye=j.message;ne===void 0&&(ne=g.INTERNAL,Ye="Unknown error status: "+Re+" with message "+j.message),p=!0,E.fo(new _(ne,Ye)),h.close()}else I(De,`RPC '${e}' stream ${i} received:`,U),E.po(U)}}),D(a,zv.STAT_EVENT,m=>{m.stat===id.PROXY?I(De,`RPC '${e}' stream ${i} detected buffering proxy`):m.stat===id.NOPROXY&&I(De,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{E.mo()},0),E}};function ad(){return typeof document<"u"?document:null}function yu(t){return new $d(t,!0)}var Ya=class{constructor(e,n,r=1e3,i=1.5,s=6e4){this.si=e,this.timerId=n,this.Oo=r,this.No=i,this.Lo=s,this.Bo=0,this.ko=null,this.qo=Date.now(),this.reset()}reset(){this.Bo=0}Qo(){this.Bo=this.Lo}Ko(e){this.cancel();let n=Math.floor(this.Bo+this.$o()),r=Math.max(0,Date.now()-this.qo),i=Math.max(0,n-r);i>0&&I("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Bo} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.ko=this.si.enqueueAfterDelay(this.timerId,i,()=>(this.qo=Date.now(),e())),this.Bo*=this.No,this.Bo<this.Oo&&(this.Bo=this.Oo),this.Bo>this.Lo&&(this.Bo=this.Lo)}Uo(){this.ko!==null&&(this.ko.skipDelay(),this.ko=null)}cancel(){this.ko!==null&&(this.ko.cancel(),this.ko=null)}$o(){return(Math.random()-.5)*this.Bo}};var Ja=class{constructor(e,n,r,i,s,o,a,u){this.si=e,this.Wo=r,this.Go=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.zo=0,this.jo=null,this.Ho=null,this.stream=null,this.Jo=new Ya(e,n)}Yo(){return this.state===1||this.state===5||this.Zo()}Zo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.Xo()}stop(){return d(this,null,function*(){this.Yo()&&(yield this.close(0))})}e_(){this.state=0,this.Jo.reset()}t_(){this.Zo()&&this.jo===null&&(this.jo=this.si.enqueueAfterDelay(this.Wo,6e4,()=>this.n_()))}r_(e){this.i_(),this.stream.send(e)}n_(){return d(this,null,function*(){if(this.Zo())return this.close(0)})}i_(){this.jo&&(this.jo.cancel(),this.jo=null)}s_(){this.Ho&&(this.Ho.cancel(),this.Ho=null)}close(e,n){return d(this,null,function*(){this.i_(),this.s_(),this.Jo.cancel(),this.zo++,e!==4?this.Jo.reset():n&&n.code===g.RESOURCE_EXHAUSTED?(kt(n.toString()),kt("Using maximum backoff delay to prevent overloading the backend."),this.Jo.Qo()):n&&n.code===g.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.o_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.Eo(n)})}o_(){}auth(){this.state=1;let e=this.__(this.zo),n=this.zo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.zo===n&&this.a_(r,i)},r=>{e(()=>{let i=new _(g.UNKNOWN,"Fetching auth token failed: "+r.message);return this.u_(i)})})}a_(e,n){let r=this.__(this.zo);this.stream=this.c_(e,n),this.stream.ho(()=>{r(()=>this.listener.ho())}),this.stream.Io(()=>{r(()=>(this.state=2,this.Ho=this.si.enqueueAfterDelay(this.Go,1e4,()=>(this.Zo()&&(this.state=3),Promise.resolve())),this.listener.Io()))}),this.stream.Eo(i=>{r(()=>this.u_(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Xo(){this.state=5,this.Jo.Ko(()=>d(this,null,function*(){this.state=0,this.start()}))}u_(e){return I("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}__(e){return n=>{this.si.enqueueAndForget(()=>this.zo===e?n():(I("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},yf=class extends Ja{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}c_(e,n){return this.connection.xo("Listen",e,n)}onMessage(e){this.Jo.reset();let n=FC(this.serializer,e),r=function(s){if(!("targetChange"in s))return M.min();let o=s.targetChange;return o.targetIds&&o.targetIds.length?M.min():o.readTime?mt(o.readTime):M.min()}(e);return this.listener.l_(n,r)}h_(e){let n={};n.database=Gd(this.serializer),n.addTarget=function(s,o){let a,u=o.target;if(a=Pd(u)?{documents:VC(s,u)}:{query:UC(s,u)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=Q_(s,o.resumeToken);let c=jd(s,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(M.min())>0){a.readTime=Wa(s,o.snapshotVersion.toTimestamp());let c=jd(s,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);let r=$C(this.serializer,e);r&&(n.labels=r),this.r_(n)}P_(e){let n={};n.database=Gd(this.serializer),n.removeTarget=e,this.r_(n)}},vf=class extends Ja{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s,this.I_=!1}get T_(){return this.I_}start(){this.I_=!1,this.lastStreamToken=void 0,super.start()}o_(){this.I_&&this.E_([])}c_(e,n){return this.connection.xo("Write",e,n)}onMessage(e){if(W(!!e.streamToken),this.lastStreamToken=e.streamToken,this.I_){this.Jo.reset();let n=LC(e.writeResults,e.commitTime),r=mt(e.commitTime);return this.listener.d_(r,n)}return W(!e.writeResults||e.writeResults.length===0),this.I_=!0,this.listener.A_()}R_(){let e={};e.database=Gd(this.serializer),this.r_(e)}E_(e){let n={streamToken:this.lastStreamToken,writes:e.map(r=>xC(this.serializer,r))};this.r_(n)}};var _f=class extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.V_=!1}m_(){if(this.V_)throw new _(g.FAILED_PRECONDITION,"The client has already been terminated.")}Do(e,n,r,i){return this.m_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Do(e,zd(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===g.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new _(g.UNKNOWN,s.toString())})}Mo(e,n,r,i,s){return this.m_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Mo(e,zd(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===g.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new _(g.UNKNOWN,o.toString())})}terminate(){this.V_=!0,this.connection.terminate()}};var wf=class{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.g_=0,this.p_=null,this.y_=!0}w_(){this.g_===0&&(this.S_("Unknown"),this.p_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.p_=null,this.b_("Backend didn't respond within 10 seconds."),this.S_("Offline"),Promise.resolve())))}D_(e){this.state==="Online"?this.S_("Unknown"):(this.g_++,this.g_>=1&&(this.C_(),this.b_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.S_("Offline")))}set(e){this.C_(),this.g_=0,e==="Online"&&(this.y_=!1),this.S_(e)}S_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}b_(e){let n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.y_?(kt(n),this.y_=!1):I("OnlineStateTracker",n)}C_(){this.p_!==null&&(this.p_.cancel(),this.p_=null)}};var Ef=class{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.v_=[],this.F_=new Map,this.M_=new Set,this.x_=[],this.O_=s,this.O_.ro(o=>{r.enqueueAndForget(()=>d(this,null,function*(){Zn(this)&&(I("RemoteStore","Restarting streams for network reachability change."),yield function(u){return d(this,null,function*(){let c=O(u);c.M_.add(4),yield zs(c),c.N_.set("Unknown"),c.M_.delete(4),yield vu(c)})}(this))}))}),this.N_=new wf(r,i)}};function vu(t){return d(this,null,function*(){if(Zn(t))for(let e of t.x_)yield e(!0)})}function zs(t){return d(this,null,function*(){for(let e of t.x_)yield e(!1)})}function iw(t,e){let n=O(t);n.F_.has(e.targetId)||(n.F_.set(e.targetId,e),ep(n)?Zf(n):ti(n).Zo()&&Xf(n,e))}function Jf(t,e){let n=O(t),r=ti(n);n.F_.delete(e),r.Zo()&&sw(n,e),n.F_.size===0&&(r.Zo()?r.t_():Zn(n)&&n.N_.set("Unknown"))}function Xf(t,e){if(t.L_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(M.min())>0){let n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}ti(t).h_(e)}function sw(t,e){t.L_.xe(e),ti(t).P_(e)}function Zf(t){t.L_=new Bd({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.F_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),ti(t).start(),t.N_.w_()}function ep(t){return Zn(t)&&!ti(t).Yo()&&t.F_.size>0}function Zn(t){return O(t).M_.size===0}function ow(t){t.L_=void 0}function tR(t){return d(this,null,function*(){t.N_.set("Online")})}function nR(t){return d(this,null,function*(){t.F_.forEach((e,n)=>{Xf(t,e)})})}function rR(t,e){return d(this,null,function*(){ow(t),ep(t)?(t.N_.D_(e),Zf(t)):t.N_.set("Unknown")})}function iR(t,e,n){return d(this,null,function*(){if(t.N_.set("Online"),e instanceof qa&&e.state===2&&e.cause)try{yield function(i,s){return d(this,null,function*(){let o=s.cause;for(let a of s.targetIds)i.F_.has(a)&&(yield i.remoteSyncer.rejectListen(a,o),i.F_.delete(a),i.L_.removeTarget(a))})}(t,e)}catch(r){I("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Xa(t,r)}else if(e instanceof Ur?t.L_.Ke(e):e instanceof za?t.L_.He(e):t.L_.We(e),!n.isEqual(M.min()))try{let r=yield rw(t.localStore);n.compareTo(r)>=0&&(yield function(s,o){let a=s.L_.rt(o);return a.targetChanges.forEach((u,c)=>{if(u.resumeToken.approximateByteSize()>0){let l=s.F_.get(c);l&&s.F_.set(c,l.withResumeToken(u.resumeToken,o))}}),a.targetMismatches.forEach((u,c)=>{let l=s.F_.get(u);if(!l)return;s.F_.set(u,l.withResumeToken(Ce.EMPTY_BYTE_STRING,l.snapshotVersion)),sw(s,u);let h=new ks(l.target,u,c,l.sequenceNumber);Xf(s,h)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n))}catch(r){I("RemoteStore","Failed to raise snapshot:",r),yield Xa(t,r)}})}function Xa(t,e,n){return d(this,null,function*(){if(!js(e))throw e;t.M_.add(1),yield zs(t),t.N_.set("Offline"),n||(n=()=>rw(t.localStore)),t.asyncQueue.enqueueRetryable(()=>d(this,null,function*(){I("RemoteStore","Retrying IndexedDB access"),yield n(),t.M_.delete(1),yield vu(t)}))})}function aw(t,e){return e().catch(n=>Xa(t,n,e))}function _u(t){return d(this,null,function*(){let e=O(t),n=an(e),r=e.v_.length>0?e.v_[e.v_.length-1].batchId:-1;for(;sR(e);)try{let i=yield JC(e.localStore,r);if(i===null){e.v_.length===0&&n.t_();break}r=i.batchId,oR(e,i)}catch(i){yield Xa(e,i)}uw(e)&&cw(e)})}function sR(t){return Zn(t)&&t.v_.length<10}function oR(t,e){t.v_.push(e);let n=an(t);n.Zo()&&n.T_&&n.E_(e.mutations)}function uw(t){return Zn(t)&&!an(t).Yo()&&t.v_.length>0}function cw(t){an(t).start()}function aR(t){return d(this,null,function*(){an(t).R_()})}function uR(t){return d(this,null,function*(){let e=an(t);for(let n of t.v_)e.E_(n.mutations)})}function cR(t,e,n){return d(this,null,function*(){let r=t.v_.shift(),i=xd.from(r,e,n);yield aw(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),yield _u(t)})}function lR(t,e){return d(this,null,function*(){e&&an(t).T_&&(yield function(r,i){return d(this,null,function*(){if(function(o){return bC(o)&&o!==g.ABORTED}(i.code)){let s=r.v_.shift();an(r).e_(),yield aw(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),yield _u(r)}})}(t,e)),uw(t)&&cw(t)})}function p_(t,e){return d(this,null,function*(){let n=O(t);n.asyncQueue.verifyOperationInProgress(),I("RemoteStore","RemoteStore received new credentials");let r=Zn(n);n.M_.add(3),yield zs(n),r&&n.N_.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.M_.delete(3),yield vu(n)})}function hR(t,e){return d(this,null,function*(){let n=O(t);e?(n.M_.delete(2),yield vu(n)):e||(n.M_.add(2),yield zs(n),n.N_.set("Unknown"))})}function ti(t){return t.B_||(t.B_=function(n,r,i){let s=O(n);return s.m_(),new yf(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{ho:tR.bind(null,t),Io:nR.bind(null,t),Eo:rR.bind(null,t),l_:iR.bind(null,t)}),t.x_.push(e=>d(this,null,function*(){e?(t.B_.e_(),ep(t)?Zf(t):t.N_.set("Unknown")):(yield t.B_.stop(),ow(t))}))),t.B_}function an(t){return t.k_||(t.k_=function(n,r,i){let s=O(n);return s.m_(),new vf(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{ho:()=>Promise.resolve(),Io:aR.bind(null,t),Eo:lR.bind(null,t),A_:uR.bind(null,t),d_:cR.bind(null,t)}),t.x_.push(e=>d(this,null,function*(){e?(t.k_.e_(),yield _u(t)):(yield t.k_.stop(),t.v_.length>0&&(I("RemoteStore",`Stopping write stream with ${t.v_.length} pending writes`),t.v_=[]))}))),t.k_}var If=class t{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new ft,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){let o=Date.now()+r,a=new t(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new _(g.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function tp(t,e){if(kt("AsyncQueue",`${e}: ${t}`),js(t))return new _(g.UNAVAILABLE,`${e}: ${t}`);throw t}var Za=class t{constructor(e){this.comparator=e?(n,r)=>e(n,r)||S.comparator(n.key,r.key):(n,r)=>S.comparator(n.key,r.key),this.keyedMap=Ds(),this.sortedSet=new te(this.comparator)}static emptySet(e){return new t(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){let n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){let n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){let i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){let e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){let r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}};var eu=class{constructor(){this.q_=new te(S.comparator)}track(e){let n=e.doc.key,r=this.q_.get(n);r?e.type!==0&&r.type===3?this.q_=this.q_.insert(n,e):e.type===3&&r.type!==1?this.q_=this.q_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.q_=this.q_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.q_=this.q_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.q_=this.q_.remove(n):e.type===1&&r.type===2?this.q_=this.q_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.q_=this.q_.insert(n,{type:2,doc:e.doc}):C():this.q_=this.q_.insert(n,e)}Q_(){let e=[];return this.q_.inorderTraversal((n,r)=>{e.push(r)}),e}},Jr=class t{constructor(e,n,r,i,s,o,a,u,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,i,s){let o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new t(e,n,Za.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&gu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}};var Tf=class{constructor(){this.K_=void 0,this.U_=[]}W_(){return this.U_.some(e=>e.G_())}},Df=class{constructor(){this.queries=new on(e=>F_(e),gu),this.onlineState="Unknown",this.z_=new Set}};function lw(t,e){return d(this,null,function*(){let n=O(t),r=3,i=e.query,s=n.queries.get(i);s?!s.W_()&&e.G_()&&(r=2):(s=new Tf,r=e.G_()?0:1);try{switch(r){case 0:s.K_=yield n.onListen(i,!0);break;case 1:s.K_=yield n.onListen(i,!1);break;case 2:yield n.onFirstRemoteStoreListen(i)}}catch(o){let a=tp(o,`Initialization of query '${Fr(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,s),s.U_.push(e),e.j_(n.onlineState),s.K_&&e.H_(s.K_)&&np(n)})}function hw(t,e){return d(this,null,function*(){let n=O(t),r=e.query,i=3,s=n.queries.get(r);if(s){let o=s.U_.indexOf(e);o>=0&&(s.U_.splice(o,1),s.U_.length===0?i=e.G_()?0:1:!s.W_()&&e.G_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}})}function dR(t,e){let n=O(t),r=!1;for(let i of e){let s=i.query,o=n.queries.get(s);if(o){for(let a of o.U_)a.H_(i)&&(r=!0);o.K_=i}}r&&np(n)}function fR(t,e,n){let r=O(t),i=r.queries.get(e);if(i)for(let s of i.U_)s.onError(n);r.queries.delete(e)}function np(t){t.z_.forEach(e=>{e.next()})}var Af,g_;(g_=Af||(Af={})).J_="default",g_.Cache="cache";var tu=class{constructor(e,n,r){this.query=e,this.Y_=n,this.Z_=!1,this.X_=null,this.onlineState="Unknown",this.options=r||{}}H_(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new Jr(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Z_?this.ea(e)&&(this.Y_.next(e),n=!0):this.ta(e,this.onlineState)&&(this.na(e),n=!0),this.X_=e,n}onError(e){this.Y_.error(e)}j_(e){this.onlineState=e;let n=!1;return this.X_&&!this.Z_&&this.ta(this.X_,e)&&(this.na(this.X_),n=!0),n}ta(e,n){if(!e.fromCache||!this.G_())return!0;let r=n!=="Offline";return(!this.options.ra||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ea(e){if(e.docChanges.length>0)return!0;let n=this.X_&&this.X_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}na(e){e=Jr.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Z_=!0,this.Y_.next(e)}G_(){return this.options.source!==Af.Cache}};var nu=class{constructor(e){this.key=e}},ru=class{constructor(e){this.key=e}},Sf=class{constructor(e,n){this.query=e,this.la=n,this.ha=null,this.hasCachedResults=!1,this.current=!1,this.Pa=L(),this.mutatedKeys=L(),this.Ia=x_(e),this.Ta=new Za(this.Ia)}get Ea(){return this.la}da(e,n){let r=n?n.Aa:new eu,i=n?n.Ta:this.Ta,s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1,u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,c=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((l,h)=>{let f=i.get(l),p=mu(this.query,h)?h:null,E=!!f&&this.mutatedKeys.has(f.key),D=!!p&&(p.hasLocalMutations||this.mutatedKeys.has(p.key)&&p.hasCommittedMutations),m=!1;f&&p?f.data.isEqual(p.data)?E!==D&&(r.track({type:3,doc:p}),m=!0):this.Ra(f,p)||(r.track({type:2,doc:p}),m=!0,(u&&this.Ia(p,u)>0||c&&this.Ia(p,c)<0)&&(a=!0)):!f&&p?(r.track({type:0,doc:p}),m=!0):f&&!p&&(r.track({type:1,doc:f}),m=!0,(u||c)&&(a=!0)),m&&(p?(o=o.add(p),s=D?s.add(l):s.delete(l)):(o=o.delete(l),s=s.delete(l)))}),this.query.limit!==null)for(;o.size>this.query.limit;){let l=this.query.limitType==="F"?o.last():o.first();o=o.delete(l.key),s=s.delete(l.key),r.track({type:1,doc:l})}return{Ta:o,Aa:r,Zi:a,mutatedKeys:s}}Ra(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){let s=this.Ta;this.Ta=e.Ta,this.mutatedKeys=e.mutatedKeys;let o=e.Aa.Q_();o.sort((l,h)=>function(p,E){let D=m=>{switch(m){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return C()}};return D(p)-D(E)}(l.type,h.type)||this.Ia(l.doc,h.doc)),this.Va(r),i=i!=null&&i;let a=n&&!i?this.ma():[],u=this.Pa.size===0&&this.current&&!i?1:0,c=u!==this.ha;return this.ha=u,o.length!==0||c?{snapshot:new Jr(this.query,e.Ta,s,o,e.mutatedKeys,u===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),fa:a}:{fa:a}}j_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ta:this.Ta,Aa:new eu,mutatedKeys:this.mutatedKeys,Zi:!1},!1)):{fa:[]}}ga(e){return!this.la.has(e)&&!!this.Ta.has(e)&&!this.Ta.get(e).hasLocalMutations}Va(e){e&&(e.addedDocuments.forEach(n=>this.la=this.la.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.la=this.la.delete(n)),this.current=e.current)}ma(){if(!this.current)return[];let e=this.Pa;this.Pa=L(),this.Ta.forEach(r=>{this.ga(r.key)&&(this.Pa=this.Pa.add(r.key))});let n=[];return e.forEach(r=>{this.Pa.has(r)||n.push(new ru(r))}),this.Pa.forEach(r=>{e.has(r)||n.push(new nu(r))}),n}pa(e){this.la=e.ls,this.Pa=L();let n=this.da(e.documents);return this.applyChanges(n,!0)}ya(){return Jr.fromInitialDocuments(this.query,this.Ta,this.mutatedKeys,this.ha===0,this.hasCachedResults)}},bf=class{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}},Cf=class{constructor(e){this.key=e,this.wa=!1}},Rf=class{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Sa={},this.ba=new on(a=>F_(a),gu),this.Da=new Map,this.Ca=new Set,this.va=new te(S.comparator),this.Fa=new Map,this.Ma=new Fs,this.xa={},this.Oa=new Map,this.Na=Ms.Nn(),this.onlineState="Unknown",this.La=void 0}get isPrimaryClient(){return this.La===!0}};function pR(t,e,n=!0){return d(this,null,function*(){let r=yw(t),i,s=r.ba.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.ya()):i=yield dw(r,e,n,!0),i})}function gR(t,e){return d(this,null,function*(){let n=yw(t);yield dw(n,e,!0,!1)})}function dw(t,e,n,r){return d(this,null,function*(){let i=yield XC(t.localStore,gt(e)),s=i.targetId,o=n?t.sharedClientState.addLocalQueryTarget(s):"not-current",a;return r&&(a=yield mR(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&iw(t.remoteStore,i),a})}function mR(t,e,n,r,i){return d(this,null,function*(){t.Ba=(h,f,p)=>function(D,m,T,U){return d(this,null,function*(){let K=m.view.da(T);K.Zi&&(K=yield f_(D.localStore,m.query,!1).then(({documents:Ye})=>m.view.da(Ye,K)));let j=U&&U.targetChanges.get(m.targetId),Re=U&&U.targetMismatches.get(m.targetId)!=null,ne=m.view.applyChanges(K,D.isPrimaryClient,j,Re);return y_(D,m.targetId,ne.fa),ne.snapshot})}(t,h,f,p);let s=yield f_(t.localStore,e,!0),o=new Sf(e,s.ls),a=o.da(s.documents),u=Os.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),c=o.applyChanges(a,t.isPrimaryClient,u);y_(t,n,c.fa);let l=new bf(e,n,o);return t.ba.set(e,l),t.Da.has(n)?t.Da.get(n).push(e):t.Da.set(n,[e]),c.snapshot})}function yR(t,e,n){return d(this,null,function*(){let r=O(t),i=r.ba.get(e),s=r.Da.get(i.targetId);if(s.length>1)return r.Da.set(i.targetId,s.filter(o=>!gu(o,e))),void r.ba.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield df(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&Jf(r.remoteStore,i.targetId),Pf(r,i.targetId)}).catch($s))):(Pf(r,i.targetId),yield df(r.localStore,i.targetId,!0))})}function vR(t,e){return d(this,null,function*(){let n=O(t),r=n.ba.get(e),i=n.Da.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Jf(n.remoteStore,r.targetId))})}function _R(t,e,n){return d(this,null,function*(){let r=SR(t);try{let i=yield function(o,a){let u=O(o),c=ve.now(),l=a.reduce((p,E)=>p.add(E.key),L()),h,f;return u.persistence.runTransaction("Locally write mutations","readwrite",p=>{let E=Ft(),D=L();return u.ss.getEntries(p,l).next(m=>{E=m,E.forEach((T,U)=>{U.isValidDocument()||(D=D.add(T))})}).next(()=>u.localDocuments.getOverlayedDocuments(p,E)).next(m=>{h=m;let T=[];for(let U of a){let K=SC(U,h.get(U.key).overlayedDocument);K!=null&&T.push(new vt(U.key,K,C_(K.value.mapValue),nn.exists(!0)))}return u.mutationQueue.addMutationBatch(p,c,T,a)}).next(m=>{f=m;let T=m.applyToLocalDocumentSet(h,D);return u.documentOverlayCache.saveOverlays(p,m.batchId,T)})}).then(()=>({batchId:f.batchId,changes:V_(h)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,u){let c=o.xa[o.currentUser.toKey()];c||(c=new te(z)),c=c.insert(a,u),o.xa[o.currentUser.toKey()]=c}(r,i.batchId,n),yield qs(r,i.changes),yield _u(r.remoteStore)}catch(i){let s=tp(i,"Failed to persist write");n.reject(s)}})}function fw(t,e){return d(this,null,function*(){let n=O(t);try{let r=yield QC(n.localStore,e);e.targetChanges.forEach((i,s)=>{let o=n.Fa.get(s);o&&(W(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.wa=!0:i.modifiedDocuments.size>0?W(o.wa):i.removedDocuments.size>0&&(W(o.wa),o.wa=!1))}),yield qs(n,r,e)}catch(r){yield $s(r)}})}function m_(t,e,n){let r=O(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){let i=[];r.ba.forEach((s,o)=>{let a=o.view.j_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){let u=O(o);u.onlineState=a;let c=!1;u.queries.forEach((l,h)=>{for(let f of h.U_)f.j_(a)&&(c=!0)}),c&&np(u)}(r.eventManager,e),i.length&&r.Sa.l_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function wR(t,e,n){return d(this,null,function*(){let r=O(t);r.sharedClientState.updateQueryState(e,"rejected",n);let i=r.Fa.get(e),s=i&&i.key;if(s){let o=new te(S.comparator);o=o.insert(s,tt.newNoDocument(s,M.min()));let a=L().add(s),u=new ja(M.min(),new Map,new te(z),o,a);yield fw(r,u),r.va=r.va.remove(s),r.Fa.delete(e),rp(r)}else yield df(r.localStore,e,!1).then(()=>Pf(r,e,n)).catch($s)})}function ER(t,e){return d(this,null,function*(){let n=O(t),r=e.batch.batchId;try{let i=yield KC(n.localStore,e);gw(n,r,null),pw(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),yield qs(n,i)}catch(i){yield $s(i)}})}function IR(t,e,n){return d(this,null,function*(){let r=O(t);try{let i=yield function(o,a){let u=O(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let l;return u.mutationQueue.lookupMutationBatch(c,a).next(h=>(W(h!==null),l=h.keys(),u.mutationQueue.removeMutationBatch(c,h))).next(()=>u.mutationQueue.performConsistencyCheck(c)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(c,l,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,l)).next(()=>u.localDocuments.getDocuments(c,l))})}(r.localStore,e);gw(r,e,n),pw(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),yield qs(r,i)}catch(i){yield $s(i)}})}function pw(t,e){(t.Oa.get(e)||[]).forEach(n=>{n.resolve()}),t.Oa.delete(e)}function gw(t,e,n){let r=O(t),i=r.xa[r.currentUser.toKey()];if(i){let s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.xa[r.currentUser.toKey()]=i}}function Pf(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(let r of t.Da.get(e))t.ba.delete(r),n&&t.Sa.ka(r,n);t.Da.delete(e),t.isPrimaryClient&&t.Ma.Rr(e).forEach(r=>{t.Ma.containsKey(r)||mw(t,r)})}function mw(t,e){t.Ca.delete(e.path.canonicalString());let n=t.va.get(e);n!==null&&(Jf(t.remoteStore,n),t.va=t.va.remove(e),t.Fa.delete(n),rp(t))}function y_(t,e,n){for(let r of n)r instanceof nu?(t.Ma.addReference(r.key,e),TR(t,r)):r instanceof ru?(I("SyncEngine","Document no longer in limbo: "+r.key),t.Ma.removeReference(r.key,e),t.Ma.containsKey(r.key)||mw(t,r.key)):C()}function TR(t,e){let n=e.key,r=n.path.canonicalString();t.va.get(n)||t.Ca.has(r)||(I("SyncEngine","New document in limbo: "+n),t.Ca.add(r),rp(t))}function rp(t){for(;t.Ca.size>0&&t.va.size<t.maxConcurrentLimboResolutions;){let e=t.Ca.values().next().value;t.Ca.delete(e);let n=new S(J.fromString(e)),r=t.Na.next();t.Fa.set(r,new Cf(n)),t.va=t.va.insert(n,r),iw(t.remoteStore,new ks(gt(Qf(n.path)),r,"TargetPurposeLimboResolution",A_.oe))}}function qs(t,e,n){return d(this,null,function*(){let r=O(t),i=[],s=[],o=[];r.ba.isEmpty()||(r.ba.forEach((a,u)=>{o.push(r.Ba(u,e,n).then(c=>{if((c||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(u.targetId,c?.fromCache?"not-current":"current"),c){i.push(c);let l=uf.Qi(u.targetId,c);s.push(l)}}))}),yield Promise.all(o),r.Sa.l_(i),yield function(u,c){return d(this,null,function*(){let l=O(u);try{yield l.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>y.forEach(c,f=>y.forEach(f.ki,p=>l.persistence.referenceDelegate.addReference(h,f.targetId,p)).next(()=>y.forEach(f.qi,p=>l.persistence.referenceDelegate.removeReference(h,f.targetId,p)))))}catch(h){if(!js(h))throw h;I("LocalStore","Failed to update sequence numbers: "+h)}for(let h of c){let f=h.targetId;if(!h.fromCache){let p=l.ts.get(f),E=p.snapshotVersion,D=p.withLastLimboFreeSnapshotVersion(E);l.ts=l.ts.insert(f,D)}}})}(r.localStore,s))})}function DR(t,e){return d(this,null,function*(){let n=O(t);if(!n.currentUser.isEqual(e)){I("SyncEngine","User change. New user:",e.toKey());let r=yield nw(n.localStore,e);n.currentUser=e,function(s,o){s.Oa.forEach(a=>{a.forEach(u=>{u.reject(new _(g.CANCELLED,o))})}),s.Oa.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield qs(n,r._s)}})}function AR(t,e){let n=O(t),r=n.Fa.get(e);if(r&&r.wa)return L().add(r.key);{let i=L(),s=n.Da.get(e);if(!s)return i;for(let o of s){let a=n.ba.get(o);i=i.unionWith(a.view.Ea)}return i}}function yw(t){let e=O(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=fw.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=AR.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=wR.bind(null,e),e.Sa.l_=dR.bind(null,e.eventManager),e.Sa.ka=fR.bind(null,e.eventManager),e}function SR(t){let e=O(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=ER.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=IR.bind(null,e),e}var iu=class{constructor(){this.synchronizeTabs=!1}initialize(e){return d(this,null,function*(){this.serializer=yu(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),yield this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)})}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return HC(this.persistence,new lf,e.initialUser,this.serializer)}createPersistence(e){return new sf(af.jr,this.serializer)}createSharedClientState(e){return new ff}terminate(){return d(this,null,function*(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}};var Nf=class{initialize(e,n){return d(this,null,function*(){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>m_(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=DR.bind(null,this.syncEngine),yield hR(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(e){return function(){return new Df}()}createDatastore(e){let n=yu(e.databaseInfo.databaseId),r=function(s){return new mf(s)}(e.databaseInfo);return function(s,o,a,u){return new _f(s,o,a,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,a){return new Ef(r,i,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>m_(this.syncEngine,n,0),function(){return Qa.D()?new Qa:new pf}())}createSyncEngine(e,n){return function(i,s,o,a,u,c,l){let h=new Rf(i,s,o,a,u,c);return l&&(h.La=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return d(this,null,function*(){var e;yield function(r){return d(this,null,function*(){let i=O(r);I("RemoteStore","RemoteStore shutting down."),i.M_.add(5),yield zs(i),i.O_.shutdown(),i.N_.set("Unknown")})}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate()})}};var su=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ka(this.observer.next,e)}error(e){this.observer.error?this.Ka(this.observer.error,e):kt("Uncaught Error in snapshot listener:",e.toString())}$a(){this.muted=!0}Ka(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}};var Of=class{constructor(e,n,r,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=pe.UNAUTHENTICATED,this.clientId=Fa.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,s=>d(this,null,function*(){I("FirestoreClient","Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,s=>(I("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new _(g.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();let e=new ft;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>d(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){let r=tp(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function ud(t,e){return d(this,null,function*(){t.asyncQueue.verifyOperationInProgress(),I("FirestoreClient","Initializing OfflineComponentProvider");let n=t.configuration;yield e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(i=>d(this,null,function*(){r.isEqual(i)||(yield nw(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e})}function v_(t,e){return d(this,null,function*(){t.asyncQueue.verifyOperationInProgress();let n=yield CR(t);I("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>p_(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>p_(e.remoteStore,i)),t._onlineComponents=e})}function bR(t){return t.name==="FirebaseError"?t.code===g.FAILED_PRECONDITION||t.code===g.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}function CR(t){return d(this,null,function*(){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){I("FirestoreClient","Using user provided OfflineComponentProvider");try{yield ud(t,t._uninitializedComponentsProvider._offline)}catch(e){let n=e;if(!bR(n))throw n;$r("Error using user provided cache. Falling back to memory cache: "+n),yield ud(t,new iu)}}else I("FirestoreClient","Using default OfflineComponentProvider"),yield ud(t,new iu);return t._offlineComponents})}function vw(t){return d(this,null,function*(){return t._onlineComponents||(t._uninitializedComponentsProvider?(I("FirestoreClient","Using user provided OnlineComponentProvider"),yield v_(t,t._uninitializedComponentsProvider._online)):(I("FirestoreClient","Using default OnlineComponentProvider"),yield v_(t,new Nf))),t._onlineComponents})}function RR(t){return vw(t).then(e=>e.syncEngine)}function kf(t){return d(this,null,function*(){let e=yield vw(t),n=e.eventManager;return n.onListen=pR.bind(null,e.syncEngine),n.onUnlisten=yR.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=gR.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=vR.bind(null,e.syncEngine),n})}function PR(t,e,n={}){let r=new ft;return t.asyncQueue.enqueueAndForget(()=>d(this,null,function*(){return function(s,o,a,u,c){let l=new su({next:f=>{o.enqueueAndForget(()=>hw(s,h)),f.fromCache&&u.source==="server"?c.reject(new _(g.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(f)},error:f=>c.reject(f)}),h=new tu(a,l,{includeMetadataChanges:!0,ra:!0});return lw(s,h)}(yield kf(t),t.asyncQueue,e,n,r)})),r.promise}function _w(t){let e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}var __=new Map;function ww(t,e,n){if(!n)throw new _(g.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function NR(t,e,n,r){if(e===!0&&r===!0)throw new _(g.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function w_(t){if(!S.isDocumentKey(t))throw new _(g.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function E_(t){if(S.isDocumentKey(t))throw new _(g.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function wu(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":C()}function Ot(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new _(g.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let n=wu(t);throw new _(g.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}var ou=class{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new _(g.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new _(g.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}NR("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=_w((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new _(g.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new _(g.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new _(g.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Xr=class{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new ou({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new _(g.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new _(g.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new ou(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new cd;switch(r.type){case"firstParty":return new fd(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new _(g.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){let r=__.get(n);r&&(I("ComponentProvider","Removing Datastore"),__.delete(n),r.terminate())}(this),Promise.resolve()}};function Ew(t,e,n,r={}){var i;let s=(t=Ot(t,Xr))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&$r("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,u;if(typeof r.mockUserToken=="string")a=r.mockUserToken,u=pe.MOCK_USER;else{a=um(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);let c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new _(g.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new pe(c)}t._authCredentials=new ld(new Ma(a,u))}}var Jn=class t{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new t(this.firestore,e,this._query)}},Oe=class t{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new rn(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new t(this.firestore,e,this._key)}},rn=class t extends Jn{constructor(e,n,r){super(e,n,Qf(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Oe(this.firestore,null,new S(e))}withConverter(e){return new t(this.firestore,e,this._path)}};function Iw(t,e,...n){if(t=re(t),ww("collection","path",e),t instanceof Xr){let r=J.fromString(e,...n);return E_(r),new rn(t,null,r)}{if(!(t instanceof Oe||t instanceof rn))throw new _(g.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(J.fromString(e,...n));return E_(r),new rn(t.firestore,null,r)}}function Tw(t,e,...n){if(t=re(t),arguments.length===1&&(e=Fa.newId()),ww("doc","path",e),t instanceof Xr){let r=J.fromString(e,...n);return w_(r),new Oe(t,null,new S(r))}{if(!(t instanceof Oe||t instanceof rn))throw new _(g.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(J.fromString(e,...n));return w_(r),new Oe(t.firestore,t instanceof rn?t.converter:null,new S(r))}}var Mf=class{constructor(){this.iu=Promise.resolve(),this.su=[],this.ou=!1,this._u=[],this.au=null,this.uu=!1,this.cu=!1,this.lu=[],this.Jo=new Ya(this,"async_queue_retry"),this.hu=()=>{let n=ad();n&&I("AsyncQueue","Visibility state changed to "+n.visibilityState),this.Jo.Uo()};let e=ad();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.hu)}get isShuttingDown(){return this.ou}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Pu(),this.Iu(e)}enterRestrictedMode(e){if(!this.ou){this.ou=!0,this.cu=e||!1;let n=ad();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.hu)}}enqueue(e){if(this.Pu(),this.ou)return new Promise(()=>{});let n=new ft;return this.Iu(()=>this.ou&&this.cu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.su.push(e),this.Tu()))}Tu(){return d(this,null,function*(){if(this.su.length!==0){try{yield this.su[0](),this.su.shift(),this.Jo.reset()}catch(e){if(!js(e))throw e;I("AsyncQueue","Operation failed with retryable error: "+e)}this.su.length>0&&this.Jo.Ko(()=>this.Tu())}})}Iu(e){let n=this.iu.then(()=>(this.uu=!0,e().catch(r=>{this.au=r,this.uu=!1;let i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw kt("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.uu=!1,r))));return this.iu=n,n}enqueueAfterDelay(e,n,r){this.Pu(),this.lu.indexOf(e)>-1&&(n=0);let i=If.createAndSchedule(this,e,n,r,s=>this.Eu(s));return this._u.push(i),i}Pu(){this.au&&C()}verifyOperationInProgress(){}du(){return d(this,null,function*(){let e;do e=this.iu,yield e;while(e!==this.iu)})}Au(e){for(let n of this._u)if(n.timerId===e)return!0;return!1}Ru(e){return this.du().then(()=>{this._u.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(let n of this._u)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.du()})}Vu(e){this.lu.push(e)}Eu(e){let n=this._u.indexOf(e);this._u.splice(n,1)}};function I_(t){return function(n,r){if(typeof n!="object"||n===null)return!1;let i=n;for(let s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(t,["next","error","complete"])}var un=class extends Xr{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=function(){return new Mf}(),this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||Aw(this),this._firestoreClient.terminate()}};function Dw(t,e){let n=typeof t=="object"?t:Tr(),r=typeof t=="string"?t:e||"(default)",i=ji(n,"firestore").getImmediate({identifier:r});if(!i._initialized){let s=am("firestore");s&&Ew(i,...s)}return i}function ip(t){return t._firestoreClient||Aw(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function Aw(t){var e,n,r;let i=t._freezeSettings(),s=function(a,u,c,l){return new vd(a,u,c,l.host,l.ssl,l.experimentalForceLongPolling,l.experimentalAutoDetectLongPolling,_w(l.experimentalLongPollingOptions),l.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._firestoreClient=new Of(t._authCredentials,t._appCheckCredentials,t._queue,s),!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}var xs=class t{constructor(e){this._byteString=e}static fromBase64String(e){try{return new t(Ce.fromBase64String(e))}catch(n){throw new _(g.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new t(Ce.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var Zr=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new _(g.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new je(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Ls=class{constructor(e){this._methodName=e}};var Vs=class{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new _(g.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new _(g.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return z(this._lat,e._lat)||z(this._long,e._long)}};var OR=/^__.*__$/,Ff=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new vt(e,this.data,this.fieldMask,n,this.fieldTransforms):new Yn(e,this.data,n,this.fieldTransforms)}},au=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new vt(e,this.data,this.fieldMask,n,this.fieldTransforms)}};function Sw(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw C()}}var xf=class t{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.mu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get fu(){return this.settings.fu}gu(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}pu(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.gu({path:r,yu:!1});return i.wu(e),i}Su(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.gu({path:r,yu:!1});return i.mu(),i}bu(e){return this.gu({path:void 0,yu:!0})}Du(e){return cu(e,this.settings.methodName,this.settings.Cu||!1,this.path,this.settings.vu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}mu(){if(this.path)for(let e=0;e<this.path.length;e++)this.wu(this.path.get(e))}wu(e){if(e.length===0)throw this.Du("Document fields must not be empty");if(Sw(this.fu)&&OR.test(e))throw this.Du('Document fields cannot begin and end with "__"')}},Lf=class{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||yu(e)}Fu(e,n,r,i=!1){return new xf({fu:e,methodName:n,vu:r,path:je.emptyPath(),yu:!1,Cu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function sp(t){let e=t._freezeSettings(),n=yu(t._databaseId);return new Lf(t._databaseId,!!e.ignoreUndefinedProperties,n)}function kR(t,e,n,r,i,s={}){let o=t.Fu(s.merge||s.mergeFields?2:0,e,n,i);op("Data must be an object, but it was:",o,r);let a=bw(r,o),u,c;if(s.merge)u=new Qe(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){let l=[];for(let h of s.mergeFields){let f=Vf(e,h,n);if(!o.contains(f))throw new _(g.INVALID_ARGUMENT,`Field '${f}' is specified in your field mask but missing from your input data.`);Rw(l,f)||l.push(f)}u=new Qe(l),c=o.fieldTransforms.filter(h=>u.covers(h.field))}else u=null,c=o.fieldTransforms;return new Ff(new $e(a),u,c)}var uu=class t extends Ls{_toFieldTransform(e){if(e.fu!==2)throw e.fu===1?e.Du(`${this._methodName}() can only appear at the top level of your update data`):e.Du(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof t}};function MR(t,e,n,r){let i=t.Fu(1,e,n);op("Data must be an object, but it was:",i,r);let s=[],o=$e.empty();Xn(r,(u,c)=>{let l=ap(e,u,n);c=re(c);let h=i.Su(l);if(c instanceof uu)s.push(l);else{let f=Gs(c,h);f!=null&&(s.push(l),o.set(l,f))}});let a=new Qe(s);return new au(o,a,i.fieldTransforms)}function FR(t,e,n,r,i,s){let o=t.Fu(1,e,n),a=[Vf(e,r,n)],u=[i];if(s.length%2!=0)throw new _(g.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let f=0;f<s.length;f+=2)a.push(Vf(e,s[f])),u.push(s[f+1]);let c=[],l=$e.empty();for(let f=a.length-1;f>=0;--f)if(!Rw(c,a[f])){let p=a[f],E=u[f];E=re(E);let D=o.Su(p);if(E instanceof uu)c.push(p);else{let m=Gs(E,D);m!=null&&(c.push(p),l.set(p,m))}}let h=new Qe(c);return new au(l,h,o.fieldTransforms)}function xR(t,e,n,r=!1){return Gs(n,t.Fu(r?4:3,e))}function Gs(t,e){if(Cw(t=re(t)))return op("Unsupported field value:",e,t),bw(t,e);if(t instanceof Ls)return function(r,i){if(!Sw(i.fu))throw i.Du(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Du(`${r._methodName}() is not currently supported inside arrays`);let s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.yu&&e.fu!==4)throw e.Du("Nested arrays are not supported");return function(r,i){let s=[],o=0;for(let a of r){let u=Gs(a,i.bu(o));u==null&&(u={nullValue:"NULL_VALUE"}),s.push(u),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=re(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return EC(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let s=ve.fromDate(r);return{timestampValue:Wa(i.serializer,s)}}if(r instanceof ve){let s=new ve(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Wa(i.serializer,s)}}if(r instanceof Vs)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof xs)return{bytesValue:Q_(i.serializer,r._byteString)};if(r instanceof Oe){let s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Du(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:Yf(r.firestore._databaseId||i.databaseId,r._key.path)}}throw i.Du(`Unsupported field value: ${wu(r)}`)}(t,e)}function bw(t,e){let n={};return S_(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Xn(t,(r,i)=>{let s=Gs(i,e.pu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function Cw(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof ve||t instanceof Vs||t instanceof xs||t instanceof Oe||t instanceof Ls)}function op(t,e,n){if(!Cw(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){let r=wu(n);throw r==="an object"?e.Du(t+" a custom object"):e.Du(t+" "+r)}}function Vf(t,e,n){if((e=re(e))instanceof Zr)return e._internalPath;if(typeof e=="string")return ap(t,e);throw cu("Field path arguments must be of type string or ",t,!1,void 0,n)}var LR=new RegExp("[~\\*/\\[\\]]");function ap(t,e,n){if(e.search(LR)>=0)throw cu(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Zr(...e.split("."))._internalPath}catch{throw cu(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function cu(t,e,n,r,i){let s=r&&!r.isEmpty(),o=i!==void 0,a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new _(g.INVALID_ARGUMENT,a+t+u)}function Rw(t,e){return t.some(n=>n.isEqual(e))}var lu=class{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Oe(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new Uf(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let n=this._document.data.field(up("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}},Uf=class extends lu{data(){return super.data()}};function up(t,e){return typeof e=="string"?ap(t,e):e instanceof Zr?e._internalPath:e._delegate._internalPath}function Pw(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new _(g.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Us=class{},Bf=class extends Us{};function Nw(t,e,...n){let r=[];e instanceof Us&&r.push(e),r=r.concat(n),function(s){let o=s.filter(u=>u instanceof $f).length,a=s.filter(u=>u instanceof hu).length;if(o>1||o>0&&a>0)throw new _(g.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let i of r)t=i._apply(t);return t}var hu=class t extends Bf{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new t(e,n,r)}_apply(e){let n=this._parse(e);return kw(e._query,n),new Jn(e.firestore,e.converter,Nd(e._query,n))}_parse(e){let n=sp(e.firestore);return function(s,o,a,u,c,l,h){let f;if(c.isKeyField()){if(l==="array-contains"||l==="array-contains-any")throw new _(g.INVALID_ARGUMENT,`Invalid Query. You can't perform '${l}' queries on documentId().`);if(l==="in"||l==="not-in"){D_(h,l);let p=[];for(let E of h)p.push(T_(u,s,E));f={arrayValue:{values:p}}}else f=T_(u,s,h)}else l!=="in"&&l!=="not-in"&&l!=="array-contains-any"||D_(h,l),f=xR(a,o,h,l==="in"||l==="not-in");return oe.create(c,l,f)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}};function Ow(t,e,n){let r=e,i=up("where",t);return hu._create(i,r,n)}var $f=class t extends Us{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new t(e,n)}_parse(e){let n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:nt.create(n,this._getOperator())}_apply(e){let n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let o=i,a=s.getFlattenedFilters();for(let u of a)kw(o,u),o=Nd(o,u)}(e._query,n),new Jn(e.firestore,e.converter,Nd(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};function T_(t,e,n){if(typeof(n=re(n))=="string"){if(n==="")throw new _(g.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!M_(e)&&n.indexOf("/")!==-1)throw new _(g.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);let r=e.path.child(J.fromString(n));if(!S.isDocumentKey(r))throw new _(g.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Yv(t,new S(r))}if(n instanceof Oe)return Yv(t,n._key);throw new _(g.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${wu(n)}.`)}function D_(t,e){if(!Array.isArray(t)||t.length===0)throw new _(g.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function kw(t,e){let n=function(i,s){for(let o of i)for(let a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new _(g.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new _(g.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}var jf=class{convertValue(e,n="none"){switch(Wn(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ee(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(sn(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw C()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){let r={};return Xn(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertGeoPoint(e){return new Vs(ee(e.latitude),ee(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":let r=Gf(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Ps(e));default:return null}}convertTimestamp(e){let n=Mt(e);return new ve(n.seconds,n.nanos)}convertDocumentKey(e,n){let r=J.fromString(e);W(tw(r));let i=new Ua(r.get(1),r.get(3)),s=new S(r.popFirst(5));return i.isEqual(n)||kt(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}};function VR(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}var zn=class{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},du=class extends lu{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let n=new Br(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){let r=this._document.data.field(up("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}},Br=class extends du{data(e={}){return super.data(e)}},fu=class{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new zn(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Br(this._firestore,this._userDataWriter,r.key,r,new zn(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new _(g.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{let u=new Br(i._firestore,i._userDataWriter,a.doc.key,a.doc,new zn(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{let u=new Br(i._firestore,i._userDataWriter,a.doc.key,a.doc,new zn(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),c=-1,l=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),l=o.indexOf(a.doc.key)),{type:UR(a.type),doc:u,oldIndex:c,newIndex:l}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}};function UR(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return C()}}var Bs=class extends jf{constructor(e){super(),this.firestore=e}convertBytes(e){return new xs(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new Oe(this.firestore,null,n)}};function Mw(t){t=Ot(t,Jn);let e=Ot(t.firestore,un),n=ip(e),r=new Bs(e);return Pw(t._query),PR(n,t._query).then(i=>new fu(e,r,t,i))}function Fw(t,e,n,...r){t=Ot(t,Oe);let i=Ot(t.firestore,un),s=sp(i),o;return o=typeof(e=re(e))=="string"||e instanceof Zr?FR(s,"updateDoc",t._key,e,n,r):MR(s,"updateDoc",t._key,e),Lw(i,[o.toMutation(t._key,nn.exists(!0))])}function xw(t,e){let n=Ot(t.firestore,un),r=Tw(t),i=VR(t.converter,e);return Lw(n,[kR(sp(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,nn.exists(!1))]).then(()=>r)}function cp(t,...e){var n,r,i;t=re(t);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||I_(e[o])||(s=e[o],o++);let a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(I_(e[o])){let h=e[o];e[o]=(n=h.next)===null||n===void 0?void 0:n.bind(h),e[o+1]=(r=h.error)===null||r===void 0?void 0:r.bind(h),e[o+2]=(i=h.complete)===null||i===void 0?void 0:i.bind(h)}let u,c,l;if(t instanceof Oe)c=Ot(t.firestore,un),l=Qf(t._key.path),u={next:h=>{e[o]&&e[o](BR(c,t,h))},error:e[o+1],complete:e[o+2]};else{let h=Ot(t,Jn);c=Ot(h.firestore,un),l=h._query;let f=new Bs(c);u={next:p=>{e[o]&&e[o](new fu(c,f,h,p))},error:e[o+1],complete:e[o+2]},Pw(t._query)}return function(f,p,E,D){let m=new su(D),T=new tu(p,m,E);return f.asyncQueue.enqueueAndForget(()=>d(this,null,function*(){return lw(yield kf(f),T)})),()=>{m.$a(),f.asyncQueue.enqueueAndForget(()=>d(this,null,function*(){return hw(yield kf(f),T)}))}}(ip(c),l,a,u)}function Lw(t,e){return function(r,i){let s=new ft;return r.asyncQueue.enqueueAndForget(()=>d(this,null,function*(){return _R(yield RR(r),i,s)})),s.promise}(ip(t),e)}function BR(t,e,n){let r=n.docs.get(e._key),i=new Bs(t);return new du(t,i,e._key,r,new zn(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(i){ei=i})(Qt),Kt(new He("firestore",(r,{instanceIdentifier:i,options:s})=>{let o=r.getProvider("app").getImmediate(),a=new un(new hd(r.getProvider("auth-internal")),new gd(r.getProvider("app-check-internal")),function(c,l){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new _(g.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ua(c.options.projectId,l)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),le(Hv,"4.6.1",e),le(Hv,"4.6.1","esm2017")})();var Eu=function(){return Eu=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Eu.apply(this,arguments)};var zR={includeMetadataChanges:!1};function Vw(t,e){return e===void 0&&(e=zR),new cn(function(n){var r=cp(t,e,{next:n.next.bind(n),error:n.error.bind(n),complete:n.complete.bind(n)});return{unsubscribe:r}})}function Uw(t,e){var n;e===void 0&&(e={});var r=t.data(e);return!t.exists()||typeof r!="object"||r===null||!e.idField?r:Eu(Eu({},r),(n={},n[e.idField]=t.id,n))}function Bw(t){return Vw(t,{includeMetadataChanges:!0}).pipe(B(function(e){return e.docs}))}function $w(t,e){return e===void 0&&(e={}),Bw(t).pipe(B(function(n){return n.map(function(r){return Uw(r,e)})}))}var Ws=class{constructor(e){return e}},jw="firestore",lp=class{constructor(){return zi(jw)}};var hp=new $("angularfire2.firestore-instances");function qR(t,e){let n=Mo(jw,t,e);return n&&new Ws(n)}function GR(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new Ws(r)}}var WR={provide:lp,deps:[[new Ne,hp]]},HR={provide:Ws,useFactory:qR,deps:[[new Ne,hp],St]},KR=(()=>{class t{constructor(){le("angularfire",Pn.full,"fst")}static \u0275fac=function(r){return new(r||t)};static \u0275mod=Me({type:t});static \u0275inj=ke({providers:[HR,WR]})}return t})();function bM(t,...e){return{ngModule:KR,providers:[{provide:hp,useFactory:GR(t),multi:!0,deps:[X,Fe,Sr,Nn,[new Ne,Zi],[new Ne,Ar],...e]}]}}var CM=Ee($w,!0);var RM=Ee(xw,!0);var PM=Ee(Iw,!0);var NM=Ee(Mw,!0);var OM=Ee(Dw,!0);var kM=Ee(Nw,!0);var MM=Ee(Fw,!0);var FM=Ee(Ow,!0);export{ur as a,he as b,Qw as c,iE as d,wE as e,MP as f,cg as g,eN as h,lc as i,mI as j,Jc as k,NN as l,ON as m,VO as n,UO as o,Xi as p,Ok as q,kk as r,Mk as s,Fk as t,xk as u,Ws as v,bM as w,CM as x,RM as y,PM as z,NM as A,OM as B,kM as C,MM as D,FM as E,An as F,FN as G,xN as H,So as I,Jg as J,Xg as K,LN as L,rm as M,YN as N};
