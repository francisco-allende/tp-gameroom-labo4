import{$ as A,$a as ni,A as Jf,Aa as an,B as pu,Ba as Xn,Ca as op,D as rn,Da as ap,Db as ri,E as Qn,Ea as up,F as Yr,Fa as cp,Fb as ii,G as gu,Ga as lp,Gb as Ip,H as Yn,Ha as hp,Hb as qs,I as Xf,Ia as dp,Ib as Ou,J as Vs,Ja as vt,Jb as Ep,K as Mt,Ka as Cu,Kb as dn,L as mu,La as fp,Lb as ku,M as Zf,Ma as Zn,Mb as si,N as yu,Na as se,Nb as Tp,O as vu,Oa as _e,Ob as oi,P as tt,Pa as pp,Q as ep,R as ce,Ra as gp,S as Q,Sa as mp,T as tp,Ta as $s,V as M,Va as js,W as He,X as np,Xa as bu,Y as W,Ya as yp,Z as _u,Za as vp,_ as F,_a as _p,a as w,aa as Re,ab as ee,b as H,ba as Jr,bb as un,ca as Xr,cb as Se,d as kt,da as Zr,db as er,e as d,ea as We,f as Hf,fa as Jn,fb as _t,g as au,ga as ei,h as Kr,i as uu,ia as rp,j as cu,ja as Us,k as ve,ka as sn,kb as Ke,l as Ue,la as Bs,lb as wt,m as Wf,ma as wu,mb as cn,n as Kf,na as Iu,nb as Ru,o as Ft,oa as Eu,ob as Pu,p as lu,pa as Tu,pb as Nu,q as hu,qa as Ne,r as du,ra as Du,rb as wp,s as Be,sa as ti,sb as ln,t as N,ta as on,tb as Oe,u as Qr,ua as ip,v as Qf,va as Au,w as Yf,wa as sp,wb as It,x as j,xa as xt,y as fu,yb as hn,z as $e,za as Su}from"./chunk-MZUU66T2.js";var Cp=null;function tr(){return Cp}function bp(t){Cp??=t}var zs=class{};var we=new W(""),Rp=(()=>{let e=class e{historyGo(r){throw new Error("")}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=M({token:e,factory:()=>A(gw),providedIn:"platform"});let t=e;return t})();var gw=(()=>{let e=class e extends Rp{constructor(){super(),this._doc=A(we),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return tr().getBaseHref(this._doc)}onPopState(r){let i=tr().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",r,!1),()=>i.removeEventListener("popstate",r)}onHashChange(r){let i=tr().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",r,!1),()=>i.removeEventListener("hashchange",r)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(r){this._location.pathname=r}pushState(r,i,s){this._history.pushState(r,i,s)}replaceState(r,i,s){this._history.replaceState(r,i,s)}forward(){this._history.forward()}back(){this._history.back()}historyGo(r=0){this._history.go(r)}getState(){return this._history.state}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=M({token:e,factory:()=>new e,providedIn:"platform"});let t=e;return t})();function Pp(t,e){if(t.length==0)return e;if(e.length==0)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,n==2?t+e.substring(1):n==1?t+e:t+"/"+e}function Dp(t){let e=t.match(/#|\?|$/),n=e&&e.index||t.length,r=n-(t[n-1]==="/"?1:0);return t.slice(0,r)+t.slice(n)}function fn(t){return t&&t[0]!=="?"?"?"+t:t}var nr=(()=>{let e=class e{historyGo(r){throw new Error("")}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=M({token:e,factory:()=>A(Np),providedIn:"root"});let t=e;return t})(),mw=new W(""),Np=(()=>{let e=class e extends nr{constructor(r,i){super(),this._platformLocation=r,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??A(we).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}prepareExternalUrl(r){return Pp(this._baseHref,r)}path(r=!1){let i=this._platformLocation.pathname+fn(this._platformLocation.search),s=this._platformLocation.hash;return s&&r?`${i}${s}`:i}pushState(r,i,s,o){let a=this.prepareExternalUrl(s+fn(o));this._platformLocation.pushState(r,i,a)}replaceState(r,i,s,o){let a=this.prepareExternalUrl(s+fn(o));this._platformLocation.replaceState(r,i,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(r=0){this._platformLocation.historyGo?.(r)}};e.\u0275fac=function(i){return new(i||e)(F(Rp),F(mw,8))},e.\u0275prov=M({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var ai=(()=>{let e=class e{constructor(r){this._subject=new on,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=r;let i=this._locationStrategy.getBaseHref();this._basePath=_w(Dp(Ap(i))),this._locationStrategy.onPopState(s=>{this._subject.emit({url:this.path(!0),pop:!0,state:s.state,type:s.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(r=!1){return this.normalize(this._locationStrategy.path(r))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(r,i=""){return this.path()==this.normalize(r+fn(i))}normalize(r){return e.stripTrailingSlash(vw(this._basePath,Ap(r)))}prepareExternalUrl(r){return r&&r[0]!=="/"&&(r="/"+r),this._locationStrategy.prepareExternalUrl(r)}go(r,i="",s=null){this._locationStrategy.pushState(s,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+fn(i)),s)}replaceState(r,i="",s=null){this._locationStrategy.replaceState(s,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+fn(i)),s)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(r=0){this._locationStrategy.historyGo?.(r)}onUrlChange(r){return this._urlChangeListeners.push(r),this._urlChangeSubscription??=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)}),()=>{let i=this._urlChangeListeners.indexOf(r);this._urlChangeListeners.splice(i,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(r="",i){this._urlChangeListeners.forEach(s=>s(r,i))}subscribe(r,i,s){return this._subject.subscribe({next:r,error:i,complete:s})}};e.normalizeQueryParams=fn,e.joinWithSlash=Pp,e.stripTrailingSlash=Dp,e.\u0275fac=function(i){return new(i||e)(F(nr))},e.\u0275prov=M({token:e,factory:()=>yw(),providedIn:"root"});let t=e;return t})();function yw(){return new ai(F(nr))}function vw(t,e){if(!t||!e.startsWith(t))return e;let n=e.substring(t.length);return n===""||["/",";","?","#"].includes(n[0])?n:e}function Ap(t){return t.replace(/\/index.html$/,"")}function _w(t){if(new RegExp("^(https?:)?//").test(t)){let[,n]=t.split(/\/\/[^\/]+/);return n}return t}function Op(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let r=n.indexOf("="),[i,s]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}var Mu=(()=>{let e=class e{constructor(r,i){this._viewContainer=r,this._context=new Fu,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(r){this._context.$implicit=this._context.ngIf=r,this._updateView()}set ngIfThen(r){Sp("ngIfThen",r),this._thenTemplateRef=r,this._thenViewRef=null,this._updateView()}set ngIfElse(r){Sp("ngIfElse",r),this._elseTemplateRef=r,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(r,i){return!0}};e.\u0275fac=function(i){return new(i||e)(_e(js),_e(pp))},e.\u0275dir=Jn({type:e,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0});let t=e;return t})(),Fu=class{constructor(){this.$implicit=null,this.ngIf=null}};function Sp(t,e){if(!!!(!e||e.createEmbeddedView))throw new Error(`${t} must be a TemplateRef, but received '${tp(e)}'.`)}var ww=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=We({type:e}),e.\u0275inj=He({});let t=e;return t})(),kp="browser",Iw="server";function xu(t){return t===Iw}var Gs=class{};var Uu=class extends zs{constructor(){super(...arguments),this.supportsDOMEvents=!0}},Bu=class t extends Uu{static makeCurrent(){bp(new t)}onAndCancel(e,n,r){return e.addEventListener(n,r),()=>{e.removeEventListener(n,r)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,n){return n=n||this.getDefaultDocument(),n.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return n==="window"?window:n==="document"?e:n==="body"?e.body:null}getBaseHref(e){let n=Dw();return n==null?null:Aw(n)}resetBaseElement(){ui=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Op(document.cookie,e)}},ui=null;function Dw(){return ui=ui||document.querySelector("base"),ui?ui.getAttribute("href"):null}function Aw(t){return new URL(t,document.baseURI).pathname}var Sw=(()=>{let e=class e{build(){return new XMLHttpRequest}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=M({token:e,factory:e.\u0275fac});let t=e;return t})(),$u=new W(""),Lp=(()=>{let e=class e{constructor(r,i){this._zone=i,this._eventNameToPlugin=new Map,r.forEach(s=>{s.manager=this}),this._plugins=r.slice().reverse()}addEventListener(r,i,s){return this._findPluginFor(i).addEventListener(r,i,s)}getZone(){return this._zone}_findPluginFor(r){let i=this._eventNameToPlugin.get(r);if(i)return i;if(i=this._plugins.find(o=>o.supports(r)),!i)throw new Q(5101,!1);return this._eventNameToPlugin.set(r,i),i}};e.\u0275fac=function(i){return new(i||e)(F($u),F(ee))},e.\u0275prov=M({token:e,factory:e.\u0275fac});let t=e;return t})(),Hs=class{constructor(e){this._doc=e}},Lu="ng-app-id",Vp=(()=>{let e=class e{constructor(r,i,s,o={}){this.doc=r,this.appId=i,this.nonce=s,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=xu(o),this.resetHostNodes()}addStyles(r){for(let i of r)this.changeUsageCount(i,1)===1&&this.onStyleAdded(i)}removeStyles(r){for(let i of r)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){let r=this.styleNodesInDOM;r&&(r.forEach(i=>i.remove()),r.clear());for(let i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(r){this.hostNodes.add(r);for(let i of this.getAllStyles())this.addStyleToHost(r,i)}removeHost(r){this.hostNodes.delete(r)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(r){for(let i of this.hostNodes)this.addStyleToHost(i,r)}onStyleRemoved(r){let i=this.styleRef;i.get(r)?.elements?.forEach(s=>s.remove()),i.delete(r)}collectServerRenderedStyles(){let r=this.doc.head?.querySelectorAll(`style[${Lu}="${this.appId}"]`);if(r?.length){let i=new Map;return r.forEach(s=>{s.textContent!=null&&i.set(s.textContent,s)}),i}return null}changeUsageCount(r,i){let s=this.styleRef;if(s.has(r)){let o=s.get(r);return o.usage+=i,o.usage}return s.set(r,{usage:i,elements:[]}),i}getStyleElement(r,i){let s=this.styleNodesInDOM,o=s?.get(i);if(o?.parentNode===r)return s.delete(i),o.removeAttribute(Lu),o;{let a=this.doc.createElement("style");return this.nonce&&a.setAttribute("nonce",this.nonce),a.textContent=i,this.platformIsServer&&a.setAttribute(Lu,this.appId),r.appendChild(a),a}}addStyleToHost(r,i){let s=this.getStyleElement(r,i),o=this.styleRef,a=o.get(i)?.elements;a?a.push(s):o.set(i,{elements:[s],usage:1})}resetHostNodes(){let r=this.hostNodes;r.clear(),r.add(this.doc.head)}};e.\u0275fac=function(i){return new(i||e)(F(we),F(Au),F(Su,8),F(xt))},e.\u0275prov=M({token:e,factory:e.\u0275fac});let t=e;return t})(),Vu={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},qu=/%COMP%/g,Up="%COMP%",Cw=`_nghost-${Up}`,bw=`_ngcontent-${Up}`,Rw=!0,Pw=new W("",{providedIn:"root",factory:()=>Rw});function Nw(t){return bw.replace(qu,t)}function Ow(t){return Cw.replace(qu,t)}function Bp(t,e){return e.map(n=>n.replace(qu,t))}var Fp=(()=>{let e=class e{constructor(r,i,s,o,a,u,c,l=null){this.eventManager=r,this.sharedStylesHost=i,this.appId=s,this.removeStylesOnCompDestroy=o,this.doc=a,this.platformId=u,this.ngZone=c,this.nonce=l,this.rendererByCompId=new Map,this.platformIsServer=xu(u),this.defaultRenderer=new ci(r,a,c,this.platformIsServer)}createRenderer(r,i){if(!r||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===Jr.ShadowDom&&(i=H(w({},i),{encapsulation:Jr.Emulated}));let s=this.getOrCreateRenderer(r,i);return s instanceof Ws?s.applyToHost(r):s instanceof li&&s.applyStyles(),s}getOrCreateRenderer(r,i){let s=this.rendererByCompId,o=s.get(i.id);if(!o){let a=this.doc,u=this.ngZone,c=this.eventManager,l=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,f=this.platformIsServer;switch(i.encapsulation){case Jr.Emulated:o=new Ws(c,l,i,this.appId,h,a,u,f);break;case Jr.ShadowDom:return new ju(c,l,r,i,a,u,this.nonce,f);default:o=new li(c,l,i,h,a,u,f);break}s.set(i.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}};e.\u0275fac=function(i){return new(i||e)(F(Lp),F(Vp),F(Au),F(Pw),F(we),F(xt),F(ee),F(Su))},e.\u0275prov=M({token:e,factory:e.\u0275fac});let t=e;return t})(),ci=class{constructor(e,n,r,i){this.eventManager=e,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,n){return n?this.doc.createElementNS(Vu[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(Mp(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(Mp(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){e&&e.removeChild(n)}selectRootElement(e,n){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new Q(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;let s=Vu[i];s?e.setAttributeNS(s,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){let i=Vu[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(Zn.DashCase|Zn.Important)?e.style.setProperty(n,r,i&Zn.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&Zn.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e!=null&&(e[n]=r)}setValue(e,n){e.nodeValue=n}listen(e,n,r){if(typeof e=="string"&&(e=tr().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${n}`);return this.eventManager.addEventListener(e,n,this.decoratePreventDefault(r))}decoratePreventDefault(e){return n=>{if(n==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(n)):e(n))===!1&&n.preventDefault()}}};function Mp(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var ju=class extends ci{constructor(e,n,r,i,s,o,a,u){super(e,s,o,u),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let c=Bp(i.id,i.styles);for(let l of c){let h=document.createElement("style");a&&h.setAttribute("nonce",a),h.textContent=l,this.shadowRoot.appendChild(h)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(this.nodeOrShadowRoot(e),n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},li=class extends ci{constructor(e,n,r,i,s,o,a,u){super(e,s,o,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i,this.styles=u?Bp(u,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},Ws=class extends li{constructor(e,n,r,i,s,o,a,u){let c=i+"-"+r.id;super(e,n,r,s,o,a,u,c),this.contentAttr=Nw(c),this.hostAttr=Ow(c)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){let r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}},kw=(()=>{let e=class e extends Hs{constructor(r){super(r)}supports(r){return!0}addEventListener(r,i,s){return r.addEventListener(i,s,!1),()=>this.removeEventListener(r,i,s)}removeEventListener(r,i,s){return r.removeEventListener(i,s)}};e.\u0275fac=function(i){return new(i||e)(F(we))},e.\u0275prov=M({token:e,factory:e.\u0275fac});let t=e;return t})(),xp=["alt","control","meta","shift"],Fw={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Mw={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},xw=(()=>{let e=class e extends Hs{constructor(r){super(r)}supports(r){return e.parseEventName(r)!=null}addEventListener(r,i,s){let o=e.parseEventName(i),a=e.eventCallback(o.fullKey,s,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>tr().onAndCancel(r,o.domEventName,a))}static parseEventName(r){let i=r.toLowerCase().split("."),s=i.shift();if(i.length===0||!(s==="keydown"||s==="keyup"))return null;let o=e._normalizeKey(i.pop()),a="",u=i.indexOf("code");if(u>-1&&(i.splice(u,1),a="code."),xp.forEach(l=>{let h=i.indexOf(l);h>-1&&(i.splice(h,1),a+=l+".")}),a+=o,i.length!=0||o.length===0)return null;let c={};return c.domEventName=s,c.fullKey=a,c}static matchEventFullKeyCode(r,i){let s=Fw[r.key]||r.key,o="";return i.indexOf("code.")>-1&&(s=r.code,o="code."),s==null||!s?!1:(s=s.toLowerCase(),s===" "?s="space":s==="."&&(s="dot"),xp.forEach(a=>{if(a!==s){let u=Mw[a];u(r)&&(o+=a+".")}}),o+=s,o===i)}static eventCallback(r,i,s){return o=>{e.matchEventFullKeyCode(o,r)&&s.runGuarded(()=>i(o))}}static _normalizeKey(r){return r==="esc"?"escape":r}};e.\u0275fac=function(i){return new(i||e)(F(we))},e.\u0275prov=M({token:e,factory:e.\u0275fac});let t=e;return t})();function zR(t,e){return Tp(w({rootComponent:t},Lw(e)))}function Lw(t){return{appProviders:[...jw,...t?.providers??[]],platformProviders:$w}}function Vw(){Bu.makeCurrent()}function Uw(){return new Du}function Bw(){return ip(document),document}var $w=[{provide:xt,useValue:kp},{provide:sp,useValue:Vw,multi:!0},{provide:we,useFactory:Bw,deps:[]}];var jw=[{provide:rp,useValue:"root"},{provide:Du,useFactory:Uw,deps:[]},{provide:$u,useClass:kw,multi:!0,deps:[we,ee,xt]},{provide:$u,useClass:xw,multi:!0,deps:[we]},Fp,Vp,Lp,{provide:mp,useExisting:Fp},{provide:Gs,useClass:Sw,deps:[]},[]];var $p=(()=>{let e=class e{constructor(r){this._doc=r}getTitle(){return this._doc.title}setTitle(r){this._doc.title=r||""}};e.\u0275fac=function(i){return new(i||e)(F(we))},e.\u0275prov=M({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var zu=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=M({token:e,factory:function(i){let s=null;return i?s=new(i||e):s=F(qw),s},providedIn:"root"});let t=e;return t})(),qw=(()=>{let e=class e extends zu{constructor(r){super(),this._doc=r}sanitize(r,i){if(i==null)return null;switch(r){case vt.NONE:return i;case vt.HTML:return Xn(i,"HTML")?an(i):dp(this._doc,String(i)).toString();case vt.STYLE:return Xn(i,"Style")?an(i):i;case vt.SCRIPT:if(Xn(i,"Script"))return an(i);throw new Q(5200,!1);case vt.URL:return Xn(i,"URL")?an(i):hp(String(i));case vt.RESOURCE_URL:if(Xn(i,"ResourceURL"))return an(i);throw new Q(5201,!1);default:throw new Q(5202,!1)}}bypassSecurityTrustHtml(r){return op(r)}bypassSecurityTrustStyle(r){return ap(r)}bypassSecurityTrustScript(r){return up(r)}bypassSecurityTrustUrl(r){return cp(r)}bypassSecurityTrustResourceUrl(r){return lp(r)}};e.\u0275fac=function(i){return new(i||e)(F(we))},e.\u0275prov=M({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var O="primary",Ai=Symbol("RouteTitle"),Qu=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function ar(t){return new Qu(t)}function zw(t,e,n){let r=n.path.split("/");if(r.length>t.length||n.pathMatch==="full"&&(e.hasChildren()||r.length<t.length))return null;let i={};for(let s=0;s<r.length;s++){let o=r[s],a=t[s];if(o.startsWith(":"))i[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function Gw(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!nt(t[n],e[n]))return!1;return!0}function nt(t,e){let n=t?Yu(t):void 0,r=e?Yu(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let s=0;s<n.length;s++)if(i=n[s],!Kp(t[i],e[i]))return!1;return!0}function Yu(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function Kp(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;let n=[...t].sort(),r=[...e].sort();return n.every((i,s)=>r[s]===i)}else return t===e}function Qp(t){return t.length>0?t[t.length-1]:null}function Bt(t){return Qf(t)?t:Ou(t)?Be(Promise.resolve(t)):N(t)}var Hw={exact:Jp,subset:Xp},Yp={exact:Ww,subset:Kw,ignored:()=>!0};function qp(t,e,n){return Hw[n.paths](t.root,e.root,n.matrixParams)&&Yp[n.queryParams](t.queryParams,e.queryParams)&&!(n.fragment==="exact"&&t.fragment!==e.fragment)}function Ww(t,e){return nt(t,e)}function Jp(t,e,n){if(!mn(t.segments,e.segments)||!Ys(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!t.children[r]||!Jp(t.children[r],e.children[r],n))return!1;return!0}function Kw(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>Kp(t[n],e[n]))}function Xp(t,e,n){return Zp(t,e,e.segments,n)}function Zp(t,e,n,r){if(t.segments.length>n.length){let i=t.segments.slice(0,n.length);return!(!mn(i,n)||e.hasChildren()||!Ys(i,n,r))}else if(t.segments.length===n.length){if(!mn(t.segments,n)||!Ys(t.segments,n,r))return!1;for(let i in e.children)if(!t.children[i]||!Xp(t.children[i],e.children[i],r))return!1;return!0}else{let i=n.slice(0,t.segments.length),s=n.slice(t.segments.length);return!mn(t.segments,i)||!Ys(t.segments,i,r)||!t.children[O]?!1:Zp(t.children[O],e,s,r)}}function Ys(t,e,n){return e.every((r,i)=>Yp[n](t[i].parameters,r.parameters))}var Lt=class{constructor(e=new B([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=ar(this.queryParams),this._queryParamMap}toString(){return Jw.serialize(this)}},B=class{constructor(e,n){this.segments=e,this.children=n,this.parent=null,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Js(this)}},gn=class{constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap??=ar(this.parameters),this._parameterMap}toString(){return tg(this)}};function Qw(t,e){return mn(t,e)&&t.every((n,r)=>nt(n.parameters,e[r].parameters))}function mn(t,e){return t.length!==e.length?!1:t.every((n,r)=>n.path===e[r].path)}function Yw(t,e){let n=[];return Object.entries(t.children).forEach(([r,i])=>{r===O&&(n=n.concat(e(i,r)))}),Object.entries(t.children).forEach(([r,i])=>{r!==O&&(n=n.concat(e(i,r)))}),n}var Ec=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=M({token:e,factory:()=>new Zs,providedIn:"root"});let t=e;return t})(),Zs=class{parse(e){let n=new Xu(e);return new Lt(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){let n=`/${hi(e.root,!0)}`,r=eI(e.queryParams),i=typeof e.fragment=="string"?`#${Xw(e.fragment)}`:"";return`${n}${r}${i}`}},Jw=new Zs;function Js(t){return t.segments.map(e=>tg(e)).join("/")}function hi(t,e){if(!t.hasChildren())return Js(t);if(e){let n=t.children[O]?hi(t.children[O],!1):"",r=[];return Object.entries(t.children).forEach(([i,s])=>{i!==O&&r.push(`${i}:${hi(s,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=Yw(t,(r,i)=>i===O?[hi(t.children[O],!1)]:[`${i}:${hi(r,!1)}`]);return Object.keys(t.children).length===1&&t.children[O]!=null?`${Js(t)}/${n[0]}`:`${Js(t)}/(${n.join("//")})`}}function eg(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Ks(t){return eg(t).replace(/%3B/gi,";")}function Xw(t){return encodeURI(t)}function Ju(t){return eg(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Xs(t){return decodeURIComponent(t)}function zp(t){return Xs(t.replace(/\+/g,"%20"))}function tg(t){return`${Ju(t.path)}${Zw(t.parameters)}`}function Zw(t){return Object.entries(t).map(([e,n])=>`;${Ju(e)}=${Ju(n)}`).join("")}function eI(t){let e=Object.entries(t).map(([n,r])=>Array.isArray(r)?r.map(i=>`${Ks(n)}=${Ks(i)}`).join("&"):`${Ks(n)}=${Ks(r)}`).filter(n=>n);return e.length?`?${e.join("&")}`:""}var tI=/^[^\/()?;#]+/;function Gu(t){let e=t.match(tI);return e?e[0]:""}var nI=/^[^\/()?;=#]+/;function rI(t){let e=t.match(nI);return e?e[0]:""}var iI=/^[^=?&#]+/;function sI(t){let e=t.match(iI);return e?e[0]:""}var oI=/^[^&#]+/;function aI(t){let e=t.match(oI);return e?e[0]:""}var Xu=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new B([],{}):new B([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[O]=new B(e,n)),r}parseSegment(){let e=Gu(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new Q(4009,!1);return this.capture(e),new gn(Xs(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let n=rI(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let i=Gu(this.remaining);i&&(r=i,this.capture(r))}e[Xs(n)]=Xs(r)}parseQueryParam(e){let n=sI(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let o=aI(this.remaining);o&&(r=o,this.capture(r))}let i=zp(n),s=zp(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=Gu(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new Q(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=O);let o=this.parseChildren();n[s]=Object.keys(o).length===1?o[O]:new B([],o),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new Q(4011,!1)}};function ng(t){return t.segments.length>0?new B([],{[O]:t}):t}function rg(t){let e={};for(let[r,i]of Object.entries(t.children)){let s=rg(i);if(r===O&&s.segments.length===0&&s.hasChildren())for(let[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[r]=s)}let n=new B(t.segments,e);return uI(n)}function uI(t){if(t.numberOfChildren===1&&t.children[O]){let e=t.children[O];return new B(t.segments.concat(e.segments),e.children)}return t}function ur(t){return t instanceof Lt}function cI(t,e,n=null,r=null){let i=ig(t);return sg(i,e,n,r)}function ig(t){let e;function n(s){let o={};for(let u of s.children){let c=n(u);o[u.outlet]=c}let a=new B(s.url,o);return s===t&&(e=a),a}let r=n(t.root),i=ng(r);return e??i}function sg(t,e,n,r){let i=t;for(;i.parent;)i=i.parent;if(e.length===0)return Hu(i,i,i,n,r);let s=lI(e);if(s.toRoot())return Hu(i,i,new B([],{}),n,r);let o=hI(s,i,t),a=o.processChildren?pi(o.segmentGroup,o.index,s.commands):ag(o.segmentGroup,o.index,s.commands);return Hu(i,o.segmentGroup,a,n,r)}function eo(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function yi(t){return typeof t=="object"&&t!=null&&t.outlets}function Hu(t,e,n,r,i){let s={};r&&Object.entries(r).forEach(([u,c])=>{s[u]=Array.isArray(c)?c.map(l=>`${l}`):`${c}`});let o;t===e?o=n:o=og(t,e,n);let a=ng(rg(o));return new Lt(a,s,i)}function og(t,e,n){let r={};return Object.entries(t.children).forEach(([i,s])=>{s===e?r[i]=n:r[i]=og(s,e,n)}),new B(t.segments,r)}var to=class{constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&eo(r[0]))throw new Q(4003,!1);let i=r.find(yi);if(i&&i!==Qp(r))throw new Q(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function lI(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new to(!0,0,t);let e=0,n=!1,r=t.reduce((i,s,o)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let a={};return Object.entries(s.outlets).forEach(([u,c])=>{a[u]=typeof c=="string"?c.split("/"):c}),[...i,{outlets:a}]}if(s.segmentPath)return[...i,s.segmentPath]}return typeof s!="string"?[...i,s]:o===0?(s.split("/").forEach((a,u)=>{u==0&&a==="."||(u==0&&a===""?n=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,s]},[]);return new to(n,e,r)}var sr=class{constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}};function hI(t,e,n){if(t.isAbsolute)return new sr(e,!0,0);if(!n)return new sr(e,!1,NaN);if(n.parent===null)return new sr(n,!0,0);let r=eo(t.commands[0])?0:1,i=n.segments.length-1+r;return dI(n,i,t.numberOfDoubleDots)}function dI(t,e,n){let r=t,i=e,s=n;for(;s>i;){if(s-=i,r=r.parent,!r)throw new Q(4005,!1);i=r.segments.length}return new sr(r,!1,i-s)}function fI(t){return yi(t[0])?t[0].outlets:{[O]:t}}function ag(t,e,n){if(t??=new B([],{}),t.segments.length===0&&t.hasChildren())return pi(t,e,n);let r=pI(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){let s=new B(t.segments.slice(0,r.pathIndex),{});return s.children[O]=new B(t.segments.slice(r.pathIndex),t.children),pi(s,0,i)}else return r.match&&i.length===0?new B(t.segments,{}):r.match&&!t.hasChildren()?Zu(t,e,n):r.match?pi(t,0,i):Zu(t,e,n)}function pi(t,e,n){if(n.length===0)return new B(t.segments,{});{let r=fI(n),i={};if(Object.keys(r).some(s=>s!==O)&&t.children[O]&&t.numberOfChildren===1&&t.children[O].segments.length===0){let s=pi(t.children[O],e,n);return new B(t.segments,s.children)}return Object.entries(r).forEach(([s,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(i[s]=ag(t.children[s],e,o))}),Object.entries(t.children).forEach(([s,o])=>{r[s]===void 0&&(i[s]=o)}),new B(t.segments,i)}}function pI(t,e,n){let r=0,i=e,s={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return s;let o=t.segments[i],a=n[r];if(yi(a))break;let u=`${a}`,c=r<n.length-1?n[r+1]:null;if(i>0&&u===void 0)break;if(u&&c&&typeof c=="object"&&c.outlets===void 0){if(!Hp(u,c,o))return s;r+=2}else{if(!Hp(u,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function Zu(t,e,n){let r=t.segments.slice(0,e),i=0;for(;i<n.length;){let s=n[i];if(yi(s)){let u=gI(s.outlets);return new B(r,u)}if(i===0&&eo(n[0])){let u=t.segments[e];r.push(new gn(u.path,Gp(n[0]))),i++;continue}let o=yi(s)?s.outlets[O]:`${s}`,a=i<n.length-1?n[i+1]:null;o&&a&&eo(a)?(r.push(new gn(o,Gp(a))),i+=2):(r.push(new gn(o,{})),i++)}return new B(r,{})}function gI(t){let e={};return Object.entries(t).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[n]=Zu(new B([],{}),0,r))}),e}function Gp(t){let e={};return Object.entries(t).forEach(([n,r])=>e[n]=`${r}`),e}function Hp(t,e,n){return t==n.path&&nt(e,n.parameters)}var gi="imperative",fe=function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t}(fe||{}),je=class{constructor(e,n){this.id=e,this.url=n}},vi=class extends je{constructor(e,n,r="imperative",i=null){super(e,n),this.type=fe.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Vt=class extends je{constructor(e,n,r){super(e,n),this.urlAfterRedirects=r,this.type=fe.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Fe=function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t}(Fe||{}),ec=function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t}(ec||{}),Ut=class extends je{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=fe.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},yn=class extends je{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=fe.NavigationSkipped}},_i=class extends je{constructor(e,n,r,i){super(e,n),this.error=r,this.target=i,this.type=fe.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},no=class extends je{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=fe.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},tc=class extends je{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=fe.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},nc=class extends je{constructor(e,n,r,i,s){super(e,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=fe.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},rc=class extends je{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=fe.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},ic=class extends je{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=fe.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},sc=class{constructor(e){this.route=e,this.type=fe.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},oc=class{constructor(e){this.route=e,this.type=fe.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},ac=class{constructor(e){this.snapshot=e,this.type=fe.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},uc=class{constructor(e){this.snapshot=e,this.type=fe.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},cc=class{constructor(e){this.snapshot=e,this.type=fe.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},lc=class{constructor(e){this.snapshot=e,this.type=fe.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var wi=class{},Ii=class{constructor(e){this.url=e}};var hc=class{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new uo,this.attachRef=null}},uo=(()=>{let e=class e{constructor(){this.contexts=new Map}onChildOutletCreated(r,i){let s=this.getOrCreateContext(r);s.outlet=i,this.contexts.set(r,s)}onChildOutletDestroyed(r){let i=this.getContext(r);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){let r=this.contexts;return this.contexts=new Map,r}onOutletReAttached(r){this.contexts=r}getOrCreateContext(r){let i=this.getContext(r);return i||(i=new hc,this.contexts.set(r,i)),i}getContext(r){return this.contexts.get(r)||null}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=M({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),ro=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){let n=dc(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){let n=dc(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){let n=fc(e,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return fc(e,this._root).map(n=>n.value)}};function dc(t,e){if(t===e.value)return e;for(let n of e.children){let r=dc(t,n);if(r)return r}return null}function fc(t,e){if(t===e.value)return[e];for(let n of e.children){let r=fc(t,n);if(r.length)return r.unshift(e),r}return[]}var ke=class{constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}};function ir(t){let e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}var io=class extends ro{constructor(e,n){super(e),this.snapshot=n,Dc(this,e)}toString(){return this.snapshot.toString()}};function ug(t){let e=mI(t),n=new Ue([new gn("",{})]),r=new Ue({}),i=new Ue({}),s=new Ue({}),o=new Ue(""),a=new vn(n,r,s,o,i,O,t,e.root);return a.snapshot=e.root,new io(new ke(a,[]),e)}function mI(t){let e={},n={},r={},i="",s=new Ei([],e,r,i,n,O,t,null,{});return new so("",new ke(s,[]))}var vn=class{constructor(e,n,r,i,s,o,a,u){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(j(c=>c[Ai]))??N(void 0),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(j(e=>ar(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(j(e=>ar(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Tc(t,e,n="emptyOnly"){let r,{routeConfig:i}=t;return e!==null&&(n==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:w(w({},e.params),t.params),data:w(w({},e.data),t.data),resolve:w(w(w(w({},t.data),e.data),i?.data),t._resolvedData)}:r={params:w({},t.params),data:w({},t.data),resolve:w(w({},t.data),t._resolvedData??{})},i&&lg(i)&&(r.resolve[Ai]=i.title),r}var Ei=class{get title(){return this.data?.[Ai]}constructor(e,n,r,i,s,o,a,u,c){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.routeConfig=u,this._resolve=c}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=ar(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=ar(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${n}')`}},so=class extends ro{constructor(e,n){super(n),this.url=e,Dc(this,n)}toString(){return cg(this._root)}};function Dc(t,e){e.value._routerState=t,e.children.forEach(n=>Dc(t,n))}function cg(t){let e=t.children.length>0?` { ${t.children.map(cg).join(", ")} } `:"";return`${t.value}${e}`}function Wu(t){if(t.snapshot){let e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,nt(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),nt(e.params,n.params)||t.paramsSubject.next(n.params),Gw(e.url,n.url)||t.urlSubject.next(n.url),nt(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function pc(t,e){let n=nt(t.params,e.params)&&Qw(t.url,e.url),r=!t.parent!=!e.parent;return n&&!r&&(!t.parent||pc(t.parent,e.parent))}function lg(t){return typeof t.title=="string"||t.title===null}var yI=(()=>{let e=class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=O,this.activateEvents=new on,this.deactivateEvents=new on,this.attachEvents=new on,this.detachEvents=new on,this.parentContexts=A(uo),this.location=A(js),this.changeDetector=A(si),this.environmentInjector=A(Us),this.inputBinder=A(Ac,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(r){if(r.name){let{firstChange:i,previousValue:s}=r.name;if(i)return;this.isTrackedInParentContexts(s)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(s)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(r){return this.parentContexts.getContext(r)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let r=this.parentContexts.getContext(this.name);r?.route&&(r.attachRef?this.attach(r.attachRef,r.route):this.activateWith(r.route,r.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Q(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Q(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Q(4012,!1);this.location.detach();let r=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(r.instance),r}attach(r,i){this.activated=r,this._activatedRoute=i,this.location.insert(r.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(r.instance)}deactivate(){if(this.activated){let r=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(r)}}activateWith(r,i){if(this.isActivated)throw new Q(4013,!1);this._activatedRoute=r;let s=this.location,a=r.snapshot.component,u=this.parentContexts.getOrCreateContext(this.name).children,c=new gc(r,u,s.injector);this.activated=s.createComponent(a,{index:s.length,injector:c,environmentInjector:i??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=Jn({type:e,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Bs]});let t=e;return t})(),gc=class t{__ngOutletInjector(e){return new t(this.route,this.childContexts,e)}constructor(e,n,r){this.route=e,this.childContexts=n,this.parent=r}get(e,n){return e===vn?this.route:e===uo?this.childContexts:this.parent.get(e,n)}},Ac=new W("");function vI(t,e,n){let r=Ti(t,e._root,n?n._root:void 0);return new io(r,e)}function Ti(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=e.value;let i=_I(t,e,n);return new ke(r,i)}else{if(t.shouldAttach(e.value)){let s=t.retrieve(e.value);if(s!==null){let o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>Ti(t,a)),o}}let r=wI(e.value),i=e.children.map(s=>Ti(t,s));return new ke(r,i)}}function _I(t,e,n){return e.children.map(r=>{for(let i of n.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return Ti(t,r,i);return Ti(t,r)})}function wI(t){return new vn(new Ue(t.url),new Ue(t.params),new Ue(t.queryParams),new Ue(t.fragment),new Ue(t.data),t.outlet,t.component,t)}var hg="ngNavigationCancelingError";function dg(t,e){let{redirectTo:n,navigationBehaviorOptions:r}=ur(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=fg(!1,Fe.Redirect);return i.url=n,i.navigationBehaviorOptions=r,i}function fg(t,e){let n=new Error(`NavigationCancelingError: ${t||""}`);return n[hg]=!0,n.cancellationCode=e,n}function II(t){return pg(t)&&ur(t.url)}function pg(t){return!!t&&t[hg]}var EI=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=Zr({type:e,selectors:[["ng-component"]],standalone:!0,features:[ri],decls:1,vars:0,template:function(i,s){i&1&&cn(0,"router-outlet")},dependencies:[yI],encapsulation:2});let t=e;return t})();function TI(t,e){return t.providers&&!t._injector&&(t._injector=vp(t.providers,e,`Route: ${t.path}`)),t._injector??e}function Sc(t){let e=t.children&&t.children.map(Sc),n=e?H(w({},t),{children:e}):w({},t);return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==O&&(n.component=EI),n}function rt(t){return t.outlet||O}function DI(t,e){let n=t.filter(r=>rt(r)===e);return n.push(...t.filter(r=>rt(r)!==e)),n}function Si(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){let n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var AI=(t,e,n,r)=>j(i=>(new mc(e,i.targetRouterState,i.currentRouterState,n,r).activate(t),i)),mc=class{constructor(e,n,r,i,s){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(e){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),Wu(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){let i=ir(n);e.children.forEach(s=>{let o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,n,r){let i=e.value,s=n?n.value:null;if(i===s)if(i.component){let o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,n,o.children)}else this.deactivateChildRoutes(e,n,r);else s&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,s=ir(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);if(r&&r.outlet){let o=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,s=ir(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,n,r){let i=ir(n);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new lc(s.value.snapshot))}),e.children.length&&this.forwardEvent(new uc(e.value.snapshot))}activateRoutes(e,n,r){let i=e.value,s=n?n.value:null;if(Wu(i),i===s)if(i.component){let o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,n,o.children)}else this.activateChildRoutes(e,n,r);else if(i.component){let o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),Wu(a.route.value),this.activateChildRoutes(e,null,o.children)}else{let a=Si(i.snapshot);o.attachRef=null,o.route=i,o.injector=a,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(e,null,o.children)}}else this.activateChildRoutes(e,null,r)}},oo=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},or=class{constructor(e,n){this.component=e,this.route=n}};function SI(t,e,n){let r=t._root,i=e?e._root:null;return di(r,i,n,[r.value])}function CI(t){let e=t.routeConfig?t.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:t,guards:e}}function lr(t,e){let n=Symbol(),r=e.get(t,n);return r===n?typeof t=="function"&&!np(t)?t:e.get(t):r}function di(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=ir(e);return t.children.forEach(o=>{bI(o,s[o.value.outlet],n,r.concat([o.value]),i),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>mi(a,n.getContext(o),i)),i}function bI(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=t.value,o=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){let u=RI(o,s,s.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new oo(r)):(s.data=o.data,s._resolvedData=o._resolvedData),s.component?di(t,e,a?a.children:null,r,i):di(t,e,n,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new or(a.outlet.component,o))}else o&&mi(e,a,i),i.canActivateChecks.push(new oo(r)),s.component?di(t,null,a?a.children:null,r,i):di(t,null,n,r,i);return i}function RI(t,e,n){if(typeof n=="function")return n(t,e);switch(n){case"pathParamsChange":return!mn(t.url,e.url);case"pathParamsOrQueryParamsChange":return!mn(t.url,e.url)||!nt(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!pc(t,e)||!nt(t.queryParams,e.queryParams);case"paramsChange":default:return!pc(t,e)}}function mi(t,e,n){let r=ir(t),i=t.value;Object.entries(r).forEach(([s,o])=>{i.component?e?mi(o,e.children.getContext(s),n):mi(o,null,n):mi(o,e,n)}),i.component?e&&e.outlet&&e.outlet.isActivated?n.canDeactivateChecks.push(new or(e.outlet.component,i)):n.canDeactivateChecks.push(new or(null,i)):n.canDeactivateChecks.push(new or(null,i))}function Ci(t){return typeof t=="function"}function PI(t){return typeof t=="boolean"}function NI(t){return t&&Ci(t.canLoad)}function OI(t){return t&&Ci(t.canActivate)}function kI(t){return t&&Ci(t.canActivateChild)}function FI(t){return t&&Ci(t.canDeactivate)}function MI(t){return t&&Ci(t.canMatch)}function gg(t){return t instanceof Yf||t?.name==="EmptyError"}var Qs=Symbol("INITIAL_VALUE");function cr(){return tt(t=>fu(t.map(e=>e.pipe(Yn(1),vu(Qs)))).pipe(j(e=>{for(let n of e)if(n!==!0){if(n===Qs)return Qs;if(n===!1||n instanceof Lt)return n}return!0}),rn(e=>e!==Qs),Yn(1)))}function xI(t,e){return $e(n=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=n;return o.length===0&&s.length===0?N(H(w({},n),{guardsResult:!0})):LI(o,r,i,t).pipe($e(a=>a&&PI(a)?VI(r,s,t,e):N(a)),j(a=>H(w({},n),{guardsResult:a})))})}function LI(t,e,n,r){return Be(t).pipe($e(i=>qI(i.component,i.route,n,e,r)),Mt(i=>i!==!0,!0))}function VI(t,e,n,r){return Be(e).pipe(Yr(i=>Jf(BI(i.route.parent,r),UI(i.route,r),jI(t,i.path,n),$I(t,i.route,n))),Mt(i=>i!==!0,!0))}function UI(t,e){return t!==null&&e&&e(new cc(t)),N(!0)}function BI(t,e){return t!==null&&e&&e(new ac(t)),N(!0)}function $I(t,e,n){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return N(!0);let i=r.map(s=>pu(()=>{let o=Si(e)??n,a=lr(s,o),u=OI(a)?a.canActivate(e,t):sn(o,()=>a(e,t));return Bt(u).pipe(Mt())}));return N(i).pipe(cr())}function jI(t,e,n){let r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>CI(o)).filter(o=>o!==null).map(o=>pu(()=>{let a=o.guards.map(u=>{let c=Si(o.node)??n,l=lr(u,c),h=kI(l)?l.canActivateChild(r,t):sn(c,()=>l(r,t));return Bt(h).pipe(Mt())});return N(a).pipe(cr())}));return N(s).pipe(cr())}function qI(t,e,n,r,i){let s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!s||s.length===0)return N(!0);let o=s.map(a=>{let u=Si(e)??i,c=lr(a,u),l=FI(c)?c.canDeactivate(t,e,n,r):sn(u,()=>c(t,e,n,r));return Bt(l).pipe(Mt())});return N(o).pipe(cr())}function zI(t,e,n,r){let i=e.canLoad;if(i===void 0||i.length===0)return N(!0);let s=i.map(o=>{let a=lr(o,t),u=NI(a)?a.canLoad(e,n):sn(t,()=>a(e,n));return Bt(u)});return N(s).pipe(cr(),mg(r))}function mg(t){return au(ce(e=>{if(ur(e))throw dg(t,e)}),j(e=>e===!0))}function GI(t,e,n,r){let i=e.canMatch;if(!i||i.length===0)return N(!0);let s=i.map(o=>{let a=lr(o,t),u=MI(a)?a.canMatch(e,n):sn(t,()=>a(e,n));return Bt(u)});return N(s).pipe(cr(),mg(r))}var Di=class{constructor(e){this.segmentGroup=e||null}},ao=class extends Error{constructor(e){super(),this.urlTree=e}};function rr(t){return Qr(new Di(t))}function HI(t){return Qr(new Q(4e3,!1))}function WI(t){return Qr(fg(!1,Fe.GuardRejected))}var yc=class{constructor(e,n){this.urlSerializer=e,this.urlTree=n}lineralizeSegments(e,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return N(r);if(i.numberOfChildren>1||!i.children[O])return HI(e.redirectTo);i=i.children[O]}}applyRedirectCommands(e,n,r){let i=this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),e,r);if(n.startsWith("/"))throw new ao(i);return i}applyRedirectCreateUrlTree(e,n,r,i){let s=this.createSegmentGroup(e,n.root,r,i);return new Lt(s,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){let r={};return Object.entries(e).forEach(([i,s])=>{if(typeof s=="string"&&s.startsWith(":")){let a=s.substring(1);r[i]=n[a]}else r[i]=s}),r}createSegmentGroup(e,n,r,i){let s=this.createSegments(e,n.segments,r,i),o={};return Object.entries(n.children).forEach(([a,u])=>{o[a]=this.createSegmentGroup(e,u,r,i)}),new B(s,o)}createSegments(e,n,r,i){return n.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,n,r){let i=r[n.path.substring(1)];if(!i)throw new Q(4001,!1);return i}findOrReturn(e,n){let r=0;for(let i of n){if(i.path===e.path)return n.splice(r),i;r++}return e}},vc={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function KI(t,e,n,r,i){let s=Cc(t,e,n);return s.matched?(r=TI(e,r),GI(r,e,n,i).pipe(j(o=>o===!0?s:w({},vc)))):N(s)}function Cc(t,e,n){if(e.path==="**")return QI(n);if(e.path==="")return e.pathMatch==="full"&&(t.hasChildren()||n.length>0)?w({},vc):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let i=(e.matcher||zw)(n,t,e);if(!i)return w({},vc);let s={};Object.entries(i.posParams??{}).forEach(([a,u])=>{s[a]=u.path});let o=i.consumed.length>0?w(w({},s),i.consumed[i.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function QI(t){return{matched:!0,parameters:t.length>0?Qp(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function Wp(t,e,n,r){return n.length>0&&XI(t,n,r)?{segmentGroup:new B(e,JI(r,new B(n,t.children))),slicedSegments:[]}:n.length===0&&ZI(t,n,r)?{segmentGroup:new B(t.segments,YI(t,n,r,t.children)),slicedSegments:n}:{segmentGroup:new B(t.segments,t.children),slicedSegments:n}}function YI(t,e,n,r){let i={};for(let s of n)if(co(t,e,s)&&!r[rt(s)]){let o=new B([],{});i[rt(s)]=o}return w(w({},r),i)}function JI(t,e){let n={};n[O]=e;for(let r of t)if(r.path===""&&rt(r)!==O){let i=new B([],{});n[rt(r)]=i}return n}function XI(t,e,n){return n.some(r=>co(t,e,r)&&rt(r)!==O)}function ZI(t,e,n){return n.some(r=>co(t,e,r))}function co(t,e,n){return(t.hasChildren()||e.length>0)&&n.pathMatch==="full"?!1:n.path===""}function eE(t,e,n,r){return rt(t)!==r&&(r===O||!co(e,n,t))?!1:Cc(e,t,n).matched}function tE(t,e,n){return e.length===0&&!t.children[n]}var _c=class{};function nE(t,e,n,r,i,s,o="emptyOnly"){return new wc(t,e,n,r,i,o,s).recognize()}var rE=31,wc=class{constructor(e,n,r,i,s,o,a){this.injector=e,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.applyRedirects=new yc(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new Q(4002,`'${e.segmentGroup}'`)}recognize(){let e=Wp(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(j(n=>{let r=new Ei([],Object.freeze({}),Object.freeze(w({},this.urlTree.queryParams)),this.urlTree.fragment,{},O,this.rootComponentType,null,{}),i=new ke(r,n),s=new so("",i),o=cI(r,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),this.inheritParamsAndData(s._root,null),{state:s,tree:o}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e,O).pipe(Qn(r=>{if(r instanceof ao)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Di?this.noMatchError(r):r}))}inheritParamsAndData(e,n){let r=e.value,i=Tc(r,n,this.paramsInheritanceStrategy);r.params=Object.freeze(i.params),r.data=Object.freeze(i.data),e.children.forEach(s=>this.inheritParamsAndData(s,r))}processSegmentGroup(e,n,r,i){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,n,r):this.processSegment(e,n,r,r.segments,i,!0).pipe(j(s=>s instanceof ke?[s]:[]))}processChildren(e,n,r){let i=[];for(let s of Object.keys(r.children))s==="primary"?i.unshift(s):i.push(s);return Be(i).pipe(Yr(s=>{let o=r.children[s],a=DI(n,s);return this.processSegmentGroup(e,a,o,s)}),yu((s,o)=>(s.push(...o),s)),gu(null),Zf(),$e(s=>{if(s===null)return rr(r);let o=yg(s);return iE(o),N(o)}))}processSegment(e,n,r,i,s,o){return Be(n).pipe(Yr(a=>this.processSegmentAgainstRoute(a._injector??e,n,a,r,i,s,o).pipe(Qn(u=>{if(u instanceof Di)return N(null);throw u}))),Mt(a=>!!a),Qn(a=>{if(gg(a))return tE(r,i,s)?N(new _c):rr(r);throw a}))}processSegmentAgainstRoute(e,n,r,i,s,o,a){return eE(r,i,s,o)?r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,s,o):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,n,r,s,o):rr(i):rr(i)}expandSegmentAgainstRouteUsingRedirect(e,n,r,i,s,o){let{matched:a,consumedSegments:u,positionalParamSegments:c,remainingSegments:l}=Cc(n,i,s);if(!a)return rr(n);i.redirectTo.startsWith("/")&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>rE&&(this.allowRedirects=!1));let h=this.applyRedirects.applyRedirectCommands(u,i.redirectTo,c);return this.applyRedirects.lineralizeSegments(i,h).pipe($e(f=>this.processSegment(e,r,n,f.concat(l),o,!1)))}matchSegmentAgainstRoute(e,n,r,i,s){let o=KI(n,r,i,e,this.urlSerializer);return r.path==="**"&&(n.children={}),o.pipe(tt(a=>a.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(tt(({routes:u})=>{let c=r._loadedInjector??e,{consumedSegments:l,remainingSegments:h,parameters:f}=a,p=new Ei(l,f,Object.freeze(w({},this.urlTree.queryParams)),this.urlTree.fragment,oE(r),rt(r),r.component??r._loadedComponent??null,r,aE(r)),{segmentGroup:E,slicedSegments:T}=Wp(n,l,h,u);if(T.length===0&&E.hasChildren())return this.processChildren(c,u,E).pipe(j(k=>k===null?null:new ke(p,k)));if(u.length===0&&T.length===0)return N(new ke(p,[]));let v=rt(r)===s;return this.processSegment(c,u,E,T,v?O:s,!0).pipe(j(k=>new ke(p,k instanceof ke?[k]:[])))}))):rr(n)))}getChildConfig(e,n,r){return n.children?N({routes:n.children,injector:e}):n.loadChildren?n._loadedRoutes!==void 0?N({routes:n._loadedRoutes,injector:n._loadedInjector}):zI(e,n,r,this.urlSerializer).pipe($e(i=>i?this.configLoader.loadChildren(e,n).pipe(ce(s=>{n._loadedRoutes=s.routes,n._loadedInjector=s.injector})):WI(n))):N({routes:[],injector:e})}};function iE(t){t.sort((e,n)=>e.value.outlet===O?-1:n.value.outlet===O?1:e.value.outlet.localeCompare(n.value.outlet))}function sE(t){let e=t.value.routeConfig;return e&&e.path===""}function yg(t){let e=[],n=new Set;for(let r of t){if(!sE(r)){e.push(r);continue}let i=e.find(s=>r.value.routeConfig===s.value.routeConfig);i!==void 0?(i.children.push(...r.children),n.add(i)):e.push(r)}for(let r of n){let i=yg(r.children);e.push(new ke(r.value,i))}return e.filter(r=>!n.has(r))}function oE(t){return t.data||{}}function aE(t){return t.resolve||{}}function uE(t,e,n,r,i,s){return $e(o=>nE(t,e,n,r,o.extractedUrl,i,s).pipe(j(({state:a,tree:u})=>H(w({},o),{targetSnapshot:a,urlAfterRedirects:u}))))}function cE(t,e){return $e(n=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return N(n);let s=new Set(i.map(u=>u.route)),o=new Set;for(let u of s)if(!o.has(u))for(let c of vg(u))o.add(c);let a=0;return Be(o).pipe(Yr(u=>s.has(u)?lE(u,r,t,e):(u.data=Tc(u,u.parent,t).resolve,N(void 0))),ce(()=>a++),mu(1),$e(u=>a===o.size?N(n):Ft))})}function vg(t){let e=t.children.map(n=>vg(n)).flat();return[t,...e]}function lE(t,e,n,r){let i=t.routeConfig,s=t._resolve;return i?.title!==void 0&&!lg(i)&&(s[Ai]=i.title),hE(s,t,e,r).pipe(j(o=>(t._resolvedData=o,t.data=Tc(t,t.parent,n).resolve,null)))}function hE(t,e,n,r){let i=Yu(t);if(i.length===0)return N({});let s={};return Be(i).pipe($e(o=>dE(t[o],e,n,r).pipe(Mt(),ce(a=>{s[o]=a}))),mu(1),Xf(s),Qn(o=>gg(o)?Ft:Qr(o)))}function dE(t,e,n,r){let i=Si(e)??r,s=lr(t,i),o=s.resolve?s.resolve(e,n):sn(i,()=>s(e,n));return Bt(o)}function Ku(t){return tt(e=>{let n=t(e);return n?Be(n).pipe(j(()=>e)):N(e)})}var _g=(()=>{let e=class e{buildTitle(r){let i,s=r.root;for(;s!==void 0;)i=this.getResolvedTitleForRoute(s)??i,s=s.children.find(o=>o.outlet===O);return i}getResolvedTitleForRoute(r){return r.data[Ai]}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=M({token:e,factory:()=>A(fE),providedIn:"root"});let t=e;return t})(),fE=(()=>{let e=class e extends _g{constructor(r){super(),this.title=r}updateTitle(r){let i=this.buildTitle(r);i!==void 0&&this.title.setTitle(i)}};e.\u0275fac=function(i){return new(i||e)(F($p))},e.\u0275prov=M({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),bc=new W("",{providedIn:"root",factory:()=>({})}),Rc=new W(""),pE=(()=>{let e=class e{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=A(ku)}loadComponent(r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return N(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=Bt(r.loadComponent()).pipe(j(wg),ce(o=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=o}),Vs(()=>{this.componentLoaders.delete(r)})),s=new cu(i,()=>new ve).pipe(uu());return this.componentLoaders.set(r,s),s}loadChildren(r,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return N({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);let o=gE(i,this.compiler,r,this.onLoadEndListener).pipe(Vs(()=>{this.childrenLoaders.delete(i)})),a=new cu(o,()=>new ve).pipe(uu());return this.childrenLoaders.set(i,a),a}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=M({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function gE(t,e,n,r){return Bt(t.loadChildren()).pipe(j(wg),$e(i=>i instanceof yp||Array.isArray(i)?N(i):Be(e.compileModuleAsync(i))),j(i=>{r&&r(t);let s,o,a=!1;return Array.isArray(i)?(o=i,a=!0):(s=i.create(n).injector,o=s.get(Rc,[],{optional:!0,self:!0}).flat()),{routes:o.map(Sc),injector:s}}))}function mE(t){return t&&typeof t=="object"&&"default"in t}function wg(t){return mE(t)?t.default:t}var Pc=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=M({token:e,factory:()=>A(yE),providedIn:"root"});let t=e;return t})(),yE=(()=>{let e=class e{shouldProcessUrl(r){return!0}extract(r){return r}merge(r,i){return r}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=M({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),vE=new W("");var _E=(()=>{let e=class e{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new ve,this.transitionAbortSubject=new ve,this.configLoader=A(pE),this.environmentInjector=A(Us),this.urlSerializer=A(Ec),this.rootContexts=A(uo),this.location=A(ai),this.inputBindingEnabled=A(Ac,{optional:!0})!==null,this.titleStrategy=A(_g),this.options=A(bc,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=A(Pc),this.createViewTransition=A(vE,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>N(void 0),this.rootComponentType=null;let r=s=>this.events.next(new sc(s)),i=s=>this.events.next(new oc(s));this.configLoader.onLoadEndListener=i,this.configLoader.onLoadStartListener=r}complete(){this.transitions?.complete()}handleNavigationRequest(r){let i=++this.navigationId;this.transitions?.next(H(w(w({},this.transitions.value),r),{id:i}))}setupNavigations(r,i,s){return this.transitions=new Ue({id:0,currentUrlTree:i,currentRawUrl:i,extractedUrl:this.urlHandlingStrategy.extract(i),urlAfterRedirects:this.urlHandlingStrategy.extract(i),rawUrl:i,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:gi,restoredState:null,currentSnapshot:s.snapshot,targetSnapshot:null,currentRouterState:s,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(rn(o=>o.id!==0),j(o=>H(w({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),tt(o=>{let a=!1,u=!1;return N(o).pipe(tt(c=>{if(this.navigationId>o.id)return this.cancelNavigationTransition(o,"",Fe.SupersededByNewNavigation),Ft;this.currentTransition=o,this.currentNavigation={id:c.id,initialUrl:c.rawUrl,extractedUrl:c.extractedUrl,trigger:c.source,extras:c.extras,previousNavigation:this.lastSuccessfulNavigation?H(w({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let l=!r.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),h=c.extras.onSameUrlNavigation??r.onSameUrlNavigation;if(!l&&h!=="reload"){let f="";return this.events.next(new yn(c.id,this.urlSerializer.serialize(c.rawUrl),f,ec.IgnoredSameUrlNavigation)),c.resolve(null),Ft}if(this.urlHandlingStrategy.shouldProcessUrl(c.rawUrl))return N(c).pipe(tt(f=>{let p=this.transitions?.getValue();return this.events.next(new vi(f.id,this.urlSerializer.serialize(f.extractedUrl),f.source,f.restoredState)),p!==this.transitions?.getValue()?Ft:Promise.resolve(f)}),uE(this.environmentInjector,this.configLoader,this.rootComponentType,r.config,this.urlSerializer,this.paramsInheritanceStrategy),ce(f=>{o.targetSnapshot=f.targetSnapshot,o.urlAfterRedirects=f.urlAfterRedirects,this.currentNavigation=H(w({},this.currentNavigation),{finalUrl:f.urlAfterRedirects});let p=new no(f.id,this.urlSerializer.serialize(f.extractedUrl),this.urlSerializer.serialize(f.urlAfterRedirects),f.targetSnapshot);this.events.next(p)}));if(l&&this.urlHandlingStrategy.shouldProcessUrl(c.currentRawUrl)){let{id:f,extractedUrl:p,source:E,restoredState:T,extras:v}=c,k=new vi(f,this.urlSerializer.serialize(p),E,T);this.events.next(k);let q=ug(this.rootComponentType).snapshot;return this.currentTransition=o=H(w({},c),{targetSnapshot:q,urlAfterRedirects:p,extras:H(w({},v),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=p,N(o)}else{let f="";return this.events.next(new yn(c.id,this.urlSerializer.serialize(c.extractedUrl),f,ec.IgnoredByUrlHandlingStrategy)),c.resolve(null),Ft}}),ce(c=>{let l=new tc(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(l)}),j(c=>(this.currentTransition=o=H(w({},c),{guards:SI(c.targetSnapshot,c.currentSnapshot,this.rootContexts)}),o)),xI(this.environmentInjector,c=>this.events.next(c)),ce(c=>{if(o.guardsResult=c.guardsResult,ur(c.guardsResult))throw dg(this.urlSerializer,c.guardsResult);let l=new nc(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot,!!c.guardsResult);this.events.next(l)}),rn(c=>c.guardsResult?!0:(this.cancelNavigationTransition(c,"",Fe.GuardRejected),!1)),Ku(c=>{if(c.guards.canActivateChecks.length)return N(c).pipe(ce(l=>{let h=new rc(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(h)}),tt(l=>{let h=!1;return N(l).pipe(cE(this.paramsInheritanceStrategy,this.environmentInjector),ce({next:()=>h=!0,complete:()=>{h||this.cancelNavigationTransition(l,"",Fe.NoDataFromResolver)}}))}),ce(l=>{let h=new ic(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(h)}))}),Ku(c=>{let l=h=>{let f=[];h.routeConfig?.loadComponent&&!h.routeConfig._loadedComponent&&f.push(this.configLoader.loadComponent(h.routeConfig).pipe(ce(p=>{h.component=p}),j(()=>{})));for(let p of h.children)f.push(...l(p));return f};return fu(l(c.targetSnapshot.root)).pipe(gu(null),Yn(1))}),Ku(()=>this.afterPreactivation()),tt(()=>{let{currentSnapshot:c,targetSnapshot:l}=o,h=this.createViewTransition?.(this.environmentInjector,c.root,l.root);return h?Be(h).pipe(j(()=>o)):N(o)}),j(c=>{let l=vI(r.routeReuseStrategy,c.targetSnapshot,c.currentRouterState);return this.currentTransition=o=H(w({},c),{targetRouterState:l}),this.currentNavigation.targetRouterState=l,o}),ce(()=>{this.events.next(new wi)}),AI(this.rootContexts,r.routeReuseStrategy,c=>this.events.next(c),this.inputBindingEnabled),Yn(1),ce({next:c=>{a=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Vt(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects))),this.titleStrategy?.updateTitle(c.targetRouterState.snapshot),c.resolve(!0)},complete:()=>{a=!0}}),ep(this.transitionAbortSubject.pipe(ce(c=>{throw c}))),Vs(()=>{!a&&!u&&this.cancelNavigationTransition(o,"",Fe.SupersededByNewNavigation),this.currentTransition?.id===o.id&&(this.currentNavigation=null,this.currentTransition=null)}),Qn(c=>{if(u=!0,pg(c))this.events.next(new Ut(o.id,this.urlSerializer.serialize(o.extractedUrl),c.message,c.cancellationCode)),II(c)?this.events.next(new Ii(c.url)):o.resolve(!1);else{this.events.next(new _i(o.id,this.urlSerializer.serialize(o.extractedUrl),c,o.targetSnapshot??void 0));try{o.resolve(r.errorHandler(c))}catch(l){this.options.resolveNavigationPromiseOnError?o.resolve(!1):o.reject(l)}}return Ft}))}))}cancelNavigationTransition(r,i,s){let o=new Ut(r.id,this.urlSerializer.serialize(r.extractedUrl),i,s);this.events.next(o),r.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=M({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function wE(t){return t!==gi}var IE=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=M({token:e,factory:()=>A(EE),providedIn:"root"});let t=e;return t})(),Ic=class{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}},EE=(()=>{let e=class e extends Ic{};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=Eu(e)))(s||e)}})(),e.\u0275prov=M({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Ig=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=M({token:e,factory:()=>A(TE),providedIn:"root"});let t=e;return t})(),TE=(()=>{let e=class e extends Ig{constructor(){super(...arguments),this.location=A(ai),this.urlSerializer=A(Ec),this.options=A(bc,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=A(Pc),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new Lt,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=ug(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(r){return this.location.subscribe(i=>{i.type==="popstate"&&r(i.url,i.state)})}handleRouterEvent(r,i){if(r instanceof vi)this.stateMemento=this.createStateMemento();else if(r instanceof yn)this.rawUrlTree=i.initialUrl;else if(r instanceof no){if(this.urlUpdateStrategy==="eager"&&!i.extras.skipLocationChange){let s=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl);this.setBrowserUrl(s,i)}}else r instanceof wi?(this.currentUrlTree=i.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl),this.routerState=i.targetRouterState,this.urlUpdateStrategy==="deferred"&&(i.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,i))):r instanceof Ut&&(r.code===Fe.GuardRejected||r.code===Fe.NoDataFromResolver)?this.restoreHistory(i):r instanceof _i?this.restoreHistory(i,!0):r instanceof Vt&&(this.lastSuccessfulId=r.id,this.currentPageId=this.browserPageId)}setBrowserUrl(r,i){let s=this.urlSerializer.serialize(r);if(this.location.isCurrentPathEqualTo(s)||i.extras.replaceUrl){let o=this.browserPageId,a=w(w({},i.extras.state),this.generateNgRouterState(i.id,o));this.location.replaceState(s,"",a)}else{let o=w(w({},i.extras.state),this.generateNgRouterState(i.id,this.browserPageId+1));this.location.go(s,"",o)}}restoreHistory(r,i=!1){if(this.canceledNavigationResolution==="computed"){let s=this.browserPageId,o=this.currentPageId-s;o!==0?this.location.historyGo(o):this.currentUrlTree===r.finalUrl&&o===0&&(this.resetState(r),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(i&&this.resetState(r),this.resetUrlToCurrentUrlTree())}resetState(r){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,r.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(r,i){return this.canceledNavigationResolution==="computed"?{navigationId:r,\u0275routerPageId:i}:{navigationId:r}}};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=Eu(e)))(s||e)}})(),e.\u0275prov=M({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),fi=function(t){return t[t.COMPLETE=0]="COMPLETE",t[t.FAILED=1]="FAILED",t[t.REDIRECTING=2]="REDIRECTING",t}(fi||{});function DE(t,e){t.events.pipe(rn(n=>n instanceof Vt||n instanceof Ut||n instanceof _i||n instanceof yn),j(n=>n instanceof Vt||n instanceof yn?fi.COMPLETE:(n instanceof Ut?n.code===Fe.Redirect||n.code===Fe.SupersededByNewNavigation:!1)?fi.REDIRECTING:fi.FAILED),rn(n=>n!==fi.REDIRECTING),Yn(1)).subscribe(()=>{e()})}function AE(t){throw t}var SE={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},CE={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Nc=(()=>{let e=class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.isNgZoneEnabled=!1,this.console=A(qs),this.stateManager=A(Ig),this.options=A(bc,{optional:!0})||{},this.pendingTasks=A(_p),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=A(_E),this.urlSerializer=A(Ec),this.location=A(ai),this.urlHandlingStrategy=A(Pc),this._events=new ve,this.errorHandler=this.options.errorHandler||AE,this.navigated=!1,this.routeReuseStrategy=A(IE),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=A(Rc,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!A(Ac,{optional:!0}),this.eventsSubscription=new Hf,this.isNgZoneEnabled=A(ee)instanceof ee&&ee.isInAngularZone(),this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:r=>{this.console.warn(r)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let r=this.navigationTransitions.events.subscribe(i=>{try{let s=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(s!==null&&o!==null){if(this.stateManager.handleRouterEvent(i,o),i instanceof Ut&&i.code!==Fe.Redirect&&i.code!==Fe.SupersededByNewNavigation)this.navigated=!0;else if(i instanceof Vt)this.navigated=!0;else if(i instanceof Ii){let a=this.urlHandlingStrategy.merge(i.url,s.currentRawUrl),u={info:s.extras.info,skipLocationChange:s.extras.skipLocationChange,replaceUrl:this.urlUpdateStrategy==="eager"||wE(s.source)};this.scheduleNavigation(a,gi,null,u,{resolve:s.resolve,reject:s.reject,promise:s.promise})}}RE(i)&&this._events.next(i)}catch(s){this.navigationTransitions.transitionAbortSubject.next(s)}});this.eventsSubscription.add(r)}resetRootComponentType(r){this.routerState.root.component=r,this.navigationTransitions.rootComponentType=r}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),gi,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((r,i)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(r,"popstate",i)},0)})}navigateToSyncWithBrowser(r,i,s){let o={replaceUrl:!0},a=s?.navigationId?s:null;if(s){let c=w({},s);delete c.navigationId,delete c.\u0275routerPageId,Object.keys(c).length!==0&&(o.state=c)}let u=this.parseUrl(r);this.scheduleNavigation(u,i,a,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(r){this.config=r.map(Sc),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(r,i={}){let{relativeTo:s,queryParams:o,fragment:a,queryParamsHandling:u,preserveFragment:c}=i,l=c?this.currentUrlTree.fragment:a,h=null;switch(u){case"merge":h=w(w({},this.currentUrlTree.queryParams),o);break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=o||null}h!==null&&(h=this.removeEmptyProps(h));let f;try{let p=s?s.snapshot:this.routerState.snapshot.root;f=ig(p)}catch{(typeof r[0]!="string"||!r[0].startsWith("/"))&&(r=[]),f=this.currentUrlTree.root}return sg(f,r,h,l??null)}navigateByUrl(r,i={skipLocationChange:!1}){let s=ur(r)?r:this.parseUrl(r),o=this.urlHandlingStrategy.merge(s,this.rawUrlTree);return this.scheduleNavigation(o,gi,null,i)}navigate(r,i={skipLocationChange:!1}){return bE(r),this.navigateByUrl(this.createUrlTree(r,i),i)}serializeUrl(r){return this.urlSerializer.serialize(r)}parseUrl(r){try{return this.urlSerializer.parse(r)}catch{return this.urlSerializer.parse("/")}}isActive(r,i){let s;if(i===!0?s=w({},SE):i===!1?s=w({},CE):s=i,ur(r))return qp(this.currentUrlTree,r,s);let o=this.parseUrl(r);return qp(this.currentUrlTree,o,s)}removeEmptyProps(r){return Object.entries(r).reduce((i,[s,o])=>(o!=null&&(i[s]=o),i),{})}scheduleNavigation(r,i,s,o,a){if(this.disposed)return Promise.resolve(!1);let u,c,l;a?(u=a.resolve,c=a.reject,l=a.promise):l=new Promise((f,p)=>{u=f,c=p});let h=this.pendingTasks.add();return DE(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(h))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:s,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:r,extras:o,resolve:u,reject:c,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(f=>Promise.reject(f))}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=M({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function bE(t){for(let e=0;e<t.length;e++)if(t[e]==null)throw new Q(4008,!1)}function RE(t){return!(t instanceof wi)&&!(t instanceof Ii)}var IP=(()=>{let e=class e{constructor(r,i,s,o,a,u){this.router=r,this.route=i,this.tabIndexAttribute=s,this.renderer=o,this.el=a,this.locationStrategy=u,this.href=null,this.commands=null,this.onChanges=new ve,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;let c=a.nativeElement.tagName?.toLowerCase();this.isAnchorElement=c==="a"||c==="area",this.isAnchorElement?this.subscription=r.events.subscribe(l=>{l instanceof Vt&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(r){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",r)}ngOnChanges(r){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(r){r!=null?(this.commands=Array.isArray(r)?r:[r],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(r,i,s,o,a){let u=this.urlTree;if(u===null||this.isAnchorElement&&(r!==0||i||s||o||a||typeof this.target=="string"&&this.target!="_self"))return!0;let c={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(u,c),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let r=this.urlTree;this.href=r!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(r)):null;let i=this.href===null?null:fp(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",i)}applyAttributeValue(r,i){let s=this.renderer,o=this.el.nativeElement;i!==null?s.setAttribute(o,r,i):s.removeAttribute(o,r)}get urlTree(){return this.commands===null?null:this.router.createUrlTree(this.commands,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}};e.\u0275fac=function(i){return new(i||e)(_e(Nc),_e(vn),Tu("tabindex"),_e($s),_e(ti),_e(nr))},e.\u0275dir=Jn({type:e,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(i,s){i&1&&ln("click",function(a){return s.onClick(a.button,a.ctrlKey,a.shiftKey,a.altKey,a.metaKey)}),i&2&&un("target",s.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[Xr.HasDecoratorInputTransform,"preserveFragment","preserveFragment",oi],skipLocationChange:[Xr.HasDecoratorInputTransform,"skipLocationChange","skipLocationChange",oi],replaceUrl:[Xr.HasDecoratorInputTransform,"replaceUrl","replaceUrl",oi],routerLink:"routerLink"},standalone:!0,features:[bu,Bs]});let t=e;return t})();var PE=new W("");function EP(t,...e){return ei([{provide:Rc,multi:!0,useValue:t},[],{provide:vn,useFactory:NE,deps:[Nc]},{provide:Ep,multi:!0,useFactory:OE},e.map(n=>n.\u0275providers)])}function NE(t){return t.routerState.root}function OE(){let t=A(Ne);return e=>{let n=t.get(dn);if(e!==n.components[0])return;let r=t.get(Nc),i=t.get(kE);t.get(FE)===1&&r.initialNavigation(),t.get(ME,null,_u.Optional)?.setUpPreloading(),t.get(PE,null,_u.Optional)?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var kE=new W("",{factory:()=>new ve}),FE=new W("",{providedIn:"root",factory:()=>1});var ME=new W("");var _n=function(t){return t[t.State=0]="State",t[t.Transition=1]="Transition",t[t.Sequence=2]="Sequence",t[t.Group=3]="Group",t[t.Animate=4]="Animate",t[t.Keyframes=5]="Keyframes",t[t.Style=6]="Style",t[t.Trigger=7]="Trigger",t[t.Reference=8]="Reference",t[t.AnimateChild=9]="AnimateChild",t[t.AnimateRef=10]="AnimateRef",t[t.Query=11]="Query",t[t.Stagger=12]="Stagger",t}(_n||{}),AP="*";function Dg(t,e){return{type:_n.Trigger,name:t,definitions:e,options:{}}}function Oc(t,e=null){return{type:_n.Animate,styles:e,timings:t}}function SP(t,e=null){return{type:_n.Sequence,steps:t,options:e}}function lo(t){return{type:_n.Style,styles:t,offset:null}}function ho(t,e,n){return{type:_n.State,name:t,styles:e,options:n}}function kc(t,e,n=null){return{type:_n.Transition,expr:t,animation:e,options:n}}var Eg=class{constructor(e=0,n=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+n}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){queueMicrotask(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){let n=e=="start"?this._onStartFns:this._onDoneFns;n.forEach(r=>r()),n.length=0}},Tg=class{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let n=0,r=0,i=0,s=this.players.length;s==0?queueMicrotask(()=>this._onFinish()):this.players.forEach(o=>{o.onDone(()=>{++n==s&&this._onFinish()}),o.onDestroy(()=>{++r==s&&this._onDestroy()}),o.onStart(()=>{++i==s&&this._onStart()})}),this.totalTime=this.players.reduce((o,a)=>Math.max(o,a.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){let n=e*this.totalTime;this.players.forEach(r=>{let i=r.totalTime?Math.min(1,n/r.totalTime):1;r.setPosition(i)})}getPosition(){let e=this.players.reduce((n,r)=>n===null||r.totalTime>n.totalTime?r:n,null);return e!=null?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){let n=e=="start"?this._onStartFns:this._onDoneFns;n.forEach(r=>r()),n.length=0}},CP="!";var Ag=["toast-component",""];function xE(t,e){if(t&1){let n=Nu();Ke(0,"button",5),ln("click",function(){wu(n);let i=Oe();return Iu(i.remove())}),Ke(1,"span",6),It(2,"\xD7"),wt()()}}function LE(t,e){if(t&1&&(Ru(0),It(1),Pu()),t&2){let n=Oe(2);se(),hn("[",n.duplicatesCount+1,"]")}}function VE(t,e){if(t&1&&(Ke(0,"div"),It(1),ni(2,LE,2,1,"ng-container",4),wt()),t&2){let n=Oe();_t(n.options.titleClass),un("aria-label",n.title),se(),hn(" ",n.title," "),se(),Se("ngIf",n.duplicatesCount)}}function UE(t,e){if(t&1&&cn(0,"div",7),t&2){let n=Oe();_t(n.options.messageClass),Se("innerHTML",n.message,Cu)}}function BE(t,e){if(t&1&&(Ke(0,"div",8),It(1),wt()),t&2){let n=Oe();_t(n.options.messageClass),un("aria-label",n.message),se(),hn(" ",n.message," ")}}function $E(t,e){if(t&1&&(Ke(0,"div"),cn(1,"div",9),wt()),t&2){let n=Oe();se(),er("width",n.width+"%")}}function jE(t,e){if(t&1){let n=Nu();Ke(0,"button",5),ln("click",function(){wu(n);let i=Oe();return Iu(i.remove())}),Ke(1,"span",6),It(2,"\xD7"),wt()()}}function qE(t,e){if(t&1&&(Ru(0),It(1),Pu()),t&2){let n=Oe(2);se(),hn("[",n.duplicatesCount+1,"]")}}function zE(t,e){if(t&1&&(Ke(0,"div"),It(1),ni(2,qE,2,1,"ng-container",4),wt()),t&2){let n=Oe();_t(n.options.titleClass),un("aria-label",n.title),se(),hn(" ",n.title," "),se(),Se("ngIf",n.duplicatesCount)}}function GE(t,e){if(t&1&&cn(0,"div",7),t&2){let n=Oe();_t(n.options.messageClass),Se("innerHTML",n.message,Cu)}}function HE(t,e){if(t&1&&(Ke(0,"div",8),It(1),wt()),t&2){let n=Oe();_t(n.options.messageClass),un("aria-label",n.message),se(),hn(" ",n.message," ")}}function WE(t,e){if(t&1&&(Ke(0,"div"),cn(1,"div",9),wt()),t&2){let n=Oe();se(),er("width",n.width+"%")}}var Fc=class{_attachedHost;component;viewContainerRef;injector;constructor(e,n){this.component=e,this.injector=n}attach(e,n){return this._attachedHost=e,e.attach(this,n)}detach(){let e=this._attachedHost;if(e)return this._attachedHost=void 0,e.detach()}get isAttached(){return this._attachedHost!=null}setAttachedHost(e){this._attachedHost=e}},Mc=class{_attachedPortal;_disposeFn;attach(e,n){return this._attachedPortal=e,this.attachComponentPortal(e,n)}detach(){this._attachedPortal&&this._attachedPortal.setAttachedHost(),this._attachedPortal=void 0,this._disposeFn&&(this._disposeFn(),this._disposeFn=void 0)}setDisposeFn(e){this._disposeFn=e}},xc=class{_overlayRef;componentInstance;duplicatesCount=0;_afterClosed=new ve;_activate=new ve;_manualClose=new ve;_resetTimeout=new ve;_countDuplicate=new ve;constructor(e){this._overlayRef=e}manualClose(){this._manualClose.next(),this._manualClose.complete()}manualClosed(){return this._manualClose.asObservable()}timeoutReset(){return this._resetTimeout.asObservable()}countDuplicate(){return this._countDuplicate.asObservable()}close(){this._overlayRef.detach(),this._afterClosed.next(),this._manualClose.next(),this._afterClosed.complete(),this._manualClose.complete(),this._activate.complete(),this._resetTimeout.complete(),this._countDuplicate.complete()}afterClosed(){return this._afterClosed.asObservable()}isInactive(){return this._activate.isStopped}activate(){this._activate.next(),this._activate.complete()}afterActivate(){return this._activate.asObservable()}onDuplicate(e,n){e&&this._resetTimeout.next(),n&&this._countDuplicate.next(++this.duplicatesCount)}},hr=class{toastId;config;message;title;toastType;toastRef;_onTap=new ve;_onAction=new ve;constructor(e,n,r,i,s,o){this.toastId=e,this.config=n,this.message=r,this.title=i,this.toastType=s,this.toastRef=o,this.toastRef.afterClosed().subscribe(()=>{this._onAction.complete(),this._onTap.complete()})}triggerTap(){this._onTap.next(),this.config.tapToDismiss&&this._onTap.complete()}onTap(){return this._onTap.asObservable()}triggerAction(e){this._onAction.next(e)}onAction(){return this._onAction.asObservable()}},Sg={maxOpened:0,autoDismiss:!1,newestOnTop:!0,preventDuplicates:!1,countDuplicates:!1,resetTimeoutOnDuplicate:!1,includeTitleDuplicates:!1,iconClasses:{error:"toast-error",info:"toast-info",success:"toast-success",warning:"toast-warning"},closeButton:!1,disableTimeOut:!1,timeOut:5e3,extendedTimeOut:1e3,enableHtml:!1,progressBar:!1,toastClass:"ngx-toastr",positionClass:"toast-top-right",titleClass:"toast-title",messageClass:"toast-message",easing:"ease-in",easeTime:300,tapToDismiss:!0,onActivateTick:!1,progressAnimation:"decreasing"},Cg=new W("ToastConfig"),Lc=class extends Mc{_hostDomElement;_componentFactoryResolver;_appRef;constructor(e,n,r){super(),this._hostDomElement=e,this._componentFactoryResolver=n,this._appRef=r}attachComponentPortal(e,n){let r=this._componentFactoryResolver.resolveComponentFactory(e.component),i;return i=r.create(e.injector),this._appRef.attachView(i.hostView),this.setDisposeFn(()=>{this._appRef.detachView(i.hostView),i.destroy()}),n?this._hostDomElement.insertBefore(this._getComponentRootNode(i),this._hostDomElement.firstChild):this._hostDomElement.appendChild(this._getComponentRootNode(i)),i}_getComponentRootNode(e){return e.hostView.rootNodes[0]}},KE=(()=>{class t{_document=A(we);_containerElement;ngOnDestroy(){this._containerElement&&this._containerElement.parentNode&&this._containerElement.parentNode.removeChild(this._containerElement)}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){let n=this._document.createElement("div");n.classList.add("overlay-container"),n.setAttribute("aria-live","polite"),this._document.body.appendChild(n),this._containerElement=n}static \u0275fac=function(r){return new(r||t)};static \u0275prov=M({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Vc=class{_portalHost;constructor(e){this._portalHost=e}attach(e,n=!0){return this._portalHost.attach(e,n)}detach(){return this._portalHost.detach()}},QE=(()=>{class t{_overlayContainer=A(KE);_componentFactoryResolver=A(gp);_appRef=A(dn);_document=A(we);_paneElements=new Map;create(n,r){return this._createOverlayRef(this.getPaneElement(n,r))}getPaneElement(n="",r){return this._paneElements.get(r)||this._paneElements.set(r,{}),this._paneElements.get(r)[n]||(this._paneElements.get(r)[n]=this._createPaneElement(n,r)),this._paneElements.get(r)[n]}_createPaneElement(n,r){let i=this._document.createElement("div");return i.id="toast-container",i.classList.add(n),i.classList.add("toast-container"),r?r.getContainerElement().appendChild(i):this._overlayContainer.getContainerElement().appendChild(i),i}_createPortalHost(n){return new Lc(n,this._componentFactoryResolver,this._appRef)}_createOverlayRef(n){return new Vc(this._createPortalHost(n))}static \u0275fac=function(r){return new(r||t)};static \u0275prov=M({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),bg=(()=>{class t{overlay;_injector;sanitizer;ngZone;toastrConfig;currentlyActive=0;toasts=[];overlayContainer;previousToastMessage;index=0;constructor(n,r,i,s,o){this.overlay=r,this._injector=i,this.sanitizer=s,this.ngZone=o,this.toastrConfig=w(w({},n.default),n.config),n.config.iconClasses&&(this.toastrConfig.iconClasses=w(w({},n.default.iconClasses),n.config.iconClasses))}show(n,r,i={},s=""){return this._preBuildNotification(s,n,r,this.applyConfig(i))}success(n,r,i={}){let s=this.toastrConfig.iconClasses.success||"";return this._preBuildNotification(s,n,r,this.applyConfig(i))}error(n,r,i={}){let s=this.toastrConfig.iconClasses.error||"";return this._preBuildNotification(s,n,r,this.applyConfig(i))}info(n,r,i={}){let s=this.toastrConfig.iconClasses.info||"";return this._preBuildNotification(s,n,r,this.applyConfig(i))}warning(n,r,i={}){let s=this.toastrConfig.iconClasses.warning||"";return this._preBuildNotification(s,n,r,this.applyConfig(i))}clear(n){for(let r of this.toasts)if(n!==void 0){if(r.toastId===n){r.toastRef.manualClose();return}}else r.toastRef.manualClose()}remove(n){let r=this._findToast(n);if(!r||(r.activeToast.toastRef.close(),this.toasts.splice(r.index,1),this.currentlyActive=this.currentlyActive-1,!this.toastrConfig.maxOpened||!this.toasts.length))return!1;if(this.currentlyActive<this.toastrConfig.maxOpened&&this.toasts[this.currentlyActive]){let i=this.toasts[this.currentlyActive].toastRef;i.isInactive()||(this.currentlyActive=this.currentlyActive+1,i.activate())}return!0}findDuplicate(n="",r="",i,s){let{includeTitleDuplicates:o}=this.toastrConfig;for(let a of this.toasts){let u=o&&a.title===n;if((!o||u)&&a.message===r)return a.toastRef.onDuplicate(i,s),a}return null}applyConfig(n={}){return w(w({},this.toastrConfig),n)}_findToast(n){for(let r=0;r<this.toasts.length;r++)if(this.toasts[r].toastId===n)return{index:r,activeToast:this.toasts[r]};return null}_preBuildNotification(n,r,i,s){return s.onActivateTick?this.ngZone.run(()=>this._buildNotification(n,r,i,s)):this._buildNotification(n,r,i,s)}_buildNotification(n,r,i,s){if(!s.toastComponent)throw new Error("toastComponent required");let o=this.findDuplicate(i,r,this.toastrConfig.resetTimeoutOnDuplicate&&s.timeOut>0,this.toastrConfig.countDuplicates);if((this.toastrConfig.includeTitleDuplicates&&i||r)&&this.toastrConfig.preventDuplicates&&o!==null)return o;this.previousToastMessage=r;let a=!1;this.toastrConfig.maxOpened&&this.currentlyActive>=this.toastrConfig.maxOpened&&(a=!0,this.toastrConfig.autoDismiss&&this.clear(this.toasts[0].toastId));let u=this.overlay.create(s.positionClass,this.overlayContainer);this.index=this.index+1;let c=r;r&&s.enableHtml&&(c=this.sanitizer.sanitize(vt.HTML,r));let l=new xc(u),h=new hr(this.index,s,c,i,n,l),f=[{provide:hr,useValue:h}],p=Ne.create({providers:f,parent:this._injector}),E=new Fc(s.toastComponent,p),T=u.attach(E,s.newestOnTop);l.componentInstance=T.instance;let v={toastId:this.index,title:i||"",message:r||"",toastRef:l,onShown:l.afterActivate(),onHidden:l.afterClosed(),onTap:h.onTap(),onAction:h.onAction(),portal:T};return a||(this.currentlyActive=this.currentlyActive+1,setTimeout(()=>{v.toastRef.activate()})),this.toasts.push(v),v}static \u0275fac=function(r){return new(r||t)(F(Cg),F(QE),F(Ne),F(zu),F(ee))};static \u0275prov=M({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),YE=(()=>{class t{toastrService;toastPackage;ngZone;message;title;options;duplicatesCount;originalTimeout;width=-1;toastClasses="";state;get displayStyle(){if(this.state.value==="inactive")return"none"}timeout;intervalId;hideTime;sub;sub1;sub2;sub3;constructor(n,r,i){this.toastrService=n,this.toastPackage=r,this.ngZone=i,this.message=r.message,this.title=r.title,this.options=r.config,this.originalTimeout=r.config.timeOut,this.toastClasses=`${r.toastType} ${r.config.toastClass}`,this.sub=r.toastRef.afterActivate().subscribe(()=>{this.activateToast()}),this.sub1=r.toastRef.manualClosed().subscribe(()=>{this.remove()}),this.sub2=r.toastRef.timeoutReset().subscribe(()=>{this.resetTimeout()}),this.sub3=r.toastRef.countDuplicate().subscribe(s=>{this.duplicatesCount=s}),this.state={value:"inactive",params:{easeTime:this.toastPackage.config.easeTime,easing:"ease-in"}}}ngOnDestroy(){this.sub.unsubscribe(),this.sub1.unsubscribe(),this.sub2.unsubscribe(),this.sub3.unsubscribe(),clearInterval(this.intervalId),clearTimeout(this.timeout)}activateToast(){this.state=H(w({},this.state),{value:"active"}),!(this.options.disableTimeOut===!0||this.options.disableTimeOut==="timeOut")&&this.options.timeOut&&(this.outsideTimeout(()=>this.remove(),this.options.timeOut),this.hideTime=new Date().getTime()+this.options.timeOut,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10))}updateProgress(){if(this.width===0||this.width===100||!this.options.timeOut)return;let n=new Date().getTime(),r=this.hideTime-n;this.width=r/this.options.timeOut*100,this.options.progressAnimation==="increasing"&&(this.width=100-this.width),this.width<=0&&(this.width=0),this.width>=100&&(this.width=100)}resetTimeout(){clearTimeout(this.timeout),clearInterval(this.intervalId),this.state=H(w({},this.state),{value:"active"}),this.outsideTimeout(()=>this.remove(),this.originalTimeout),this.options.timeOut=this.originalTimeout,this.hideTime=new Date().getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10)}remove(){this.state.value!=="removed"&&(clearTimeout(this.timeout),this.state=H(w({},this.state),{value:"removed"}),this.outsideTimeout(()=>this.toastrService.remove(this.toastPackage.toastId),+this.toastPackage.config.easeTime))}tapToast(){this.state.value!=="removed"&&(this.toastPackage.triggerTap(),this.options.tapToDismiss&&this.remove())}stickAround(){this.state.value!=="removed"&&this.options.disableTimeOut!=="extendedTimeOut"&&(clearTimeout(this.timeout),this.options.timeOut=0,this.hideTime=0,clearInterval(this.intervalId),this.width=0)}delayedHideToast(){this.options.disableTimeOut===!0||this.options.disableTimeOut==="extendedTimeOut"||this.options.extendedTimeOut===0||this.state.value==="removed"||(this.outsideTimeout(()=>this.remove(),this.options.extendedTimeOut),this.options.timeOut=this.options.extendedTimeOut,this.hideTime=new Date().getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10))}outsideTimeout(n,r){this.ngZone?this.ngZone.runOutsideAngular(()=>this.timeout=setTimeout(()=>this.runInsideAngular(n),r)):this.timeout=setTimeout(()=>n(),r)}outsideInterval(n,r){this.ngZone?this.ngZone.runOutsideAngular(()=>this.intervalId=setInterval(()=>this.runInsideAngular(n),r)):this.intervalId=setInterval(()=>n(),r)}runInsideAngular(n){this.ngZone?this.ngZone.run(()=>n()):n()}static \u0275fac=function(r){return new(r||t)(_e(bg),_e(hr),_e(ee))};static \u0275cmp=Zr({type:t,selectors:[["","toast-component",""]],hostVars:5,hostBindings:function(r,i){r&1&&ln("click",function(){return i.tapToast()})("mouseenter",function(){return i.stickAround()})("mouseleave",function(){return i.delayedHideToast()}),r&2&&(wp("@flyInOut",i.state),_t(i.toastClasses),er("display",i.displayStyle))},standalone:!0,features:[ri],attrs:Ag,decls:5,vars:5,consts:[["type","button","class","toast-close-button","aria-label","Close",3,"click",4,"ngIf"],[3,"class",4,"ngIf"],["role","alert",3,"class","innerHTML",4,"ngIf"],["role","alert",3,"class",4,"ngIf"],[4,"ngIf"],["type","button","aria-label","Close",1,"toast-close-button",3,"click"],["aria-hidden","true"],["role","alert",3,"innerHTML"],["role","alert"],[1,"toast-progress"]],template:function(r,i){r&1&&ni(0,xE,3,0,"button",0)(1,VE,3,5,"div",1)(2,UE,1,3,"div",2)(3,BE,2,4,"div",3)(4,$E,2,2,"div",4),r&2&&(Se("ngIf",i.options.closeButton),se(),Se("ngIf",i.title),se(),Se("ngIf",i.message&&i.options.enableHtml),se(),Se("ngIf",i.message&&!i.options.enableHtml),se(),Se("ngIf",i.options.progressBar))},dependencies:[Mu],encapsulation:2,data:{animation:[Dg("flyInOut",[ho("inactive",lo({opacity:0})),ho("active",lo({opacity:1})),ho("removed",lo({opacity:0})),kc("inactive => active",Oc("{{ easeTime }}ms {{ easing }}")),kc("active => removed",Oc("{{ easeTime }}ms {{ easing }}"))])]}})}return t})(),JE=H(w({},Sg),{toastComponent:YE}),BP=(t={})=>ei([{provide:Cg,useValue:{default:JE,config:t}}]);var XE=(()=>{class t{toastrService;toastPackage;appRef;message;title;options;duplicatesCount;originalTimeout;width=-1;toastClasses="";get displayStyle(){return this.state==="inactive"?"none":null}state="inactive";timeout;intervalId;hideTime;sub;sub1;sub2;sub3;constructor(n,r,i){this.toastrService=n,this.toastPackage=r,this.appRef=i,this.message=r.message,this.title=r.title,this.options=r.config,this.originalTimeout=r.config.timeOut,this.toastClasses=`${r.toastType} ${r.config.toastClass}`,this.sub=r.toastRef.afterActivate().subscribe(()=>{this.activateToast()}),this.sub1=r.toastRef.manualClosed().subscribe(()=>{this.remove()}),this.sub2=r.toastRef.timeoutReset().subscribe(()=>{this.resetTimeout()}),this.sub3=r.toastRef.countDuplicate().subscribe(s=>{this.duplicatesCount=s})}ngOnDestroy(){this.sub.unsubscribe(),this.sub1.unsubscribe(),this.sub2.unsubscribe(),this.sub3.unsubscribe(),clearInterval(this.intervalId),clearTimeout(this.timeout)}activateToast(){this.state="active",!(this.options.disableTimeOut===!0||this.options.disableTimeOut==="timeOut")&&this.options.timeOut&&(this.timeout=setTimeout(()=>{this.remove()},this.options.timeOut),this.hideTime=new Date().getTime()+this.options.timeOut,this.options.progressBar&&(this.intervalId=setInterval(()=>this.updateProgress(),10))),this.options.onActivateTick&&this.appRef.tick()}updateProgress(){if(this.width===0||this.width===100||!this.options.timeOut)return;let n=new Date().getTime(),r=this.hideTime-n;this.width=r/this.options.timeOut*100,this.options.progressAnimation==="increasing"&&(this.width=100-this.width),this.width<=0&&(this.width=0),this.width>=100&&(this.width=100)}resetTimeout(){clearTimeout(this.timeout),clearInterval(this.intervalId),this.state="active",this.options.timeOut=this.originalTimeout,this.timeout=setTimeout(()=>this.remove(),this.originalTimeout),this.hideTime=new Date().getTime()+(this.originalTimeout||0),this.width=-1,this.options.progressBar&&(this.intervalId=setInterval(()=>this.updateProgress(),10))}remove(){this.state!=="removed"&&(clearTimeout(this.timeout),this.state="removed",this.timeout=setTimeout(()=>this.toastrService.remove(this.toastPackage.toastId)))}tapToast(){this.state!=="removed"&&(this.toastPackage.triggerTap(),this.options.tapToDismiss&&this.remove())}stickAround(){this.state!=="removed"&&(clearTimeout(this.timeout),this.options.timeOut=0,this.hideTime=0,clearInterval(this.intervalId),this.width=0)}delayedHideToast(){this.options.disableTimeOut===!0||this.options.disableTimeOut==="extendedTimeOut"||this.options.extendedTimeOut===0||this.state==="removed"||(this.timeout=setTimeout(()=>this.remove(),this.options.extendedTimeOut),this.options.timeOut=this.options.extendedTimeOut,this.hideTime=new Date().getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&(this.intervalId=setInterval(()=>this.updateProgress(),10)))}static \u0275fac=function(r){return new(r||t)(_e(bg),_e(hr),_e(dn))};static \u0275cmp=Zr({type:t,selectors:[["","toast-component",""]],hostVars:4,hostBindings:function(r,i){r&1&&ln("click",function(){return i.tapToast()})("mouseenter",function(){return i.stickAround()})("mouseleave",function(){return i.delayedHideToast()}),r&2&&(_t(i.toastClasses),er("display",i.displayStyle))},standalone:!0,features:[ri],attrs:Ag,decls:5,vars:5,consts:[["type","button","class","toast-close-button","aria-label","Close",3,"click",4,"ngIf"],[3,"class",4,"ngIf"],["role","alert",3,"class","innerHTML",4,"ngIf"],["role","alert",3,"class",4,"ngIf"],[4,"ngIf"],["type","button","aria-label","Close",1,"toast-close-button",3,"click"],["aria-hidden","true"],["role","alert",3,"innerHTML"],["role","alert"],[1,"toast-progress"]],template:function(r,i){r&1&&ni(0,jE,3,0,"button",0)(1,zE,3,5,"div",1)(2,GE,1,3,"div",2)(3,HE,2,4,"div",3)(4,WE,2,2,"div",4),r&2&&(Se("ngIf",i.options.closeButton),se(),Se("ngIf",i.title),se(),Se("ngIf",i.message&&i.options.enableHtml),se(),Se("ngIf",i.message&&!i.options.enableHtml),se(),Se("ngIf",i.options.progressBar))},dependencies:[Mu],encapsulation:2})}return t})(),$P=H(w({},Sg),{toastComponent:XE});var Pg=function(t){let e=[],n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},ZE=function(t){let e=[],n=0,r=0;for(;n<t.length;){let i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){let s=t[n++],o=t[n++],a=t[n++],u=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{let s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},Ng={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();let n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){let s=t[i],o=i+1<t.length,a=o?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0,l=s>>2,h=(s&3)<<4|a>>4,f=(a&15)<<2|c>>6,p=c&63;u||(p=64,o||(f=64)),r.push(n[l],n[h],n[f],n[p])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Pg(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):ZE(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();let n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){let s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;let c=i<t.length?n[t.charAt(i)]:64;++i;let h=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||c==null||h==null)throw new Bc;let f=s<<2|a>>4;if(r.push(f),c!==64){let p=a<<4&240|c>>2;if(r.push(p),h!==64){let E=c<<6&192|h;r.push(E)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},Bc=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},e0=function(t){let e=Pg(t);return Ng.encodeByteArray(e,!0)},bi=function(t){return e0(t).replace(/\./g,"")},jc=function(t){try{return Ng.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function t0(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var n0=()=>t0().__FIREBASE_DEFAULTS__,r0=()=>{if(typeof process>"u"||typeof process.env>"u")return;let t=process.env.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},i0=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=t&&jc(t[1]);return e&&JSON.parse(e)},po=()=>{try{return n0()||r0()||i0()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},qc=t=>{var e,n;return(n=(e=po())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},Og=t=>{let e=qc(t);if(!e)return;let n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},zc=()=>{var t;return(t=po())===null||t===void 0?void 0:t.config},Gc=t=>{var e;return(e=po())===null||e===void 0?void 0:e[`_${t}`]};var fo=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}};function kg(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[bi(JSON.stringify(n)),bi(JSON.stringify(o)),""].join(".")}function oe(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Fg(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(oe())}function s0(){var t;let e=(t=po())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Mg(){let t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function xg(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Lg(){let t=oe();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function Vg(){return!s0()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Hc(){try{return typeof indexedDB=="object"}catch{return!1}}function Ug(){return new Promise((t,e)=>{try{let n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}var o0="FirebaseError",Me=class t extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=o0,Object.setPrototypeOf(this,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Et.prototype.create)}},Et=class{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){let r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?a0(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new Me(i,a,r)}};function a0(t,e){return t.replace(u0,(n,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var u0=/\{\$([^}]+)}/g;function Bg(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function wn(t,e){if(t===e)return!0;let n=Object.keys(t),r=Object.keys(e);for(let i of n){if(!r.includes(i))return!1;let s=t[i],o=e[i];if(Rg(s)&&Rg(o)){if(!wn(s,o))return!1}else if(s!==o)return!1}for(let i of r)if(!n.includes(i))return!1;return!0}function Rg(t){return t!==null&&typeof t=="object"}function Ri(t){let e=[];for(let[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function dr(t){let e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){let[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function fr(t){let e=t.indexOf("?");if(!e)return"";let n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function $g(t,e){let n=new $c(t,e);return n.subscribe.bind(n)}var $c=class{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");c0(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=Uc),i.error===void 0&&(i.error=Uc),i.complete===void 0&&(i.complete=Uc);let s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function c0(t,e){if(typeof t!="object"||t===null)return!1;for(let n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Uc(){}var zP=4*60*60*1e3;function te(t){return t&&t._delegate?t._delegate:t}var qe=class{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var In="[DEFAULT]";var Wc=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){let r=new fo;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(n=e?.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(h0(e))try{this.getOrInitializeService({instanceIdentifier:In})}catch{}for(let[n,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(n);try{let s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=In){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return d(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=In){return this.instances.has(e)}getOptions(e=In){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(let[s,o]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){var r;let i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);let o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){let r=this.onInitCallbacks.get(n);if(r)for(let i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:l0(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=In){return this.component?this.component.multipleInstances?e:In:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function l0(t){return t===In?void 0:t}function h0(t){return t.instantiationMode==="EAGER"}var go=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let n=new Wc(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}};var d0=[],x=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}(x||{}),f0={debug:x.DEBUG,verbose:x.VERBOSE,info:x.INFO,warn:x.WARN,error:x.ERROR,silent:x.SILENT},p0=x.INFO,g0={[x.DEBUG]:"log",[x.VERBOSE]:"log",[x.INFO]:"info",[x.WARN]:"warn",[x.ERROR]:"error"},m0=(t,e,...n)=>{if(e<t.logLevel)return;let r=new Date().toISOString(),i=g0[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},$t=class{constructor(e){this.name=e,this._logLevel=p0,this._logHandler=m0,this._userLogHandler=null,d0.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in x))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?f0[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,x.DEBUG,...e),this._logHandler(this,x.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,x.VERBOSE,...e),this._logHandler(this,x.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,x.INFO,...e),this._logHandler(this,x.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,x.WARN,...e),this._logHandler(this,x.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,x.ERROR,...e),this._logHandler(this,x.ERROR,...e)}};var y0=(t,e)=>e.some(n=>t instanceof n),jg,qg;function v0(){return jg||(jg=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function _0(){return qg||(qg=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var zg=new WeakMap,Qc=new WeakMap,Gg=new WeakMap,Kc=new WeakMap,Jc=new WeakMap;function w0(t){let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(it(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&zg.set(n,t)}).catch(()=>{}),Jc.set(e,t),e}function I0(t){if(Qc.has(t))return;let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});Qc.set(t,e)}var Yc={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Qc.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Gg.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return it(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function Hg(t){Yc=t(Yc)}function E0(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){let r=t.call(mo(this),e,...n);return Gg.set(r,e.sort?e.sort():[e]),it(r)}:_0().includes(t)?function(...e){return t.apply(mo(this),e),it(zg.get(this))}:function(...e){return it(t.apply(mo(this),e))}}function T0(t){return typeof t=="function"?E0(t):(t instanceof IDBTransaction&&I0(t),y0(t,v0())?new Proxy(t,Yc):t)}function it(t){if(t instanceof IDBRequest)return w0(t);if(Kc.has(t))return Kc.get(t);let e=T0(t);return e!==t&&(Kc.set(t,e),Jc.set(e,t)),e}var mo=t=>Jc.get(t);function Kg(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){let o=indexedDB.open(t,e),a=it(o);return r&&o.addEventListener("upgradeneeded",u=>{r(it(o.result),u.oldVersion,u.newVersion,it(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),a.then(u=>{s&&u.addEventListener("close",()=>s()),i&&u.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}var D0=["get","getKey","getAll","getAllKeys","count"],A0=["put","add","delete","clear"],Xc=new Map;function Wg(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Xc.get(e))return Xc.get(e);let n=e.replace(/FromIndex$/,""),r=e!==n,i=A0.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||D0.includes(n)))return;let s=function(o,...a){return d(this,null,function*(){let u=this.transaction(o,i?"readwrite":"readonly"),c=u.store;return r&&(c=c.index(a.shift())),(yield Promise.all([c[n](...a),i&&u.done]))[0]})};return Xc.set(e,s),s}Hg(t=>H(w({},t),{get:(e,n,r)=>Wg(e,n)||t.get(e,n,r),has:(e,n)=>!!Wg(e,n)||t.has(e,n)}));var el=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(S0(n)){let r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}};function S0(t){let e=t.getComponent();return e?.type==="VERSION"}var tl="@firebase/app",Qg="0.10.2";var En=new $t("@firebase/app"),C0="@firebase/app-compat",b0="@firebase/analytics-compat",R0="@firebase/analytics",P0="@firebase/app-check-compat",N0="@firebase/app-check",O0="@firebase/auth",k0="@firebase/auth-compat",F0="@firebase/database",M0="@firebase/database-compat",x0="@firebase/functions",L0="@firebase/functions-compat",V0="@firebase/installations",U0="@firebase/installations-compat",B0="@firebase/messaging",$0="@firebase/messaging-compat",j0="@firebase/performance",q0="@firebase/performance-compat",z0="@firebase/remote-config",G0="@firebase/remote-config-compat",H0="@firebase/storage",W0="@firebase/storage-compat",K0="@firebase/firestore",Q0="@firebase/firestore-compat",Y0="firebase",J0="10.11.1";var nl="[DEFAULT]",X0={[tl]:"fire-core",[C0]:"fire-core-compat",[R0]:"fire-analytics",[b0]:"fire-analytics-compat",[N0]:"fire-app-check",[P0]:"fire-app-check-compat",[O0]:"fire-auth",[k0]:"fire-auth-compat",[F0]:"fire-rtdb",[M0]:"fire-rtdb-compat",[x0]:"fire-fn",[L0]:"fire-fn-compat",[V0]:"fire-iid",[U0]:"fire-iid-compat",[B0]:"fire-fcm",[$0]:"fire-fcm-compat",[j0]:"fire-perf",[q0]:"fire-perf-compat",[z0]:"fire-rc",[G0]:"fire-rc-compat",[H0]:"fire-gcs",[W0]:"fire-gcs-compat",[K0]:"fire-fst",[Q0]:"fire-fst-compat","fire-js":"fire-js",[Y0]:"fire-js-all"};var Pi=new Map,Z0=new Map,rl=new Map;function Yg(t,e){try{t.container.addComponent(e)}catch(n){En.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function qt(t){let e=t.name;if(rl.has(e))return En.debug(`There were multiple attempts to register component ${e}.`),!1;rl.set(e,t);for(let n of Pi.values())Yg(n,t);for(let n of Z0.values())Yg(n,t);return!0}function Oi(t,e){let n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Qe(t){return t.settings!==void 0}var eT={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},jt=new Et("app","Firebase",eT);var il=class{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new qe("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw jt.create("app-deleted",{appName:this._name})}};var zt=J0;function al(t,e={}){let n=t;typeof e!="object"&&(e={name:e});let r=Object.assign({name:nl,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw jt.create("bad-app-name",{appName:String(i)});if(n||(n=zc()),!n)throw jt.create("no-options");let s=Pi.get(i);if(s){if(wn(n,s.options)&&wn(r,s.config))return s;throw jt.create("duplicate-app",{appName:i})}let o=new go(i);for(let u of rl.values())o.addComponent(u);let a=new il(n,r,o);return Pi.set(i,a),a}function pr(t=nl){let e=Pi.get(t);if(!e&&t===nl&&zc())return al();if(!e)throw jt.create("no-app",{appName:t});return e}function yo(){return Array.from(Pi.values())}function ae(t,e,n){var r;let i=(r=X0[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);let s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){let a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),En.warn(a.join(" "));return}qt(new qe(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var tT="firebase-heartbeat-database",nT=1,Ni="firebase-heartbeat-store",Zc=null;function em(){return Zc||(Zc=Kg(tT,nT,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Ni)}catch(n){console.warn(n)}}}}).catch(t=>{throw jt.create("idb-open",{originalErrorMessage:t.message})})),Zc}function rT(t){return d(this,null,function*(){try{let n=(yield em()).transaction(Ni),r=yield n.objectStore(Ni).get(tm(t));return yield n.done,r}catch(e){if(e instanceof Me)En.warn(e.message);else{let n=jt.create("idb-get",{originalErrorMessage:e?.message});En.warn(n.message)}}})}function Jg(t,e){return d(this,null,function*(){try{let r=(yield em()).transaction(Ni,"readwrite");yield r.objectStore(Ni).put(e,tm(t)),yield r.done}catch(n){if(n instanceof Me)En.warn(n.message);else{let r=jt.create("idb-set",{originalErrorMessage:n?.message});En.warn(r.message)}}})}function tm(t){return`${t.name}!${t.options.appId}`}var iT=1024,sT=30*24*60*60*1e3,sl=class{constructor(e){this.container=e,this._heartbeatsCache=null;let n=this.container.getProvider("app").getImmediate();this._storage=new ol(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return d(this,null,function*(){var e,n;let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=Xg();if(!(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)))return this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{let a=new Date(o.date).valueOf();return Date.now()-a<=sT}),this._storage.overwrite(this._heartbeatsCache)})}getHeartbeatsHeader(){return d(this,null,function*(){var e;if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let n=Xg(),{heartbeatsToSend:r,unsentEntries:i}=oT(this._heartbeatsCache.heartbeats),s=bi(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s})}};function Xg(){return new Date().toISOString().substring(0,10)}function oT(t,e=iT){let n=[],r=t.slice();for(let i of t){let s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),Zg(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Zg(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}var ol=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return d(this,null,function*(){return Hc()?Ug().then(()=>!0).catch(()=>!1):!1})}read(){return d(this,null,function*(){if(yield this._canUseIndexedDBPromise){let n=yield rT(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return d(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return Jg(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return d(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return Jg(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function Zg(t){return bi(JSON.stringify({version:2,heartbeats:t})).length}function aT(t){qt(new qe("platform-logger",e=>new el(e),"PRIVATE")),qt(new qe("heartbeat",e=>new sl(e),"PRIVATE")),ae(tl,Qg,t),ae(tl,Qg,"esm2017"),ae("fire-js","")}aT("");var uT="firebase",cT="10.11.1";ae(uT,cT,"app");var Dn=new ii("ANGULARFIRE2_VERSION");function _o(t,e,n){if(e){if(e.length===1)return e[0];let s=e.filter(o=>o.app===n);if(s.length===1)return s[0]}return n.container.getProvider(t).getImmediate({optional:!0})}var ki=(t,e)=>{let n=e?[e]:yo(),r=[];return n.forEach(i=>{i.container.getProvider(t).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r},mr=class{constructor(){return ki(lT)}},lT="app-check";function gr(){}var vo=class{zone;delegate;constructor(e,n=Kf){this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,r){let i=this.zone,s=function(o){i.runGuarded(()=>{e.apply(this,[o])})};return this.delegate.schedule(s,n,r)}},ul=class{zone;task=null;constructor(e){this.zone=e}call(e,n){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",gr,{},gr,gr)),n.pipe(ce({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},yr=(()=>{class t{ngZone;outsideAngular;insideAngular;constructor(n){this.ngZone=n,this.outsideAngular=n.runOutsideAngular(()=>new vo(Zone.current)),this.insideAngular=n.run(()=>new vo(Zone.current,Wf)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||t)(F(ee))};static \u0275prov=M({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function wo(){let t=globalThis.\u0275AngularFireScheduler;if(!t)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return t}function hT(t){return wo().ngZone.runOutsideAngular(()=>t())}function Tn(t){return wo().ngZone.run(()=>t())}function dT(t){return fT(wo())(t)}function fT(t){return function(n){return n=n.lift(new ul(t.ngZone)),n.pipe(du(t.outsideAngular),hu(t.insideAngular))}}var pT=(t,e)=>function(){let r=arguments;return e&&setTimeout(()=>{e.state==="scheduled"&&e.invoke()},10),Tn(()=>t.apply(void 0,r))},Ie=(t,e)=>function(){let n,r=arguments;for(let s=0;s<arguments.length;s++)typeof r[s]=="function"&&(e&&(n||=Tn(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",gr,{},gr,gr))),r[s]=pT(r[s],n));let i=hT(()=>t.apply(this,r));if(!e)if(i instanceof Kr){let s=wo();return i.pipe(du(s.outsideAngular),hu(s.insideAngular))}else return Tn(()=>i);return i instanceof Kr?i.pipe(dT):i instanceof Promise?Tn(()=>new Promise((s,o)=>i.then(a=>Tn(()=>s(a)),a=>Tn(()=>o(a))))):typeof i=="function"&&n?function(){return setTimeout(()=>{n&&n.state==="scheduled"&&n.invoke()},10),i.apply(this,arguments)}:Tn(()=>i)};var Tt=class{constructor(e){return e}},An=class{constructor(){return yo()}};function gT(t){return t&&t.length===1?t[0]:new Tt(pr())}var cl=new W("angularfire2._apps"),mT={provide:Tt,useFactory:gT,deps:[[new Re,cl]]},yT={provide:An,deps:[[new Re,cl]]};function vT(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new Tt(r)}}var _T=(()=>{class t{constructor(n){ae("angularfire",Dn.full,"core"),ae("angularfire",Dn.full,"app"),ae("angular",Ip.full,n.toString())}static \u0275fac=function(r){return new(r||t)(F(xt))};static \u0275mod=We({type:t});static \u0275inj=He({providers:[mT,yT]})}return t})();function bN(t,...e){return{ngModule:_T,providers:[{provide:cl,useFactory:vT(t),multi:!0,deps:[ee,Ne,yr,...e]}]}}var RN=Ie(al,!0);function vm(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var _m=vm,wm=new Et("auth","Firebase",vm());var So=new $t("@firebase/auth");function wT(t,...e){So.logLevel<=x.WARN&&So.warn(`Auth (${zt}): ${t}`,...e)}function Eo(t,...e){So.logLevel<=x.ERROR&&So.error(`Auth (${zt}): ${t}`,...e)}function ot(t,...e){throw Ol(t,...e)}function Sn(t,...e){return Ol(t,...e)}function Im(t,e,n){let r=Object.assign(Object.assign({},_m()),{[e]:n});return new Et("auth","Firebase",r).create(e,{appName:t.name})}function St(t){return Im(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Ol(t,...e){if(typeof t!="string"){let n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return wm.create(t,...e)}function S(t,e,...n){if(!t)throw Ol(e,...n)}function Dt(t){let e="INTERNAL ASSERTION FAILED: "+t;throw Eo(e),new Error(e)}function Ht(t,e){t||Dt(e)}function fl(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function IT(){return nm()==="http:"||nm()==="https:"}function nm(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}function ET(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(IT()||Mg()||"connection"in navigator)?navigator.onLine:!0}function TT(){if(typeof navigator>"u")return null;let t=navigator;return t.languages&&t.languages[0]||t.language||null}var Cn=class{constructor(e,n){this.shortDelay=e,this.longDelay=n,Ht(n>e,"Short delay should be less than long delay!"),this.isMobile=Fg()||xg()}get(){return ET()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function kl(t,e){Ht(t.emulator,"Emulator should always be set here");let{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}var Co=class{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Dt("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Dt("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Dt("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var DT={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var AT=new Cn(3e4,6e4);function Wt(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}function Kt(s,o,a,u){return d(this,arguments,function*(t,e,n,r,i={}){return Em(t,i,()=>d(this,null,function*(){let c={},l={};r&&(e==="GET"?l=r:c={body:JSON.stringify(r)});let h=Ri(Object.assign({key:t.config.apiKey},l)).slice(1),f=yield t._getAdditionalHeaders();return f["Content-Type"]="application/json",t.languageCode&&(f["X-Firebase-Locale"]=t.languageCode),Co.fetch()(Tm(t,t.config.apiHost,n,h),Object.assign({method:e,headers:f,referrerPolicy:"no-referrer"},c))}))})}function Em(t,e,n){return d(this,null,function*(){t._canInitEmulator=!1;let r=Object.assign(Object.assign({},DT),e);try{let i=new pl(t),s=yield Promise.race([n(),i.promise]);i.clearNetworkTimeout();let o=yield s.json();if("needConfirmation"in o)throw Io(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{let a=s.ok?o.errorMessage:o.error.message,[u,c]=a.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw Io(t,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw Io(t,"email-already-in-use",o);if(u==="USER_DISABLED")throw Io(t,"user-disabled",o);let l=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw Im(t,l,c);ot(t,l)}}catch(i){if(i instanceof Me)throw i;ot(t,"network-request-failed",{message:String(i)})}})}function $i(s,o,a,u){return d(this,arguments,function*(t,e,n,r,i={}){let c=yield Kt(t,e,n,r,i);return"mfaPendingCredential"in c&&ot(t,"multi-factor-auth-required",{_serverResponse:c}),c})}function Tm(t,e,n,r){let i=`${e}${n}?${r}`;return t.config.emulator?kl(t.config,i):`${t.config.apiScheme}://${i}`}function ST(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}var pl=class{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Sn(this.auth,"network-request-failed")),AT.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}};function Io(t,e,n){let r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);let i=Sn(t,e,r);return i.customData._tokenResponse=n,i}function rm(t){return t!==void 0&&t.enterprise!==void 0}var gl=class{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(let n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return ST(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}};function CT(t,e){return d(this,null,function*(){return Kt(t,"GET","/v2/recaptchaConfig",Wt(t,e))})}function bT(t,e){return d(this,null,function*(){return Kt(t,"POST","/v1/accounts:delete",e)})}function Dm(t,e){return d(this,null,function*(){return Kt(t,"POST","/v1/accounts:lookup",e)})}function Fi(t){if(t)try{let e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function Fl(t,e=!1){return d(this,null,function*(){let n=te(t),r=yield n.getIdToken(e),i=Ml(r);S(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");let s=typeof i.firebase=="object"?i.firebase:void 0,o=s?.sign_in_provider;return{claims:i,token:r,authTime:Fi(ll(i.auth_time)),issuedAtTime:Fi(ll(i.iat)),expirationTime:Fi(ll(i.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}})}function ll(t){return Number(t)*1e3}function Ml(t){let[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Eo("JWT malformed, contained fewer than 3 sections"),null;try{let i=jc(n);return i?JSON.parse(i):(Eo("Failed to decode base64 JWT payload"),null)}catch(i){return Eo("Caught error parsing JWT payload as JSON",i?.toString()),null}}function im(t){let e=Ml(t);return S(e,"internal-error"),S(typeof e.exp<"u","internal-error"),S(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function xi(t,e,n=!1){return d(this,null,function*(){if(n)return e;try{return yield e}catch(r){throw r instanceof Me&&RT(r)&&t.auth.currentUser===t&&(yield t.auth.signOut()),r}})}function RT({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}var ml=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let n=this.getInterval(e);this.timerId=setTimeout(()=>d(this,null,function*(){yield this.iteration()}),n)}iteration(){return d(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var Li=class{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Fi(this.lastLoginAt),this.creationTime=Fi(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function bo(t){return d(this,null,function*(){var e;let n=t.auth,r=yield t.getIdToken(),i=yield xi(t,Dm(n,{idToken:r}));S(i?.users.length,n,"internal-error");let s=i.users[0];t._notifyReloadListener(s);let o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?Am(s.providerUserInfo):[],a=PT(t.providerData,o),u=t.isAnonymous,c=!(t.email&&s.passwordHash)&&!a?.length,l=u?c:!1,h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Li(s.createdAt,s.lastLoginAt),isAnonymous:l};Object.assign(t,h)})}function xl(t){return d(this,null,function*(){let e=te(t);yield bo(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function PT(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function Am(t){return t.map(e=>{var{providerId:n}=e,r=lu(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function NT(t,e){return d(this,null,function*(){let n=yield Em(t,{},()=>d(this,null,function*(){let r=Ri({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=Tm(t,i,"/v1/token",`key=${s}`),a=yield t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",Co.fetch()(o,{method:"POST",headers:a,body:r})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}})}function OT(t,e){return d(this,null,function*(){return Kt(t,"POST","/v2/accounts:revokeToken",Wt(t,e))})}var Mi=class t{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){S(e.idToken,"internal-error"),S(typeof e.idToken<"u","internal-error"),S(typeof e.refreshToken<"u","internal-error");let n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):im(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){S(e.length!==0,"internal-error");let n=im(e);this.updateTokensAndExpiration(e,null,n)}getToken(e,n=!1){return d(this,null,function*(){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(S(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,n){return d(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:s}=yield NT(e,n);this.updateTokensAndExpiration(r,i,Number(s))})}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){let{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new t;return r&&(S(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(S(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(S(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new t,this.toJSON())}_performRefresh(){return Dt("not implemented")}};function Gt(t,e){S(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}var vr=class t{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=lu(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new ml(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Li(s.createdAt||void 0,s.lastLoginAt||void 0)}getIdToken(e){return d(this,null,function*(){let n=yield xi(this,this.stsTokenManager.getToken(this.auth,e));return S(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n})}getIdTokenResult(e){return Fl(this,e)}reload(){return xl(this)}_assign(e){this!==e&&(S(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let n=new t(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){S(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,n=!1){return d(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&(yield bo(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return d(this,null,function*(){if(Qe(this.auth.app))return Promise.reject(St(this.auth));let e=yield this.getIdToken();return yield xi(this,bT(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,a,u,c,l;let h=(r=n.displayName)!==null&&r!==void 0?r:void 0,f=(i=n.email)!==null&&i!==void 0?i:void 0,p=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,E=(o=n.photoURL)!==null&&o!==void 0?o:void 0,T=(a=n.tenantId)!==null&&a!==void 0?a:void 0,v=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,k=(c=n.createdAt)!==null&&c!==void 0?c:void 0,q=(l=n.lastLoginAt)!==null&&l!==void 0?l:void 0,{uid:Z,emailVerified:ye,isAnonymous:et,providerData:ue,stsTokenManager:yt}=n;S(Z&&yt,e,"internal-error");let Kn=Mi.fromJSON(this.name,yt);S(typeof Z=="string",e,"internal-error"),Gt(h,e.name),Gt(f,e.name),S(typeof ye=="boolean",e,"internal-error"),S(typeof et=="boolean",e,"internal-error"),Gt(p,e.name),Gt(E,e.name),Gt(T,e.name),Gt(v,e.name),Gt(k,e.name),Gt(q,e.name);let Wr=new t({uid:Z,auth:e,email:f,emailVerified:ye,displayName:h,isAnonymous:et,photoURL:E,phoneNumber:p,tenantId:T,stsTokenManager:Kn,createdAt:k,lastLoginAt:q});return ue&&Array.isArray(ue)&&(Wr.providerData=ue.map(Ls=>Object.assign({},Ls))),v&&(Wr._redirectEventId=v),Wr}static _fromIdTokenResponse(e,n,r=!1){return d(this,null,function*(){let i=new Mi;i.updateFromServerResponse(n);let s=new t({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield bo(s),s})}static _fromGetAccountInfoResponse(e,n,r){return d(this,null,function*(){let i=n.users[0];S(i.localId!==void 0,"internal-error");let s=i.providerUserInfo!==void 0?Am(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!s?.length,a=new Mi;a.updateFromIdToken(r);let u=new t({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),c={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new Li(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!s?.length};return Object.assign(u,c),u})}};var sm=new Map;function At(t){Ht(t instanceof Function,"Expected a class definition");let e=sm.get(t);return e?(Ht(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,sm.set(t,e),e)}var kT=(()=>{class t{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return d(this,null,function*(){return!0})}_set(n,r){return d(this,null,function*(){this.storage[n]=r})}_get(n){return d(this,null,function*(){let r=this.storage[n];return r===void 0?null:r})}_remove(n){return d(this,null,function*(){delete this.storage[n]})}_addListener(n,r){}_removeListener(n,r){}}return t.type="NONE",t})(),yl=kT;function To(t,e,n){return`firebase:${t}:${e}:${n}`}var Ro=class t{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;let{config:i,name:s}=this.auth;this.fullUserKey=To(this.userKey,i.apiKey,s),this.fullPersistenceKey=To("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return d(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);return e?vr._fromJSON(this.auth,e):null})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return d(this,null,function*(){if(this.persistence===e)return;let n=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,n,r="authUser"){return d(this,null,function*(){if(!n.length)return new t(At(yl),e,r);let i=(yield Promise.all(n.map(c=>d(this,null,function*(){if(yield c._isAvailable())return c})))).filter(c=>c),s=i[0]||At(yl),o=To(r,e.config.apiKey,e.name),a=null;for(let c of n)try{let l=yield c._get(o);if(l){let h=vr._fromJSON(e,l);c!==s&&(a=h),s=c;break}}catch{}let u=i.filter(c=>c._shouldAllowMigration);return!s._shouldAllowMigration||!u.length?new t(s,e,r):(s=u[0],a&&(yield s._set(o,a.toJSON())),yield Promise.all(n.map(c=>d(this,null,function*(){if(c!==s)try{yield c._remove(o)}catch{}}))),new t(s,e,r))})}};function om(t){let e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(bm(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Sm(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Pm(e))return"Blackberry";if(Nm(e))return"Webos";if(Ll(e))return"Safari";if((e.includes("chrome/")||Cm(e))&&!e.includes("edge/"))return"Chrome";if(Rm(e))return"Android";{let n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function Sm(t=oe()){return/firefox\//i.test(t)}function Ll(t=oe()){let e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Cm(t=oe()){return/crios\//i.test(t)}function bm(t=oe()){return/iemobile/i.test(t)}function Rm(t=oe()){return/android/i.test(t)}function Pm(t=oe()){return/blackberry/i.test(t)}function Nm(t=oe()){return/webos/i.test(t)}function Lo(t=oe()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function FT(t=oe()){var e;return Lo(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function MT(){return Lg()&&document.documentMode===10}function Om(t=oe()){return Lo(t)||Rm(t)||Nm(t)||Pm(t)||/windows phone/i.test(t)||bm(t)}function xT(){try{return!!(window&&window!==window.top)}catch{return!1}}function km(t,e=[]){let n;switch(t){case"Browser":n=om(oe());break;case"Worker":n=`${om(oe())}-${t}`;break;default:n=t}let r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${zt}/${r}`}var vl=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){let r=s=>new Promise((o,a)=>{try{let u=e(s);o(u)}catch(u){a(u)}});r.onAbort=n,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return d(this,null,function*(){if(this.auth.currentUser===e)return;let n=[];try{for(let r of this.queue)yield r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(let i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function LT(n){return d(this,arguments,function*(t,e={}){return Kt(t,"GET","/v2/passwordPolicy",Wt(t,e))})}var VT=6,_l=class{constructor(e){var n,r,i,s;let o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:VT,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,o,a;let u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(s=u.containsUppercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(o=u.containsNumericCharacter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(a=u.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),u}validatePasswordLengthOptions(e,n){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}};var wl=class{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Po(this),this.idTokenSubscription=new Po(this),this.beforeStateQueue=new vl(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=wm,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=At(n)),this._initializationPromise=this.queue(()=>d(this,null,function*(){var r,i;if(!this._deleted&&(this.persistenceManager=yield Ro.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return d(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return d(this,null,function*(){try{let n=yield Dm(this,{idToken:e}),r=yield vr._fromGetAccountInfoResponse(this,n,e);yield this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return d(this,null,function*(){var n;if(Qe(this.app)){let o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,s=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i?._redirectEventId,u=yield this.tryRedirectSignIn(e);(!o||o===a)&&u?.user&&(i=u.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{yield this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return S(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return d(this,null,function*(){let n=null;try{n=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return n})}reloadAndSetCurrentUserOrClear(e){return d(this,null,function*(){try{yield bo(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=TT()}_delete(){return d(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return d(this,null,function*(){if(Qe(this.app))return Promise.reject(St(this));let n=e?te(e):null;return n&&S(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))})}_updateCurrentUser(e,n=!1){return d(this,null,function*(){if(!this._deleted)return e&&S(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>d(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return d(this,null,function*(){return Qe(this.app)?Promise.reject(St(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return Qe(this.app)?Promise.reject(St(this)):this.queue(()=>d(this,null,function*(){yield this.assertedPersistence.setPersistence(At(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return d(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return d(this,null,function*(){let e=yield LT(this),n=new _l(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Et("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},n)}})}revokeAccessToken(e){return d(this,null,function*(){if(this.currentUser){let n=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),yield OT(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,n){return d(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return d(this,null,function*(){if(!this.redirectPersistenceManager){let n=e&&At(e)||this._popupRedirectResolver;S(n,this,"argument-error"),this.redirectPersistenceManager=yield Ro.create(this,[At(n._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return d(this,null,function*(){var n,r;return this._isInitialized&&(yield this.queue(()=>d(this,null,function*(){}))),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return d(this,null,function*(){if(e===this.currentUser)return this.queue(()=>d(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};let s=typeof n=="function"?n:n.next.bind(n),o=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(S(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){let u=e.addObserver(n,r,i);return()=>{o=!0,u()}}else{let u=e.addObserver(n);return()=>{o=!0,u()}}}directlySetCurrentUser(e){return d(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return S(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=km(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return d(this,null,function*(){var e;let n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(n["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n})}_getAppCheckToken(){return d(this,null,function*(){var e;let n=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return n?.error&&wT(`Error while retrieving App Check token: ${n.error}`),n?.token})}};function Rn(t){return te(t)}var Po=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=$g(n=>this.observer=n)}get next(){return S(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var Vo={loadJS(){return d(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function UT(t){Vo=t}function Fm(t){return Vo.loadJS(t)}function BT(){return Vo.recaptchaEnterpriseScript}function $T(){return Vo.gapiScript}function Mm(t){return`__${t}${Math.floor(Math.random()*1e6)}`}var jT="recaptcha-enterprise",qT="NO_RECAPTCHA",Il=class{constructor(e){this.type=jT,this.auth=Rn(e)}verify(e="verify",n=!1){return d(this,null,function*(){function r(s){return d(this,null,function*(){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise((o,a)=>d(this,null,function*(){CT(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{let c=new gl(u);return s.tenantId==null?s._agentRecaptchaConfig=c:s._tenantRecaptchaConfigs[s.tenantId]=c,o(c.siteKey)}}).catch(u=>{a(u)})}))})}function i(s,o,a){let u=window.grecaptcha;rm(u)?u.enterprise.ready(()=>{u.enterprise.execute(s,{action:e}).then(c=>{o(c)}).catch(()=>{o(qT)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,o)=>{r(this.auth).then(a=>{if(!n&&rm(window.grecaptcha))i(a,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let u=BT();u.length!==0&&(u+=a),Fm(u).then(()=>{i(a,s,o)}).catch(c=>{o(c)})}}).catch(a=>{o(a)})})})}};function am(t,e,n,r=!1){return d(this,null,function*(){let i=new Il(t),s;try{s=yield i.verify(n)}catch{s=yield i.verify(n,!0)}let o=Object.assign({},e);return r?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o})}function El(t,e,n,r){return d(this,null,function*(){var i;if(!((i=t._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){let s=yield am(t,e,n,n==="getOobCode");return r(t,s)}else return r(t,e).catch(s=>d(this,null,function*(){if(s.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);let o=yield am(t,e,n,n==="getOobCode");return r(t,o)}else return Promise.reject(s)}))})}function Vl(t,e){let n=Oi(t,"auth");if(n.isInitialized()){let i=n.getImmediate(),s=n.getOptions();if(wn(s,e??{}))return i;ot(i,"already-initialized")}return n.initialize({options:e})}function zT(t,e){let n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(At);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}function Ul(t,e,n){let r=Rn(t);S(r._canInitEmulator,r,"emulator-config-failed"),S(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!n?.disableWarnings,s=xm(e),{host:o,port:a}=GT(e),u=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${u}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||HT()}function xm(t){let e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function GT(t){let e=xm(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};let r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let s=i[1];return{host:s,port:um(r.substr(s.length+1))}}else{let[s,o]=r.split(":");return{host:s,port:um(o)}}}function um(t){if(!t)return null;let e=Number(t);return isNaN(e)?null:e}function HT(){function t(){let e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}var Vi=class{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Dt("not implemented")}_getIdTokenResponse(e){return Dt("not implemented")}_linkToIdToken(e,n){return Dt("not implemented")}_getReauthenticationResolver(e){return Dt("not implemented")}};function WT(t,e){return d(this,null,function*(){return Kt(t,"POST","/v1/accounts:signUp",e)})}function KT(t,e){return d(this,null,function*(){return $i(t,"POST","/v1/accounts:signInWithPassword",Wt(t,e))})}function QT(t,e){return d(this,null,function*(){return $i(t,"POST","/v1/accounts:signInWithEmailLink",Wt(t,e))})}function YT(t,e){return d(this,null,function*(){return $i(t,"POST","/v1/accounts:signInWithEmailLink",Wt(t,e))})}var Ui=class t extends Vi{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new t(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new t(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){let n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}_getIdTokenResponse(e){return d(this,null,function*(){switch(this.signInMethod){case"password":let n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return El(e,n,"signInWithPassword",KT);case"emailLink":return QT(e,{email:this._email,oobCode:this._password});default:ot(e,"internal-error")}})}_linkToIdToken(e,n){return d(this,null,function*(){switch(this.signInMethod){case"password":let r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return El(e,r,"signUpPassword",WT);case"emailLink":return YT(e,{idToken:n,email:this._email,oobCode:this._password});default:ot(e,"internal-error")}})}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}};function hl(t,e){return d(this,null,function*(){return $i(t,"POST","/v1/accounts:signInWithIdp",Wt(t,e))})}function JT(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function XT(t){let e=dr(fr(t)).link,n=e?dr(fr(e)).deep_link_id:null,r=dr(fr(t)).deep_link_id;return(r?dr(fr(r)).link:null)||r||n||e||t}var No=class t{constructor(e){var n,r,i,s,o,a;let u=dr(fr(e)),c=(n=u.apiKey)!==null&&n!==void 0?n:null,l=(r=u.oobCode)!==null&&r!==void 0?r:null,h=JT((i=u.mode)!==null&&i!==void 0?i:null);S(c&&l&&h,"argument-error"),this.apiKey=c,this.operation=h,this.code=l,this.continueUrl=(s=u.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=u.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=u.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){let n=XT(e);try{return new t(n)}catch{return null}}};var Lm=(()=>{class t{constructor(){this.providerId=t.PROVIDER_ID}static credential(n,r){return Ui._fromEmailAndPassword(n,r)}static credentialWithLink(n,r){let i=No.parseLink(r);return S(i,"argument-error"),Ui._fromEmailAndCode(n,i.code,i.tenantId)}}t.PROVIDER_ID="password",t.EMAIL_PASSWORD_SIGN_IN_METHOD="password",t.EMAIL_LINK_SIGN_IN_METHOD="emailLink";return t})(),Oo=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var Tl=class extends Oo{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};function ZT(t,e){return d(this,null,function*(){return $i(t,"POST","/v1/accounts:signUp",Wt(t,e))})}var _r=class t{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,n,r,i=!1){return d(this,null,function*(){let s=yield vr._fromIdTokenResponse(e,r,i),o=cm(r);return new t({user:s,providerId:o,_tokenResponse:r,operationType:n})})}static _forOperation(e,n,r){return d(this,null,function*(){yield e._updateTokensIfNecessary(r,!0);let i=cm(r);return new t({user:e,providerId:i,_tokenResponse:r,operationType:n})})}};function cm(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}var Dl=class t extends Me{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,t.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new t(e,n,r,i)}};function Vm(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Dl._fromErrorAndOperation(t,s,e,r):s})}function eD(t,e,n=!1){return d(this,null,function*(){let r=yield xi(t,e._linkToIdToken(t.auth,yield t.getIdToken()),n);return _r._forOperation(t,"link",r)})}function tD(t,e,n=!1){return d(this,null,function*(){let{auth:r}=t;if(Qe(r.app))return Promise.reject(St(r));let i="reauthenticate";try{let s=yield xi(t,Vm(r,i,e,t),n);S(s.idToken,r,"internal-error");let o=Ml(s.idToken);S(o,r,"internal-error");let{sub:a}=o;return S(t.uid===a,r,"user-mismatch"),_r._forOperation(t,i,s)}catch(s){throw s?.code==="auth/user-not-found"&&ot(r,"user-mismatch"),s}})}function Um(t,e,n=!1){return d(this,null,function*(){if(Qe(t.app))return Promise.reject(St(t));let r="signIn",i=yield Vm(t,r,e),s=yield _r._fromIdTokenResponse(t,r,i);return n||(yield t._updateCurrentUser(s.user)),s})}function Bl(t,e){return d(this,null,function*(){return Um(Rn(t),e)})}function Bm(t){return d(this,null,function*(){let e=Rn(t);e._getPasswordPolicyInternal()&&(yield e._updatePasswordPolicy())})}function $l(t,e,n){return d(this,null,function*(){if(Qe(t.app))return Promise.reject(St(t));let r=Rn(t),o=yield El(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",ZT).catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&Bm(t),u}),a=yield _r._fromIdTokenResponse(r,"signIn",o);return yield r._updateCurrentUser(a.user),a})}function jl(t,e,n){return Qe(t.app)?Promise.reject(St(t)):Bl(te(t),Lm.credential(e,n)).catch(r=>d(this,null,function*(){throw r.code==="auth/password-does-not-meet-requirements"&&Bm(t),r}))}function ql(t,e,n,r){return te(t).onIdTokenChanged(e,n,r)}function zl(t,e,n){return te(t).beforeAuthStateChanged(e,n)}function Gl(t){return te(t).signOut()}var ko="__sak";var Fo=class{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(ko,"1"),this.storage.removeItem(ko),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){let n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};function nD(){let t=oe();return Ll(t)||Lo(t)}var rD=1e3,iD=10,sD=(()=>{class t extends Fo{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(n,r)=>this.onStorageEvent(n,r),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=nD()&&xT(),this.fallbackToPolling=Om(),this._shouldAllowMigration=!0}forAllChangedKeys(n){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),s=this.localCache[r];i!==s&&n(r,s,i)}}onStorageEvent(n,r=!1){if(!n.key){this.forAllChangedKeys((a,u,c)=>{this.notifyListeners(a,c)});return}let i=n.key;if(r?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){let a=this.storage.getItem(i);if(n.newValue!==a)n.newValue!==null?this.storage.setItem(i,n.newValue):this.storage.removeItem(i);else if(this.localCache[i]===n.newValue&&!r)return}let s=()=>{let a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},o=this.storage.getItem(i);MT()&&o!==n.newValue&&n.newValue!==n.oldValue?setTimeout(s,iD):s()}notifyListeners(n,r){this.localCache[n]=r;let i=this.listeners[n];if(i)for(let s of Array.from(i))s(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((n,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:n,oldValue:r,newValue:i}),!0)})},rD)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(n,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[n]||(this.listeners[n]=new Set,this.localCache[n]=this.storage.getItem(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(n,r){return d(this,null,function*(){yield kt(t.prototype,this,"_set").call(this,n,r),this.localCache[n]=JSON.stringify(r)})}_get(n){return d(this,null,function*(){let r=yield kt(t.prototype,this,"_get").call(this,n);return this.localCache[n]=JSON.stringify(r),r})}_remove(n){return d(this,null,function*(){yield kt(t.prototype,this,"_remove").call(this,n),delete this.localCache[n]})}}return t.type="LOCAL",t})(),$m=sD;var oD=(()=>{class t extends Fo{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(n,r){}_removeListener(n,r){}}return t.type="SESSION",t})(),Hl=oD;function aD(t){return Promise.all(t.map(e=>d(this,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(n){return{fulfilled:!1,reason:n}}})))}var uD=(()=>{class t{constructor(n){this.eventTarget=n,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(n){let r=this.receivers.find(s=>s.isListeningto(n));if(r)return r;let i=new t(n);return this.receivers.push(i),i}isListeningto(n){return this.eventTarget===n}handleEvent(n){return d(this,null,function*(){let r=n,{eventId:i,eventType:s,data:o}=r.data,a=this.handlersMap[s];if(!a?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:s});let u=Array.from(a).map(l=>d(this,null,function*(){return l(r.origin,o)})),c=yield aD(u);r.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:c})})}_subscribe(n,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[n]||(this.handlersMap[n]=new Set),this.handlersMap[n].add(r)}_unsubscribe(n,r){this.handlersMap[n]&&r&&this.handlersMap[n].delete(r),(!r||this.handlersMap[n].size===0)&&delete this.handlersMap[n],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}t.receivers=[];return t})();function jm(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}var Al=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,n,r=50){return d(this,null,function*(){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,u)=>{let c=jm("",20);i.port1.start();let l=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(h){let f=h;if(f.data.eventId===c)switch(f.data.status){case"ack":clearTimeout(l),s=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(f.data.response);break;default:clearTimeout(l),clearTimeout(s),u(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})})}};function st(){return window}function cD(t){st().location.href=t}function qm(){return typeof st().WorkerGlobalScope<"u"&&typeof st().importScripts=="function"}function lD(){return d(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function hD(){var t;return((t=navigator?.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function dD(){return qm()?self:null}var zm="firebaseLocalStorageDb",fD=1,Mo="firebaseLocalStorage",Gm="fbase_key",bn=class{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}};function Uo(t,e){return t.transaction([Mo],e?"readwrite":"readonly").objectStore(Mo)}function pD(){let t=indexedDB.deleteDatabase(zm);return new bn(t).toPromise()}function Sl(){let t=indexedDB.open(zm,fD);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{let r=t.result;try{r.createObjectStore(Mo,{keyPath:Gm})}catch(i){n(i)}}),t.addEventListener("success",()=>d(this,null,function*(){let r=t.result;r.objectStoreNames.contains(Mo)?e(r):(r.close(),yield pD(),e(yield Sl()))}))})}function lm(t,e,n){return d(this,null,function*(){let r=Uo(t,!0).put({[Gm]:e,value:n});return new bn(r).toPromise()})}function gD(t,e){return d(this,null,function*(){let n=Uo(t,!1).get(e),r=yield new bn(n).toPromise();return r===void 0?null:r.value})}function hm(t,e){let n=Uo(t,!0).delete(e);return new bn(n).toPromise()}var mD=800,yD=3,vD=(()=>{class t{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return d(this,null,function*(){return this.db?this.db:(this.db=yield Sl(),this.db)})}_withRetries(n){return d(this,null,function*(){let r=0;for(;;)try{let i=yield this._openDb();return yield n(i)}catch(i){if(r++>yD)throw i;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return d(this,null,function*(){return qm()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return d(this,null,function*(){this.receiver=uD._getInstance(dD()),this.receiver._subscribe("keyChanged",(n,r)=>d(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(r.key)}})),this.receiver._subscribe("ping",(n,r)=>d(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return d(this,null,function*(){var n,r;if(this.activeServiceWorker=yield lD(),!this.activeServiceWorker)return;this.sender=new Al(this.activeServiceWorker);let i=yield this.sender._send("ping",{},800);i&&!((n=i[0])===null||n===void 0)&&n.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(n){return d(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||hD()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:n},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return d(this,null,function*(){try{if(!indexedDB)return!1;let n=yield Sl();return yield lm(n,ko,"1"),yield hm(n,ko),!0}catch{}return!1})}_withPendingWrite(n){return d(this,null,function*(){this.pendingWrites++;try{yield n()}finally{this.pendingWrites--}})}_set(n,r){return d(this,null,function*(){return this._withPendingWrite(()=>d(this,null,function*(){return yield this._withRetries(i=>lm(i,n,r)),this.localCache[n]=r,this.notifyServiceWorker(n)}))})}_get(n){return d(this,null,function*(){let r=yield this._withRetries(i=>gD(i,n));return this.localCache[n]=r,r})}_remove(n){return d(this,null,function*(){return this._withPendingWrite(()=>d(this,null,function*(){return yield this._withRetries(r=>hm(r,n)),delete this.localCache[n],this.notifyServiceWorker(n)}))})}_poll(){return d(this,null,function*(){let n=yield this._withRetries(s=>{let o=Uo(s,!1).getAll();return new bn(o).toPromise()});if(!n)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(n.length!==0)for(let{fbase_key:s,value:o}of n)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),r.push(s));for(let s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),r.push(s));return r})}notifyListeners(n,r){this.localCache[n]=r;let i=this.listeners[n];if(i)for(let s of Array.from(i))s(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>d(this,null,function*(){return this._poll()}),mD)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(n,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[n]||(this.listeners[n]=new Set,this._get(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return t.type="LOCAL",t})(),Hm=vD;var LN=Mm("rcb"),VN=new Cn(3e4,6e4);function _D(t,e){return e?At(e):(S(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}var Bi=class extends Vi{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return hl(e,this._buildIdpRequest())}_linkToIdToken(e,n){return hl(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return hl(e,this._buildIdpRequest())}_buildIdpRequest(e){let n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}};function wD(t){return Um(t.auth,new Bi(t),t.bypassAuthState)}function ID(t){let{auth:e,user:n}=t;return S(n,e,"internal-error"),tD(n,new Bi(t),t.bypassAuthState)}function ED(t){return d(this,null,function*(){let{auth:e,user:n}=t;return S(n,e,"internal-error"),eD(n,new Bi(t),t.bypassAuthState)})}var Cl=class{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise((e,n)=>d(this,null,function*(){this.pendingPromise={resolve:e,reject:n};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}}))}onAuthEvent(e){return d(this,null,function*(){let{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}let u={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(a)(u))}catch(c){this.reject(c)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return wD;case"linkViaPopup":case"linkViaRedirect":return ED;case"reauthViaPopup":case"reauthViaRedirect":return ID;default:ot(this.auth,"internal-error")}}resolve(e){Ht(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ht(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var UN=new Cn(2e3,1e4);var TD="pendingRedirect",Do=new Map,bl=class t extends Cl{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}execute(){return d(this,null,function*(){let e=Do.get(this.auth._key());if(!e){try{let r=(yield DD(this.resolver,this.auth))?yield kt(t.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Do.set(this.auth._key(),e)}return this.bypassAuthState||Do.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return d(this,null,function*(){if(e.type==="signInViaRedirect")return kt(t.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let n=yield this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,kt(t.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return d(this,null,function*(){})}cleanUp(){}};function DD(t,e){return d(this,null,function*(){let n=CD(e),r=SD(t);if(!(yield r._isAvailable()))return!1;let i=(yield r._get(n))==="true";return yield r._remove(n),i})}function AD(t,e){Do.set(t._key(),e)}function SD(t){return At(t._redirectPersistence)}function CD(t){return To(TD,t.config.apiKey,t.name)}function bD(t,e,n=!1){return d(this,null,function*(){if(Qe(t.app))return Promise.reject(St(t));let r=Rn(t),i=_D(r,e),o=yield new bl(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,yield r._persistUserIfCurrent(o.user),yield r._setRedirectUser(null,e)),o})}var RD=10*60*1e3,Rl=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!PD(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!Wm(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Sn(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){let r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=RD&&this.cachedEventUids.clear(),this.cachedEventUids.has(dm(e))}saveEventToCache(e){this.cachedEventUids.add(dm(e)),this.lastProcessedEventTime=Date.now()}};function dm(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function Wm({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function PD(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Wm(t);default:return!1}}function ND(n){return d(this,arguments,function*(t,e={}){return Kt(t,"GET","/v1/projects",e)})}var OD=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,kD=/^https?/;function FD(t){return d(this,null,function*(){if(t.config.emulator)return;let{authorizedDomains:e}=yield ND(t);for(let n of e)try{if(MD(n))return}catch{}ot(t,"unauthorized-domain")})}function MD(t){let e=fl(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){let o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!kD.test(n))return!1;if(OD.test(t))return r===t;let i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var xD=new Cn(3e4,6e4);function fm(){let t=st().___jsl;if(t?.H){for(let e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function LD(t){return new Promise((e,n)=>{var r,i,s;function o(){fm(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{fm(),n(Sn(t,"network-request-failed"))},timeout:xD.get()})}if(!((i=(r=st().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=st().gapi)===null||s===void 0)&&s.load)o();else{let a=Mm("iframefcb");return st()[a]=()=>{gapi.load?o():n(Sn(t,"network-request-failed"))},Fm(`${$T()}?onload=${a}`).catch(u=>n(u))}}).catch(e=>{throw Ao=null,e})}var Ao=null;function VD(t){return Ao=Ao||LD(t),Ao}var UD=new Cn(5e3,15e3),BD="__/auth/iframe",$D="emulator/auth/iframe",jD={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},qD=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function zD(t){let e=t.config;S(e.authDomain,t,"auth-domain-config-required");let n=e.emulator?kl(e,$D):`https://${t.config.authDomain}/${BD}`,r={apiKey:e.apiKey,appName:t.name,v:zt},i=qD.get(t.config.apiHost);i&&(r.eid=i);let s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${Ri(r).slice(1)}`}function GD(t){return d(this,null,function*(){let e=yield VD(t),n=st().gapi;return S(n,t,"internal-error"),e.open({where:document.body,url:zD(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:jD,dontclear:!0},r=>new Promise((i,s)=>d(this,null,function*(){yield r.restyle({setHideOnLeave:!1});let o=Sn(t,"network-request-failed"),a=st().setTimeout(()=>{s(o)},UD.get());function u(){st().clearTimeout(a),i(r)}r.ping(u).then(u,()=>{s(o)})})))})}var HD={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},WD=500,KD=600,QD="_blank",YD="http://localhost",xo=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function JD(t,e,n,r=WD,i=KD){let s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),a="",u=Object.assign(Object.assign({},HD),{width:r.toString(),height:i.toString(),top:s,left:o}),c=oe().toLowerCase();n&&(a=Cm(c)?QD:n),Sm(c)&&(e=e||YD,u.scrollbars="yes");let l=Object.entries(u).reduce((f,[p,E])=>`${f}${p}=${E},`,"");if(FT(c)&&a!=="_self")return XD(e||"",a),new xo(null);let h=window.open(e||"",a,l);S(h,t,"popup-blocked");try{h.focus()}catch{}return new xo(h)}function XD(t,e){let n=document.createElement("a");n.href=t,n.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}var ZD="__/auth/handler",eA="emulator/auth/handler",tA=encodeURIComponent("fac");function pm(t,e,n,r,i,s){return d(this,null,function*(){S(t.config.authDomain,t,"auth-domain-config-required"),S(t.config.apiKey,t,"invalid-api-key");let o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:zt,eventId:i};if(e instanceof Oo){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",Bg(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(let[l,h]of Object.entries(s||{}))o[l]=h}if(e instanceof Tl){let l=e.getScopes().filter(h=>h!=="");l.length>0&&(o.scopes=l.join(","))}t.tenantId&&(o.tid=t.tenantId);let a=o;for(let l of Object.keys(a))a[l]===void 0&&delete a[l];let u=yield t._getAppCheckToken(),c=u?`#${tA}=${encodeURIComponent(u)}`:"";return`${nA(t)}?${Ri(a).slice(1)}${c}`})}function nA({config:t}){return t.emulator?kl(t,eA):`https://${t.authDomain}/${ZD}`}var dl="webStorageSupport",Pl=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Hl,this._completeRedirectFn=bD,this._overrideRedirectResult=AD}_openPopup(e,n,r,i){return d(this,null,function*(){var s;Ht((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");let o=yield pm(e,n,r,fl(),i);return JD(e,o,jm())})}_openRedirect(e,n,r,i){return d(this,null,function*(){yield this._originValidation(e);let s=yield pm(e,n,r,fl(),i);return cD(s),new Promise(()=>{})})}_initialize(e){let n=e._key();if(this.eventManagers[n]){let{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(Ht(s,"If manager is not set, promise should be"),s)}let r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}initAndGetManager(e){return d(this,null,function*(){let n=yield GD(e),r=new Rl(e);return n.register("authEvent",i=>(S(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r})}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(dl,{type:dl},i=>{var s;let o=(s=i?.[0])===null||s===void 0?void 0:s[dl];o!==void 0&&n(!!o),ot(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=FD(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return Om()||Ll()||Lo()}},Km=Pl;var gm="@firebase/auth",mm="1.7.2";var Nl=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return d(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){S(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function rA(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function iA(t){qt(new qe("auth",(e,{options:n})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;S(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});let u={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:km(t)},c=new wl(r,i,s,u);return zT(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),qt(new qe("auth-internal",e=>{let n=Rn(e.getProvider("auth").getImmediate());return(r=>new Nl(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),ae(gm,mm,rA(t)),ae(gm,mm,"esm2017")}var sA=5*60,oA=Gc("authIdTokenMaxAge")||sA,ym=null,aA=t=>e=>d(void 0,null,function*(){let n=e&&(yield e.getIdTokenResult()),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>oA)return;let i=n?.token;ym!==i&&(ym=i,yield fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});function Wl(t=pr()){let e=Oi(t,"auth");if(e.isInitialized())return e.getImmediate();let n=Vl(t,{popupRedirectResolver:Km,persistence:[Hm,$m,Hl]}),r=Gc("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let s=new URL(r,location.origin);if(location.origin===s.origin){let o=aA(s.toString());zl(n,o,()=>o(n.currentUser)),ql(n,a=>o(a))}}let i=qc("auth");return i&&Ul(n,`http://${i}`),n}function uA(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}UT({loadJS(t){return new Promise((e,n)=>{let r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{let s=Sn("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",uA().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});iA("Browser");var Qm="auth",ji=class{constructor(e){return e}},qi=class{constructor(){return ki(Qm)}};var Kl=new W("angularfire2.auth-instances");function XA(t,e){let n=_o(Qm,t,e);return n&&new ji(n)}function ZA(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new ji(r)}}var eS={provide:qi,deps:[[new Re,Kl]]},tS={provide:ji,useFactory:XA,deps:[[new Re,Kl],Tt]},nS=(()=>{class t{constructor(){ae("angularfire",Dn.full,"auth")}static \u0275fac=function(r){return new(r||t)};static \u0275mod=We({type:t});static \u0275inj=He({providers:[tS,eS]})}return t})();function E1(t,...e){return{ngModule:nS,providers:[{provide:Kl,useFactory:ZA(t),multi:!0,deps:[ee,Ne,yr,An,[new Re,mr],...e]}]}}var T1=Ie($l,!0);var D1=Ie(Wl,!0);var A1=Ie(jl,!0);var S1=Ie(Gl,!0);var rS=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Je={},y,mh=mh||{},b=rS||self;function Zo(t){var e=typeof t;return e=e!="object"?e:t?Array.isArray(t)?"array":e:"null",e=="array"||e=="object"&&typeof t.length=="number"}function rs(t){var e=typeof t;return e=="object"&&t!=null||e=="function"}function iS(t){return Object.prototype.hasOwnProperty.call(t,Ql)&&t[Ql]||(t[Ql]=++sS)}var Ql="closure_uid_"+(1e9*Math.random()>>>0),sS=0;function oS(t,e,n){return t.call.apply(t.bind,arguments)}function aS(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),t.apply(e,i)}}return function(){return t.apply(e,arguments)}}function Ee(t,e,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?Ee=oS:Ee=aS,Ee.apply(null,arguments)}function Bo(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),t.apply(this,r)}}function he(t,e){function n(){}n.prototype=e.prototype,t.$=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.ac=function(r,i,s){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return e.prototype[i].apply(r,o)}}function Qt(){this.s=this.s,this.o=this.o}var uS=0;Qt.prototype.s=!1;Qt.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),uS!=0)&&iS(this)};Qt.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var uy=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(typeof t=="string")return typeof e!="string"||e.length!=1?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function yh(t){let e=t.length;if(0<e){let n=Array(e);for(let r=0;r<e;r++)n[r]=t[r];return n}return[]}function Ym(t,e){for(let n=1;n<arguments.length;n++){let r=arguments[n];if(Zo(r)){let i=t.length||0,s=r.length||0;t.length=i+s;for(let o=0;o<s;o++)t[i+o]=r[o]}else t.push(r)}}function Te(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}Te.prototype.h=function(){this.defaultPrevented=!0};var cS=function(){if(!b.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{let n=()=>{};b.addEventListener("test",n,e),b.removeEventListener("test",n,e)}catch{}return t}();function Qi(t){return/^[\s\xa0]*$/.test(t)}function ea(){var t=b.navigator;return t&&(t=t.userAgent)?t:""}function at(t){return ea().indexOf(t)!=-1}function vh(t){return vh[" "](t),t}vh[" "]=function(){};function lS(t,e){var n=XS;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}var hS=at("Opera"),Tr=at("Trident")||at("MSIE"),cy=at("Edge"),eh=cy||Tr,ly=at("Gecko")&&!(ea().toLowerCase().indexOf("webkit")!=-1&&!at("Edge"))&&!(at("Trident")||at("MSIE"))&&!at("Edge"),dS=ea().toLowerCase().indexOf("webkit")!=-1&&!at("Edge");function hy(){var t=b.document;return t?t.documentMode:void 0}var th;e:{if($o="",jo=function(){var t=ea();if(ly)return/rv:([^\);]+)(\)|;)/.exec(t);if(cy)return/Edge\/([\d\.]+)/.exec(t);if(Tr)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t);if(dS)return/WebKit\/(\S+)/.exec(t);if(hS)return/(?:Version)[ \/]?(\S+)/.exec(t)}(),jo&&($o=jo?jo[1]:""),Tr&&(qo=hy(),qo!=null&&qo>parseFloat($o))){th=String(qo);break e}th=$o}var $o,jo,qo,nh;b.document&&Tr?(Yl=hy(),nh=Yl||parseInt(th,10)||void 0):nh=void 0;var Yl,fS=nh;function Yi(t,e){if(Te.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(ly){e:{try{vh(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else n=="mouseover"?e=t.fromElement:n=="mouseout"&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=r.clientX!==void 0?r.clientX:r.pageX,this.clientY=r.clientY!==void 0?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=t.clientX!==void 0?t.clientX:t.pageX,this.clientY=t.clientY!==void 0?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=typeof t.pointerType=="string"?t.pointerType:pS[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&Yi.$.h.call(this)}}he(Yi,Te);var pS={2:"touch",3:"pen",4:"mouse"};Yi.prototype.h=function(){Yi.$.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var is="closure_listenable_"+(1e6*Math.random()|0),gS=0;function mS(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.la=i,this.key=++gS,this.fa=this.ia=!1}function ta(t){t.fa=!0,t.listener=null,t.proxy=null,t.src=null,t.la=null}function _h(t,e,n){for(let r in t)e.call(n,t[r],r,t)}function yS(t,e){for(let n in t)e.call(void 0,t[n],n,t)}function dy(t){let e={};for(let n in t)e[n]=t[n];return e}var Jm="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function fy(t,e){let n,r;for(let i=1;i<arguments.length;i++){r=arguments[i];for(n in r)t[n]=r[n];for(let s=0;s<Jm.length;s++)n=Jm[s],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function na(t){this.src=t,this.g={},this.h=0}na.prototype.add=function(t,e,n,r,i){var s=t.toString();t=this.g[s],t||(t=this.g[s]=[],this.h++);var o=ih(t,e,r,i);return-1<o?(e=t[o],n||(e.ia=!1)):(e=new mS(e,this.src,s,!!r,i),e.ia=n,t.push(e)),e};function rh(t,e){var n=e.type;if(n in t.g){var r=t.g[n],i=uy(r,e),s;(s=0<=i)&&Array.prototype.splice.call(r,i,1),s&&(ta(e),t.g[n].length==0&&(delete t.g[n],t.h--))}}function ih(t,e,n,r){for(var i=0;i<t.length;++i){var s=t[i];if(!s.fa&&s.listener==e&&s.capture==!!n&&s.la==r)return i}return-1}var wh="closure_lm_"+(1e6*Math.random()|0),Jl={};function py(t,e,n,r,i){if(r&&r.once)return my(t,e,n,r,i);if(Array.isArray(e)){for(var s=0;s<e.length;s++)py(t,e[s],n,r,i);return null}return n=Th(n),t&&t[is]?t.O(e,n,rs(r)?!!r.capture:!!r,i):gy(t,e,n,!1,r,i)}function gy(t,e,n,r,i,s){if(!e)throw Error("Invalid event type");var o=rs(i)?!!i.capture:!!i,a=Eh(t);if(a||(t[wh]=a=new na(t)),n=a.add(e,n,r,o,s),n.proxy)return n;if(r=vS(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)cS||(i=o),i===void 0&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(vy(e.toString()),r);else if(t.addListener&&t.removeListener)t.addListener(r);else throw Error("addEventListener and attachEvent are unavailable.");return n}function vS(){function t(n){return e.call(t.src,t.listener,n)}let e=_S;return t}function my(t,e,n,r,i){if(Array.isArray(e)){for(var s=0;s<e.length;s++)my(t,e[s],n,r,i);return null}return n=Th(n),t&&t[is]?t.P(e,n,rs(r)?!!r.capture:!!r,i):gy(t,e,n,!0,r,i)}function yy(t,e,n,r,i){if(Array.isArray(e))for(var s=0;s<e.length;s++)yy(t,e[s],n,r,i);else r=rs(r)?!!r.capture:!!r,n=Th(n),t&&t[is]?(t=t.i,e=String(e).toString(),e in t.g&&(s=t.g[e],n=ih(s,n,r,i),-1<n&&(ta(s[n]),Array.prototype.splice.call(s,n,1),s.length==0&&(delete t.g[e],t.h--)))):t&&(t=Eh(t))&&(e=t.g[e.toString()],t=-1,e&&(t=ih(e,n,r,i)),(n=-1<t?e[t]:null)&&Ih(n))}function Ih(t){if(typeof t!="number"&&t&&!t.fa){var e=t.src;if(e&&e[is])rh(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(vy(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=Eh(e))?(rh(n,t),n.h==0&&(n.src=null,e[wh]=null)):ta(t)}}}function vy(t){return t in Jl?Jl[t]:Jl[t]="on"+t}function _S(t,e){if(t.fa)t=!0;else{e=new Yi(e,this);var n=t.listener,r=t.la||t.src;t.ia&&Ih(t),t=n.call(r,e)}return t}function Eh(t){return t=t[wh],t instanceof na?t:null}var Xl="__closure_events_fn_"+(1e9*Math.random()>>>0);function Th(t){return typeof t=="function"?t:(t[Xl]||(t[Xl]=function(e){return t.handleEvent(e)}),t[Xl])}function le(){Qt.call(this),this.i=new na(this),this.S=this,this.J=null}he(le,Qt);le.prototype[is]=!0;le.prototype.removeEventListener=function(t,e,n,r){yy(this,t,e,n,r)};function ge(t,e){var n,r=t.J;if(r)for(n=[];r;r=r.J)n.push(r);if(t=t.S,r=e.type||e,typeof e=="string")e=new Te(e,t);else if(e instanceof Te)e.target=e.target||t;else{var i=e;e=new Te(r,t),fy(e,i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=e.g=n[s];i=zo(o,r,!0,e)&&i}if(o=e.g=t,i=zo(o,r,!0,e)&&i,i=zo(o,r,!1,e)&&i,n)for(s=0;s<n.length;s++)o=e.g=n[s],i=zo(o,r,!1,e)&&i}le.prototype.N=function(){if(le.$.N.call(this),this.i){var t=this.i,e;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)ta(n[r]);delete t.g[e],t.h--}}this.J=null};le.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)};le.prototype.P=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};function zo(t,e,n,r){if(e=t.i.g[String(e)],!e)return!0;e=e.concat();for(var i=!0,s=0;s<e.length;++s){var o=e[s];if(o&&!o.fa&&o.capture==n){var a=o.listener,u=o.la||o.src;o.ia&&rh(t.i,o),i=a.call(u,r)!==!1&&i}}return i&&!r.defaultPrevented}var Dh=b.JSON.stringify,sh=class{constructor(e,n){this.i=e,this.j=n,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}};function wS(){var t=Ah;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}var oh=class{constructor(){this.h=this.g=null}add(e,n){let r=_y.get();r.set(e,n),this.h?this.h.next=r:this.g=r,this.h=r}},_y=new sh(()=>new ah,t=>t.reset()),ah=class{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}};function IS(t){var e=1;t=t.split(":");let n=[];for(;0<e&&t.length;)n.push(t.shift()),e--;return t.length&&n.push(t.join(":")),n}function ES(t){b.setTimeout(()=>{throw t},0)}var Ji,Xi=!1,Ah=new oh,wy=()=>{let t=b.Promise.resolve(void 0);Ji=()=>{t.then(TS)}},TS=()=>{for(var t;t=wS();){try{t.h.call(t.g)}catch(n){ES(n)}var e=_y;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}Xi=!1};function ra(t,e){le.call(this),this.h=t||1,this.g=e||b,this.j=Ee(this.qb,this),this.l=Date.now()}he(ra,le);y=ra.prototype;y.ga=!1;y.T=null;y.qb=function(){if(this.ga){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-t):(this.T&&(this.g.clearTimeout(this.T),this.T=null),ge(this,"tick"),this.ga&&(Sh(this),this.start()))}};y.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function Sh(t){t.ga=!1,t.T&&(t.g.clearTimeout(t.T),t.T=null)}y.N=function(){ra.$.N.call(this),Sh(this),delete this.g};function Ch(t,e,n){if(typeof t=="function")n&&(t=Ee(t,n));else if(t&&typeof t.handleEvent=="function")t=Ee(t.handleEvent,t);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:b.setTimeout(t,e||0)}function Iy(t){t.g=Ch(()=>{t.g=null,t.i&&(t.i=!1,Iy(t))},t.j);let e=t.h;t.h=null,t.m.apply(null,e)}var uh=class extends Qt{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Iy(this)}N(){super.N(),this.g&&(b.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}};function Zi(t){Qt.call(this),this.h=t,this.g={}}he(Zi,Qt);var Xm=[];function Ey(t,e,n,r){Array.isArray(n)||(n&&(Xm[0]=n.toString()),n=Xm);for(var i=0;i<n.length;i++){var s=py(e,n[i],r||t.handleEvent,!1,t.h||t);if(!s)break;t.g[s.key]=s}}function Ty(t){_h(t.g,function(e,n){this.g.hasOwnProperty(n)&&Ih(e)},t),t.g={}}Zi.prototype.N=function(){Zi.$.N.call(this),Ty(this)};Zi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function ia(){this.g=!0}ia.prototype.Ea=function(){this.g=!1};function DS(t,e,n,r,i,s){t.info(function(){if(t.g)if(s)for(var o="",a=s.split("&"),u=0;u<a.length;u++){var c=a[u].split("=");if(1<c.length){var l=c[0];c=c[1];var h=l.split("_");o=2<=h.length&&h[1]=="type"?o+(l+"="+c+"&"):o+(l+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+`
`+n+`
`+o})}function AS(t,e,n,r,i,s,o){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+`
`+n+`
`+s+" "+o})}function Ir(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+CS(t,n)+(r?" "+r:"")})}function SS(t,e){t.info(function(){return"TIMEOUT: "+e})}ia.prototype.info=function(){};function CS(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n){for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if(s!="noop"&&s!="stop"&&s!="close")for(var o=1;o<i.length;o++)i[o]=""}}}}return Dh(n)}catch{return e}}var kn={},Zm=null;function sa(){return Zm=Zm||new le}kn.Ta="serverreachability";function Dy(t){Te.call(this,kn.Ta,t)}he(Dy,Te);function es(t){let e=sa();ge(e,new Dy(e))}kn.STAT_EVENT="statevent";function Ay(t,e){Te.call(this,kn.STAT_EVENT,t),this.stat=e}he(Ay,Te);function Ce(t){let e=sa();ge(e,new Ay(e,t))}kn.Ua="timingevent";function Sy(t,e){Te.call(this,kn.Ua,t),this.size=e}he(Sy,Te);function ss(t,e){if(typeof t!="function")throw Error("Fn must not be null and must be a function");return b.setTimeout(function(){t()},e)}var oa={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},Cy={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function bh(){}bh.prototype.h=null;function ey(t){return t.h||(t.h=t.i())}function by(){}var os={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function Rh(){Te.call(this,"d")}he(Rh,Te);function Ph(){Te.call(this,"c")}he(Ph,Te);var ch;function aa(){}he(aa,bh);aa.prototype.g=function(){return new XMLHttpRequest};aa.prototype.i=function(){return{}};ch=new aa;function as(t,e,n,r){this.l=t,this.j=e,this.m=n,this.W=r||1,this.U=new Zi(this),this.P=bS,t=eh?125:void 0,this.V=new ra(t),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new Ry}function Ry(){this.i=null,this.g="",this.h=!1}var bS=45e3,Py={},lh={};y=as.prototype;y.setTimeout=function(t){this.P=t};function hh(t,e,n){t.L=1,t.A=ca(bt(e)),t.u=n,t.S=!0,Ny(t,null)}function Ny(t,e){t.G=Date.now(),us(t),t.B=bt(t.A);var n=t.B,r=t.W;Array.isArray(r)||(r=[String(r)]),Uy(n.i,"t",r),t.o=0,n=t.l.J,t.h=new Ry,t.g=ov(t.l,n?e:null,!t.u),0<t.O&&(t.M=new uh(Ee(t.Pa,t,t.g),t.O)),Ey(t.U,t.g,"readystatechange",t.nb),e=t.I?dy(t.I):{},t.u?(t.v||(t.v="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ha(t.B,t.v,t.u,e)):(t.v="GET",t.g.ha(t.B,t.v,null,e)),es(),DS(t.j,t.v,t.B,t.m,t.W,t.u)}y.nb=function(t){t=t.target;let e=this.M;e&&ut(t)==3?e.l():this.Pa(t)};y.Pa=function(t){try{if(t==this.g)e:{let l=ut(this.g);var e=this.g.Ia();let h=this.g.da();if(!(3>l)&&(l!=3||eh||this.g&&(this.h.h||this.g.ja()||iy(this.g)))){this.J||l!=4||e==7||(e==8||0>=h?es(3):es(2)),ua(this);var n=this.g.da();this.ca=n;t:if(Oy(this)){var r=iy(this.g);t="";var i=r.length,s=ut(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Pn(this),Ki(this);var o="";break t}this.h.i=new b.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,t+=this.h.i.decode(r[e],{stream:s&&e==i-1});r.length=0,this.h.g+=t,this.o=0,o=this.h.g}else o=this.g.ja();if(this.i=n==200,AS(this.j,this.v,this.B,this.m,this.W,l,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,u=this.g;if((a=u.g?u.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Qi(a)){var c=a;break t}}c=null}if(n=c)Ir(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,dh(this,n);else{this.i=!1,this.s=3,Ce(12),Pn(this),Ki(this);break e}}this.S?(ky(this,l,o),eh&&this.i&&l==3&&(Ey(this.U,this.V,"tick",this.mb),this.V.start())):(Ir(this.j,this.m,o,null),dh(this,o)),l==4&&Pn(this),this.i&&!this.J&&(l==4?nv(this.l,this):(this.i=!1,us(this)))}else QS(this.g),n==400&&0<o.indexOf("Unknown SID")?(this.s=3,Ce(12)):(this.s=0,Ce(13)),Pn(this),Ki(this)}}}catch{}finally{}};function Oy(t){return t.g?t.v=="GET"&&t.L!=2&&t.l.Ha:!1}function ky(t,e,n){let r=!0,i;for(;!t.J&&t.o<n.length;)if(i=RS(t,n),i==lh){e==4&&(t.s=4,Ce(14),r=!1),Ir(t.j,t.m,null,"[Incomplete Response]");break}else if(i==Py){t.s=4,Ce(15),Ir(t.j,t.m,n,"[Invalid Chunk]"),r=!1;break}else Ir(t.j,t.m,i,null),dh(t,i);Oy(t)&&t.o!=0&&(t.h.g=t.h.g.slice(t.o),t.o=0),e!=4||n.length!=0||t.h.h||(t.s=1,Ce(16),r=!1),t.i=t.i&&r,r?0<n.length&&!t.ba&&(t.ba=!0,e=t.l,e.g==t&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),xh(e),e.M=!0,Ce(11))):(Ir(t.j,t.m,n,"[Invalid Chunked Response]"),Pn(t),Ki(t))}y.mb=function(){if(this.g){var t=ut(this.g),e=this.g.ja();this.o<e.length&&(ua(this),ky(this,t,e),this.i&&t!=4&&us(this))}};function RS(t,e){var n=t.o,r=e.indexOf(`
`,n);return r==-1?lh:(n=Number(e.substring(n,r)),isNaN(n)?Py:(r+=1,r+n>e.length?lh:(e=e.slice(r,r+n),t.o=r+n,e)))}y.cancel=function(){this.J=!0,Pn(this)};function us(t){t.Y=Date.now()+t.P,Fy(t,t.P)}function Fy(t,e){if(t.C!=null)throw Error("WatchDog timer not null");t.C=ss(Ee(t.lb,t),e)}function ua(t){t.C&&(b.clearTimeout(t.C),t.C=null)}y.lb=function(){this.C=null;let t=Date.now();0<=t-this.Y?(SS(this.j,this.B),this.L!=2&&(es(),Ce(17)),Pn(this),this.s=2,Ki(this)):Fy(this,this.Y-t)};function Ki(t){t.l.H==0||t.J||nv(t.l,t)}function Pn(t){ua(t);var e=t.M;e&&typeof e.sa=="function"&&e.sa(),t.M=null,Sh(t.V),Ty(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.sa())}function dh(t,e){try{var n=t.l;if(n.H!=0&&(n.g==t||fh(n.i,t))){if(!t.K&&fh(n.i,t)&&n.H==3){try{var r=n.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&r.length==3){var i=r;if(i[0]==0){e:if(!n.u){if(n.g)if(n.g.G+3e3<t.G)Qo(n),da(n);else break e;Mh(n),Ce(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&n.A==0&&!n.v&&(n.v=ss(Ee(n.ib,n),6e3));if(1>=jy(n.i)&&n.oa){try{n.oa()}catch{}n.oa=void 0}}else Nn(n,11)}else if((t.K||n.g==t)&&Qo(n),!Qi(e))for(i=n.Ja.g.parse(e),e=0;e<i.length;e++){let c=i[e];if(n.V=c[0],c=c[1],n.H==2)if(c[0]=="c"){n.K=c[1],n.pa=c[2];let l=c[3];l!=null&&(n.ra=l,n.l.info("VER="+n.ra));let h=c[4];h!=null&&(n.Ga=h,n.l.info("SVER="+n.Ga));let f=c[5];f!=null&&typeof f=="number"&&0<f&&(r=1.5*f,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;let p=t.g;if(p){let E=p.g?p.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(E){var s=r.i;s.g||E.indexOf("spdy")==-1&&E.indexOf("quic")==-1&&E.indexOf("h2")==-1||(s.j=s.l,s.g=new Set,s.h&&(Nh(s,s.h),s.h=null))}if(r.F){let T=p.g?p.g.getResponseHeader("X-HTTP-Session-Id"):null;T&&(r.Da=T,G(r.I,r.F,T))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-t.G,n.l.info("Handshake RTT: "+n.S+"ms")),r=n;var o=t;if(r.wa=sv(r,r.J?r.pa:null,r.Y),o.K){qy(r.i,o);var a=o,u=r.L;u&&a.setTimeout(u),a.C&&(ua(a),us(a)),r.g=o}else ev(r);0<n.j.length&&fa(n)}else c[0]!="stop"&&c[0]!="close"||Nn(n,7);else n.H==3&&(c[0]=="stop"||c[0]=="close"?c[0]=="stop"?Nn(n,7):Fh(n):c[0]!="noop"&&n.h&&n.h.Aa(c),n.A=0)}}es(4)}catch{}}function PS(t){if(t.Z&&typeof t.Z=="function")return t.Z();if(typeof Map<"u"&&t instanceof Map||typeof Set<"u"&&t instanceof Set)return Array.from(t.values());if(typeof t=="string")return t.split("");if(Zo(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}e=[],n=0;for(r in t)e[n++]=t[r];return e}function NS(t){if(t.ta&&typeof t.ta=="function")return t.ta();if(!t.Z||typeof t.Z!="function"){if(typeof Map<"u"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set<"u"&&t instanceof Set)){if(Zo(t)||typeof t=="string"){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(let r in t)e[n++]=r;return e}}}function My(t,e){if(t.forEach&&typeof t.forEach=="function")t.forEach(e,void 0);else if(Zo(t)||typeof t=="string")Array.prototype.forEach.call(t,e,void 0);else for(var n=NS(t),r=PS(t),i=r.length,s=0;s<i;s++)e.call(void 0,r[s],n&&n[s],t)}var xy=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function OS(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var s=t[n].substring(0,r);i=t[n].substring(r+1)}else s=t[n];e(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}function On(t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof On){this.h=t.h,Wo(this,t.j),this.s=t.s,this.g=t.g,Ko(this,t.m),this.l=t.l;var e=t.i,n=new ts;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),ty(this,n),this.o=t.o}else t&&(e=String(t).match(xy))?(this.h=!1,Wo(this,e[1]||"",!0),this.s=Hi(e[2]||""),this.g=Hi(e[3]||"",!0),Ko(this,e[4]),this.l=Hi(e[5]||"",!0),ty(this,e[6]||"",!0),this.o=Hi(e[7]||"")):(this.h=!1,this.i=new ts(null,this.h))}On.prototype.toString=function(){var t=[],e=this.j;e&&t.push(Wi(e,ny,!0),":");var n=this.g;return(n||e=="file")&&(t.push("//"),(e=this.s)&&t.push(Wi(e,ny,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&t.push(":",String(n))),(n=this.l)&&(this.g&&n.charAt(0)!="/"&&t.push("/"),t.push(Wi(n,n.charAt(0)=="/"?MS:FS,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",Wi(n,LS)),t.join("")};function bt(t){return new On(t)}function Wo(t,e,n){t.j=n?Hi(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function Ko(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function ty(t,e,n){e instanceof ts?(t.i=e,VS(t.i,t.h)):(n||(e=Wi(e,xS)),t.i=new ts(e,t.h))}function G(t,e,n){t.i.set(e,n)}function ca(t){return G(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function Hi(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Wi(t,e,n){return typeof t=="string"?(t=encodeURI(t).replace(e,kS),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function kS(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}var ny=/[#\/\?@]/g,FS=/[#\?:]/g,MS=/[#\?]/g,xS=/[#\?@]/g,LS=/#/g;function ts(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function Yt(t){t.g||(t.g=new Map,t.h=0,t.i&&OS(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}y=ts.prototype;y.add=function(t,e){Yt(this),this.i=null,t=Dr(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this};function Ly(t,e){Yt(t),e=Dr(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function Vy(t,e){return Yt(t),e=Dr(t,e),t.g.has(e)}y.forEach=function(t,e){Yt(this),this.g.forEach(function(n,r){n.forEach(function(i){t.call(e,i,r,this)},this)},this)};y.ta=function(){Yt(this);let t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let r=0;r<e.length;r++){let i=t[r];for(let s=0;s<i.length;s++)n.push(e[r])}return n};y.Z=function(t){Yt(this);let e=[];if(typeof t=="string")Vy(this,t)&&(e=e.concat(this.g.get(Dr(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e};y.set=function(t,e){return Yt(this),this.i=null,t=Dr(this,t),Vy(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this};y.get=function(t,e){return t?(t=this.Z(t),0<t.length?String(t[0]):e):e};function Uy(t,e,n){Ly(t,e),0<n.length&&(t.i=null,t.g.set(Dr(t,e),yh(n)),t.h+=n.length)}y.toString=function(){if(this.i)return this.i;if(!this.g)return"";let t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var r=e[n];let s=encodeURIComponent(String(r)),o=this.Z(r);for(r=0;r<o.length;r++){var i=s;o[r]!==""&&(i+="="+encodeURIComponent(String(o[r]))),t.push(i)}}return this.i=t.join("&")};function Dr(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function VS(t,e){e&&!t.j&&(Yt(t),t.i=null,t.g.forEach(function(n,r){var i=r.toLowerCase();r!=i&&(Ly(this,r),Uy(this,i,n))},t)),t.j=e}var US=class{constructor(t,e){this.g=t,this.map=e}};function By(t){this.l=t||BS,b.PerformanceNavigationTiming?(t=b.performance.getEntriesByType("navigation"),t=0<t.length&&(t[0].nextHopProtocol=="hq"||t[0].nextHopProtocol=="h2")):t=!!(b.g&&b.g.Ka&&b.g.Ka()&&b.g.Ka().dc),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var BS=10;function $y(t){return t.h?!0:t.g?t.g.size>=t.j:!1}function jy(t){return t.h?1:t.g?t.g.size:0}function fh(t,e){return t.h?t.h==e:t.g?t.g.has(e):!1}function Nh(t,e){t.g?t.g.add(e):t.h=e}function qy(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}By.prototype.cancel=function(){if(this.i=zy(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let t of this.g.values())t.cancel();this.g.clear()}};function zy(t){if(t.h!=null)return t.i.concat(t.h.F);if(t.g!=null&&t.g.size!==0){let e=t.i;for(let n of t.g.values())e=e.concat(n.F);return e}return yh(t.i)}var $S=class{stringify(t){return b.JSON.stringify(t,void 0)}parse(t){return b.JSON.parse(t,void 0)}};function jS(){this.g=new $S}function qS(t,e,n){let r=n||"";try{My(t,function(i,s){let o=i;rs(i)&&(o=Dh(i)),e.push(r+s+"="+encodeURIComponent(o))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function zS(t,e){let n=new ia;if(b.Image){let r=new Image;r.onload=Bo(Go,n,r,"TestLoadImage: loaded",!0,e),r.onerror=Bo(Go,n,r,"TestLoadImage: error",!1,e),r.onabort=Bo(Go,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=Bo(Go,n,r,"TestLoadImage: timeout",!1,e),b.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}function Go(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function cs(t){this.l=t.ec||null,this.j=t.ob||!1}he(cs,bh);cs.prototype.g=function(){return new la(this.l,this.j)};cs.prototype.i=function(t){return function(){return t}}({});function la(t,e){le.call(this),this.F=t,this.u=e,this.m=void 0,this.readyState=Oh,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}he(la,le);var Oh=0;y=la.prototype;y.open=function(t,e){if(this.readyState!=Oh)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,ns(this)};y.send=function(t){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.F||b).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))};y.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ls(this)),this.readyState=Oh};y.$a=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,ns(this)),this.g&&(this.readyState=3,ns(this),this.g)))if(this.responseType==="arraybuffer")t.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof b.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Gy(this)}else t.text().then(this.Za.bind(this),this.ka.bind(this))};function Gy(t){t.j.read().then(t.Xa.bind(t)).catch(t.ka.bind(t))}y.Xa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?ls(this):ns(this),this.readyState==3&&Gy(this)}};y.Za=function(t){this.g&&(this.response=this.responseText=t,ls(this))};y.Ya=function(t){this.g&&(this.response=t,ls(this))};y.ka=function(){this.g&&ls(this)};function ls(t){t.readyState=4,t.l=null,t.j=null,t.A=null,ns(t)}y.setRequestHeader=function(t,e){this.v.append(t,e)};y.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""};y.getAllResponseHeaders=function(){if(!this.h)return"";let t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join(`\r
`)};function ns(t){t.onreadystatechange&&t.onreadystatechange.call(t)}Object.defineProperty(la.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(t){this.m=t?"include":"same-origin"}});var GS=b.JSON.parse;function Y(t){le.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=Hy,this.L=this.M=!1}he(Y,le);var Hy="",HS=/^https?$/i,WS=["POST","PUT"];y=Y.prototype;y.Oa=function(t){this.M=t};y.ha=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+t);e=e?e.toUpperCase():"GET",this.I=t,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():ch.g(),this.C=this.u?ey(this.u):ey(ch),this.g.onreadystatechange=Ee(this.La,this);try{this.G=!0,this.g.open(e,String(t),!0),this.G=!1}catch(s){ry(this,s);return}if(t=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else if(typeof r.keys=="function"&&typeof r.get=="function")for(let s of r.keys())n.set(s,r.get(s));else throw Error("Unknown input type for opt_headers: "+String(r));r=Array.from(n.keys()).find(s=>s.toLowerCase()=="content-type"),i=b.FormData&&t instanceof b.FormData,!(0<=uy(WS,e))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[s,o]of n)this.g.setRequestHeader(s,o);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{Qy(this),0<this.B&&((this.L=KS(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Ee(this.ua,this)):this.A=Ch(this.ua,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(s){ry(this,s)}};function KS(t){return Tr&&typeof t.timeout=="number"&&t.ontimeout!==void 0}y.ua=function(){typeof mh<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,ge(this,"timeout"),this.abort(8))};function ry(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,Wy(t),ha(t)}function Wy(t){t.F||(t.F=!0,ge(t,"complete"),ge(t,"error"))}y.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,ge(this,"complete"),ge(this,"abort"),ha(this))};y.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),ha(this,!0)),Y.$.N.call(this)};y.La=function(){this.s||(this.G||this.v||this.l?Ky(this):this.kb())};y.kb=function(){Ky(this)};function Ky(t){if(t.h&&typeof mh<"u"&&(!t.C[1]||ut(t)!=4||t.da()!=2)){if(t.v&&ut(t)==4)Ch(t.La,0,t);else if(ge(t,"readystatechange"),ut(t)==4){t.h=!1;try{let o=t.da();e:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var r;if(r=o===0){var i=String(t.I).match(xy)[1]||null;!i&&b.self&&b.self.location&&(i=b.self.location.protocol.slice(0,-1)),r=!HS.test(i?i.toLowerCase():"")}n=r}if(n)ge(t,"complete"),ge(t,"success");else{t.m=6;try{var s=2<ut(t)?t.g.statusText:""}catch{s=""}t.j=s+" ["+t.da()+"]",Wy(t)}}finally{ha(t)}}}}function ha(t,e){if(t.g){Qy(t);let n=t.g,r=t.C[0]?()=>{}:null;t.g=null,t.C=null,e||ge(t,"ready");try{n.onreadystatechange=r}catch{}}}function Qy(t){t.g&&t.L&&(t.g.ontimeout=null),t.A&&(b.clearTimeout(t.A),t.A=null)}y.isActive=function(){return!!this.g};function ut(t){return t.g?t.g.readyState:0}y.da=function(){try{return 2<ut(this)?this.g.status:-1}catch{return-1}};y.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}};y.Wa=function(t){if(this.g){var e=this.g.responseText;return t&&e.indexOf(t)==0&&(e=e.substring(t.length)),GS(e)}};function iy(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.K){case Hy:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}function QS(t){let e={};t=(t.g&&2<=ut(t)&&t.g.getAllResponseHeaders()||"").split(`\r
`);for(let r=0;r<t.length;r++){if(Qi(t[r]))continue;var n=IS(t[r]);let i=n[0];if(n=n[1],typeof n!="string")continue;n=n.trim();let s=e[i]||[];e[i]=s,s.push(n)}yS(e,function(r){return r.join(", ")})}y.Ia=function(){return this.m};y.Sa=function(){return typeof this.j=="string"?this.j:String(this.j)};function Yy(t){let e="";return _h(t,function(n,r){e+=r,e+=":",e+=n,e+=`\r
`}),e}function kh(t,e,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Yy(n),typeof t=="string"?n!=null&&encodeURIComponent(String(n)):G(t,e,n))}function zi(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function Jy(t){this.Ga=0,this.j=[],this.l=new ia,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=zi("failFast",!1,t),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=zi("baseRetryDelayMs",5e3,t),this.hb=zi("retryDelaySeedMs",1e4,t),this.eb=zi("forwardChannelMaxRetries",2,t),this.xa=zi("forwardChannelRequestTimeoutMs",2e4,t),this.va=t&&t.xmlHttpFactory||void 0,this.Ha=t&&t.useFetchStreams||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.i=new By(t&&t.concurrentRequestLimit),this.Ja=new jS,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=t&&t.bc||!1,t&&t.Ea&&this.l.Ea(),t&&t.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&t&&t.detectBufferingProxy||!1,this.qa=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.qa=t.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}y=Jy.prototype;y.ra=8;y.H=1;function Fh(t){if(Xy(t),t.H==3){var e=t.W++,n=bt(t.I);if(G(n,"SID",t.K),G(n,"RID",e),G(n,"TYPE","terminate"),hs(t,n),e=new as(t,t.l,e),e.L=2,e.A=ca(bt(n)),n=!1,b.navigator&&b.navigator.sendBeacon)try{n=b.navigator.sendBeacon(e.A.toString(),"")}catch{}!n&&b.Image&&(new Image().src=e.A,n=!0),n||(e.g=ov(e.l,null),e.g.ha(e.A)),e.G=Date.now(),us(e)}iv(t)}function da(t){t.g&&(xh(t),t.g.cancel(),t.g=null)}function Xy(t){da(t),t.u&&(b.clearTimeout(t.u),t.u=null),Qo(t),t.i.cancel(),t.m&&(typeof t.m=="number"&&b.clearTimeout(t.m),t.m=null)}function fa(t){if(!$y(t.i)&&!t.m){t.m=!0;var e=t.Na;Ji||wy(),Xi||(Ji(),Xi=!0),Ah.add(e,t),t.C=0}}function YS(t,e){return jy(t.i)>=t.i.j-(t.m?1:0)?!1:t.m?(t.j=e.F.concat(t.j),!0):t.H==1||t.H==2||t.C>=(t.cb?0:t.eb)?!1:(t.m=ss(Ee(t.Na,t,e),rv(t,t.C)),t.C++,!0)}y.Na=function(t){if(this.m)if(this.m=null,this.H==1){if(!t){this.W=Math.floor(1e5*Math.random()),t=this.W++;let i=new as(this,this.l,t),s=this.s;if(this.U&&(s?(s=dy(s),fy(s,this.U)):s=this.U),this.o!==null||this.O||(i.I=s,s=null),this.P)e:{for(var e=0,n=0;n<this.j.length;n++){t:{var r=this.j[n];if("__data__"in r.map&&(r=r.map.__data__,typeof r=="string")){r=r.length;break t}r=void 0}if(r===void 0)break;if(e+=r,4096<e){e=n;break e}if(e===4096||n===this.j.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=Zy(this,i,e),n=bt(this.I),G(n,"RID",t),G(n,"CVER",22),this.F&&G(n,"X-HTTP-Session-Id",this.F),hs(this,n),s&&(this.O?e="headers="+encodeURIComponent(String(Yy(s)))+"&"+e:this.o&&kh(n,this.o,s)),Nh(this.i,i),this.bb&&G(n,"TYPE","init"),this.P?(G(n,"$req",e),G(n,"SID","null"),i.aa=!0,hh(i,n,null)):hh(i,n,e),this.H=2}}else this.H==3&&(t?sy(this,t):this.j.length==0||$y(this.i)||sy(this))};function sy(t,e){var n;e?n=e.m:n=t.W++;let r=bt(t.I);G(r,"SID",t.K),G(r,"RID",n),G(r,"AID",t.V),hs(t,r),t.o&&t.s&&kh(r,t.o,t.s),n=new as(t,t.l,n,t.C+1),t.o===null&&(n.I=t.s),e&&(t.j=e.F.concat(t.j)),e=Zy(t,n,1e3),n.setTimeout(Math.round(.5*t.xa)+Math.round(.5*t.xa*Math.random())),Nh(t.i,n),hh(n,r,e)}function hs(t,e){t.na&&_h(t.na,function(n,r){G(e,r,n)}),t.h&&My({},function(n,r){G(e,r,n)})}function Zy(t,e,n){n=Math.min(t.j.length,n);var r=t.h?Ee(t.h.Va,t.h,t):null;e:{var i=t.j;let s=-1;for(;;){let o=["count="+n];s==-1?0<n?(s=i[0].g,o.push("ofs="+s)):s=0:o.push("ofs="+s);let a=!0;for(let u=0;u<n;u++){let c=i[u].g,l=i[u].map;if(c-=s,0>c)s=Math.max(0,i[u].g-100),a=!1;else try{qS(l,o,"req"+c+"_")}catch{r&&r(l)}}if(a){r=o.join("&");break e}}}return t=t.j.splice(0,n),e.F=t,r}function ev(t){if(!t.g&&!t.u){t.ba=1;var e=t.Ma;Ji||wy(),Xi||(Ji(),Xi=!0),Ah.add(e,t),t.A=0}}function Mh(t){return t.g||t.u||3<=t.A?!1:(t.ba++,t.u=ss(Ee(t.Ma,t),rv(t,t.A)),t.A++,!0)}y.Ma=function(){if(this.u=null,tv(this),this.ca&&!(this.M||this.g==null||0>=this.S)){var t=2*this.S;this.l.info("BP detection timer enabled: "+t),this.B=ss(Ee(this.jb,this),t)}};y.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Ce(10),da(this),tv(this))};function xh(t){t.B!=null&&(b.clearTimeout(t.B),t.B=null)}function tv(t){t.g=new as(t,t.l,"rpc",t.ba),t.o===null&&(t.g.I=t.s),t.g.O=0;var e=bt(t.wa);G(e,"RID","rpc"),G(e,"SID",t.K),G(e,"AID",t.V),G(e,"CI",t.G?"0":"1"),!t.G&&t.qa&&G(e,"TO",t.qa),G(e,"TYPE","xmlhttp"),hs(t,e),t.o&&t.s&&kh(e,t.o,t.s),t.L&&t.g.setTimeout(t.L);var n=t.g;t=t.pa,n.L=1,n.A=ca(bt(e)),n.u=null,n.S=!0,Ny(n,t)}y.ib=function(){this.v!=null&&(this.v=null,da(this),Mh(this),Ce(19))};function Qo(t){t.v!=null&&(b.clearTimeout(t.v),t.v=null)}function nv(t,e){var n=null;if(t.g==e){Qo(t),xh(t),t.g=null;var r=2}else if(fh(t.i,e))n=e.F,qy(t.i,e),r=1;else return;if(t.H!=0){if(e.i)if(r==1){n=e.u?e.u.length:0,e=Date.now()-e.G;var i=t.C;r=sa(),ge(r,new Sy(r,n)),fa(t)}else ev(t);else if(i=e.s,i==3||i==0&&0<e.ca||!(r==1&&YS(t,e)||r==2&&Mh(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),i){case 1:Nn(t,5);break;case 4:Nn(t,10);break;case 3:Nn(t,6);break;default:Nn(t,2)}}}function rv(t,e){let n=t.ab+Math.floor(Math.random()*t.hb);return t.isActive()||(n*=2),n*e}function Nn(t,e){if(t.l.info("Error code "+e),e==2){var n=null;t.h&&(n=null);var r=Ee(t.pb,t);n||(n=new On("//www.google.com/images/cleardot.gif"),b.location&&b.location.protocol=="http"||Wo(n,"https"),ca(n)),zS(n.toString(),r)}else Ce(2);t.H=0,t.h&&t.h.za(e),iv(t),Xy(t)}y.pb=function(t){t?(this.l.info("Successfully pinged google.com"),Ce(2)):(this.l.info("Failed to ping google.com"),Ce(1))};function iv(t){if(t.H=0,t.ma=[],t.h){let e=zy(t.i);(e.length!=0||t.j.length!=0)&&(Ym(t.ma,e),Ym(t.ma,t.j),t.i.i.length=0,yh(t.j),t.j.length=0),t.h.ya()}}function sv(t,e,n){var r=n instanceof On?bt(n):new On(n);if(r.g!="")e&&(r.g=e+"."+r.g),Ko(r,r.m);else{var i=b.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var s=new On(null);r&&Wo(s,r),e&&(s.g=e),i&&Ko(s,i),n&&(s.l=n),r=s}return n=t.F,e=t.Da,n&&e&&G(r,n,e),G(r,"VER",t.ra),hs(t,r),r}function ov(t,e,n){if(e&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return e=t.Ha&&!t.va?new Y(new cs({ob:n})):new Y(t.va),e.Oa(t.J),e}y.isActive=function(){return!!this.h&&this.h.isActive(this)};function av(){}y=av.prototype;y.Ba=function(){};y.Aa=function(){};y.za=function(){};y.ya=function(){};y.isActive=function(){return!0};y.Va=function(){};function Yo(){if(Tr&&!(10<=Number(fS)))throw Error("Environmental error: no available transport.")}Yo.prototype.g=function(t,e){return new xe(t,e)};function xe(t,e){le.call(this),this.g=new Jy(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(t?t["X-WebChannel-Client-Profile"]=e.Ca:t={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=t,(t=e&&e.cc)&&!Qi(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Qi(e)&&(this.g.F=e,t=this.h,t!==null&&e in t&&(t=this.h,e in t&&delete t[e])),this.j=new Ar(this)}he(xe,le);xe.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var t=this.g,e=this.l,n=this.h||void 0;Ce(0),t.Y=e,t.na=n||{},t.G=t.aa,t.I=sv(t,null,t.Y),fa(t)};xe.prototype.close=function(){Fh(this.g)};xe.prototype.u=function(t){var e=this.g;if(typeof t=="string"){var n={};n.__data__=t,t=n}else this.v&&(n={},n.__data__=Dh(t),t=n);e.j.push(new US(e.fb++,t)),e.H==3&&fa(e)};xe.prototype.N=function(){this.g.h=null,delete this.j,Fh(this.g),delete this.g,xe.$.N.call(this)};function uv(t){Rh.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){e:{for(let n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=e!==null&&t in e?e[t]:void 0),this.data=e}else this.data=t}he(uv,Rh);function cv(){Ph.call(this),this.status=1}he(cv,Ph);function Ar(t){this.g=t}he(Ar,av);Ar.prototype.Ba=function(){ge(this.g,"a")};Ar.prototype.Aa=function(t){ge(this.g,new uv(t))};Ar.prototype.za=function(t){ge(this.g,new cv)};Ar.prototype.ya=function(){ge(this.g,"b")};function JS(){this.blockSize=-1}function Ye(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}he(Ye,JS);Ye.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0};function Zl(t,e,n){n||(n=0);var r=Array(16);if(typeof e=="string")for(var i=0;16>i;++i)r[i]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;e=t.g[0],n=t.g[1],i=t.g[2];var s=t.g[3],o=e+(s^n&(i^s))+r[0]+3614090360&4294967295;e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[1]+3905402710&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[2]+606105819&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[3]+3250441966&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(s^n&(i^s))+r[4]+4118548399&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[5]+1200080426&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[6]+2821735955&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[7]+4249261313&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(s^n&(i^s))+r[8]+1770035416&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[9]+2336552879&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[10]+4294925233&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[11]+2304563134&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(s^n&(i^s))+r[12]+1804603682&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[13]+4254626195&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[14]+2792965006&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[15]+1236535329&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(i^s&(n^i))+r[1]+4129170786&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[6]+3225465664&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[11]+643717713&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[0]+3921069994&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(i^s&(n^i))+r[5]+3593408605&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[10]+38016083&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[15]+3634488961&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[4]+3889429448&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(i^s&(n^i))+r[9]+568446438&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[14]+3275163606&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[3]+4107603335&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[8]+1163531501&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(i^s&(n^i))+r[13]+2850285829&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[2]+4243563512&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[7]+1735328473&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[12]+2368359562&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(n^i^s)+r[5]+4294588738&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[8]+2272392833&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[11]+1839030562&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[14]+4259657740&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(n^i^s)+r[1]+2763975236&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[4]+1272893353&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[7]+4139469664&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[10]+3200236656&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(n^i^s)+r[13]+681279174&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[0]+3936430074&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[3]+3572445317&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[6]+76029189&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(n^i^s)+r[9]+3654602809&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[12]+3873151461&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[15]+530742520&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[2]+3299628645&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(i^(n|~s))+r[0]+4096336452&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[7]+1126891415&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[14]+2878612391&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[5]+4237533241&4294967295,n=i+(o<<21&4294967295|o>>>11),o=e+(i^(n|~s))+r[12]+1700485571&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[3]+2399980690&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[10]+4293915773&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[1]+2240044497&4294967295,n=i+(o<<21&4294967295|o>>>11),o=e+(i^(n|~s))+r[8]+1873313359&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[15]+4264355552&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[6]+2734768916&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[13]+1309151649&4294967295,n=i+(o<<21&4294967295|o>>>11),o=e+(i^(n|~s))+r[4]+4149444226&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[11]+3174756917&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[2]+718787259&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,t.g[2]=t.g[2]+i&4294967295,t.g[3]=t.g[3]+s&4294967295}Ye.prototype.j=function(t,e){e===void 0&&(e=t.length);for(var n=e-this.blockSize,r=this.m,i=this.h,s=0;s<e;){if(i==0)for(;s<=n;)Zl(this,t,s),s+=this.blockSize;if(typeof t=="string"){for(;s<e;)if(r[i++]=t.charCodeAt(s++),i==this.blockSize){Zl(this,r),i=0;break}}else for(;s<e;)if(r[i++]=t[s++],i==this.blockSize){Zl(this,r),i=0;break}}this.h=i,this.i+=e};Ye.prototype.l=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var n=8*this.i;for(e=t.length-8;e<t.length;++e)t[e]=n&255,n/=256;for(this.j(t),t=Array(16),e=n=0;4>e;++e)for(var r=0;32>r;r+=8)t[n++]=this.g[e]>>>r&255;return t};function $(t,e){this.h=e;for(var n=[],r=!0,i=t.length-1;0<=i;i--){var s=t[i]|0;r&&s==e||(n[i]=s,r=!1)}this.g=n}var XS={};function Lh(t){return-128<=t&&128>t?lS(t,function(e){return new $([e|0],0>e?-1:0)}):new $([t|0],0>t?-1:0)}function ct(t){if(isNaN(t)||!isFinite(t))return Er;if(0>t)return pe(ct(-t));for(var e=[],n=1,r=0;t>=n;r++)e[r]=t/n|0,n*=ph;return new $(e,0)}function lv(t,e){if(t.length==0)throw Error("number format error: empty string");if(e=e||10,2>e||36<e)throw Error("radix out of range: "+e);if(t.charAt(0)=="-")return pe(lv(t.substring(1),e));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=ct(Math.pow(e,8)),r=Er,i=0;i<t.length;i+=8){var s=Math.min(8,t.length-i),o=parseInt(t.substring(i,i+s),e);8>s?(s=ct(Math.pow(e,s)),r=r.R(s).add(ct(o))):(r=r.R(n),r=r.add(ct(o)))}return r}var ph=4294967296,Er=Lh(0),gh=Lh(1),oy=Lh(16777216);y=$.prototype;y.ea=function(){if(ze(this))return-pe(this).ea();for(var t=0,e=1,n=0;n<this.g.length;n++){var r=this.D(n);t+=(0<=r?r:ph+r)*e,e*=ph}return t};y.toString=function(t){if(t=t||10,2>t||36<t)throw Error("radix out of range: "+t);if(Ct(this))return"0";if(ze(this))return"-"+pe(this).toString(t);for(var e=ct(Math.pow(t,6)),n=this,r="";;){var i=Xo(n,e).g;n=Jo(n,i.R(e));var s=((0<n.g.length?n.g[0]:n.h)>>>0).toString(t);if(n=i,Ct(n))return s+r;for(;6>s.length;)s="0"+s;r=s+r}};y.D=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h};function Ct(t){if(t.h!=0)return!1;for(var e=0;e<t.g.length;e++)if(t.g[e]!=0)return!1;return!0}function ze(t){return t.h==-1}y.X=function(t){return t=Jo(this,t),ze(t)?-1:Ct(t)?0:1};function pe(t){for(var e=t.g.length,n=[],r=0;r<e;r++)n[r]=~t.g[r];return new $(n,~t.h).add(gh)}y.abs=function(){return ze(this)?pe(this):this};y.add=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0,i=0;i<=e;i++){var s=r+(this.D(i)&65535)+(t.D(i)&65535),o=(s>>>16)+(this.D(i)>>>16)+(t.D(i)>>>16);r=o>>>16,s&=65535,o&=65535,n[i]=o<<16|s}return new $(n,n[n.length-1]&-2147483648?-1:0)};function Jo(t,e){return t.add(pe(e))}y.R=function(t){if(Ct(this)||Ct(t))return Er;if(ze(this))return ze(t)?pe(this).R(pe(t)):pe(pe(this).R(t));if(ze(t))return pe(this.R(pe(t)));if(0>this.X(oy)&&0>t.X(oy))return ct(this.ea()*t.ea());for(var e=this.g.length+t.g.length,n=[],r=0;r<2*e;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<t.g.length;i++){var s=this.D(r)>>>16,o=this.D(r)&65535,a=t.D(i)>>>16,u=t.D(i)&65535;n[2*r+2*i]+=o*u,Ho(n,2*r+2*i),n[2*r+2*i+1]+=s*u,Ho(n,2*r+2*i+1),n[2*r+2*i+1]+=o*a,Ho(n,2*r+2*i+1),n[2*r+2*i+2]+=s*a,Ho(n,2*r+2*i+2)}for(r=0;r<e;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=e;r<2*e;r++)n[r]=0;return new $(n,0)};function Ho(t,e){for(;(t[e]&65535)!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function Gi(t,e){this.g=t,this.h=e}function Xo(t,e){if(Ct(e))throw Error("division by zero");if(Ct(t))return new Gi(Er,Er);if(ze(t))return e=Xo(pe(t),e),new Gi(pe(e.g),pe(e.h));if(ze(e))return e=Xo(t,pe(e)),new Gi(pe(e.g),e.h);if(30<t.g.length){if(ze(t)||ze(e))throw Error("slowDivide_ only works with positive integers.");for(var n=gh,r=e;0>=r.X(t);)n=ay(n),r=ay(r);var i=wr(n,1),s=wr(r,1);for(r=wr(r,2),n=wr(n,2);!Ct(r);){var o=s.add(r);0>=o.X(t)&&(i=i.add(n),s=o),r=wr(r,1),n=wr(n,1)}return e=Jo(t,i.R(e)),new Gi(i,e)}for(i=Er;0<=t.X(e);){for(n=Math.max(1,Math.floor(t.ea()/e.ea())),r=Math.ceil(Math.log(n)/Math.LN2),r=48>=r?1:Math.pow(2,r-48),s=ct(n),o=s.R(e);ze(o)||0<o.X(t);)n-=r,s=ct(n),o=s.R(e);Ct(s)&&(s=gh),i=i.add(s),t=Jo(t,o)}return new Gi(i,t)}y.gb=function(t){return Xo(this,t).h};y.and=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)&t.D(r);return new $(n,this.h&t.h)};y.or=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)|t.D(r);return new $(n,this.h|t.h)};y.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)^t.D(r);return new $(n,this.h^t.h)};function ay(t){for(var e=t.g.length+1,n=[],r=0;r<e;r++)n[r]=t.D(r)<<1|t.D(r-1)>>>31;return new $(n,t.h)}function wr(t,e){var n=e>>5;e%=32;for(var r=t.g.length-n,i=[],s=0;s<r;s++)i[s]=0<e?t.D(s+n)>>>e|t.D(s+n+1)<<32-e:t.D(s+n);return new $(i,t.h)}Yo.prototype.createWebChannel=Yo.prototype.g;xe.prototype.send=xe.prototype.u;xe.prototype.open=xe.prototype.m;xe.prototype.close=xe.prototype.close;oa.NO_ERROR=0;oa.TIMEOUT=8;oa.HTTP_ERROR=6;Cy.COMPLETE="complete";by.EventType=os;os.OPEN="a";os.CLOSE="b";os.ERROR="c";os.MESSAGE="d";le.prototype.listen=le.prototype.O;Y.prototype.listenOnce=Y.prototype.P;Y.prototype.getLastError=Y.prototype.Sa;Y.prototype.getLastErrorCode=Y.prototype.Ia;Y.prototype.getStatus=Y.prototype.da;Y.prototype.getResponseJson=Y.prototype.Wa;Y.prototype.getResponseText=Y.prototype.ja;Y.prototype.send=Y.prototype.ha;Y.prototype.setWithCredentials=Y.prototype.Oa;Ye.prototype.digest=Ye.prototype.l;Ye.prototype.reset=Ye.prototype.reset;Ye.prototype.update=Ye.prototype.j;$.prototype.add=$.prototype.add;$.prototype.multiply=$.prototype.R;$.prototype.modulo=$.prototype.gb;$.prototype.compare=$.prototype.X;$.prototype.toNumber=$.prototype.ea;$.prototype.toString=$.prototype.toString;$.prototype.getBits=$.prototype.D;$.fromNumber=ct;$.fromString=lv;var hv=Je.createWebChannelTransport=function(){return new Yo},dv=Je.getStatEventTarget=function(){return sa()},pa=Je.ErrorCode=oa,fv=Je.EventType=Cy,pv=Je.Event=kn,Vh=Je.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},gv=Je.FetchXmlHttpFactory=cs,ds=Je.WebChannel=by,mv=Je.XhrIo=Y,yv=Je.Md5=Ye,Fn=Je.Integer=$;var vv="@firebase/firestore";var de=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};de.UNAUTHENTICATED=new de(null),de.GOOGLE_CREDENTIALS=new de("google-credentials-uid"),de.FIRST_PARTY=new de("first-party-uid"),de.MOCK_USER=new de("mock-user");var Gr="10.11.1";var Vn=new $t("@firebase/firestore");function fs(){return Vn.logLevel}function I(t,...e){if(Vn.logLevel<=x.DEBUG){let n=e.map(Tf);Vn.debug(`Firestore (${Gr}): ${t}`,...n)}}function Pt(t,...e){if(Vn.logLevel<=x.ERROR){let n=e.map(Tf);Vn.error(`Firestore (${Gr}): ${t}`,...n)}}function Or(t,...e){if(Vn.logLevel<=x.WARN){let n=e.map(Tf);Vn.warn(`Firestore (${Gr}): ${t}`,...n)}}function Tf(t){if(typeof t=="string")return t;try{return function(n){return JSON.stringify(n)}(t)}catch{return t}}function C(t="Unexpected state"){let e=`FIRESTORE (${Gr}) INTERNAL ASSERTION FAILED: `+t;throw Pt(e),new Error(e)}function z(t,e){t||C()}function R(t,e){return t}var g={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},_=class extends Me{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var ht=class{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}};var _a=class{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},qh=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(de.UNAUTHENTICATED))}shutdown(){}},zh=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}},Gh=class{constructor(e){this.t=e,this.currentUser=de.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let r=this.i,i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve(),s=new ht;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new ht,e.enqueueRetryable(()=>i(this.currentUser))};let o=()=>{let u=s;e.enqueueRetryable(()=>d(this,null,function*(){yield u.promise,yield i(this.currentUser)}))},a=u=>{I("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){let u=this.t.getImmediate({optional:!0});u?a(u):(I("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new ht)}},0),o()}getToken(){let e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(I("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(z(typeof r.accessToken=="string"),new _a(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){let e=this.auth&&this.auth.getUid();return z(e===null||typeof e=="string"),new de(e)}},Hh=class{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=de.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},Wh=class{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new Hh(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(de.FIRST_PARTY))}shutdown(){}invalidateToken(){}},Kh=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},Qh=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){let r=s=>{s.error!=null&&I("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);let o=s.token!==this.R;return this.R=s.token,I("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};let i=s=>{I("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){let s=this.A.getImmediate({optional:!0});s?i(s):I("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(z(typeof n.token=="string"),this.R=n.token,new Kh(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}};function ZS(t){let e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var wa=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=ZS(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}};function U(t,e){return t<e?-1:t>e?1:0}function kr(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}var me=class t{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new _(g.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new _(g.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new _(g.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new _(g.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return t.fromMillis(Date.now())}static fromDate(e){return t.fromMillis(e.getTime())}static fromMillis(e){let n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new t(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?U(this.nanoseconds,e.nanoseconds):U(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var P=class t{constructor(e){this.timestamp=e}static fromTimestamp(e){return new t(e)}static min(){return new t(new me(0,0))}static max(){return new t(new me(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Ia=class t{constructor(e,n,r){n===void 0?n=0:n>e.length&&C(),r===void 0?r=e.length-n:r>e.length-n&&C(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return t.comparator(this,e)===0}child(e){let n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){let r=Math.min(e.length,n.length);for(let i=0;i<r;i++){let s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}},K=class t extends Ia{construct(e,n,r){return new t(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let n=[];for(let r of e){if(r.indexOf("//")>=0)throw new _(g.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new t(n)}static emptyPath(){return new t([])}},eC=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Ve=class t extends Ia{construct(e,n,r){return new t(e,n,r)}static isValidIdentifier(e){return eC.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new t(["__name__"])}static fromServerFormat(e){let n=[],r="",i=0,s=()=>{if(r.length===0)throw new _(g.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""},o=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new _(g.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new _(g.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new _(g.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new t(n)}static emptyPath(){return new t([])}};var D=class t{constructor(e){this.path=e}static fromPath(e){return new t(K.fromString(e))}static fromName(e){return new t(K.fromString(e).popFirst(5))}static empty(){return new t(K.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&K.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return K.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new t(new K(e.slice()))}};var Yh=class{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}};Yh.UNKNOWN_ID=-1;function tC(t,e){let n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=P.fromTimestamp(r===1e9?new me(n+1,0):new me(n,r));return new Un(i,D.empty(),e)}function nC(t){return new Un(t.readTime,t.key,-1)}var Un=class t{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new t(P.min(),D.empty(),-1)}static max(){return new t(P.max(),D.empty(),-1)}};function rC(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=D.comparator(t.documentKey,e.documentKey),n!==0?n:U(t.largestBatchId,e.largestBatchId))}var iC="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Jh=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function Ns(t){return d(this,null,function*(){if(t.code!==g.FAILED_PRECONDITION||t.message!==iC)throw t;I("LocalStore","Unexpectedly lost primary lease")})}var m=class t{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&C(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{let n=e();return n instanceof t?n:t.resolve(n)}catch(n){return t.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):t.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):t.reject(n)}static resolve(e){return new t((n,r)=>{n(e)})}static reject(e){return new t((n,r)=>{r(e)})}static waitFor(e){return new t((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},u=>r(u))}),o=!0,s===i&&n()})}static or(e){let n=t.resolve(!1);for(let r of e)n=n.next(i=>i?t.resolve(i):r());return n}static forEach(e,n){let r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new t((r,i)=>{let s=e.length,o=new Array(s),a=0;for(let u=0;u<s;u++){let c=u;n(e[c]).next(l=>{o[c]=l,++a,a===s&&r(o)},l=>i(l))}})}static doWhile(e,n){return new t((r,i)=>{let s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}};function sC(t){let e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Os(t){return t.name==="IndexedDbTransactionError"}var Yv=(()=>{class t{constructor(n,r){this.previousValue=n,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){let n=++this.previousValue;return this.se&&this.se(n),n}}return t.oe=-1,t})();function Za(t){return t==null}function _s(t){return t===0&&1/t==-1/0}function oC(t){return typeof t=="number"&&Number.isInteger(t)&&!_s(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var aC=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],V1=[...aC,"documentOverlays"],uC=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],cC=uC,U1=[...cC,"indexConfiguration","indexState","indexEntries"];function _v(t){let e=0;for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Hn(t,e){for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Jv(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var X=class t{constructor(e,n){this.comparator=e,this.root=n||dt.EMPTY}insert(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,dt.BLACK,null,null))}remove(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,dt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){let r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){let e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Rr(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Rr(this.root,e,this.comparator,!1)}getReverseIterator(){return new Rr(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Rr(this.root,e,this.comparator,!0)}},Rr=class{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},dt=class t{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??t.RED,this.left=i??t.EMPTY,this.right=s??t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new t(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this,s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw C();let e=this.left.check();if(e!==this.right.check())throw C();return e+(this.isRed()?0:1)}};dt.EMPTY=null,dt.RED=!0,dt.BLACK=!1;dt.EMPTY=new class{constructor(){this.size=0}get key(){throw C()}get value(){throw C()}get color(){throw C()}get left(){throw C()}get right(){throw C()}copy(e,n,r,i,s){return this}insert(e,n,r){return new dt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Ae=class t{constructor(e){this.comparator=e,this.data=new X(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Ea(this.data.getIterator())}getIteratorFrom(e){return new Ea(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){let i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(n=>{e.push(n)}),e}toString(){let e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){let n=new t(this.comparator);return n.data=e,n}},Ea=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var Ge=class t{constructor(e){this.fields=e,e.sort(Ve.comparator)}static empty(){return new t([])}unionWith(e){let n=new Ae(Ve.comparator);for(let r of this.fields)n=n.add(r);for(let r of e)n=n.add(r);return new t(n.toArray())}covers(e){for(let n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return kr(this.fields,e.fields,(n,r)=>n.isEqual(r))}};var Ta=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var be=class t{constructor(e){this.binaryString=e}static fromBase64String(e){let n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new Ta("Invalid base64 string: "+s):s}}(e);return new t(n)}static fromUint8Array(e){let n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new t(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){let r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return U(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};be.EMPTY_BYTE_STRING=new be("");var lC=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Nt(t){if(z(!!t),typeof t=="string"){let e=0,n=lC.exec(t);if(z(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:J(t.seconds),nanos:J(t.nanos)}}function J(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Zt(t){return typeof t=="string"?be.fromBase64String(t):be.fromUint8Array(t)}function Df(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Af(t){let e=t.mapValue.fields.__previous_value__;return Df(e)?Af(e):e}function ws(t){let e=Nt(t.mapValue.fields.__local_write_time__.timestampValue);return new me(e.seconds,e.nanos)}var Xh=class{constructor(e,n,r,i,s,o,a,u,c){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=c}},Da=class t{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new t("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database}};var ga={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Bn(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Df(t)?4:Xv(t)?9007199254740991:10:C()}function gt(t,e){if(t===e)return!0;let n=Bn(t);if(n!==Bn(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return ws(t).isEqual(ws(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;let o=Nt(i.timestampValue),a=Nt(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return Zt(i.bytesValue).isEqual(Zt(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return J(i.geoPointValue.latitude)===J(s.geoPointValue.latitude)&&J(i.geoPointValue.longitude)===J(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return J(i.integerValue)===J(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){let o=J(i.doubleValue),a=J(s.doubleValue);return o===a?_s(o)===_s(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return kr(t.arrayValue.values||[],e.arrayValue.values||[],gt);case 10:return function(i,s){let o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(_v(o)!==_v(a))return!1;for(let u in o)if(o.hasOwnProperty(u)&&(a[u]===void 0||!gt(o[u],a[u])))return!1;return!0}(t,e);default:return C()}}function Is(t,e){return(t.values||[]).find(n=>gt(n,e))!==void 0}function Fr(t,e){if(t===e)return 0;let n=Bn(t),r=Bn(e);if(n!==r)return U(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return U(t.booleanValue,e.booleanValue);case 2:return function(s,o){let a=J(s.integerValue||s.doubleValue),u=J(o.integerValue||o.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(t,e);case 3:return wv(t.timestampValue,e.timestampValue);case 4:return wv(ws(t),ws(e));case 5:return U(t.stringValue,e.stringValue);case 6:return function(s,o){let a=Zt(s),u=Zt(o);return a.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){let a=s.split("/"),u=o.split("/");for(let c=0;c<a.length&&c<u.length;c++){let l=U(a[c],u[c]);if(l!==0)return l}return U(a.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){let a=U(J(s.latitude),J(o.latitude));return a!==0?a:U(J(s.longitude),J(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(s,o){let a=s.values||[],u=o.values||[];for(let c=0;c<a.length&&c<u.length;++c){let l=Fr(a[c],u[c]);if(l)return l}return U(a.length,u.length)}(t.arrayValue,e.arrayValue);case 10:return function(s,o){if(s===ga.mapValue&&o===ga.mapValue)return 0;if(s===ga.mapValue)return 1;if(o===ga.mapValue)return-1;let a=s.fields||{},u=Object.keys(a),c=o.fields||{},l=Object.keys(c);u.sort(),l.sort();for(let h=0;h<u.length&&h<l.length;++h){let f=U(u[h],l[h]);if(f!==0)return f;let p=Fr(a[u[h]],c[l[h]]);if(p!==0)return p}return U(u.length,l.length)}(t.mapValue,e.mapValue);default:throw C()}}function wv(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return U(t,e);let n=Nt(t),r=Nt(e),i=U(n.seconds,r.seconds);return i!==0?i:U(n.nanos,r.nanos)}function Mr(t){return Zh(t)}function Zh(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){let r=Nt(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Zt(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return D.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(let s of n.values||[])i?i=!1:r+=",",r+=Zh(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){let r=Object.keys(n.fields||{}).sort(),i="{",s=!0;for(let o of r)s?s=!1:i+=",",i+=`${o}:${Zh(n.fields[o])}`;return i+"}"}(t.mapValue):C()}function Iv(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function ed(t){return!!t&&"integerValue"in t}function Sf(t){return!!t&&"arrayValue"in t}function Ev(t){return!!t&&"nullValue"in t}function Tv(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function ya(t){return!!t&&"mapValue"in t}function gs(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){let e={mapValue:{fields:{}}};return Hn(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=gs(r)),e}if(t.arrayValue){let e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=gs(t.arrayValue.values[n]);return e}return Object.assign({},t)}function Xv(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var Le=class t{constructor(e){this.value=e}static empty(){return new t({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!ya(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=gs(n)}setAll(e){let n=Ve.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){let u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=gs(o):i.push(a.lastSegment())});let s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){let n=this.field(e.popLast());ya(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return gt(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];ya(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Hn(n,(i,s)=>e[i]=s);for(let i of r)delete e[i]}clone(){return new t(gs(this.value))}};function Zv(t){let e=[];return Hn(t.fields,(n,r)=>{let i=new Ve([n]);if(ya(r)){let s=Zv(r.mapValue).fields;if(s.length===0)e.push(i);else for(let o of s)e.push(i.child(o))}else e.push(i)}),new Ge(e)}var Xe=class t{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new t(e,0,P.min(),P.min(),P.min(),Le.empty(),0)}static newFoundDocument(e,n,r,i){return new t(e,1,n,P.min(),r,i,0)}static newNoDocument(e,n){return new t(e,2,n,P.min(),P.min(),Le.empty(),0)}static newUnknownDocument(e,n){return new t(e,3,n,P.min(),P.min(),Le.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(P.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Le.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Le.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=P.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var xr=class{constructor(e,n){this.position=e,this.inclusive=n}};function Dv(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){let s=e[i],o=t.position[i];if(s.field.isKeyField()?r=D.comparator(D.fromName(o.referenceValue),n.key):r=Fr(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function Av(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!gt(t.position[n],e.position[n]))return!1;return!0}var Lr=class{constructor(e,n="asc"){this.field=e,this.dir=n}};function hC(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}var Aa=class{},ie=class t extends Aa{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new nd(e,n,r):n==="array-contains"?new sd(e,r):n==="in"?new od(e,r):n==="not-in"?new ad(e,r):n==="array-contains-any"?new ud(e,r):new t(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new rd(e,r):new id(e,r)}matches(e){let n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Fr(n,this.value)):n!==null&&Bn(this.value)===Bn(n)&&this.matchesComparison(Fr(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return C()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Ze=class t extends Aa{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new t(e,n)}matches(e){return e_(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function e_(t){return t.op==="and"}function t_(t){return dC(t)&&e_(t)}function dC(t){for(let e of t.filters)if(e instanceof Ze)return!1;return!0}function td(t){if(t instanceof ie)return t.field.canonicalString()+t.op.toString()+Mr(t.value);if(t_(t))return t.filters.map(e=>td(e)).join(",");{let e=t.filters.map(n=>td(n)).join(",");return`${t.op}(${e})`}}function n_(t,e){return t instanceof ie?function(r,i){return i instanceof ie&&r.op===i.op&&r.field.isEqual(i.field)&&gt(r.value,i.value)}(t,e):t instanceof Ze?function(r,i){return i instanceof Ze&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&n_(o,i.filters[a]),!0):!1}(t,e):void C()}function r_(t){return t instanceof ie?function(n){return`${n.field.canonicalString()} ${n.op} ${Mr(n.value)}`}(t):t instanceof Ze?function(n){return n.op.toString()+" {"+n.getFilters().map(r_).join(" ,")+"}"}(t):"Filter"}var nd=class extends ie{constructor(e,n,r){super(e,n,r),this.key=D.fromName(r.referenceValue)}matches(e){let n=D.comparator(e.key,this.key);return this.matchesComparison(n)}},rd=class extends ie{constructor(e,n){super(e,"in",n),this.keys=i_("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}},id=class extends ie{constructor(e,n){super(e,"not-in",n),this.keys=i_("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}};function i_(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>D.fromName(r.referenceValue))}var sd=class extends ie{constructor(e,n){super(e,"array-contains",n)}matches(e){let n=e.data.field(this.field);return Sf(n)&&Is(n.arrayValue,this.value)}},od=class extends ie{constructor(e,n){super(e,"in",n)}matches(e){let n=e.data.field(this.field);return n!==null&&Is(this.value.arrayValue,n)}},ad=class extends ie{constructor(e,n){super(e,"not-in",n)}matches(e){if(Is(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let n=e.data.field(this.field);return n!==null&&!Is(this.value.arrayValue,n)}},ud=class extends ie{constructor(e,n){super(e,"array-contains-any",n)}matches(e){let n=e.data.field(this.field);return!(!Sf(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Is(this.value.arrayValue,r))}};var cd=class{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}};function Sv(t,e=null,n=[],r=[],i=null,s=null,o=null){return new cd(t,e,n,r,i,s,o)}function Cf(t){let e=R(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>td(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),Za(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Mr(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Mr(r)).join(",")),e.ue=n}return e.ue}function bf(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!hC(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!n_(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Av(t.startAt,e.startAt)&&Av(t.endAt,e.endAt)}function ld(t){return D.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}var $n=class{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function fC(t,e,n,r,i,s,o,a){return new $n(t,e,n,r,i,s,o,a)}function Rf(t){return new $n(t)}function Cv(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function s_(t){return t.collectionGroup!==null}function ms(t){let e=R(t);if(e.ce===null){e.ce=[];let n=new Set;for(let s of e.explicitOrderBy)e.ce.push(s),n.add(s.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Ae(Ve.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.ce.push(new Lr(s,r))}),n.has(Ve.keyField().canonicalString())||e.ce.push(new Lr(Ve.keyField(),r))}return e.ce}function ft(t){let e=R(t);return e.le||(e.le=pC(e,ms(t))),e.le}function pC(t,e){if(t.limitType==="F")return Sv(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{let s=i.dir==="desc"?"asc":"desc";return new Lr(i.field,s)});let n=t.endAt?new xr(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new xr(t.startAt.position,t.startAt.inclusive):null;return Sv(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function hd(t,e){let n=t.filters.concat([e]);return new $n(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function dd(t,e,n){return new $n(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function eu(t,e){return bf(ft(t),ft(e))&&t.limitType===e.limitType}function o_(t){return`${Cf(ft(t))}|lt:${t.limitType}`}function Sr(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>r_(i)).join(", ")}]`),Za(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Mr(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Mr(i)).join(",")),`Target(${r})`}(ft(t))}; limitType=${t.limitType})`}function tu(t,e){return e.isFoundDocument()&&function(r,i){let s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):D.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(let s of ms(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(let s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,a,u){let c=Dv(o,a,u);return o.inclusive?c<=0:c<0}(r.startAt,ms(r),i)||r.endAt&&!function(o,a,u){let c=Dv(o,a,u);return o.inclusive?c>=0:c>0}(r.endAt,ms(r),i))}(t,e)}function gC(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function a_(t){return(e,n)=>{let r=!1;for(let i of ms(t)){let s=mC(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function mC(t,e,n){let r=t.field.isKeyField()?D.comparator(e.key,n.key):function(s,o,a){let u=o.data.field(s),c=a.data.field(s);return u!==null&&c!==null?Fr(u,c):C()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return C()}}var en=class{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(let[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Hn(this.inner,(n,r)=>{for(let[i,s]of r)e(i,s)})}isEmpty(){return Jv(this.inner)}size(){return this.innerSize}};var yC=new X(D.comparator);function Ot(){return yC}var u_=new X(D.comparator);function ps(...t){let e=u_;for(let n of t)e=e.insert(n.key,n);return e}function c_(t){let e=u_;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Mn(){return ys()}function l_(){return ys()}function ys(){return new en(t=>t.toString(),(t,e)=>t.isEqual(e))}var vC=new X(D.comparator),_C=new Ae(D.comparator);function L(...t){let e=_C;for(let n of t)e=e.add(n);return e}var wC=new Ae(U);function IC(){return wC}function h_(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:_s(e)?"-0":e}}function d_(t){return{integerValue:""+t}}function EC(t,e){return oC(e)?d_(e):h_(t,e)}var Vr=class{constructor(){this._=void 0}};function TC(t,e,n){return t instanceof Ur?function(i,s){let o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&Df(s)&&(s=Af(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof jn?p_(t,e):t instanceof qn?g_(t,e):function(i,s){let o=f_(i,s),a=bv(o)+bv(i.Pe);return ed(o)&&ed(i.Pe)?d_(a):h_(i.serializer,a)}(t,e)}function DC(t,e,n){return t instanceof jn?p_(t,e):t instanceof qn?g_(t,e):n}function f_(t,e){return t instanceof Br?function(r){return ed(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}var Ur=class extends Vr{},jn=class extends Vr{constructor(e){super(),this.elements=e}};function p_(t,e){let n=m_(e);for(let r of t.elements)n.some(i=>gt(i,r))||n.push(r);return{arrayValue:{values:n}}}var qn=class extends Vr{constructor(e){super(),this.elements=e}};function g_(t,e){let n=m_(e);for(let r of t.elements)n=n.filter(i=>!gt(i,r));return{arrayValue:{values:n}}}var Br=class extends Vr{constructor(e,n){super(),this.serializer=e,this.Pe=n}};function bv(t){return J(t.integerValue||t.doubleValue)}function m_(t){return Sf(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function AC(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof jn&&i instanceof jn||r instanceof qn&&i instanceof qn?kr(r.elements,i.elements,gt):r instanceof Br&&i instanceof Br?gt(r.Pe,i.Pe):r instanceof Ur&&i instanceof Ur}(t.transform,e.transform)}var fd=class{constructor(e,n){this.version=e,this.transformResults=n}},Jt=class t{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new t}static exists(e){return new t(void 0,e)}static updateTime(e){return new t(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function va(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}var $r=class{};function y_(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Sa(t.key,Jt.none()):new zn(t.key,t.data,Jt.none());{let n=t.data,r=Le.empty(),i=new Ae(Ve.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new mt(t.key,r,new Ge(i.toArray()),Jt.none())}}function SC(t,e,n){t instanceof zn?function(i,s,o){let a=i.value.clone(),u=Pv(i.fieldTransforms,s,o.transformResults);a.setAll(u),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof mt?function(i,s,o){if(!va(i.precondition,s))return void s.convertToUnknownDocument(o.version);let a=Pv(i.fieldTransforms,s,o.transformResults),u=s.data;u.setAll(v_(i)),u.setAll(a),s.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function vs(t,e,n,r){return t instanceof zn?function(s,o,a,u){if(!va(s.precondition,o))return a;let c=s.value.clone(),l=Nv(s.fieldTransforms,u,o);return c.setAll(l),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof mt?function(s,o,a,u){if(!va(s.precondition,o))return a;let c=Nv(s.fieldTransforms,u,o),l=o.data;return l.setAll(v_(s)),l.setAll(c),o.convertToFoundDocument(o.version,l).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(h=>h.field))}(t,e,n,r):function(s,o,a){return va(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function CC(t,e){let n=null;for(let r of t.fieldTransforms){let i=e.data.field(r.field),s=f_(r.transform,i||null);s!=null&&(n===null&&(n=Le.empty()),n.set(r.field,s))}return n||null}function Rv(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&kr(r,i,(s,o)=>AC(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}var zn=class extends $r{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},mt=class extends $r{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}};function v_(t){let e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){let r=t.data.field(n);e.set(n,r)}}),e}function Pv(t,e,n){let r=new Map;z(t.length===n.length);for(let i=0;i<n.length;i++){let s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,DC(o,a,n[i]))}return r}function Nv(t,e,n){let r=new Map;for(let i of t){let s=i.transform,o=n.data.field(i.field);r.set(i.field,TC(s,o,e))}return r}var Sa=class extends $r{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},pd=class extends $r{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var gd=class{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){let r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){let s=this.mutations[i];s.key.isEqual(e.key)&&SC(s,e,r[i])}}applyToLocalView(e,n){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(n=vs(r,e,n,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(n=vs(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){let r=l_();return this.mutations.forEach(i=>{let s=e.get(i.key),o=s.overlayedDocument,a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;let u=y_(o,a);u!==null&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(P.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),L())}isEqual(e){return this.batchId===e.batchId&&kr(this.mutations,e.mutations,(n,r)=>Rv(n,r))&&kr(this.baseMutations,e.baseMutations,(n,r)=>Rv(n,r))}},md=class t{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){z(e.mutations.length===r.length);let i=function(){return vC}(),s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new t(e,n,r,i)}};var yd=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var vd=class{constructor(e,n){this.count=e,this.unchangedNames=n}};var ne,V;function bC(t){switch(t){default:return C();case g.CANCELLED:case g.UNKNOWN:case g.DEADLINE_EXCEEDED:case g.RESOURCE_EXHAUSTED:case g.INTERNAL:case g.UNAVAILABLE:case g.UNAUTHENTICATED:return!1;case g.INVALID_ARGUMENT:case g.NOT_FOUND:case g.ALREADY_EXISTS:case g.PERMISSION_DENIED:case g.FAILED_PRECONDITION:case g.ABORTED:case g.OUT_OF_RANGE:case g.UNIMPLEMENTED:case g.DATA_LOSS:return!0}}function __(t){if(t===void 0)return Pt("GRPC error has no .code"),g.UNKNOWN;switch(t){case ne.OK:return g.OK;case ne.CANCELLED:return g.CANCELLED;case ne.UNKNOWN:return g.UNKNOWN;case ne.DEADLINE_EXCEEDED:return g.DEADLINE_EXCEEDED;case ne.RESOURCE_EXHAUSTED:return g.RESOURCE_EXHAUSTED;case ne.INTERNAL:return g.INTERNAL;case ne.UNAVAILABLE:return g.UNAVAILABLE;case ne.UNAUTHENTICATED:return g.UNAUTHENTICATED;case ne.INVALID_ARGUMENT:return g.INVALID_ARGUMENT;case ne.NOT_FOUND:return g.NOT_FOUND;case ne.ALREADY_EXISTS:return g.ALREADY_EXISTS;case ne.PERMISSION_DENIED:return g.PERMISSION_DENIED;case ne.FAILED_PRECONDITION:return g.FAILED_PRECONDITION;case ne.ABORTED:return g.ABORTED;case ne.OUT_OF_RANGE:return g.OUT_OF_RANGE;case ne.UNIMPLEMENTED:return g.UNIMPLEMENTED;case ne.DATA_LOSS:return g.DATA_LOSS;default:return C()}}(V=ne||(ne={}))[V.OK=0]="OK",V[V.CANCELLED=1]="CANCELLED",V[V.UNKNOWN=2]="UNKNOWN",V[V.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",V[V.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",V[V.NOT_FOUND=5]="NOT_FOUND",V[V.ALREADY_EXISTS=6]="ALREADY_EXISTS",V[V.PERMISSION_DENIED=7]="PERMISSION_DENIED",V[V.UNAUTHENTICATED=16]="UNAUTHENTICATED",V[V.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",V[V.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",V[V.ABORTED=10]="ABORTED",V[V.OUT_OF_RANGE=11]="OUT_OF_RANGE",V[V.UNIMPLEMENTED=12]="UNIMPLEMENTED",V[V.INTERNAL=13]="INTERNAL",V[V.UNAVAILABLE=14]="UNAVAILABLE",V[V.DATA_LOSS=15]="DATA_LOSS";var Ov=null;function RC(){return new TextEncoder}var PC=new Fn([4294967295,4294967295],0);function kv(t){let e=RC().encode(t),n=new yv;return n.update(e),new Uint8Array(n.digest())}function Fv(t){let e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Fn([n,r],0),new Fn([i,s],0)]}var _d=class t{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new xn(`Invalid padding: ${n}`);if(r<0)throw new xn(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new xn(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new xn(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=Fn.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply(Fn.fromNumber(r)));return i.compare(PC)===1&&(i=new Fn([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;let n=kv(e),[r,i]=Fv(n);for(let s=0;s<this.hashCount;s++){let o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,n,r){let i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new t(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;let n=kv(e),[r,i]=Fv(n);for(let s=0;s<this.hashCount;s++){let o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){let n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}},xn=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var Ca=class t{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){let i=new Map;return i.set(e,Es.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new t(P.min(),i,new X(U),Ot(),L())}},Es=class t{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new t(r,n,L(),L(),L())}};var Pr=class{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}},ba=class{constructor(e,n){this.targetId=e,this.me=n}},Ra=class{constructor(e,n,r=be.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}},Pa=class{constructor(){this.fe=0,this.ge=xv(),this.pe=be.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}Ce(){let e=L(),n=L(),r=L();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:C()}}),new Es(this.pe,this.ye,e,n,r)}ve(){this.we=!1,this.ge=xv()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,z(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},wd=class{constructor(e){this.Le=e,this.Be=new Map,this.ke=Ot(),this.qe=Mv(),this.Qe=new X(U)}Ke(e){for(let n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(let n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{let r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.ve(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:C()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(e){let n=e.targetId,r=e.me.count,i=this.Je(n);if(i){let s=i.target;if(ld(s))if(r===0){let o=new D(s.path);this.Ue(n,o,Xe.newNoDocument(o,P.min()))}else z(r===1);else{let o=this.Ye(n);if(o!==r){let a=this.Ze(e),u=a?this.Xe(a,e,o):1;if(u!==0){this.je(n);let c=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,c)}Ov?.et(function(l,h,f,p,E){var T,v,k,q,Z,ye;let et={localCacheCount:l,existenceFilterCount:h.count,databaseId:f.database,projectId:f.projectId},ue=h.unchangedNames;return ue&&(et.bloomFilter={applied:E===0,hashCount:(T=ue?.hashCount)!==null&&T!==void 0?T:0,bitmapLength:(q=(k=(v=ue?.bits)===null||v===void 0?void 0:v.bitmap)===null||k===void 0?void 0:k.length)!==null&&q!==void 0?q:0,padding:(ye=(Z=ue?.bits)===null||Z===void 0?void 0:Z.padding)!==null&&ye!==void 0?ye:0,mightContain:yt=>{var Kn;return(Kn=p?.mightContain(yt))!==null&&Kn!==void 0&&Kn}}),et}(o,e.me,this.Le.tt(),a,u))}}}}Ze(e){let n=e.me.unchangedNames;if(!n||!n.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n,o,a;try{o=Zt(r).toUint8Array()}catch(u){if(u instanceof Ta)return Or("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new _d(o,i,s)}catch(u){return Or(u instanceof xn?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.Ie===0?null:a}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){let r=this.Le.getRemoteKeysForTarget(n),i=0;return r.forEach(s=>{let o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,s,null),i++)}),i}rt(e){let n=new Map;this.Be.forEach((s,o)=>{let a=this.Je(o);if(a){if(s.current&&ld(a.target)){let u=new D(a.target.path);this.ke.get(u)!==null||this.it(o,u)||this.Ue(o,u,Xe.newNoDocument(u,e))}s.be&&(n.set(o,s.Ce()),s.ve())}});let r=L();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(u=>{let c=this.Je(u);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));let i=new Ca(e,n,this.Qe,this.ke,r);return this.ke=Ot(),this.qe=Mv(),this.Qe=new X(U),i}$e(e,n){if(!this.ze(e))return;let r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;let i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){let n=this.Ge(e).Ce();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new Pa,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new Ae(U),this.qe=this.qe.insert(e,n)),n}ze(e){let n=this.Je(e)!==null;return n||I("WatchChangeAggregator","Detected inactive target",e),n}Je(e){let n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Pa),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}};function Mv(){return new X(D.comparator)}function xv(){return new X(D.comparator)}var NC={asc:"ASCENDING",desc:"DESCENDING"},OC={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},kC={and:"AND",or:"OR"},Id=class{constructor(e,n){this.databaseId=e,this.useProto3Json=n}};function Ed(t,e){return t.useProto3Json||Za(e)?e:{value:e}}function Na(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function w_(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function FC(t,e){return Na(t,e.toTimestamp())}function pt(t){return z(!!t),P.fromTimestamp(function(n){let r=Nt(n);return new me(r.seconds,r.nanos)}(t))}function Pf(t,e){return Td(t,e).canonicalString()}function Td(t,e){let n=function(i){return new K(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function I_(t){let e=K.fromString(t);return z(S_(e)),e}function Dd(t,e){return Pf(t.databaseId,e.path)}function Uh(t,e){let n=I_(e);if(n.get(1)!==t.databaseId.projectId)throw new _(g.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new _(g.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new D(T_(n))}function E_(t,e){return Pf(t.databaseId,e)}function MC(t){let e=I_(t);return e.length===4?K.emptyPath():T_(e)}function Ad(t){return new K(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function T_(t){return z(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function Lv(t,e,n){return{name:Dd(t,e),fields:n.value.mapValue.fields}}function xC(t,e){let n;if("targetChange"in e){e.targetChange;let r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:C()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(c,l){return c.useProto3Json?(z(l===void 0||typeof l=="string"),be.fromBase64String(l||"")):(z(l===void 0||l instanceof Buffer||l instanceof Uint8Array),be.fromUint8Array(l||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){let l=c.code===void 0?g.UNKNOWN:__(c.code);return new _(l,c.message||"")}(o);n=new Ra(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=Uh(t,r.document.name),s=pt(r.document.updateTime),o=r.document.createTime?pt(r.document.createTime):P.min(),a=new Le({mapValue:{fields:r.document.fields}}),u=Xe.newFoundDocument(i,s,o,a),c=r.targetIds||[],l=r.removedTargetIds||[];n=new Pr(c,l,u.key,u)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=Uh(t,r.document),s=r.readTime?pt(r.readTime):P.min(),o=Xe.newNoDocument(i,s),a=r.removedTargetIds||[];n=new Pr([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=Uh(t,r.document),s=r.removedTargetIds||[];n=new Pr([],s,i,null)}else{if(!("filter"in e))return C();{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:s}=r,o=new vd(i,s),a=r.targetId;n=new ba(a,o)}}return n}function LC(t,e){let n;if(e instanceof zn)n={update:Lv(t,e.key,e.value)};else if(e instanceof Sa)n={delete:Dd(t,e.key)};else if(e instanceof mt)n={update:Lv(t,e.key,e.data),updateMask:HC(e.fieldMask)};else{if(!(e instanceof pd))return C();n={verify:Dd(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){let a=o.transform;if(a instanceof Ur)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof jn)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof qn)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Br)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw C()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:FC(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:C()}(t,e.precondition)),n}function VC(t,e){return t&&t.length>0?(z(e!==void 0),t.map(n=>function(i,s){let o=i.updateTime?pt(i.updateTime):pt(s);return o.isEqual(P.min())&&(o=pt(s)),new fd(o,i.transformResults||[])}(n,e))):[]}function UC(t,e){return{documents:[E_(t,e.path)]}}function BC(t,e){let n={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=E_(t,i);let s=function(c){if(c.length!==0)return A_(Ze.create(c,"and"))}(e.filters);s&&(n.structuredQuery.where=s);let o=function(c){if(c.length!==0)return c.map(l=>function(f){return{field:Cr(f.field),direction:qC(f.dir)}}(l))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);let a=Ed(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{_t:n,parent:i}}function $C(t){let e=MC(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){z(r===1);let l=n.from[0];l.allDescendants?i=l.collectionId:e=e.child(l.collectionId)}let s=[];n.where&&(s=function(h){let f=D_(h);return f instanceof Ze&&t_(f)?f.getFilters():[f]}(n.where));let o=[];n.orderBy&&(o=function(h){return h.map(f=>function(E){return new Lr(br(E.field),function(v){switch(v){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(E.direction))}(f))}(n.orderBy));let a=null;n.limit&&(a=function(h){let f;return f=typeof h=="object"?h.value:h,Za(f)?null:f}(n.limit));let u=null;n.startAt&&(u=function(h){let f=!!h.before,p=h.values||[];return new xr(p,f)}(n.startAt));let c=null;return n.endAt&&(c=function(h){let f=!h.before,p=h.values||[];return new xr(p,f)}(n.endAt)),fC(e,i,o,s,a,"F",u,c)}function jC(t,e){let n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return C()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function D_(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":let r=br(n.unaryFilter.field);return ie.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=br(n.unaryFilter.field);return ie.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let s=br(n.unaryFilter.field);return ie.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let o=br(n.unaryFilter.field);return ie.create(o,"!=",{nullValue:"NULL_VALUE"});default:return C()}}(t):t.fieldFilter!==void 0?function(n){return ie.create(br(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return C()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Ze.create(n.compositeFilter.filters.map(r=>D_(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return C()}}(n.compositeFilter.op))}(t):C()}function qC(t){return NC[t]}function zC(t){return OC[t]}function GC(t){return kC[t]}function Cr(t){return{fieldPath:t.canonicalString()}}function br(t){return Ve.fromServerFormat(t.fieldPath)}function A_(t){return t instanceof ie?function(n){if(n.op==="=="){if(Tv(n.value))return{unaryFilter:{field:Cr(n.field),op:"IS_NAN"}};if(Ev(n.value))return{unaryFilter:{field:Cr(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Tv(n.value))return{unaryFilter:{field:Cr(n.field),op:"IS_NOT_NAN"}};if(Ev(n.value))return{unaryFilter:{field:Cr(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Cr(n.field),op:zC(n.op),value:n.value}}}(t):t instanceof Ze?function(n){let r=n.getFilters().map(i=>A_(i));return r.length===1?r[0]:{compositeFilter:{op:GC(n.op),filters:r}}}(t):C()}function HC(t){let e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function S_(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}var Ts=class t{constructor(e,n,r,i,s=P.min(),o=P.min(),a=be.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var Sd=class{constructor(e){this.ut=e}};function WC(t){let e=$C({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?dd(e,e.limit,"L"):e}var Oa=class{constructor(){}ht(e,n){this.Pt(e,n),n.It()}Pt(e,n){if("nullValue"in e)this.Tt(n,5);else if("booleanValue"in e)this.Tt(n,10),n.Et(e.booleanValue?1:0);else if("integerValue"in e)this.Tt(n,15),n.Et(J(e.integerValue));else if("doubleValue"in e){let r=J(e.doubleValue);isNaN(r)?this.Tt(n,13):(this.Tt(n,15),_s(r)?n.Et(0):n.Et(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Tt(n,20),typeof r=="string"&&(r=Nt(r)),n.dt(`${r.seconds||""}`),n.Et(r.nanos||0)}else if("stringValue"in e)this.At(e.stringValue,n),this.Rt(n);else if("bytesValue"in e)this.Tt(n,30),n.Vt(Zt(e.bytesValue)),this.Rt(n);else if("referenceValue"in e)this.ft(e.referenceValue,n);else if("geoPointValue"in e){let r=e.geoPointValue;this.Tt(n,45),n.Et(r.latitude||0),n.Et(r.longitude||0)}else"mapValue"in e?Xv(e)?this.Tt(n,Number.MAX_SAFE_INTEGER):(this.gt(e.mapValue,n),this.Rt(n)):"arrayValue"in e?(this.yt(e.arrayValue,n),this.Rt(n)):C()}At(e,n){this.Tt(n,25),this.wt(e,n)}wt(e,n){n.dt(e)}gt(e,n){let r=e.fields||{};this.Tt(n,55);for(let i of Object.keys(r))this.At(i,n),this.Pt(r[i],n)}yt(e,n){let r=e.values||[];this.Tt(n,50);for(let i of r)this.Pt(i,n)}ft(e,n){this.Tt(n,37),D.fromName(e).path.forEach(r=>{this.Tt(n,60),this.wt(r,n)})}Tt(e,n){e.Et(n)}Rt(e){e.Et(2)}};Oa.St=new Oa;var Cd=class{constructor(){this.on=new bd}addToCollectionParentIndex(e,n){return this.on.add(n),m.resolve()}getCollectionParents(e,n){return m.resolve(this.on.getEntries(n))}addFieldIndex(e,n){return m.resolve()}deleteFieldIndex(e,n){return m.resolve()}deleteAllFieldIndexes(e){return m.resolve()}createTargetIndexes(e,n){return m.resolve()}getDocumentsMatchingTarget(e,n){return m.resolve(null)}getIndexType(e,n){return m.resolve(0)}getFieldIndexes(e,n){return m.resolve([])}getNextCollectionGroupToUpdate(e){return m.resolve(null)}getMinOffset(e,n){return m.resolve(Un.min())}getMinOffsetFromCollectionGroup(e,n){return m.resolve(Un.min())}updateCollectionGroup(e,n,r){return m.resolve()}updateIndexEntries(e,n){return m.resolve()}},bd=class{constructor(){this.index={}}add(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Ae(K.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Ae(K.comparator)).toArray()}};var $1=new Uint8Array(0);var lt=class t{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};lt.DEFAULT_COLLECTION_PERCENTILE=10,lt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,lt.DEFAULT=new lt(41943040,lt.DEFAULT_COLLECTION_PERCENTILE,lt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),lt.DISABLED=new lt(-1,0,0);var Ds=class t{constructor(e){this.xn=e}next(){return this.xn+=2,this.xn}static On(){return new t(0)}static Nn(){return new t(-1)}};var Rd=class{constructor(){this.changes=new en(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Xe.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();let r=this.changes.get(n);return r!==void 0?m.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var Pd=class{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}};var Nd=class{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&vs(r.mutation,i,Ge.empty(),me.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,L()).next(()=>r))}getLocalViewOfDocuments(e,n,r=L()){let i=Mn();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=ps();return s.forEach((a,u)=>{o=o.insert(a,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){let r=Mn();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,L()))}populateOverlays(e,n,r){let i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=Ot(),o=ys(),a=function(){return ys()}();return n.forEach((u,c)=>{let l=r.get(c.key);i.has(c.key)&&(l===void 0||l.mutation instanceof mt)?s=s.insert(c.key,c):l!==void 0?(o.set(c.key,l.mutation.getFieldMask()),vs(l.mutation,c,l.mutation.getFieldMask(),me.now())):o.set(c.key,Ge.empty())}),this.recalculateAndSaveOverlays(e,s).next(u=>(u.forEach((c,l)=>o.set(c,l)),n.forEach((c,l)=>{var h;return a.set(c,new Pd(l,(h=o.get(c))!==null&&h!==void 0?h:null))}),a))}recalculateAndSaveOverlays(e,n){let r=ys(),i=new X((o,a)=>o-a),s=L();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(let a of o)a.keys().forEach(u=>{let c=n.get(u);if(c===null)return;let l=r.get(u)||Ge.empty();l=a.applyToLocalView(c,l),r.set(u,l);let h=(i.get(a.batchId)||L()).add(u);i=i.insert(a.batchId,h)})}).next(()=>{let o=[],a=i.getReverseIterator();for(;a.hasNext();){let u=a.getNext(),c=u.key,l=u.value,h=l_();l.forEach(f=>{if(!s.has(f)){let p=y_(n.get(f),r.get(f));p!==null&&h.set(f,p),s=s.add(f)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,h))}return m.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return D.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):s_(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{let o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):m.resolve(Mn()),a=-1,u=s;return o.next(c=>m.forEach(c,(l,h)=>(a<h.largestBatchId&&(a=h.largestBatchId),s.get(l)?m.resolve():this.remoteDocumentCache.getEntry(e,l).next(f=>{u=u.insert(l,f)}))).next(()=>this.populateOverlays(e,c,s)).next(()=>this.computeViews(e,u,c,L())).next(l=>({batchId:a,changes:c_(l)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new D(n)).next(r=>{let i=ps();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){let s=n.collectionGroup,o=ps();return this.indexManager.getCollectionParents(e,s).next(a=>m.forEach(a,u=>{let c=function(h,f){return new $n(f,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)}(n,u.child(s));return this.getDocumentsMatchingCollectionQuery(e,c,r,i).next(l=>{l.forEach((h,f)=>{o=o.insert(h,f)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((u,c)=>{let l=c.getKey();o.get(l)===null&&(o=o.insert(l,Xe.newInvalidDocument(l)))});let a=ps();return o.forEach((u,c)=>{let l=s.get(u);l!==void 0&&vs(l.mutation,c,Ge.empty(),me.now()),tu(n,c)&&(a=a.insert(u,c))}),a})}};var Od=class{constructor(e){this.serializer=e,this.ur=new Map,this.cr=new Map}getBundleMetadata(e,n){return m.resolve(this.ur.get(n))}saveBundleMetadata(e,n){return this.ur.set(n.id,function(i){return{id:i.id,version:i.version,createTime:pt(i.createTime)}}(n)),m.resolve()}getNamedQuery(e,n){return m.resolve(this.cr.get(n))}saveNamedQuery(e,n){return this.cr.set(n.name,function(i){return{name:i.name,query:WC(i.bundledQuery),readTime:pt(i.readTime)}}(n)),m.resolve()}};var kd=class{constructor(){this.overlays=new X(D.comparator),this.lr=new Map}getOverlay(e,n){return m.resolve(this.overlays.get(n))}getOverlays(e,n){let r=Mn();return m.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.lt(e,n,s)}),m.resolve()}removeOverlaysForBatchId(e,n,r){let i=this.lr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.lr.delete(r)),m.resolve()}getOverlaysForCollection(e,n,r){let i=Mn(),s=n.length+1,o=new D(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){let u=a.getNext().value,c=u.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===s&&u.largestBatchId>r&&i.set(u.getKey(),u)}return m.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new X((c,l)=>c-l),o=this.overlays.getIterator();for(;o.hasNext();){let c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let l=s.get(c.largestBatchId);l===null&&(l=Mn(),s=s.insert(c.largestBatchId,l)),l.set(c.getKey(),c)}}let a=Mn(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((c,l)=>a.set(c,l)),!(a.size()>=i)););return m.resolve(a)}lt(e,n,r){let i=this.overlays.get(r.key);if(i!==null){let o=this.lr.get(i.largestBatchId).delete(r.key);this.lr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new yd(n,r));let s=this.lr.get(n);s===void 0&&(s=L(),this.lr.set(n,s)),this.lr.set(n,s.add(r.key))}};var As=class{constructor(){this.hr=new Ae(re.Pr),this.Ir=new Ae(re.Tr)}isEmpty(){return this.hr.isEmpty()}addReference(e,n){let r=new re(e,n);this.hr=this.hr.add(r),this.Ir=this.Ir.add(r)}Er(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.dr(new re(e,n))}Ar(e,n){e.forEach(r=>this.removeReference(r,n))}Rr(e){let n=new D(new K([])),r=new re(n,e),i=new re(n,e+1),s=[];return this.Ir.forEachInRange([r,i],o=>{this.dr(o),s.push(o.key)}),s}Vr(){this.hr.forEach(e=>this.dr(e))}dr(e){this.hr=this.hr.delete(e),this.Ir=this.Ir.delete(e)}mr(e){let n=new D(new K([])),r=new re(n,e),i=new re(n,e+1),s=L();return this.Ir.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){let n=new re(e,0),r=this.hr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}},re=class{constructor(e,n){this.key=e,this.gr=n}static Pr(e,n){return D.comparator(e.key,n.key)||U(e.gr,n.gr)}static Tr(e,n){return U(e.gr,n.gr)||D.comparator(e.key,n.key)}};var Fd=class{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.pr=1,this.yr=new Ae(re.Pr)}checkEmpty(e){return m.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){let s=this.pr;this.pr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let o=new gd(s,n,r,i);this.mutationQueue.push(o);for(let a of i)this.yr=this.yr.add(new re(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return m.resolve(o)}lookupMutationBatch(e,n){return m.resolve(this.wr(n))}getNextMutationBatchAfterBatchId(e,n){let r=n+1,i=this.Sr(r),s=i<0?0:i;return m.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return m.resolve(this.mutationQueue.length===0?-1:this.pr-1)}getAllMutationBatches(e){return m.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){let r=new re(n,0),i=new re(n,Number.POSITIVE_INFINITY),s=[];return this.yr.forEachInRange([r,i],o=>{let a=this.wr(o.gr);s.push(a)}),m.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Ae(U);return n.forEach(i=>{let s=new re(i,0),o=new re(i,Number.POSITIVE_INFINITY);this.yr.forEachInRange([s,o],a=>{r=r.add(a.gr)})}),m.resolve(this.br(r))}getAllMutationBatchesAffectingQuery(e,n){let r=n.path,i=r.length+1,s=r;D.isDocumentKey(s)||(s=s.child(""));let o=new re(new D(s),0),a=new Ae(U);return this.yr.forEachWhile(u=>{let c=u.key.path;return!!r.isPrefixOf(c)&&(c.length===i&&(a=a.add(u.gr)),!0)},o),m.resolve(this.br(a))}br(e){let n=[];return e.forEach(r=>{let i=this.wr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){z(this.Dr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.yr;return m.forEach(n.mutations,i=>{let s=new re(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.yr=r})}Fn(e){}containsKey(e,n){let r=new re(n,0),i=this.yr.firstAfterOrEqual(r);return m.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,m.resolve()}Dr(e,n){return this.Sr(e)}Sr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}wr(e){let n=this.Sr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}};var Md=class{constructor(e){this.Cr=e,this.docs=function(){return new X(D.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){let r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.Cr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){let r=this.docs.get(n);return m.resolve(r?r.document.mutableCopy():Xe.newInvalidDocument(n))}getEntries(e,n){let r=Ot();return n.forEach(i=>{let s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Xe.newInvalidDocument(i))}),m.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=Ot(),o=n.path,a=new D(o.child("")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){let{key:c,value:{document:l}}=u.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||rC(nC(l),r)<=0||(i.has(l.key)||tu(n,l))&&(s=s.insert(l.key,l.mutableCopy()))}return m.resolve(s)}getAllFromCollectionGroup(e,n,r,i){C()}vr(e,n){return m.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new xd(this)}getSize(e){return m.resolve(this.size)}},xd=class extends Rd{constructor(e){super(),this._r=e}applyChanges(e){let n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this._r.addEntry(e,i)):this._r.removeEntry(r)}),m.waitFor(n)}getFromCache(e,n){return this._r.getEntry(e,n)}getAllFromCache(e,n){return this._r.getEntries(e,n)}};var Ld=class{constructor(e){this.persistence=e,this.Fr=new en(n=>Cf(n),bf),this.lastRemoteSnapshotVersion=P.min(),this.highestTargetId=0,this.Mr=0,this.Or=new As,this.targetCount=0,this.Nr=Ds.On()}forEachTarget(e,n){return this.Fr.forEach((r,i)=>n(i)),m.resolve()}getLastRemoteSnapshotVersion(e){return m.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return m.resolve(this.Mr)}allocateTargetId(e){return this.highestTargetId=this.Nr.next(),m.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Mr&&(this.Mr=n),m.resolve()}kn(e){this.Fr.set(e.target,e);let n=e.targetId;n>this.highestTargetId&&(this.Nr=new Ds(n),this.highestTargetId=n),e.sequenceNumber>this.Mr&&(this.Mr=e.sequenceNumber)}addTargetData(e,n){return this.kn(n),this.targetCount+=1,m.resolve()}updateTargetData(e,n){return this.kn(n),m.resolve()}removeTargetData(e,n){return this.Fr.delete(n.target),this.Or.Rr(n.targetId),this.targetCount-=1,m.resolve()}removeTargets(e,n,r){let i=0,s=[];return this.Fr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Fr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),m.waitFor(s).next(()=>i)}getTargetCount(e){return m.resolve(this.targetCount)}getTargetData(e,n){let r=this.Fr.get(n)||null;return m.resolve(r)}addMatchingKeys(e,n,r){return this.Or.Er(n,r),m.resolve()}removeMatchingKeys(e,n,r){this.Or.Ar(n,r);let i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),m.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Or.Rr(n),m.resolve()}getMatchingKeysForTargetId(e,n){let r=this.Or.mr(n);return m.resolve(r)}containsKey(e,n){return m.resolve(this.Or.containsKey(n))}};var Vd=class{constructor(e,n){this.Lr={},this.overlays={},this.Br=new Yv(0),this.kr=!1,this.kr=!0,this.referenceDelegate=e(this),this.qr=new Ld(this),this.indexManager=new Cd,this.remoteDocumentCache=function(i){return new Md(i)}(r=>this.referenceDelegate.Qr(r)),this.serializer=new Sd(n),this.Kr=new Od(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.kr=!1,Promise.resolve()}get started(){return this.kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new kd,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.Lr[e.toKey()];return r||(r=new Fd(n,this.referenceDelegate),this.Lr[e.toKey()]=r),r}getTargetCache(){return this.qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Kr}runTransaction(e,n,r){I("MemoryPersistence","Starting transaction:",e);let i=new Ud(this.Br.next());return this.referenceDelegate.$r(),r(i).next(s=>this.referenceDelegate.Ur(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Wr(e,n){return m.or(Object.values(this.Lr).map(r=>()=>r.containsKey(e,n)))}},Ud=class extends Jh{constructor(e){super(),this.currentSequenceNumber=e}},Bd=class t{constructor(e){this.persistence=e,this.Gr=new As,this.zr=null}static jr(e){return new t(e)}get Hr(){if(this.zr)return this.zr;throw C()}addReference(e,n,r){return this.Gr.addReference(r,n),this.Hr.delete(r.toString()),m.resolve()}removeReference(e,n,r){return this.Gr.removeReference(r,n),this.Hr.add(r.toString()),m.resolve()}markPotentiallyOrphaned(e,n){return this.Hr.add(n.toString()),m.resolve()}removeTarget(e,n){this.Gr.Rr(n.targetId).forEach(i=>this.Hr.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Hr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}$r(){this.zr=new Set}Ur(e){let n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return m.forEach(this.Hr,r=>{let i=D.fromPath(r);return this.Jr(e,i).next(s=>{s||n.removeEntry(i,P.min())})}).next(()=>(this.zr=null,n.apply(e)))}updateLimboDocument(e,n){return this.Jr(e,n).next(r=>{r?this.Hr.delete(n.toString()):this.Hr.add(n.toString())})}Qr(e){return 0}Jr(e,n){return m.or([()=>m.resolve(this.Gr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Wr(e,n)])}};var $d=class t{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.ki=r,this.qi=i}static Qi(e,n){let r=L(),i=L();for(let s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new t(e,n.fromCache,r,i)}};var jd=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var qd=class{constructor(){this.Ki=!1,this.$i=!1,this.Ui=100,this.Wi=function(){return Vg()?8:sC(oe())>0?6:4}()}initialize(e,n){this.Gi=e,this.indexManager=n,this.Ki=!0}getDocumentsMatchingQuery(e,n,r,i){let s={result:null};return this.zi(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.ji(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;let o=new jd;return this.Hi(e,n,o).next(a=>{if(s.result=a,this.$i)return this.Ji(e,n,o,a.size)})}).next(()=>s.result)}Ji(e,n,r,i){return r.documentReadCount<this.Ui?(fs()<=x.DEBUG&&I("QueryEngine","SDK will not create cache indexes for query:",Sr(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Ui,"documents"),m.resolve()):(fs()<=x.DEBUG&&I("QueryEngine","Query:",Sr(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Wi*i?(fs()<=x.DEBUG&&I("QueryEngine","The SDK decides to create cache indexes for query:",Sr(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ft(n))):m.resolve())}zi(e,n){if(Cv(n))return m.resolve(null);let r=ft(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=dd(n,null,"F"),r=ft(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{let o=L(...s);return this.Gi.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{let c=this.Yi(n,a);return this.Zi(n,c,o,u.readTime)?this.zi(e,dd(n,null,"F")):this.Xi(e,c,n,u)}))})))}ji(e,n,r,i){return Cv(n)||i.isEqual(P.min())?m.resolve(null):this.Gi.getDocuments(e,r).next(s=>{let o=this.Yi(n,s);return this.Zi(n,o,r,i)?m.resolve(null):(fs()<=x.DEBUG&&I("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Sr(n)),this.Xi(e,o,n,tC(i,-1)).next(a=>a))})}Yi(e,n){let r=new Ae(a_(e));return n.forEach((i,s)=>{tu(e,s)&&(r=r.add(s))}),r}Zi(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;let s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Hi(e,n,r){return fs()<=x.DEBUG&&I("QueryEngine","Using full collection scan to execute query:",Sr(n)),this.Gi.getDocumentsMatchingQuery(e,n,Un.min(),r)}Xi(e,n,r,i){return this.Gi.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}};var zd=class{constructor(e,n,r,i){this.persistence=e,this.es=n,this.serializer=i,this.ts=new X(U),this.ns=new en(s=>Cf(s),bf),this.rs=new Map,this.ss=e.getRemoteDocumentCache(),this.qr=e.getTargetCache(),this.Kr=e.getBundleCache(),this.os(r)}os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Nd(this.ss,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ss.setIndexManager(this.indexManager),this.es.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.ts))}};function KC(t,e,n,r){return new zd(t,e,n,r)}function C_(t,e){return d(this,null,function*(){let n=R(t);return yield n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.os(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{let o=[],a=[],u=L();for(let c of i){o.push(c.batchId);for(let l of c.mutations)u=u.add(l.key)}for(let c of s){a.push(c.batchId);for(let l of c.mutations)u=u.add(l.key)}return n.localDocuments.getDocuments(r,u).next(c=>({_s:c,removedBatchIds:o,addedBatchIds:a}))})})})}function QC(t,e){let n=R(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),s=n.ss.newChangeBuffer({trackRemovals:!0});return function(a,u,c,l){let h=c.batch,f=h.keys(),p=m.resolve();return f.forEach(E=>{p=p.next(()=>l.getEntry(u,E)).next(T=>{let v=c.docVersions.get(E);z(v!==null),T.version.compareTo(v)<0&&(h.applyToRemoteDocument(T,c),T.isValidDocument()&&(T.setReadTime(c.commitVersion),l.addEntry(T)))})}),p.next(()=>a.mutationQueue.removeMutationBatch(u,h))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=L();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(u=u.add(a.batch.mutations[c].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function b_(t){let e=R(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.qr.getLastRemoteSnapshotVersion(n))}function YC(t,e){let n=R(t),r=e.snapshotVersion,i=n.ts;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{let o=n.ss.newChangeBuffer({trackRemovals:!0});i=n.ts;let a=[];e.targetChanges.forEach((l,h)=>{let f=i.get(h);if(!f)return;a.push(n.qr.removeMatchingKeys(s,l.removedDocuments,h).next(()=>n.qr.addMatchingKeys(s,l.addedDocuments,h)));let p=f.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(h)!==null?p=p.withResumeToken(be.EMPTY_BYTE_STRING,P.min()).withLastLimboFreeSnapshotVersion(P.min()):l.resumeToken.approximateByteSize()>0&&(p=p.withResumeToken(l.resumeToken,r)),i=i.insert(h,p),function(T,v,k){return T.resumeToken.approximateByteSize()===0||v.snapshotVersion.toMicroseconds()-T.snapshotVersion.toMicroseconds()>=3e8?!0:k.addedDocuments.size+k.modifiedDocuments.size+k.removedDocuments.size>0}(f,p,l)&&a.push(n.qr.updateTargetData(s,p))});let u=Ot(),c=L();if(e.documentUpdates.forEach(l=>{e.resolvedLimboDocuments.has(l)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,l))}),a.push(JC(s,o,e.documentUpdates).next(l=>{u=l.us,c=l.cs})),!r.isEqual(P.min())){let l=n.qr.getLastRemoteSnapshotVersion(s).next(h=>n.qr.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(l)}return m.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,u,c)).next(()=>u)}).then(s=>(n.ts=i,s))}function JC(t,e,n){let r=L(),i=L();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=Ot();return n.forEach((a,u)=>{let c=s.get(a);u.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(P.min())?(e.removeEntry(a,u.readTime),o=o.insert(a,u)):!c.isValidDocument()||u.version.compareTo(c.version)>0||u.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(u),o=o.insert(a,u)):I("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",u.version)}),{us:o,cs:i}})}function XC(t,e){let n=R(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function ZC(t,e){let n=R(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.qr.getTargetData(r,e).next(s=>s?(i=s,m.resolve(i)):n.qr.allocateTargetId(r).next(o=>(i=new Ts(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.qr.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=n.ts.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.ts=n.ts.insert(r.targetId,r),n.ns.set(e,r.targetId)),r})}function Gd(t,e,n){return d(this,null,function*(){let r=R(t),i=r.ts.get(e),s=n?"readwrite":"readwrite-primary";try{n||(yield r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!Os(o))throw o;I("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.ts=r.ts.remove(e),r.ns.delete(i.target)})}function Vv(t,e,n){let r=R(t),i=P.min(),s=L();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,c,l){let h=R(u),f=h.ns.get(l);return f!==void 0?m.resolve(h.ts.get(f)):h.qr.getTargetData(c,l)}(r,o,ft(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.qr.getMatchingKeysForTargetId(o,a.targetId).next(u=>{s=u})}).next(()=>r.es.getDocumentsMatchingQuery(o,e,n?i:P.min(),n?s:L())).next(a=>(eb(r,gC(e),a),{documents:a,ls:s})))}function eb(t,e,n){let r=t.rs.get(e)||P.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.rs.set(e,r)}var ka=class{constructor(){this.activeTargetIds=IC()}ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}As(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Es(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var Hd=class{constructor(){this.eo=new ka,this.no={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.eo.ds(e),this.no[e]||"not-current"}updateQueryState(e,n,r){this.no[e]=n}removeLocalQueryTarget(e){this.eo.As(e)}isLocalQueryTarget(e){return this.eo.activeTargetIds.has(e)}clearQueryState(e){delete this.no[e]}getAllActiveQueryTargets(){return this.eo.activeTargetIds}isActiveQueryTarget(e){return this.eo.activeTargetIds.has(e)}start(){return this.eo=new ka,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var Wd=class{ro(e){}shutdown(){}};var Fa=class{constructor(){this.io=()=>this.so(),this.oo=()=>this._o(),this.ao=[],this.uo()}ro(e){this.ao.push(e)}shutdown(){window.removeEventListener("online",this.io),window.removeEventListener("offline",this.oo)}uo(){window.addEventListener("online",this.io),window.addEventListener("offline",this.oo)}so(){I("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.ao)e(0)}_o(){I("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.ao)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var ma=null;function Bh(){return ma===null?ma=function(){return 268435456+Math.round(2147483648*Math.random())}():ma++,"0x"+ma.toString(16)}var tb={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var Kd=class{constructor(e){this.co=e.co,this.lo=e.lo}ho(e){this.Po=e}Io(e){this.To=e}Eo(e){this.Ao=e}onMessage(e){this.Ro=e}close(){this.lo()}send(e){this.co(e)}Vo(){this.Po()}mo(){this.To()}fo(e){this.Ao(e)}po(e){this.Ro(e)}};var De="WebChannelConnection",Qd=class extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;let r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.yo=r+"://"+n.host,this.wo=`projects/${i}/databases/${s}`,this.So=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get bo(){return!1}Do(n,r,i,s,o){let a=Bh(),u=this.Co(n,r.toUriEncodedString());I("RestConnection",`Sending RPC '${n}' ${a}:`,u,i);let c={"google-cloud-resource-prefix":this.wo,"x-goog-request-params":this.So};return this.vo(c,s,o),this.Fo(n,u,c,i).then(l=>(I("RestConnection",`Received RPC '${n}' ${a}: `,l),l),l=>{throw Or("RestConnection",`RPC '${n}' ${a} failed with error: `,l,"url: ",u,"request:",i),l})}Mo(n,r,i,s,o,a){return this.Do(n,r,i,s,o)}vo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Gr}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}Co(n,r){let i=tb[n];return`${this.yo}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Fo(e,n,r,i){let s=Bh();return new Promise((o,a)=>{let u=new mv;u.setWithCredentials(!0),u.listenOnce(fv.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case pa.NO_ERROR:let l=u.getResponseJson();I(De,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(l)),o(l);break;case pa.TIMEOUT:I(De,`RPC '${e}' ${s} timed out`),a(new _(g.DEADLINE_EXCEEDED,"Request time out"));break;case pa.HTTP_ERROR:let h=u.getStatus();if(I(De,`RPC '${e}' ${s} failed with status:`,h,"response text:",u.getResponseText()),h>0){let f=u.getResponseJson();Array.isArray(f)&&(f=f[0]);let p=f?.error;if(p&&p.status&&p.message){let E=function(v){let k=v.toLowerCase().replace(/_/g,"-");return Object.values(g).indexOf(k)>=0?k:g.UNKNOWN}(p.status);a(new _(E,p.message))}else a(new _(g.UNKNOWN,"Server responded with status "+u.getStatus()))}else a(new _(g.UNAVAILABLE,"Connection failed."));break;default:C()}}finally{I(De,`RPC '${e}' ${s} completed.`)}});let c=JSON.stringify(i);I(De,`RPC '${e}' ${s} sending request:`,i),u.send(n,"POST",c,r,15)})}xo(e,n,r){let i=Bh(),s=[this.yo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=hv(),a=dv(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(u.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(u.xmlHttpFactory=new gv({})),this.vo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;let l=s.join("");I(De,`Creating RPC '${e}' stream ${i}: ${l}`,u);let h=o.createWebChannel(l,u),f=!1,p=!1,E=new Kd({co:v=>{p?I(De,`Not sending because RPC '${e}' stream ${i} is closed:`,v):(f||(I(De,`Opening RPC '${e}' stream ${i} transport.`),h.open(),f=!0),I(De,`RPC '${e}' stream ${i} sending:`,v),h.send(v))},lo:()=>h.close()}),T=(v,k,q)=>{v.listen(k,Z=>{try{q(Z)}catch(ye){setTimeout(()=>{throw ye},0)}})};return T(h,ds.EventType.OPEN,()=>{p||(I(De,`RPC '${e}' stream ${i} transport opened.`),E.Vo())}),T(h,ds.EventType.CLOSE,()=>{p||(p=!0,I(De,`RPC '${e}' stream ${i} transport closed`),E.fo())}),T(h,ds.EventType.ERROR,v=>{p||(p=!0,Or(De,`RPC '${e}' stream ${i} transport errored:`,v),E.fo(new _(g.UNAVAILABLE,"The operation could not be completed")))}),T(h,ds.EventType.MESSAGE,v=>{var k;if(!p){let q=v.data[0];z(!!q);let Z=q,ye=Z.error||((k=Z[0])===null||k===void 0?void 0:k.error);if(ye){I(De,`RPC '${e}' stream ${i} received error:`,ye);let et=ye.status,ue=function(Wr){let Ls=ne[Wr];if(Ls!==void 0)return __(Ls)}(et),yt=ye.message;ue===void 0&&(ue=g.INTERNAL,yt="Unknown error status: "+et+" with message "+ye.message),p=!0,E.fo(new _(ue,yt)),h.close()}else I(De,`RPC '${e}' stream ${i} received:`,q),E.po(q)}}),T(a,pv.STAT_EVENT,v=>{v.stat===Vh.PROXY?I(De,`RPC '${e}' stream ${i} detected buffering proxy`):v.stat===Vh.NOPROXY&&I(De,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{E.mo()},0),E}};function $h(){return typeof document<"u"?document:null}function nu(t){return new Id(t,!0)}var Ma=class{constructor(e,n,r=1e3,i=1.5,s=6e4){this.si=e,this.timerId=n,this.Oo=r,this.No=i,this.Lo=s,this.Bo=0,this.ko=null,this.qo=Date.now(),this.reset()}reset(){this.Bo=0}Qo(){this.Bo=this.Lo}Ko(e){this.cancel();let n=Math.floor(this.Bo+this.$o()),r=Math.max(0,Date.now()-this.qo),i=Math.max(0,n-r);i>0&&I("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Bo} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.ko=this.si.enqueueAfterDelay(this.timerId,i,()=>(this.qo=Date.now(),e())),this.Bo*=this.No,this.Bo<this.Oo&&(this.Bo=this.Oo),this.Bo>this.Lo&&(this.Bo=this.Lo)}Uo(){this.ko!==null&&(this.ko.skipDelay(),this.ko=null)}cancel(){this.ko!==null&&(this.ko.cancel(),this.ko=null)}$o(){return(Math.random()-.5)*this.Bo}};var xa=class{constructor(e,n,r,i,s,o,a,u){this.si=e,this.Wo=r,this.Go=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.zo=0,this.jo=null,this.Ho=null,this.stream=null,this.Jo=new Ma(e,n)}Yo(){return this.state===1||this.state===5||this.Zo()}Zo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.Xo()}stop(){return d(this,null,function*(){this.Yo()&&(yield this.close(0))})}e_(){this.state=0,this.Jo.reset()}t_(){this.Zo()&&this.jo===null&&(this.jo=this.si.enqueueAfterDelay(this.Wo,6e4,()=>this.n_()))}r_(e){this.i_(),this.stream.send(e)}n_(){return d(this,null,function*(){if(this.Zo())return this.close(0)})}i_(){this.jo&&(this.jo.cancel(),this.jo=null)}s_(){this.Ho&&(this.Ho.cancel(),this.Ho=null)}close(e,n){return d(this,null,function*(){this.i_(),this.s_(),this.Jo.cancel(),this.zo++,e!==4?this.Jo.reset():n&&n.code===g.RESOURCE_EXHAUSTED?(Pt(n.toString()),Pt("Using maximum backoff delay to prevent overloading the backend."),this.Jo.Qo()):n&&n.code===g.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.o_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.Eo(n)})}o_(){}auth(){this.state=1;let e=this.__(this.zo),n=this.zo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.zo===n&&this.a_(r,i)},r=>{e(()=>{let i=new _(g.UNKNOWN,"Fetching auth token failed: "+r.message);return this.u_(i)})})}a_(e,n){let r=this.__(this.zo);this.stream=this.c_(e,n),this.stream.ho(()=>{r(()=>this.listener.ho())}),this.stream.Io(()=>{r(()=>(this.state=2,this.Ho=this.si.enqueueAfterDelay(this.Go,1e4,()=>(this.Zo()&&(this.state=3),Promise.resolve())),this.listener.Io()))}),this.stream.Eo(i=>{r(()=>this.u_(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Xo(){this.state=5,this.Jo.Ko(()=>d(this,null,function*(){this.state=0,this.start()}))}u_(e){return I("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}__(e){return n=>{this.si.enqueueAndForget(()=>this.zo===e?n():(I("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},Yd=class extends xa{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}c_(e,n){return this.connection.xo("Listen",e,n)}onMessage(e){this.Jo.reset();let n=xC(this.serializer,e),r=function(s){if(!("targetChange"in s))return P.min();let o=s.targetChange;return o.targetIds&&o.targetIds.length?P.min():o.readTime?pt(o.readTime):P.min()}(e);return this.listener.l_(n,r)}h_(e){let n={};n.database=Ad(this.serializer),n.addTarget=function(s,o){let a,u=o.target;if(a=ld(u)?{documents:UC(s,u)}:{query:BC(s,u)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=w_(s,o.resumeToken);let c=Ed(s,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(P.min())>0){a.readTime=Na(s,o.snapshotVersion.toTimestamp());let c=Ed(s,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);let r=jC(this.serializer,e);r&&(n.labels=r),this.r_(n)}P_(e){let n={};n.database=Ad(this.serializer),n.removeTarget=e,this.r_(n)}},Jd=class extends xa{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s,this.I_=!1}get T_(){return this.I_}start(){this.I_=!1,this.lastStreamToken=void 0,super.start()}o_(){this.I_&&this.E_([])}c_(e,n){return this.connection.xo("Write",e,n)}onMessage(e){if(z(!!e.streamToken),this.lastStreamToken=e.streamToken,this.I_){this.Jo.reset();let n=VC(e.writeResults,e.commitTime),r=pt(e.commitTime);return this.listener.d_(r,n)}return z(!e.writeResults||e.writeResults.length===0),this.I_=!0,this.listener.A_()}R_(){let e={};e.database=Ad(this.serializer),this.r_(e)}E_(e){let n={streamToken:this.lastStreamToken,writes:e.map(r=>LC(this.serializer,r))};this.r_(n)}};var Xd=class extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.V_=!1}m_(){if(this.V_)throw new _(g.FAILED_PRECONDITION,"The client has already been terminated.")}Do(e,n,r,i){return this.m_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Do(e,Td(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===g.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new _(g.UNKNOWN,s.toString())})}Mo(e,n,r,i,s){return this.m_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Mo(e,Td(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===g.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new _(g.UNKNOWN,o.toString())})}terminate(){this.V_=!0,this.connection.terminate()}};var Zd=class{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.g_=0,this.p_=null,this.y_=!0}w_(){this.g_===0&&(this.S_("Unknown"),this.p_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.p_=null,this.b_("Backend didn't respond within 10 seconds."),this.S_("Offline"),Promise.resolve())))}D_(e){this.state==="Online"?this.S_("Unknown"):(this.g_++,this.g_>=1&&(this.C_(),this.b_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.S_("Offline")))}set(e){this.C_(),this.g_=0,e==="Online"&&(this.y_=!1),this.S_(e)}S_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}b_(e){let n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.y_?(Pt(n),this.y_=!1):I("OnlineStateTracker",n)}C_(){this.p_!==null&&(this.p_.cancel(),this.p_=null)}};var ef=class{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.v_=[],this.F_=new Map,this.M_=new Set,this.x_=[],this.O_=s,this.O_.ro(o=>{r.enqueueAndForget(()=>d(this,null,function*(){Wn(this)&&(I("RemoteStore","Restarting streams for network reachability change."),yield function(u){return d(this,null,function*(){let c=R(u);c.M_.add(4),yield ks(c),c.N_.set("Unknown"),c.M_.delete(4),yield ru(c)})}(this))}))}),this.N_=new Zd(r,i)}};function ru(t){return d(this,null,function*(){if(Wn(t))for(let e of t.x_)yield e(!0)})}function ks(t){return d(this,null,function*(){for(let e of t.x_)yield e(!1)})}function R_(t,e){let n=R(t);n.F_.has(e.targetId)||(n.F_.set(e.targetId,e),Ff(n)?kf(n):Hr(n).Zo()&&Of(n,e))}function Nf(t,e){let n=R(t),r=Hr(n);n.F_.delete(e),r.Zo()&&P_(n,e),n.F_.size===0&&(r.Zo()?r.t_():Wn(n)&&n.N_.set("Unknown"))}function Of(t,e){if(t.L_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(P.min())>0){let n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Hr(t).h_(e)}function P_(t,e){t.L_.xe(e),Hr(t).P_(e)}function kf(t){t.L_=new wd({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.F_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Hr(t).start(),t.N_.w_()}function Ff(t){return Wn(t)&&!Hr(t).Yo()&&t.F_.size>0}function Wn(t){return R(t).M_.size===0}function N_(t){t.L_=void 0}function nb(t){return d(this,null,function*(){t.N_.set("Online")})}function rb(t){return d(this,null,function*(){t.F_.forEach((e,n)=>{Of(t,e)})})}function ib(t,e){return d(this,null,function*(){N_(t),Ff(t)?(t.N_.D_(e),kf(t)):t.N_.set("Unknown")})}function sb(t,e,n){return d(this,null,function*(){if(t.N_.set("Online"),e instanceof Ra&&e.state===2&&e.cause)try{yield function(i,s){return d(this,null,function*(){let o=s.cause;for(let a of s.targetIds)i.F_.has(a)&&(yield i.remoteSyncer.rejectListen(a,o),i.F_.delete(a),i.L_.removeTarget(a))})}(t,e)}catch(r){I("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield La(t,r)}else if(e instanceof Pr?t.L_.Ke(e):e instanceof ba?t.L_.He(e):t.L_.We(e),!n.isEqual(P.min()))try{let r=yield b_(t.localStore);n.compareTo(r)>=0&&(yield function(s,o){let a=s.L_.rt(o);return a.targetChanges.forEach((u,c)=>{if(u.resumeToken.approximateByteSize()>0){let l=s.F_.get(c);l&&s.F_.set(c,l.withResumeToken(u.resumeToken,o))}}),a.targetMismatches.forEach((u,c)=>{let l=s.F_.get(u);if(!l)return;s.F_.set(u,l.withResumeToken(be.EMPTY_BYTE_STRING,l.snapshotVersion)),P_(s,u);let h=new Ts(l.target,u,c,l.sequenceNumber);Of(s,h)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n))}catch(r){I("RemoteStore","Failed to raise snapshot:",r),yield La(t,r)}})}function La(t,e,n){return d(this,null,function*(){if(!Os(e))throw e;t.M_.add(1),yield ks(t),t.N_.set("Offline"),n||(n=()=>b_(t.localStore)),t.asyncQueue.enqueueRetryable(()=>d(this,null,function*(){I("RemoteStore","Retrying IndexedDB access"),yield n(),t.M_.delete(1),yield ru(t)}))})}function O_(t,e){return e().catch(n=>La(t,n,e))}function iu(t){return d(this,null,function*(){let e=R(t),n=tn(e),r=e.v_.length>0?e.v_[e.v_.length-1].batchId:-1;for(;ob(e);)try{let i=yield XC(e.localStore,r);if(i===null){e.v_.length===0&&n.t_();break}r=i.batchId,ab(e,i)}catch(i){yield La(e,i)}k_(e)&&F_(e)})}function ob(t){return Wn(t)&&t.v_.length<10}function ab(t,e){t.v_.push(e);let n=tn(t);n.Zo()&&n.T_&&n.E_(e.mutations)}function k_(t){return Wn(t)&&!tn(t).Yo()&&t.v_.length>0}function F_(t){tn(t).start()}function ub(t){return d(this,null,function*(){tn(t).R_()})}function cb(t){return d(this,null,function*(){let e=tn(t);for(let n of t.v_)e.E_(n.mutations)})}function lb(t,e,n){return d(this,null,function*(){let r=t.v_.shift(),i=md.from(r,e,n);yield O_(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),yield iu(t)})}function hb(t,e){return d(this,null,function*(){e&&tn(t).T_&&(yield function(r,i){return d(this,null,function*(){if(function(o){return bC(o)&&o!==g.ABORTED}(i.code)){let s=r.v_.shift();tn(r).e_(),yield O_(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),yield iu(r)}})}(t,e)),k_(t)&&F_(t)})}function Uv(t,e){return d(this,null,function*(){let n=R(t);n.asyncQueue.verifyOperationInProgress(),I("RemoteStore","RemoteStore received new credentials");let r=Wn(n);n.M_.add(3),yield ks(n),r&&n.N_.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.M_.delete(3),yield ru(n)})}function db(t,e){return d(this,null,function*(){let n=R(t);e?(n.M_.delete(2),yield ru(n)):e||(n.M_.add(2),yield ks(n),n.N_.set("Unknown"))})}function Hr(t){return t.B_||(t.B_=function(n,r,i){let s=R(n);return s.m_(),new Yd(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{ho:nb.bind(null,t),Io:rb.bind(null,t),Eo:ib.bind(null,t),l_:sb.bind(null,t)}),t.x_.push(e=>d(this,null,function*(){e?(t.B_.e_(),Ff(t)?kf(t):t.N_.set("Unknown")):(yield t.B_.stop(),N_(t))}))),t.B_}function tn(t){return t.k_||(t.k_=function(n,r,i){let s=R(n);return s.m_(),new Jd(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{ho:()=>Promise.resolve(),Io:ub.bind(null,t),Eo:hb.bind(null,t),A_:cb.bind(null,t),d_:lb.bind(null,t)}),t.x_.push(e=>d(this,null,function*(){e?(t.k_.e_(),yield iu(t)):(yield t.k_.stop(),t.v_.length>0&&(I("RemoteStore",`Stopping write stream with ${t.v_.length} pending writes`),t.v_=[]))}))),t.k_}var tf=class t{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new ht,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){let o=Date.now()+r,a=new t(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new _(g.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function Mf(t,e){if(Pt("AsyncQueue",`${e}: ${t}`),Os(t))return new _(g.UNAVAILABLE,`${e}: ${t}`);throw t}var Va=class t{constructor(e){this.comparator=e?(n,r)=>e(n,r)||D.comparator(n.key,r.key):(n,r)=>D.comparator(n.key,r.key),this.keyedMap=ps(),this.sortedSet=new X(this.comparator)}static emptySet(e){return new t(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){let n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){let n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){let i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){let e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){let r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}};var Ua=class{constructor(){this.q_=new X(D.comparator)}track(e){let n=e.doc.key,r=this.q_.get(n);r?e.type!==0&&r.type===3?this.q_=this.q_.insert(n,e):e.type===3&&r.type!==1?this.q_=this.q_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.q_=this.q_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.q_=this.q_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.q_=this.q_.remove(n):e.type===1&&r.type===2?this.q_=this.q_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.q_=this.q_.insert(n,{type:2,doc:e.doc}):C():this.q_=this.q_.insert(n,e)}Q_(){let e=[];return this.q_.inorderTraversal((n,r)=>{e.push(r)}),e}},jr=class t{constructor(e,n,r,i,s,o,a,u,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,i,s){let o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new t(e,n,Va.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&eu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}};var nf=class{constructor(){this.K_=void 0,this.U_=[]}W_(){return this.U_.some(e=>e.G_())}},rf=class{constructor(){this.queries=new en(e=>o_(e),eu),this.onlineState="Unknown",this.z_=new Set}};function M_(t,e){return d(this,null,function*(){let n=R(t),r=3,i=e.query,s=n.queries.get(i);s?!s.W_()&&e.G_()&&(r=2):(s=new nf,r=e.G_()?0:1);try{switch(r){case 0:s.K_=yield n.onListen(i,!0);break;case 1:s.K_=yield n.onListen(i,!1);break;case 2:yield n.onFirstRemoteStoreListen(i)}}catch(o){let a=Mf(o,`Initialization of query '${Sr(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,s),s.U_.push(e),e.j_(n.onlineState),s.K_&&e.H_(s.K_)&&xf(n)})}function x_(t,e){return d(this,null,function*(){let n=R(t),r=e.query,i=3,s=n.queries.get(r);if(s){let o=s.U_.indexOf(e);o>=0&&(s.U_.splice(o,1),s.U_.length===0?i=e.G_()?0:1:!s.W_()&&e.G_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}})}function fb(t,e){let n=R(t),r=!1;for(let i of e){let s=i.query,o=n.queries.get(s);if(o){for(let a of o.U_)a.H_(i)&&(r=!0);o.K_=i}}r&&xf(n)}function pb(t,e,n){let r=R(t),i=r.queries.get(e);if(i)for(let s of i.U_)s.onError(n);r.queries.delete(e)}function xf(t){t.z_.forEach(e=>{e.next()})}var sf,Bv;(Bv=sf||(sf={})).J_="default",Bv.Cache="cache";var Ba=class{constructor(e,n,r){this.query=e,this.Y_=n,this.Z_=!1,this.X_=null,this.onlineState="Unknown",this.options=r||{}}H_(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new jr(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Z_?this.ea(e)&&(this.Y_.next(e),n=!0):this.ta(e,this.onlineState)&&(this.na(e),n=!0),this.X_=e,n}onError(e){this.Y_.error(e)}j_(e){this.onlineState=e;let n=!1;return this.X_&&!this.Z_&&this.ta(this.X_,e)&&(this.na(this.X_),n=!0),n}ta(e,n){if(!e.fromCache||!this.G_())return!0;let r=n!=="Offline";return(!this.options.ra||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ea(e){if(e.docChanges.length>0)return!0;let n=this.X_&&this.X_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}na(e){e=jr.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Z_=!0,this.Y_.next(e)}G_(){return this.options.source!==sf.Cache}};var $a=class{constructor(e){this.key=e}},ja=class{constructor(e){this.key=e}},of=class{constructor(e,n){this.query=e,this.la=n,this.ha=null,this.hasCachedResults=!1,this.current=!1,this.Pa=L(),this.mutatedKeys=L(),this.Ia=a_(e),this.Ta=new Va(this.Ia)}get Ea(){return this.la}da(e,n){let r=n?n.Aa:new Ua,i=n?n.Ta:this.Ta,s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1,u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,c=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((l,h)=>{let f=i.get(l),p=tu(this.query,h)?h:null,E=!!f&&this.mutatedKeys.has(f.key),T=!!p&&(p.hasLocalMutations||this.mutatedKeys.has(p.key)&&p.hasCommittedMutations),v=!1;f&&p?f.data.isEqual(p.data)?E!==T&&(r.track({type:3,doc:p}),v=!0):this.Ra(f,p)||(r.track({type:2,doc:p}),v=!0,(u&&this.Ia(p,u)>0||c&&this.Ia(p,c)<0)&&(a=!0)):!f&&p?(r.track({type:0,doc:p}),v=!0):f&&!p&&(r.track({type:1,doc:f}),v=!0,(u||c)&&(a=!0)),v&&(p?(o=o.add(p),s=T?s.add(l):s.delete(l)):(o=o.delete(l),s=s.delete(l)))}),this.query.limit!==null)for(;o.size>this.query.limit;){let l=this.query.limitType==="F"?o.last():o.first();o=o.delete(l.key),s=s.delete(l.key),r.track({type:1,doc:l})}return{Ta:o,Aa:r,Zi:a,mutatedKeys:s}}Ra(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){let s=this.Ta;this.Ta=e.Ta,this.mutatedKeys=e.mutatedKeys;let o=e.Aa.Q_();o.sort((l,h)=>function(p,E){let T=v=>{switch(v){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return C()}};return T(p)-T(E)}(l.type,h.type)||this.Ia(l.doc,h.doc)),this.Va(r),i=i!=null&&i;let a=n&&!i?this.ma():[],u=this.Pa.size===0&&this.current&&!i?1:0,c=u!==this.ha;return this.ha=u,o.length!==0||c?{snapshot:new jr(this.query,e.Ta,s,o,e.mutatedKeys,u===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),fa:a}:{fa:a}}j_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ta:this.Ta,Aa:new Ua,mutatedKeys:this.mutatedKeys,Zi:!1},!1)):{fa:[]}}ga(e){return!this.la.has(e)&&!!this.Ta.has(e)&&!this.Ta.get(e).hasLocalMutations}Va(e){e&&(e.addedDocuments.forEach(n=>this.la=this.la.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.la=this.la.delete(n)),this.current=e.current)}ma(){if(!this.current)return[];let e=this.Pa;this.Pa=L(),this.Ta.forEach(r=>{this.ga(r.key)&&(this.Pa=this.Pa.add(r.key))});let n=[];return e.forEach(r=>{this.Pa.has(r)||n.push(new ja(r))}),this.Pa.forEach(r=>{e.has(r)||n.push(new $a(r))}),n}pa(e){this.la=e.ls,this.Pa=L();let n=this.da(e.documents);return this.applyChanges(n,!0)}ya(){return jr.fromInitialDocuments(this.query,this.Ta,this.mutatedKeys,this.ha===0,this.hasCachedResults)}},af=class{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}},uf=class{constructor(e){this.key=e,this.wa=!1}},cf=class{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Sa={},this.ba=new en(a=>o_(a),eu),this.Da=new Map,this.Ca=new Set,this.va=new X(D.comparator),this.Fa=new Map,this.Ma=new As,this.xa={},this.Oa=new Map,this.Na=Ds.Nn(),this.onlineState="Unknown",this.La=void 0}get isPrimaryClient(){return this.La===!0}};function gb(t,e,n=!0){return d(this,null,function*(){let r=j_(t),i,s=r.ba.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.ya()):i=yield L_(r,e,n,!0),i})}function mb(t,e){return d(this,null,function*(){let n=j_(t);yield L_(n,e,!0,!1)})}function L_(t,e,n,r){return d(this,null,function*(){let i=yield ZC(t.localStore,ft(e)),s=i.targetId,o=n?t.sharedClientState.addLocalQueryTarget(s):"not-current",a;return r&&(a=yield yb(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&R_(t.remoteStore,i),a})}function yb(t,e,n,r,i){return d(this,null,function*(){t.Ba=(h,f,p)=>function(T,v,k,q){return d(this,null,function*(){let Z=v.view.da(k);Z.Zi&&(Z=yield Vv(T.localStore,v.query,!1).then(({documents:yt})=>v.view.da(yt,Z)));let ye=q&&q.targetChanges.get(v.targetId),et=q&&q.targetMismatches.get(v.targetId)!=null,ue=v.view.applyChanges(Z,T.isPrimaryClient,ye,et);return jv(T,v.targetId,ue.fa),ue.snapshot})}(t,h,f,p);let s=yield Vv(t.localStore,e,!0),o=new of(e,s.ls),a=o.da(s.documents),u=Es.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),c=o.applyChanges(a,t.isPrimaryClient,u);jv(t,n,c.fa);let l=new af(e,n,o);return t.ba.set(e,l),t.Da.has(n)?t.Da.get(n).push(e):t.Da.set(n,[e]),c.snapshot})}function vb(t,e,n){return d(this,null,function*(){let r=R(t),i=r.ba.get(e),s=r.Da.get(i.targetId);if(s.length>1)return r.Da.set(i.targetId,s.filter(o=>!eu(o,e))),void r.ba.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield Gd(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&Nf(r.remoteStore,i.targetId),lf(r,i.targetId)}).catch(Ns))):(lf(r,i.targetId),yield Gd(r.localStore,i.targetId,!0))})}function _b(t,e){return d(this,null,function*(){let n=R(t),r=n.ba.get(e),i=n.Da.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Nf(n.remoteStore,r.targetId))})}function wb(t,e,n){return d(this,null,function*(){let r=Cb(t);try{let i=yield function(o,a){let u=R(o),c=me.now(),l=a.reduce((p,E)=>p.add(E.key),L()),h,f;return u.persistence.runTransaction("Locally write mutations","readwrite",p=>{let E=Ot(),T=L();return u.ss.getEntries(p,l).next(v=>{E=v,E.forEach((k,q)=>{q.isValidDocument()||(T=T.add(k))})}).next(()=>u.localDocuments.getOverlayedDocuments(p,E)).next(v=>{h=v;let k=[];for(let q of a){let Z=CC(q,h.get(q.key).overlayedDocument);Z!=null&&k.push(new mt(q.key,Z,Zv(Z.value.mapValue),Jt.exists(!0)))}return u.mutationQueue.addMutationBatch(p,c,k,a)}).next(v=>{f=v;let k=v.applyToLocalDocumentSet(h,T);return u.documentOverlayCache.saveOverlays(p,v.batchId,k)})}).then(()=>({batchId:f.batchId,changes:c_(h)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,u){let c=o.xa[o.currentUser.toKey()];c||(c=new X(U)),c=c.insert(a,u),o.xa[o.currentUser.toKey()]=c}(r,i.batchId,n),yield Fs(r,i.changes),yield iu(r.remoteStore)}catch(i){let s=Mf(i,"Failed to persist write");n.reject(s)}})}function V_(t,e){return d(this,null,function*(){let n=R(t);try{let r=yield YC(n.localStore,e);e.targetChanges.forEach((i,s)=>{let o=n.Fa.get(s);o&&(z(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.wa=!0:i.modifiedDocuments.size>0?z(o.wa):i.removedDocuments.size>0&&(z(o.wa),o.wa=!1))}),yield Fs(n,r,e)}catch(r){yield Ns(r)}})}function $v(t,e,n){let r=R(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){let i=[];r.ba.forEach((s,o)=>{let a=o.view.j_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){let u=R(o);u.onlineState=a;let c=!1;u.queries.forEach((l,h)=>{for(let f of h.U_)f.j_(a)&&(c=!0)}),c&&xf(u)}(r.eventManager,e),i.length&&r.Sa.l_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function Ib(t,e,n){return d(this,null,function*(){let r=R(t);r.sharedClientState.updateQueryState(e,"rejected",n);let i=r.Fa.get(e),s=i&&i.key;if(s){let o=new X(D.comparator);o=o.insert(s,Xe.newNoDocument(s,P.min()));let a=L().add(s),u=new Ca(P.min(),new Map,new X(U),o,a);yield V_(r,u),r.va=r.va.remove(s),r.Fa.delete(e),Lf(r)}else yield Gd(r.localStore,e,!1).then(()=>lf(r,e,n)).catch(Ns)})}function Eb(t,e){return d(this,null,function*(){let n=R(t),r=e.batch.batchId;try{let i=yield QC(n.localStore,e);B_(n,r,null),U_(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),yield Fs(n,i)}catch(i){yield Ns(i)}})}function Tb(t,e,n){return d(this,null,function*(){let r=R(t);try{let i=yield function(o,a){let u=R(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let l;return u.mutationQueue.lookupMutationBatch(c,a).next(h=>(z(h!==null),l=h.keys(),u.mutationQueue.removeMutationBatch(c,h))).next(()=>u.mutationQueue.performConsistencyCheck(c)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(c,l,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,l)).next(()=>u.localDocuments.getDocuments(c,l))})}(r.localStore,e);B_(r,e,n),U_(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),yield Fs(r,i)}catch(i){yield Ns(i)}})}function U_(t,e){(t.Oa.get(e)||[]).forEach(n=>{n.resolve()}),t.Oa.delete(e)}function B_(t,e,n){let r=R(t),i=r.xa[r.currentUser.toKey()];if(i){let s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.xa[r.currentUser.toKey()]=i}}function lf(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(let r of t.Da.get(e))t.ba.delete(r),n&&t.Sa.ka(r,n);t.Da.delete(e),t.isPrimaryClient&&t.Ma.Rr(e).forEach(r=>{t.Ma.containsKey(r)||$_(t,r)})}function $_(t,e){t.Ca.delete(e.path.canonicalString());let n=t.va.get(e);n!==null&&(Nf(t.remoteStore,n),t.va=t.va.remove(e),t.Fa.delete(n),Lf(t))}function jv(t,e,n){for(let r of n)r instanceof $a?(t.Ma.addReference(r.key,e),Db(t,r)):r instanceof ja?(I("SyncEngine","Document no longer in limbo: "+r.key),t.Ma.removeReference(r.key,e),t.Ma.containsKey(r.key)||$_(t,r.key)):C()}function Db(t,e){let n=e.key,r=n.path.canonicalString();t.va.get(n)||t.Ca.has(r)||(I("SyncEngine","New document in limbo: "+n),t.Ca.add(r),Lf(t))}function Lf(t){for(;t.Ca.size>0&&t.va.size<t.maxConcurrentLimboResolutions;){let e=t.Ca.values().next().value;t.Ca.delete(e);let n=new D(K.fromString(e)),r=t.Na.next();t.Fa.set(r,new uf(n)),t.va=t.va.insert(n,r),R_(t.remoteStore,new Ts(ft(Rf(n.path)),r,"TargetPurposeLimboResolution",Yv.oe))}}function Fs(t,e,n){return d(this,null,function*(){let r=R(t),i=[],s=[],o=[];r.ba.isEmpty()||(r.ba.forEach((a,u)=>{o.push(r.Ba(u,e,n).then(c=>{if((c||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(u.targetId,c?.fromCache?"not-current":"current"),c){i.push(c);let l=$d.Qi(u.targetId,c);s.push(l)}}))}),yield Promise.all(o),r.Sa.l_(i),yield function(u,c){return d(this,null,function*(){let l=R(u);try{yield l.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>m.forEach(c,f=>m.forEach(f.ki,p=>l.persistence.referenceDelegate.addReference(h,f.targetId,p)).next(()=>m.forEach(f.qi,p=>l.persistence.referenceDelegate.removeReference(h,f.targetId,p)))))}catch(h){if(!Os(h))throw h;I("LocalStore","Failed to update sequence numbers: "+h)}for(let h of c){let f=h.targetId;if(!h.fromCache){let p=l.ts.get(f),E=p.snapshotVersion,T=p.withLastLimboFreeSnapshotVersion(E);l.ts=l.ts.insert(f,T)}}})}(r.localStore,s))})}function Ab(t,e){return d(this,null,function*(){let n=R(t);if(!n.currentUser.isEqual(e)){I("SyncEngine","User change. New user:",e.toKey());let r=yield C_(n.localStore,e);n.currentUser=e,function(s,o){s.Oa.forEach(a=>{a.forEach(u=>{u.reject(new _(g.CANCELLED,o))})}),s.Oa.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Fs(n,r._s)}})}function Sb(t,e){let n=R(t),r=n.Fa.get(e);if(r&&r.wa)return L().add(r.key);{let i=L(),s=n.Da.get(e);if(!s)return i;for(let o of s){let a=n.ba.get(o);i=i.unionWith(a.view.Ea)}return i}}function j_(t){let e=R(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=V_.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Sb.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Ib.bind(null,e),e.Sa.l_=fb.bind(null,e.eventManager),e.Sa.ka=pb.bind(null,e.eventManager),e}function Cb(t){let e=R(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Eb.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Tb.bind(null,e),e}var qa=class{constructor(){this.synchronizeTabs=!1}initialize(e){return d(this,null,function*(){this.serializer=nu(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),yield this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)})}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return KC(this.persistence,new qd,e.initialUser,this.serializer)}createPersistence(e){return new Vd(Bd.jr,this.serializer)}createSharedClientState(e){return new Hd}terminate(){return d(this,null,function*(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}};var hf=class{initialize(e,n){return d(this,null,function*(){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>$v(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=Ab.bind(null,this.syncEngine),yield db(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(e){return function(){return new rf}()}createDatastore(e){let n=nu(e.databaseInfo.databaseId),r=function(s){return new Qd(s)}(e.databaseInfo);return function(s,o,a,u){return new Xd(s,o,a,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,a){return new ef(r,i,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>$v(this.syncEngine,n,0),function(){return Fa.D()?new Fa:new Wd}())}createSyncEngine(e,n){return function(i,s,o,a,u,c,l){let h=new cf(i,s,o,a,u,c);return l&&(h.La=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return d(this,null,function*(){var e;yield function(r){return d(this,null,function*(){let i=R(r);I("RemoteStore","RemoteStore shutting down."),i.M_.add(5),yield ks(i),i.O_.shutdown(),i.N_.set("Unknown")})}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate()})}};var za=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ka(this.observer.next,e)}error(e){this.observer.error?this.Ka(this.observer.error,e):Pt("Uncaught Error in snapshot listener:",e.toString())}$a(){this.muted=!0}Ka(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}};var df=class{constructor(e,n,r,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=de.UNAUTHENTICATED,this.clientId=wa.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,s=>d(this,null,function*(){I("FirestoreClient","Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,s=>(I("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new _(g.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();let e=new ht;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>d(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){let r=Mf(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function jh(t,e){return d(this,null,function*(){t.asyncQueue.verifyOperationInProgress(),I("FirestoreClient","Initializing OfflineComponentProvider");let n=t.configuration;yield e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(i=>d(this,null,function*(){r.isEqual(i)||(yield C_(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e})}function qv(t,e){return d(this,null,function*(){t.asyncQueue.verifyOperationInProgress();let n=yield Rb(t);I("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>Uv(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>Uv(e.remoteStore,i)),t._onlineComponents=e})}function bb(t){return t.name==="FirebaseError"?t.code===g.FAILED_PRECONDITION||t.code===g.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}function Rb(t){return d(this,null,function*(){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){I("FirestoreClient","Using user provided OfflineComponentProvider");try{yield jh(t,t._uninitializedComponentsProvider._offline)}catch(e){let n=e;if(!bb(n))throw n;Or("Error using user provided cache. Falling back to memory cache: "+n),yield jh(t,new qa)}}else I("FirestoreClient","Using default OfflineComponentProvider"),yield jh(t,new qa);return t._offlineComponents})}function q_(t){return d(this,null,function*(){return t._onlineComponents||(t._uninitializedComponentsProvider?(I("FirestoreClient","Using user provided OnlineComponentProvider"),yield qv(t,t._uninitializedComponentsProvider._online)):(I("FirestoreClient","Using default OnlineComponentProvider"),yield qv(t,new hf))),t._onlineComponents})}function Pb(t){return q_(t).then(e=>e.syncEngine)}function ff(t){return d(this,null,function*(){let e=yield q_(t),n=e.eventManager;return n.onListen=gb.bind(null,e.syncEngine),n.onUnlisten=vb.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=mb.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=_b.bind(null,e.syncEngine),n})}function Nb(t,e,n={}){let r=new ht;return t.asyncQueue.enqueueAndForget(()=>d(this,null,function*(){return function(s,o,a,u,c){let l=new za({next:f=>{o.enqueueAndForget(()=>x_(s,h)),f.fromCache&&u.source==="server"?c.reject(new _(g.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(f)},error:f=>c.reject(f)}),h=new Ba(a,l,{includeMetadataChanges:!0,ra:!0});return M_(s,h)}(yield ff(t),t.asyncQueue,e,n,r)})),r.promise}function z_(t){let e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}var zv=new Map;function G_(t,e,n){if(!n)throw new _(g.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function Ob(t,e,n,r){if(e===!0&&r===!0)throw new _(g.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Gv(t){if(!D.isDocumentKey(t))throw new _(g.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Hv(t){if(D.isDocumentKey(t))throw new _(g.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function su(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":C()}function Rt(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new _(g.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let n=su(t);throw new _(g.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}var Ga=class{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new _(g.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new _(g.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Ob("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=z_((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new _(g.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new _(g.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new _(g.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},qr=class{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Ga({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new _(g.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new _(g.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Ga(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new qh;switch(r.type){case"firstParty":return new Wh(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new _(g.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){let r=zv.get(n);r&&(I("ComponentProvider","Removing Datastore"),zv.delete(n),r.terminate())}(this),Promise.resolve()}};function H_(t,e,n,r={}){var i;let s=(t=Rt(t,qr))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&Or("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,u;if(typeof r.mockUserToken=="string")a=r.mockUserToken,u=de.MOCK_USER;else{a=kg(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);let c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new _(g.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new de(c)}t._authCredentials=new zh(new _a(a,u))}}var Gn=class t{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new t(this.firestore,e,this._query)}},Pe=class t{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Xt(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new t(this.firestore,e,this._key)}},Xt=class t extends Gn{constructor(e,n,r){super(e,n,Rf(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Pe(this.firestore,null,new D(e))}withConverter(e){return new t(this.firestore,e,this._path)}};function W_(t,e,...n){if(t=te(t),G_("collection","path",e),t instanceof qr){let r=K.fromString(e,...n);return Hv(r),new Xt(t,null,r)}{if(!(t instanceof Pe||t instanceof Xt))throw new _(g.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(K.fromString(e,...n));return Hv(r),new Xt(t.firestore,null,r)}}function K_(t,e,...n){if(t=te(t),arguments.length===1&&(e=wa.newId()),G_("doc","path",e),t instanceof qr){let r=K.fromString(e,...n);return Gv(r),new Pe(t,null,new D(r))}{if(!(t instanceof Pe||t instanceof Xt))throw new _(g.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(K.fromString(e,...n));return Gv(r),new Pe(t.firestore,t instanceof Xt?t.converter:null,new D(r))}}var pf=class{constructor(){this.iu=Promise.resolve(),this.su=[],this.ou=!1,this._u=[],this.au=null,this.uu=!1,this.cu=!1,this.lu=[],this.Jo=new Ma(this,"async_queue_retry"),this.hu=()=>{let n=$h();n&&I("AsyncQueue","Visibility state changed to "+n.visibilityState),this.Jo.Uo()};let e=$h();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.hu)}get isShuttingDown(){return this.ou}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Pu(),this.Iu(e)}enterRestrictedMode(e){if(!this.ou){this.ou=!0,this.cu=e||!1;let n=$h();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.hu)}}enqueue(e){if(this.Pu(),this.ou)return new Promise(()=>{});let n=new ht;return this.Iu(()=>this.ou&&this.cu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.su.push(e),this.Tu()))}Tu(){return d(this,null,function*(){if(this.su.length!==0){try{yield this.su[0](),this.su.shift(),this.Jo.reset()}catch(e){if(!Os(e))throw e;I("AsyncQueue","Operation failed with retryable error: "+e)}this.su.length>0&&this.Jo.Ko(()=>this.Tu())}})}Iu(e){let n=this.iu.then(()=>(this.uu=!0,e().catch(r=>{this.au=r,this.uu=!1;let i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw Pt("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.uu=!1,r))));return this.iu=n,n}enqueueAfterDelay(e,n,r){this.Pu(),this.lu.indexOf(e)>-1&&(n=0);let i=tf.createAndSchedule(this,e,n,r,s=>this.Eu(s));return this._u.push(i),i}Pu(){this.au&&C()}verifyOperationInProgress(){}du(){return d(this,null,function*(){let e;do e=this.iu,yield e;while(e!==this.iu)})}Au(e){for(let n of this._u)if(n.timerId===e)return!0;return!1}Ru(e){return this.du().then(()=>{this._u.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(let n of this._u)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.du()})}Vu(e){this.lu.push(e)}Eu(e){let n=this._u.indexOf(e);this._u.splice(n,1)}};function Wv(t){return function(n,r){if(typeof n!="object"||n===null)return!1;let i=n;for(let s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(t,["next","error","complete"])}var nn=class extends qr{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=function(){return new pf}(),this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||Y_(this),this._firestoreClient.terminate()}};function Q_(t,e){let n=typeof t=="object"?t:pr(),r=typeof t=="string"?t:e||"(default)",i=Oi(n,"firestore").getImmediate({identifier:r});if(!i._initialized){let s=Og("firestore");s&&H_(i,...s)}return i}function Vf(t){return t._firestoreClient||Y_(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function Y_(t){var e,n,r;let i=t._freezeSettings(),s=function(a,u,c,l){return new Xh(a,u,c,l.host,l.ssl,l.experimentalForceLongPolling,l.experimentalAutoDetectLongPolling,z_(l.experimentalLongPollingOptions),l.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._firestoreClient=new df(t._authCredentials,t._appCheckCredentials,t._queue,s),!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}var Ss=class t{constructor(e){this._byteString=e}static fromBase64String(e){try{return new t(be.fromBase64String(e))}catch(n){throw new _(g.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new t(be.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var zr=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new _(g.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ve(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Cs=class{constructor(e){this._methodName=e}};var bs=class{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new _(g.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new _(g.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return U(this._lat,e._lat)||U(this._long,e._long)}};var kb=/^__.*__$/,gf=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new mt(e,this.data,this.fieldMask,n,this.fieldTransforms):new zn(e,this.data,n,this.fieldTransforms)}},Ha=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new mt(e,this.data,this.fieldMask,n,this.fieldTransforms)}};function J_(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw C()}}var mf=class t{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.mu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get fu(){return this.settings.fu}gu(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}pu(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.gu({path:r,yu:!1});return i.wu(e),i}Su(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.gu({path:r,yu:!1});return i.mu(),i}bu(e){return this.gu({path:void 0,yu:!0})}Du(e){return Ka(e,this.settings.methodName,this.settings.Cu||!1,this.path,this.settings.vu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}mu(){if(this.path)for(let e=0;e<this.path.length;e++)this.wu(this.path.get(e))}wu(e){if(e.length===0)throw this.Du("Document fields must not be empty");if(J_(this.fu)&&kb.test(e))throw this.Du('Document fields cannot begin and end with "__"')}},yf=class{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||nu(e)}Fu(e,n,r,i=!1){return new mf({fu:e,methodName:n,vu:r,path:Ve.emptyPath(),yu:!1,Cu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function Uf(t){let e=t._freezeSettings(),n=nu(t._databaseId);return new yf(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Fb(t,e,n,r,i,s={}){let o=t.Fu(s.merge||s.mergeFields?2:0,e,n,i);Bf("Data must be an object, but it was:",o,r);let a=X_(r,o),u,c;if(s.merge)u=new Ge(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){let l=[];for(let h of s.mergeFields){let f=vf(e,h,n);if(!o.contains(f))throw new _(g.INVALID_ARGUMENT,`Field '${f}' is specified in your field mask but missing from your input data.`);ew(l,f)||l.push(f)}u=new Ge(l),c=o.fieldTransforms.filter(h=>u.covers(h.field))}else u=null,c=o.fieldTransforms;return new gf(new Le(a),u,c)}var Wa=class t extends Cs{_toFieldTransform(e){if(e.fu!==2)throw e.fu===1?e.Du(`${this._methodName}() can only appear at the top level of your update data`):e.Du(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof t}};function Mb(t,e,n,r){let i=t.Fu(1,e,n);Bf("Data must be an object, but it was:",i,r);let s=[],o=Le.empty();Hn(r,(u,c)=>{let l=$f(e,u,n);c=te(c);let h=i.Su(l);if(c instanceof Wa)s.push(l);else{let f=Ms(c,h);f!=null&&(s.push(l),o.set(l,f))}});let a=new Ge(s);return new Ha(o,a,i.fieldTransforms)}function xb(t,e,n,r,i,s){let o=t.Fu(1,e,n),a=[vf(e,r,n)],u=[i];if(s.length%2!=0)throw new _(g.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let f=0;f<s.length;f+=2)a.push(vf(e,s[f])),u.push(s[f+1]);let c=[],l=Le.empty();for(let f=a.length-1;f>=0;--f)if(!ew(c,a[f])){let p=a[f],E=u[f];E=te(E);let T=o.Su(p);if(E instanceof Wa)c.push(p);else{let v=Ms(E,T);v!=null&&(c.push(p),l.set(p,v))}}let h=new Ge(c);return new Ha(l,h,o.fieldTransforms)}function Lb(t,e,n,r=!1){return Ms(n,t.Fu(r?4:3,e))}function Ms(t,e){if(Z_(t=te(t)))return Bf("Unsupported field value:",e,t),X_(t,e);if(t instanceof Cs)return function(r,i){if(!J_(i.fu))throw i.Du(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Du(`${r._methodName}() is not currently supported inside arrays`);let s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.yu&&e.fu!==4)throw e.Du("Nested arrays are not supported");return function(r,i){let s=[],o=0;for(let a of r){let u=Ms(a,i.bu(o));u==null&&(u={nullValue:"NULL_VALUE"}),s.push(u),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=te(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return EC(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let s=me.fromDate(r);return{timestampValue:Na(i.serializer,s)}}if(r instanceof me){let s=new me(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Na(i.serializer,s)}}if(r instanceof bs)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Ss)return{bytesValue:w_(i.serializer,r._byteString)};if(r instanceof Pe){let s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Du(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:Pf(r.firestore._databaseId||i.databaseId,r._key.path)}}throw i.Du(`Unsupported field value: ${su(r)}`)}(t,e)}function X_(t,e){let n={};return Jv(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Hn(t,(r,i)=>{let s=Ms(i,e.pu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function Z_(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof me||t instanceof bs||t instanceof Ss||t instanceof Pe||t instanceof Cs)}function Bf(t,e,n){if(!Z_(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){let r=su(n);throw r==="an object"?e.Du(t+" a custom object"):e.Du(t+" "+r)}}function vf(t,e,n){if((e=te(e))instanceof zr)return e._internalPath;if(typeof e=="string")return $f(t,e);throw Ka("Field path arguments must be of type string or ",t,!1,void 0,n)}var Vb=new RegExp("[~\\*/\\[\\]]");function $f(t,e,n){if(e.search(Vb)>=0)throw Ka(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new zr(...e.split("."))._internalPath}catch{throw Ka(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Ka(t,e,n,r,i){let s=r&&!r.isEmpty(),o=i!==void 0,a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new _(g.INVALID_ARGUMENT,a+t+u)}function ew(t,e){return t.some(n=>n.isEqual(e))}var Qa=class{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Pe(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new _f(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let n=this._document.data.field(jf("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}},_f=class extends Qa{data(){return super.data()}};function jf(t,e){return typeof e=="string"?$f(t,e):e instanceof zr?e._internalPath:e._delegate._internalPath}function tw(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new _(g.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Rs=class{},wf=class extends Rs{};function nw(t,e,...n){let r=[];e instanceof Rs&&r.push(e),r=r.concat(n),function(s){let o=s.filter(u=>u instanceof If).length,a=s.filter(u=>u instanceof Ya).length;if(o>1||o>0&&a>0)throw new _(g.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let i of r)t=i._apply(t);return t}var Ya=class t extends wf{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new t(e,n,r)}_apply(e){let n=this._parse(e);return iw(e._query,n),new Gn(e.firestore,e.converter,hd(e._query,n))}_parse(e){let n=Uf(e.firestore);return function(s,o,a,u,c,l,h){let f;if(c.isKeyField()){if(l==="array-contains"||l==="array-contains-any")throw new _(g.INVALID_ARGUMENT,`Invalid Query. You can't perform '${l}' queries on documentId().`);if(l==="in"||l==="not-in"){Qv(h,l);let p=[];for(let E of h)p.push(Kv(u,s,E));f={arrayValue:{values:p}}}else f=Kv(u,s,h)}else l!=="in"&&l!=="not-in"&&l!=="array-contains-any"||Qv(h,l),f=Lb(a,o,h,l==="in"||l==="not-in");return ie.create(c,l,f)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}};function rw(t,e,n){let r=e,i=jf("where",t);return Ya._create(i,r,n)}var If=class t extends Rs{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new t(e,n)}_parse(e){let n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Ze.create(n,this._getOperator())}_apply(e){let n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let o=i,a=s.getFlattenedFilters();for(let u of a)iw(o,u),o=hd(o,u)}(e._query,n),new Gn(e.firestore,e.converter,hd(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};function Kv(t,e,n){if(typeof(n=te(n))=="string"){if(n==="")throw new _(g.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!s_(e)&&n.indexOf("/")!==-1)throw new _(g.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);let r=e.path.child(K.fromString(n));if(!D.isDocumentKey(r))throw new _(g.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Iv(t,new D(r))}if(n instanceof Pe)return Iv(t,n._key);throw new _(g.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${su(n)}.`)}function Qv(t,e){if(!Array.isArray(t)||t.length===0)throw new _(g.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function iw(t,e){let n=function(i,s){for(let o of i)for(let a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new _(g.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new _(g.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}var Ef=class{convertValue(e,n="none"){switch(Bn(e)){case 0:return null;case 1:return e.booleanValue;case 2:return J(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Zt(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw C()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){let r={};return Hn(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertGeoPoint(e){return new bs(J(e.latitude),J(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":let r=Af(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(ws(e));default:return null}}convertTimestamp(e){let n=Nt(e);return new me(n.seconds,n.nanos)}convertDocumentKey(e,n){let r=K.fromString(e);z(S_(r));let i=new Da(r.get(1),r.get(3)),s=new D(r.popFirst(5));return i.isEqual(n)||Pt(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}};function Ub(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}var Ln=class{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},Ja=class extends Qa{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let n=new Nr(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){let r=this._document.data.field(jf("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}},Nr=class extends Ja{data(e={}){return super.data(e)}},Xa=class{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Ln(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Nr(this._firestore,this._userDataWriter,r.key,r,new Ln(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new _(g.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{let u=new Nr(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Ln(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{let u=new Nr(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Ln(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),c=-1,l=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),l=o.indexOf(a.doc.key)),{type:Bb(a.type),doc:u,oldIndex:c,newIndex:l}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}};function Bb(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return C()}}var Ps=class extends Ef{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ss(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new Pe(this.firestore,null,n)}};function sw(t){t=Rt(t,Gn);let e=Rt(t.firestore,nn),n=Vf(e),r=new Ps(e);return tw(t._query),Nb(n,t._query).then(i=>new Xa(e,r,t,i))}function ow(t,e,n,...r){t=Rt(t,Pe);let i=Rt(t.firestore,nn),s=Uf(i),o;return o=typeof(e=te(e))=="string"||e instanceof zr?xb(s,"updateDoc",t._key,e,n,r):Mb(s,"updateDoc",t._key,e),uw(i,[o.toMutation(t._key,Jt.exists(!0))])}function aw(t,e){let n=Rt(t.firestore,nn),r=K_(t),i=Ub(t.converter,e);return uw(n,[Fb(Uf(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,Jt.exists(!1))]).then(()=>r)}function qf(t,...e){var n,r,i;t=te(t);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||Wv(e[o])||(s=e[o],o++);let a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(Wv(e[o])){let h=e[o];e[o]=(n=h.next)===null||n===void 0?void 0:n.bind(h),e[o+1]=(r=h.error)===null||r===void 0?void 0:r.bind(h),e[o+2]=(i=h.complete)===null||i===void 0?void 0:i.bind(h)}let u,c,l;if(t instanceof Pe)c=Rt(t.firestore,nn),l=Rf(t._key.path),u={next:h=>{e[o]&&e[o]($b(c,t,h))},error:e[o+1],complete:e[o+2]};else{let h=Rt(t,Gn);c=Rt(h.firestore,nn),l=h._query;let f=new Ps(c);u={next:p=>{e[o]&&e[o](new Xa(c,f,h,p))},error:e[o+1],complete:e[o+2]},tw(t._query)}return function(f,p,E,T){let v=new za(T),k=new Ba(p,v,E);return f.asyncQueue.enqueueAndForget(()=>d(this,null,function*(){return M_(yield ff(f),k)})),()=>{v.$a(),f.asyncQueue.enqueueAndForget(()=>d(this,null,function*(){return x_(yield ff(f),k)}))}}(Vf(c),l,a,u)}function uw(t,e){return function(r,i){let s=new ht;return r.asyncQueue.enqueueAndForget(()=>d(this,null,function*(){return wb(yield Pb(r),i,s)})),s.promise}(Vf(t),e)}function $b(t,e,n){let r=n.docs.get(e._key),i=new Ps(t);return new Ja(t,i,e._key,r,new Ln(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(i){Gr=i})(zt),qt(new qe("firestore",(r,{instanceIdentifier:i,options:s})=>{let o=r.getProvider("app").getImmediate(),a=new nn(new Gh(r.getProvider("auth-internal")),new Qh(r.getProvider("app-check-internal")),function(c,l){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new _(g.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Da(c.options.projectId,l)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),ae(vv,"4.6.1",e),ae(vv,"4.6.1","esm2017")})();var ou=function(){return ou=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},ou.apply(this,arguments)};var zb={includeMetadataChanges:!1};function cw(t,e){return e===void 0&&(e=zb),new Kr(function(n){var r=qf(t,e,{next:n.next.bind(n),error:n.error.bind(n),complete:n.complete.bind(n)});return{unsubscribe:r}})}function lw(t,e){var n;e===void 0&&(e={});var r=t.data(e);return!t.exists()||typeof r!="object"||r===null||!e.idField?r:ou(ou({},r),(n={},n[e.idField]=t.id,n))}function hw(t){return cw(t,{includeMetadataChanges:!0}).pipe(j(function(e){return e.docs}))}function dw(t,e){return e===void 0&&(e={}),hw(t).pipe(j(function(n){return n.map(function(r){return lw(r,e)})}))}var xs=class{constructor(e){return e}},fw="firestore",zf=class{constructor(){return ki(fw)}};var Gf=new W("angularfire2.firestore-instances");function Gb(t,e){let n=_o(fw,t,e);return n&&new xs(n)}function Hb(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new xs(r)}}var Wb={provide:zf,deps:[[new Re,Gf]]},Kb={provide:xs,useFactory:Gb,deps:[[new Re,Gf],Tt]},Qb=(()=>{class t{constructor(){ae("angularfire",Dn.full,"fst")}static \u0275fac=function(r){return new(r||t)};static \u0275mod=We({type:t});static \u0275inj=He({providers:[Kb,Wb]})}return t})();function yk(t,...e){return{ngModule:Qb,providers:[{provide:Gf,useFactory:Hb(t),multi:!0,deps:[ee,Ne,yr,An,[new Re,qi],[new Re,mr],...e]}]}}var vk=Ie(dw,!0);var _k=Ie(aw,!0);var wk=Ie(W_,!0);var Ik=Ie(sw,!0);var Ek=Ie(Q_,!0);var Tk=Ie(nw,!0);var Dk=Ie(ow,!0);var Ak=Ie(rw,!0);export{tr as a,we as b,ww as c,Fp as d,zR as e,zu as f,yI as g,Nc as h,IP as i,EP as j,bN as k,RN as l,ji as m,E1 as n,T1 as o,D1 as p,A1 as q,S1 as r,xs as s,yk as t,vk as u,_k as v,wk as w,Ik as x,Ek as y,Tk as z,Dk as A,Ak as B,_n as C,AP as D,SP as E,lo as F,Eg as G,Tg as H,CP as I,bg as J,BP as K};
