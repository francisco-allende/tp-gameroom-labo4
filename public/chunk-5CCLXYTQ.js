import{J as g,h as a,m as l,o as n,q as c,r as h,s as u,v as d,w as m}from"./chunk-YX3NCP3F.js";import{V as s,_ as r}from"./chunk-MZUU66T2.js";var I=(()=>{let i=class i{constructor(t,e,f,p){this.firestore=t,this.auth=e,this.toast=f,this.router=p,this.loggedUser="",this.setLoggedUser=U=>this.loggedUser=U,this.getLoggedUser=()=>this.loggedUser}addToLogger(t){try{let e=m(this.firestore,"logs");d(e,{userEmail:t,fecha:new Date})}catch(e){console.error("Error en el add a los logs:",e)}}logIn(t){c(this.auth,t.email,t.password).then(e=>{e.user.email!=null&&(this.setLoggedUser(e.user.email),this.toast.success(`Nos alegra verte de nuevo ${e.user.email}`),this.router.navigateByUrl("/home"))}).catch(e=>{switch(e.code){case"auth/invalid-credential":this.toast.error("Usuario inexistente");break;default:this.toast.error("Sucedi\xF3 un error al intentar loguearse");break}console.log(`error en el login: ${e.code}`)})}logOut(){h(this.auth).then(()=>{this.setLoggedUser(""),console.log(this.auth.currentUser?.email)})}register(t){n(this.auth,t.email,t.password).then(e=>{e.user.email!=null&&(this.setLoggedUser(e.user.email),this.toast.success("Usuario creado con \xE9xito",`Bienvenido ${e.user.email}!`),this.router.navigateByUrl("/home"))}).catch(e=>{switch(e.code){case"auth/invalid-email":this.toast.error("Email invalido");break;case"auth/email-already-in-use":this.toast.error("Email ya en uso");break;default:this.toast.error("Sucedi\xF3 un error inesperado"),console.log(e);break}})}};i.\u0275fac=function(e){return new(e||i)(r(u),r(l),r(g),r(a))},i.\u0275prov=s({token:i,factory:i.\u0275fac,providedIn:"root"});let o=i;return o})();export{I as a};
